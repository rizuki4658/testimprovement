import{k as e,f as t,g as o,aG as l,y as n,W as a,m as r,$ as s,A as c,o as u,t as d,K as i,U as y,q as C,F as p,B as f,a1 as v,I as m,D as g,a2 as h,L as b,s as w}from"./vendor.9695fe57.js";import{a as _}from"./setting.70ebc1f0.js";import{f as K,_ as k,r as S}from"./index.73ae30fa.js";const x=e({name:"SelectCountry",components:{Input:K},props:{selected:{type:String,default:null},label:{type:String,default:""},disabled:{type:Boolean,default:!1},filterCountry:{type:Function,default:()=>!0},countries:{type:Array,default:()=>null},countryCodeKey:{type:String,default:"country_code"},countryNameKey:{type:String,default:"nicename"},isoKey:{type:String,default:"iso3"},phoneCodeKey:{type:String,default:"phone_code"},placeholder:{type:String,default:"Please select a country"},staticPosition:{type:Boolean,default:!1},placement:{type:String,default:"bottom"},initLoad:{type:Boolean,default:!0},rounded:{type:Boolean,default:!1},phone:{type:Boolean,default:!1},noBorder:{type:Boolean,default:!1}},emits:["change","select"],setup(e,{emit:r}){const{state:s,loading:c,action:u}=_(),d=t(null),i=t(""),y=t(!1),C=t(null),p=t(null),f=o((()=>!!e.countries)),v=o((()=>f.value?!!e.countries:!!s.value.length)),m=o((()=>{var t,o;let l=[];return l=f.value?(null==(t=e.countries)?void 0:t.length)?[...e.countries]:[]:(null==(o=s.value)?void 0:o.length)?[...s.value]:[],l.filter((t=>!i.value||(t[e.countryNameKey||"nicename"].toLowerCase().indexOf(i.value)>-1||t[e.countryCodeKey||"country_code"].toLowerCase().indexOf(i.value)>-1))).filter(e.filterCountry)})),g=o((()=>f.value?d.value&&v.value?e.countries.find((t=>t[e.countryCodeKey||"country_code"].toLowerCase()===d.value.toLowerCase()||t[e.isoKey||"iso3"].toLowerCase()===d.value.toLowerCase())):null:d.value&&v.value?s.value.find((t=>t[e.countryCodeKey||"country_code"].toLowerCase()===d.value.toLowerCase()||t[e.isoKey||"iso3"].toLowerCase()===d.value.toLowerCase())):null));l((()=>{g.value&&r("change",S(g.value))})),n((()=>e.selected),(e=>{d.value=e}),{immediate:!0}),a((async()=>{!f.value&&e.initLoad&&await u()}));return{refSelectCountryContainer:C,refSelectCountrySheet:p,countries:m,selectedCountry:g,searchQuery:i,loading:c,toggleCollapse:()=>{y.value=!e.disabled&&!y.value,y.value&&(()=>{if(e.staticPosition)return;const t=C.value,o=p.value;if(!t||!o)return;if(!t.getBoundingClientRect)return;const l=t.parentElement.parentElement;l&&w((()=>{const{y:e}=t.getBoundingClientRect(),n=e-o.clientHeight/4,a=l.clientWidth;o.style.top=`${n}px`,o.style.width=`${a}px`}))})()},handleOutsideClick:()=>y.value=!1,handleSelectCountry:t=>{d.value=t[e.countryCodeKey||"country_code"],y.value=!1;const o=S(g.value);r("change",o),r("select",o)},isCollapse:y}}}),L={key:0,for:"select-country",class:"mb-1"},B={key:1},$={class:"flex items-center"},V={key:1},N={class:"mr-4"},O=["src"],P={key:0,ref:"refSelectCountrySheet",class:"select-country__sheet fixed p-4 bg-white border border-grey-01 fixed w-full mt-2 rounded z-50"},Q={class:"max-h-96 overflow-y-auto"},j=["onClick"],I={class:"mr-4 flex items-center"},F={key:0,class:"material-icons mr-4 text-teal-04"},U=["src"],z={class:"max-h-60 overflow-y-auto"},A=["onClick"],E={class:"mr-4 flex items-center"},R={key:0,class:"material-icons mr-4 text-teal-04"},W=["src"];var q=k(x,[["render",function(e,t,o,l,n,a){const w=r("Input"),_=s("outside"),K=s("loading");return c((u(),d("div",{ref:"refSelectCountryContainer",class:p(["select-country wrapper",!!e.noBorder&&"select-country--noborder"])},[e.label?(u(),d("label",L,i(e.label||"Country"),1)):y("",!0),e.$slots.label?(u(),d("label",B,[C(e.$slots,"label",{},void 0,!0)])):y("",!0),c((u(),d("div",{ref:"refSelectCountryContainer",class:p([[e.rounded&&!e.phone&&"rounded-lg",e.rounded&&e.phone&&"rounded-l-lg"],"select-country wrapper"])},[f("div",{onFocus:t[0]||(t[0]=(...t)=>e.toggleCollapse&&e.toggleCollapse(...t)),tabindex:"0",id:"select-country",class:p([[e.rounded&&!e.phone&&"rounded-lg",e.rounded&&e.phone&&"rounded-l-lg"],"select-country__value flex w-full justify-between items-center bg-white rounded-lg cursor-pointer select-none focus:border-teal-04"])},[f("div",$,[e.loading.all?(u(),d(v,{key:0},[m(" Loading ... ")],64)):null===e.selectedCountry?(u(),d("p",V,i(e.placeholder),1)):C(e.$slots,"selected",{key:2,data:e.selectedCountry},(()=>{var t;return[f("div",N,[f("img",{src:`/flag/${null==(t=e.selectedCountry[e.countryCodeKey||"country_code"])?void 0:t.toLowerCase()}.svg`,width:"16"},null,8,O)]),f("div",null,i(e.selectedCountry[e.countryNameKey||"nicename"]),1)]}),!0)]),t[3]||(t[3]=f("div",{class:"arrow"},[f("i",{class:"material-icons"},"arrow_drop_down")],-1))],34),e.staticPosition?y("",!0):c((u(),d("div",P,[g(w,{modelValue:e.searchQuery,"onUpdate:modelValue":t[1]||(t[1]=t=>e.searchQuery=t),class:"mb-4",block:"",placeholder:"Search country",disabled:e.disabled},null,8,["modelValue","disabled"]),f("div",Q,[(u(!0),d(v,null,h(e.countries,((t,o)=>(u(),d("div",{key:o,onClick:o=>e.handleSelectCountry(t),class:"flex items-center p-3 hover:bg-darken cursor-pointer"},[C(e.$slots,"option",{data:{country:t,selected:!(!t||!e.selectedCountry)&&t[e.countryCodeKey||"country_code"]===e.selectedCountry[e.countryCodeKey||"country_code"]}},(()=>[f("div",I,[t&&e.selectedCountry&&t[e.countryCodeKey||"country_code"]===e.selectedCountry[e.countryCodeKey||"country_code"]?(u(),d("i",F,"check_circle")):y("",!0),f("img",{src:`/flag/${t[e.countryCodeKey||"country_code"].toLowerCase()}.svg`,width:"18"},null,8,U)]),f("div",null,i(t[e.countryNameKey||"nicename"]),1)]),!0)],8,j)))),128))])],512)),[[b,e.isCollapse]]),e.staticPosition?c((u(),d("div",{key:1,ref:"refSelectCountrySheet",class:p([["top"===e.placement&&"bottom-full -translate-y-2","bottom"===e.placement&&"top-full translate-y-2"],"absolute transform p-4 bg-white border border-grey-01 rounded z-50"]),style:{left:"0",right:"0"}},[g(w,{modelValue:e.searchQuery,"onUpdate:modelValue":t[2]||(t[2]=t=>e.searchQuery=t),class:"mb-4",block:"",placeholder:"Search country",disabled:e.disabled},null,8,["modelValue","disabled"]),f("div",z,[(u(!0),d(v,null,h(e.countries,((t,o)=>(u(),d("div",{key:o,onClick:o=>e.handleSelectCountry(t),class:"flex items-center p-3 hover:bg-darken cursor-pointer"},[C(e.$slots,"option",{data:{country:t,selected:!(!t||!e.selectedCountry)&&t[e.countryCodeKey||"country_code"]===e.selectedCountry[e.countryCodeKey||"country_code"]}},(()=>[f("div",E,[t&&e.selectedCountry&&t[e.countryCodeKey||"country_code"]===e.selectedCountry[e.countryCodeKey||"country_code"]?(u(),d("i",R,"check_circle")):y("",!0),f("img",{src:`/flag/${t[e.countryCodeKey||"country_code"].toLowerCase()}.svg`,width:"18"},null,8,W)]),f("div",null,i(t[e.countryNameKey||"nicename"]),1)]),!0)],8,A)))),128))])],2)),[[b,e.isCollapse]]):y("",!0)],2)),[[_,e.handleOutsideClick],[K,e.loading.all]])],2)),[[_,e.handleOutsideClick],[K,e.loading.all]])}],["__scopeId","data-v-8837e7d2"]]);export{q as S};
