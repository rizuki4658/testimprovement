{"version":3,"file":"Tab.5a58770c.js","sources":["../../src/views/shipping/Tab.vue"],"sourcesContent":["<template>\n  <div class=\"flex xl:flex-row flex-col justify-between items-center\">\n    <div class=\"lg:flex lg:divide-x lg:divide-grey-01 xl:mb-0 mb-4\">\n      <div class=\"flex lg:pr-4 lg:mb-0 mb-4\">\n        <h5>Shipping</h5>\n      </div>\n    </div>\n    <div class=\"space-x-4\">\n      <template v-if=\"isEmptyShippingLabel\">\n        <Popover width=\"400\" trigger=\"hover\">\n          <div class=\"w-full h-full flex justify-center items-center\">\n            <span class=\"whitespace-pre-line\">Please set up at least one shipping provider first. <router-link :to=\"{ name: 'integration' }\">Go to Add-ons</router-link></span>\n          </div>\n          <template #reference>\n            <div>\n              <Button disabled color=\"teal\" class=\"lg:inline-block block\"><span class=\"material-icons text-lg\">add</span> Add Shipping Label</Button>\n            </div>\n          </template>\n        </Popover>\n      </template>\n      <template v-else>\n        <Button color=\"teal\" class=\"lg:inline-block block\" :to=\"{name: 'createShippingLabel'}\" link><span class=\"material-icons text-lg\">add</span> Add Shipping Label</Button>\n      </template>\n    </div>\n  </div>\n  <div class=\"flex items-center space-x-2 px-4 py-2 bg-orange-01 text-orange-04 rounded-lg my-6\">\n    <i class=\"material-icons\">info</i>\n    <p>\n      If you have an active Mail-in location and a shipping carrier integrated, you can create incoming shipping labels manually here instead of going to your carrier portal.\n    </p>\n  </div>\n  <Card>\n    <Tab view=\"smooth\" color=\"teal\" :items=\"tab\" />\n    <Input v-model=\"data.search\" block placeholder=\"Search Everything\" icon>\n      <template #icon><i class=\"material-icons text-lg text-grey-03\">search</i></template>\n    </Input>\n    <Table :data=\"state.data\" class=\"mt-4\" v-loading=\"loading.all\">\n      <TableColumn prop=\"box_id\" label=\"Buyback ID#\" />\n      <TableColumn label=\"Name\">\n        <template #default=\"scope\">\n          <TextLimit :text=\"scope.row.name || ''\">\n            <template #default=\"{ text }\">\n              <div v-if=\"nameCapitalize(text).length\" class=\"mb-2\">\n                <span v-for=\"(name, n) in nameCapitalize(text)\" :key=\"n\" class=\"text-teal-04 capitalize\">\n                  {{ `${name} ` }}\n                </span>\n              </div>\n              <span v-else class=\"block text-teal-04 mb-2\">{{ text }}</span>\n            </template>\n          </TextLimit>\n        </template>\n      </TableColumn>\n      <TableColumn prop=\"address\" label=\"Address\" width=\"200\">\n        <template #default=\"scope\">{{scope.row.address || '-'}}</template>\n      </TableColumn>\n      <TableColumn label=\"Tracking Number\" width=\"300\">\n        <template #default=\"scope\">\n          <a target=\"_blank\" :href=\"scope.row.tracking_number_link ? scope.row.tracking_number_link : '#'\" rel=\"noreferrer noopener\">{{scope.row.tracking_number}}</a>\n        </template>\n      </TableColumn>\n      <TableColumn prop=\"type\" label=\"Carrier\" />\n      <TableColumn>\n        <template #default=\"scope\">\n          <div class=\"lg:opacity-0 group-hover:opacity-100 transition-opacity\" @click.stop>\n            <Button color=\"teal\" class=\"mr-4\" @click=\"rePrintShippingLabel(scope.row.id)\" :loading=\"loadingPrint.has(scope.row.id)\" dense>\n              <i class=\"material-icons text-lg\">print</i>\n            </Button>\n          </div>\n        </template>\n      </TableColumn>\n    </Table>\n    <Pagination v-model:page=\"data.page\" v-model:limit=\"data.limit\" :data=\"state\" />\n  </Card>\n</template>\n\n<script>\nimport { computed, defineComponent, onUnmounted, watch } from 'vue'\nimport { useCouriers, useAll, usePrint, useLabels } from 'composable/shipping'\nimport { useRoute } from 'vue-router'\nimport debounce from 'utils/debounce'\nimport { nameCapitalize } from 'utils/element'\nimport Button from 'bbUi/components/button/button.vue'\nimport Tab from 'bbUi/components/tab/tab.vue'\nimport Input from 'bbUi/components/input/input.vue'\nimport Modal from 'bbUi/components/modal/modal.vue'\nimport Pagination from 'components/Pagination.vue'\nimport Timeline from \"bbUi/components/timeline/timeline.vue\"\nimport TimelineItem from \"bbUi/components/timeline-item/timeline-item.vue\"\nimport Card from \"bbUi/components/card/card.vue\"\nimport TextLimit from \"components/TextLimit.vue\"\n\nexport default defineComponent({\n  components: {\n    Button,\n    Tab,\n    Input,\n    Modal,\n    Pagination,\n    Timeline,\n    TimelineItem,\n    Card,\n    TextLimit\n  },\n  async setup() {\n    const { tab } = useCouriers()\n    const { state, actionAll, data, loading } = useAll()\n    const { action: actionPrint, loading: loadingPrint } = usePrint()\n    const route = useRoute()\n    const { action: actionLabels, state: stateLabels } = useLabels()\n    const unWatch = watch(() => ({\n      data,\n      route: route.params.courierId\n    }), debounce(async () => {\n      if(route.name === 'shippingTab') await actionAll(route.params.courierId || null)\n    }, 500), {\n      deep: true\n    })\n    const rePrintShippingLabel = async (id) => {\n      if(id) await actionPrint(id)\n    }\n    const isEmptyShippingLabel = computed(() => stateLabels.value.length === 0)\n    onUnmounted(() => unWatch())\n    await Promise.all([\n      actionAll(route.params.courierId || null),\n      actionLabels()\n    ])\n    \n    return {\n      data,\n      tab,\n      state,\n      loading,\n      loadingPrint,\n      isEmptyShippingLabel,\n      nameCapitalize,\n      rePrintShippingLabel\n    }\n  }\n})\n</script>"],"names":["_sfc_main","defineComponent","components","Button","Tab","Input","Modal","Pagination","Timeline","TimelineItem","Card","TextLimit","[object Object]","tab","useCouriers","state","actionAll","data","loading","useAll","action","actionPrint","loadingPrint","usePrint","route","useRoute","actionLabels","stateLabels","useLabels","unWatch","watch","params","courierId","debounce","async","name","deep","isEmptyShippingLabel","computed","value","length","onUnmounted","Promise","all","nameCapitalize","rePrintShippingLabel","id","_hoisted_1","class","_hoisted_2","_hoisted_3","key","_openBlock","_createElementBlock","_Fragment","_cache","_createElementVNode","width","_withCtx","_createVNode","_component_Button","disabled","color","default","_createTextVNode","to","_component_Tab","view","_component_Input","modelValue","_ctx","search","onUpdate:modelValue","$event","block","placeholder","icon","_createBlock","_component_Table","_component_TableColumn","prop","label","scope","_component_TextLimit","text","_renderList","n","target","href","row","tracking_number_link","onClick","has","_component_Pagination","page","onUpdate:page","limit","onUpdate:limit"],"mappings":"8cA2FA,MAAKA,EAAaC,EAAa,CAC7BC,WAAY,CACVC,OAAAA,EACAC,IAAAA,QACAC,QACAC,EACAC,WAAAA,EACAC,SAAAA,eACAC,EACAC,KAAAA,EACAC,UAAAA,GAAAC,cAGA,MAAMC,IAAEA,GAAQC,KACVC,MAAEA,EAAAC,UAAOA,EAAWC,KAAAA,EAAAC,QAAMA,GAAYC,KACpCC,OAAQC,EAAaH,QAASI,GAAiBC,IACjDC,EAAQC,KACNL,OAAQM,EAAcX,MAAOY,GAAgBC,IAC/CC,EAAUC,GAAM,KAAO,CAC3Bb,KAAAA,EACAO,MAAOA,EAAMO,OAAOC,aAClBC,GAASC,UACO,gBAAfV,EAAMW,YAA8BnB,EAAUQ,EAAMO,OAAOC,WAAa,QAC1E,KAAM,CACPI,MAAM,IAKFC,EAAuBC,GAAS,IAAmC,IAA7BX,EAAYY,MAAMC,SAOvD,OANPC,GAAY,IAAMZ,YACZa,QAAQC,IAAI,CAChB3B,EAAUQ,EAAMO,OAAOC,WAAa,MACpCN,MAGK,CACLT,KAAAA,EACAJ,IAAAA,EACAE,MAAAA,EACAG,QAAAA,EACAI,aAAAA,EACAe,qBAAAA,EACAO,eAAAA,EACAC,qBAlB2BX,MAAOY,IAC/BA,SAAUzB,EAAYyB,QA/GtBC,EAAA,CAAAC,MAAM,0DAGAC,EAAA,CAAAD,MAAM,aACHE,EAAA,CAAAF,MAAM,qFA+B8BG,IAAK,mBAKhCA,IAAK,wQA9C9BC,OAAAA,IAuBMC,EAAAC,EAAA,KAAA,WAlBE,GADE,KAAAC,EAAA,GAAAC,EAFgC,MAAA,CAAAR,MAAA,sDAAA,CACpCQ,EAAA,aAAY,6BAAA,6BAGhB,MACsC,MAAAP,EAAA,kCACzBE,IAAK,EAAOM,MAAO,uBAIf,WAGHC,GAAA,IAAA,GADmI,MAAA,KAAA,CAA/HC,EAAQC,EAAA,CAACC,SAAY,GAACC,MAAM,uCAAwBC,QAAAL,GAAA,IAAMH,EAAA,OAAM,GAAA,GAAsD,OAAA,CAAAP,MAAA,0BAAA,OAAA,2CALlIe,QAAAL,GAAA,KACEF,EAAA,QAAmK,aAA7ED,EAAsE,KAAAA,EAAA,GAAAS,EAApD,6DAAsC,CAAAC,GAAA,CAAA9B,KAAA,gBAAA,gBAAAoB,EAAA,OAAA,GAAA,sDAU1IJ,IAAK,EAAQW,MAAM,OAAyBd,MAAiC,wBAAEiB,GAAI,MAAA,iCAACF,QAAAL,GAAA,IAAMH,EAAA,OAAM,GAAA,GAAsD,OAAA,CAAAP,MAAA,0BAAA,OAAA,2CAKlKO,EAAA,MAAkCA,EAAA,IAA/BC,EAAM,OAAqBR,MAAA,qFAAA,CAC9BQ,EAEI,WAAJ,kBAAA,mMA2CK,QAxC0C,KAAA,SAAAE,GAAA,IAAA,CAA1CC,EAAaO,EAAA,CAACC,cAAcL,MAAO,oBAGhC,KAAA,EAAA,CAAA,UAFQH,EAAAS,EAAW,CAAXC,WAAAC,EAAArD,KAAAsD,OAAaC,sBAAKjB,EAAA,KAAAA,EAAA,GAAAkB,GAAAH,EAAArD,KAAAsD,OAAAE,GAACC,MAAA,GAAgCC,YAAI,6BAC1D,CAAKC,KAAAlB,GAAA,IAAAH,EAAG,OAAM,GAAA,gGAEHsB,IAAAA,EAAAC,EAAA,CAAE7D,OAAYF,MAAAE,4BACayC,GAAA,IAAA,CAApCC,EAAaoB,EAAA,CAACC,sCAEPD,EAAO,CAAAE,MAAA,QAAA,SAUXvB,GAAAwB,GAAA,CATAvB,EAAWwB,EAAS,sBACZ,SACSzB,GAAA,EAAA0B,KAAAA,KAAa,CAAtCd,EAAA1B,eAAAwC,GAAA5C,QACEa,IAAAA,EAAA,kBAEOC,EAAA,KAAA+B,EAAAf,EAAA1B,eAAAwC,IAAA,CAAAjD,EAAAmD,KAFgDlC,IAAAC,EAAA,OAAA,CAAEF,IAAKmC,sHAS3D3B,EAAcoB,EAAA,CAACC,eAAgBC,MAAM,uBAC9B,oDAEPtB,EAAuBoB,EAAA,CAACE,MAAM,+BACvB,SAC4IvB,GAAAwB,GAAA,CAAzJ1B,EAAe,IAAA,CAAE+B,OAAW,SAAkEC,KAAyBN,EAAAO,IAAAC,qBAAAR,EAAAO,IAAAC,qBAAA,sEAGjH/B,EAAWoB,EAAA,CAACC,gCAELD,EAAO,KAAA,SAKjBrB,GAAAwB,GAAA,CAJD1B,EAA+D,MAAA,CAAER,MAAK,qGAGhE,CAFDW,EAAYC,EAAA,CAACE,MAAM,OAAQd,MAAK,OAAuC2C,QAASlB,0BAA6BS,EAAAO,IAAA3C,IAAG5B,QAAKoD,EAAAhD,aAAAsE,IAAAV,EAAAO,IAAA3C,eAC3HiB,QAAAL,GAAA,IAAGH,EAAA,QAAM,IAAA,4GA7B+B,EAAA,CAAA,UAAA,uBAmCpBsC,EAAK,CAATC,KAAAxB,EAAArD,KAAA6E,KAAmBC,gBAAYxC,EAAK,KAAAA,EAAA,GAAAkB,GAAAH,EAAArD,KAAA6E,KAAArB,GAAVuB,MAAA1B,EAAArD,KAAA+E,MAAaC,iBAAW1C,EAAA,KAAAA,EAAA,GAAAkB,GAAAH,EAAArD,KAAA+E,MAAAvB"}