import{k as e,g as a,N as t,f as l,W as s,y as o,m as d,$ as n,o as c,t as i,D as r,w as u,B as v,A as m,U as p,K as g,F as h,I as f,T as y,aQ as b,q as x,n as w,a1 as k,S as C}from"./vendor.9695fe57.js";import{j as B,_ as S,b as _,d as D}from"./index.10c203ea.js";import{P as R}from"./Info.c7630092.js";const I=e({name:"DeviceScan",components:{Alert:B,PhonecheckInfo:R},props:{show:{type:Boolean,default:!1},selected:{type:Object,default:void 0}},emits:["scanned"],setup(e,{emit:d}){const n=a((()=>i.state.user.bbbScan)),c=a((()=>!e.selected||!(!e.selected||e.selected.product_id))),i=t(),r=l({loading:{code:!1},error:{code:!1},result:{code:void 0,device:void 0},showResult:!1}),u=async()=>{r.value.loading.code=!0,await i.dispatch("buyback/local/generateQR").then((e=>{r.value.loading.code=!1,e&&Object.keys(e).length&&(r.value.result.code=e,i.commit("user/SET_BBB_SCAN",r.value.result))})).catch((()=>{r.value.loading.code=!1,r.value.result.code=void 0}))};return s((async()=>{const e=localStorage.getItem("bbb_scan")&&"undefined"!=localStorage.getItem("bbb_scan")?JSON.parse(localStorage.getItem("bbb_scan")):void 0;e?(r.value.result.code=e.code,i.commit("user/SET_BBB_SCAN",{code:r.value.result.code}),r.value.result.device=void 0):await u()})),o((()=>n.value),(e=>{r.value.result.code=e&&e.code||void 0,r.value.result.device=e&&e.device||void 0,d("scanned",r.value.result.device)}),{deep:!0}),{data:r,storage:n,showWarning:c,handleGenerate:u}}}),j={key:0,class:"space-y-8 mb-6 w-full"},A={key:0,class:"flex justify-between gap-x-8"},V={class:"bg-grey-01 h-28 w-28 rounded"},N=["src"],P={key:1,class:h(["border border-grey-01","p-4 rounded-xl space-y-6"])},O={class:"flex items-center justify-between"},U={class:"font-semibold text-lg"},M={class:"text-sm text-grey-03"},$={key:0},Q={key:0,class:h(["border-t border-grey-04","border-dotted text-center"]),style:{lineHeight:"0.1rem"}},T={key:1},W={key:1};var q=S(I,[["render",function(e,a,t,l,s,o){const x=d("PhonecheckInfo"),w=n("loading");return e.show&&e.data.result.code?(c(),i("div",j,[r(b,{name:"slide-fade"},{default:u((()=>[e.data.result.device?(c(),i("div",P,[v("div",O,[v("div",null,[v("p",U,g(e.data.result.device.Name),1),v("p",M,g(e.data.result.device.Date),1)]),v("div",{class:h(["flex items-center","cursor-pointer","text-grey-base","hover:opacity-50"]),onClick:a[0]||(a[0]=a=>e.data.showResult=!e.data.showResult)},[f(g(e.data.showResult?"Hide Result":"Show Result")+" ",1),a[3]||(a[3]=v("i",{class:"material-icons"}," expand_more ",-1))])]),r(y,{name:"slide-fade"},{default:u((()=>[e.data.showResult?(c(),i("div",$,[r(x,{data:e.data.result.device,"onUpdate:data":a[1]||(a[1]=a=>e.data.result.device=a),"is-error":!e.data.result.device,scan:""},null,8,["data","is-error"])])):p("",!0)])),_:1})])):(c(),i("div",A,[a[2]||(a[2]=v("p",{class:"font-semibold text-xl flex-1"}," For Android and iPhone devices - If the item powers on you can scan the QR code with the customers item to autofill most item information. ",-1)),v("div",null,[m((c(),i("div",V,[e.data.result.code?(c(),i("img",{key:0,src:e.data.result.code.qr_code,alt:"generated_code"},null,8,N)):p("",!0)])),[[w,e.data.loading.code]])])]))])),_:1}),e.data.result.device?e.showWarning&&e.data.result.device?(c(),i("div",T,a[5]||(a[5]=[v("div",{class:"bg-orange-01 text-orange-03 rounded-md px-6 py-3"},[v("div",{class:"flex gap-x-4"},[v("i",{class:"material-icons"},"info"),v("p",{class:"text-base"},"Review the diagnostic results to ensure the item matches your needs before completing the form.")])],-1)]))):p("",!0):(c(),i("div",Q,a[4]||(a[4]=[v("span",{class:h(["text-grey-04","bg-white px-2 py-1"])},"OR",-1)])))])):e.show?(c(),i("div",W,[m(v("div",{class:h(e.data.loading.code&&"h-40")},null,2),[[w,e.data.loading.code]])])):p("",!0)}]]);const E=e({name:"BBBScan",components:{PhonecheckInfo:R,Button:_,Modal:D},props:{modelValue:{type:[Number,Object],default:void 0},static:{type:Boolean,default:!1},label:{type:String,default:"Diagnostic Report"}},setup(e){const s=a((()=>e.modelValue)),d=l(e.static?e.modelValue:void 0),n=l(!1),c=t(),i=l(!1);return o((()=>i.value),(async()=>{i.value&&s.value&&!e.static&&(n.value=!0,await c.dispatch("buyback/local/getDiagnosticBBB",s.value).then((e=>{n.value=!1,d.value=Array.isArray(e)?e.shift():e})).catch((()=>{n.value=!1,d.value=void 0})))})),{deviceDetail:d,loading:n,device:s,modal:i}}}),F={key:0},H={class:"whitespace-nowrap"},z={class:"flex gap-x-2"},G={key:0},J={class:"text-sm font-normal text-grey-04"};var K=S(E,[["render",function(e,a,t,l,s,o){const h=d("Button"),y=d("PhonecheckInfo"),b=d("Modal"),C=n("loading");return c(),i(k,null,[e.$slots.trigger?(c(),i("span",{key:1,onClick:a[1]||(a[1]=a=>e.modal=!e.modal)},[x(e.$slots,"trigger")])):(c(),i("span",F,[x(e.$slots,"default",{},(()=>[r(h,{color:"teal",onClick:a[0]||(a[0]=a=>e.modal=!e.modal)},{default:u((()=>[v("span",H,g(e.label),1)])),_:1})]))])),r(b,{modelValue:e.modal,"onUpdate:modelValue":a[3]||(a[3]=a=>e.modal=a),"hide-footer":""},{header:u((()=>[m((c(),i("div",z,[e.deviceDetail?(c(),i("div",G,[f(g(e.deviceDetail.Name)+" Scan Result ",1),v("p",J,g(e.deviceDetail.Date),1)])):p("",!0)])),[[C,e.loading]])])),footer:u((()=>a[4]||(a[4]=[v("span",null,null,-1)]))),default:u((()=>[m((c(),i("div",null,[e.deviceDetail?(c(),w(y,{key:0,data:e.deviceDetail,"onUpdate:data":a[2]||(a[2]=a=>e.deviceDetail=a),"is-error":!e.deviceDetail,scan:""},null,8,["data","is-error"])):p("",!0)])),[[C,e.loading]])])),_:1},8,["modelValue"])],64)}]]);const Y=e({name:"CancelAdd",components:{Button:_,Modal:D},props:{label:{type:String,default:"Cancel"},labelCancel:{type:String,default:"Yes, Cancel"},labelContinue:{type:String,default:"Continue Add Item"}},emits:["cancel"],setup(e,{emit:a}){const t=l(!1);return{modal:t,handleCancel:()=>{t.value=!1,a("cancel")}}}}),L={class:"space-y-6 text-center py-6"},X={class:"flex items-center justify-center gap-x-4"};var Z=S(Y,[["render",function(e,a,t,l,s,o){const n=d("Modal");return c(),i(k,null,[v("a",{href:"#",class:"py-3 px-6 hover:bg-grey-01 rounded-md text-grey-base hover:text-grey-base leading-6",onClick:a[0]||(a[0]=C((a=>e.modal=!e.modal),["prevent"]))},g(e.label),1),r(n,{modelValue:e.modal,"onUpdate:modelValue":a[3]||(a[3]=a=>e.modal=a),"hide-header":"","hide-footer":"",class:"modal-xs-custom"},{default:u((()=>[v("div",L,[a[4]||(a[4]=v("i",{class:"material-icons text-red-base",style:{"font-size":"10rem !important","line-height":"10rem"}}," info_outline ",-1)),a[5]||(a[5]=v("p",{class:"text-2xl font-semibold"},"Cancel Progress?",-1)),v("div",X,[v("a",{href:"#",class:"py-2 px-4 hover:opacity-80 rounded-md bg-red-base text-white hover:text-white leading-6",onClick:a[1]||(a[1]=C(((...a)=>e.handleCancel&&e.handleCancel(...a)),["prevent"]))},g(e.labelCancel),1),v("a",{href:"#",class:"py-2 px-4 hover:bg-grey-01 rounded-md text-grey-base hover:text-grey-base leading-6",onClick:a[2]||(a[2]=C((a=>e.modal=!1),["prevent"]))},g(e.labelContinue),1)])])])),_:1},8,["modelValue"])],64)}]]);export{K as B,Z as C,q as D};
