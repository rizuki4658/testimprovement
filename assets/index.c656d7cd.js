import{k as e,O as a,a5 as t,f as o,W as s,m as l,o as i,t as n,D as d,w as r,B as c,I as m,K as u,S as p,T as w,n as y,a2 as f,a3 as v,U as g,F as b}from"./vendor.f1efedad.js";import{b as h,c as x}from"./onboarding.1493806c.js";import{b as k,B as V,_ as A,f as S,n as P,F as _}from"./index.9aa6481b.js";import{I}from"./InputVerificationCode.9ef41890.js";import{u as E}from"./index.32689823.js";import"./index.a87b789d.js";import"./index.05b14cb2.js";const j=e({components:{Button:k,InputVerificationCode:I,BaseLoading:V},setup(){const e=a(),l=t(),{data:i,loading:n,isIncomplete:d,decodedTokenPayload:r,action:c}=h(),m=o(!1);return s((async()=>{const{code_encrypted:e,company_token:a}=r.value;i.code_encrypted=e||null,i.company_token=a||null})),{route:l,data:i,loading:n,isIncomplete:d,isSetupAccount:m,decodedTokenPayload:r,handleVerify:async()=>{d.value||(m.value=!0,await c((async a=>{a?m.value=!1:await e.push({name:"onboardingPurchasingMethod",params:{verified:!0}})})))}}}}),$={class:"mb-8 mx-auto w-full md:w-4/5 lg:w-full xl:mx-0 xl:w-2/3"},C={key:0},B={class:"w-full lg:w-2/3 my-20"},R={class:"flex items-center justify-center w-full my-20"},T={key:1},U={class:"font-semibold"},F={class:"my-8 w-full"},O={class:"my-10"};const N=e({components:{Input:S,Button:k,VerifyEmail:A(j,[["render",function(e,a,t,o,s,y){const f=l("BaseLoading"),v=l("InputVerificationCode"),g=l("Button");return i(),n("div",$,[d(w,{name:"slide-fade"},{default:r((()=>[e.loading||e.isSetupAccount?(i(),n("div",C,[c("div",B,[a[2]||(a[2]=c("h2",{class:"text-3xl font-semibold"}," We're now setting up your account... ",-1)),c("div",R,[d(f)]),a[3]||(a[3]=c("p",{class:"text-sm"}," Please wait for us to verify your information to grant you access to your free trial. This may take a moment. Please do not refresh or navigate away from this page ",-1))])])):(i(),n("div",T,[a[6]||(a[6]=c("h2",{class:"text-3xl font-semibold"},"Verify Email Address",-1)),c("p",null,[a[4]||(a[4]=m(" you will receive an activation code within the next few minutes to ")),c("span",U,u(e.decodedTokenPayload.email),1)]),c("form",{onSubmit:a[1]||(a[1]=p(((...a)=>e.handleVerify&&e.handleVerify(...a)),["prevent"]))},[c("div",F,[d(v,{modelValue:e.data.code,"onUpdate:modelValue":a[0]||(a[0]=a=>e.data.code=a)},null,8,["modelValue"])]),c("div",O,[d(g,{disabled:e.isIncomplete,color:"teal",loading:e.loading},{default:r((()=>a[5]||(a[5]=[m("Continue "),c("i",{class:"material-icons ml-2"},"east",-1)]))),_:1},8,["disabled","loading"])])],32)]))])),_:1})])}]])},async setup(){const e=a();t();const{data:s,loading:l,isShowPassword:i,isRegisteredReady:n,validationRules:d,action:r,isIncompleteForm:c,isVerifyEmail:m}=x(),{data:u,login:p}=P(),w=o(0),y=o(!1),f=E(d,s,{$lazy:!0});return{data:s,loading:l,isShowPassword:i,isRegisteredReady:n,isIncompleteForm:c,isVerifyEmail:m,validation:f,handleSubmit:async()=>{!c.value&&(f.value.$validate(),!f.value.$invalid)&&(n.value=!1,await r((async a=>{(null==window?void 0:window.growsumo)&&(window.growsumo.data.name=s.name,window.growsumo.data.email=s.email,window.growsumo.data.customer_key=s.email,window.growsumo.createSignup());const{code:t,company_token:o,verify_status:l}=a;l?(1==l&&(n.value=!0),2==l&&(y.value=!0)):t&&o&&await e.push({name:"onboardingPersonalInformation",query:{token:btoa(JSON.stringify({email:s.email,code_encrypted:t,company_token:o}))}})})))},selectedAction:w,showExistAccountOption:y,handleActionExistAccount:async()=>{1===w.value?(n.value=!1,y.value=!1,s.name="",s.email="",s.password=""):(u.email=s.email,u.password=s.password,p((a=>{a.errors||(window.localStorage.setItem("token",a.token),_(),e.push({path:"/new-company/1"}))})))}}}}),z={class:"flex h-full lg:flex-col justify-center lg:items-center"},L={class:"w-full lg:max-w-4xl max-w-xl"},q={key:1},D={key:0,class:"w-full lg:block flex flex-col items-center justify-center lg:w-3/4 xl:w-3/4"},W={class:"my-8"},J={class:"my-4"},K={class:"my-4"},M={class:"my-4"},G={key:0,class:"bg-blue-01 bg-opacity-30 rounded-md p-4 text-blue-03"},H={key:1},Q={class:"grid grid-cols-6 gap-4 sm:h-80"},X={class:"lg:col-span-2 sm:col-span-3 col-span-6"},Y={class:"lg:col-span-2 sm:col-span-3 col-span-6"};var Z=A(N,[["render",function(e,a,t,o,s,h){const x=l("VerifyEmail"),k=l("Input"),V=l("Button");return i(),n("div",z,[c("div",L,[d(w,{name:"slide-fade"},{default:r((()=>[e.isVerifyEmail?(i(),y(x,{key:0})):(i(),n("div",q,[e.showExistAccountOption?(i(),n("div",H,[c("form",{class:"space-y-8",onSubmit:a[7]||(a[7]=p(((...a)=>e.handleActionExistAccount&&e.handleActionExistAccount(...a)),["prevent"]))},[a[16]||(a[16]=c("p",{class:"text-3xl text-black font-semibold"}," An account with this email address already exists ",-1)),c("div",Q,[c("div",X,[c("button",{class:b(["p-6 rounded-xl bg-white","center justify-center gap-4 border","flex h-full w-full flex-col items-center","duration-300 transition-all ease-in-out",1===e.selectedAction?"border-teal-04 shadow":"border-opacity-10 border-teal-02 hover:border-teal-04 hover:shadow"]),type:"button",onClick:a[5]||(a[5]=a=>e.selectedAction=1)},a[13]||(a[13]=[c("div",{class:"h-32 w-32 bg-grey-03",style:{maskImage:"url('/icon/onboarding/change-email.svg')",maskSize:"contain",maskPosition:"center",maskRepeat:"no-repeat"}},null,-1),c("p",{class:"text-teal-04 font-semibold text-xl"},"Use Different Email",-1),c("p",{class:"text-sm"},"Let's try a different email address",-1)]),2)]),c("div",Y,[c("button",{class:b(["p-6 rounded-xl bg-white","flex h-full w-full flex-col items-center","center justify-center gap-4 border","duration-300 transition-all ease-in-out",2===e.selectedAction?"border-teal-04 shadow":"border-opacity-10 border-teal-02 hover:border-teal-04 hover:shadow"]),type:"button",onClick:a[6]||(a[6]=a=>e.selectedAction=2)},a[14]||(a[14]=[c("div",{class:"h-32 w-32 bg-grey-03",style:{maskImage:"url('/icon/onboarding/add-new-account.svg')",maskSize:"contain",maskPosition:"center",maskRepeat:"no-repeat"}},null,-1),c("p",{class:"text-teal-04 font-semibold text-xl"},"Add New Account",-1),c("p",{class:"text-sm"},"Create an addtional account with the same email address",-1)]),2)])]),d(V,{color:"teal",type:"submit"},{default:r((()=>a[15]||(a[15]=[m(" Continue ")]))),_:1})],32)])):(i(),n("div",D,[a[11]||(a[11]=c("h2",{class:"text-3xl font-semibold"},"Start your free trial",-1)),a[12]||(a[12]=c("p",{whitelabel:"text-replace","data-label":"trial period"}," 30-day trial • No credit card required • Access all features ",-1)),c("form",{onSubmit:a[4]||(a[4]=p(((...a)=>e.handleSubmit&&e.handleSubmit(...a)),["prevent"])),autocomplete:"on"},[c("div",W,[c("div",J,[d(k,{modelValue:e.data.name,"onUpdate:modelValue":a[0]||(a[0]=a=>e.data.name=a),autocomplete:"name",label:"Name",block:"",view:e.validation.name.$invalid?"danger":""},null,8,["modelValue","view"]),(i(!0),n(f,null,v(e.validation.name.$errors,((e,a)=>(i(),n("small",{class:"text-red-base block mt-2",key:a},u(e.$message)+". ",1)))),128))]),c("div",K,[d(k,{modelValue:e.data.email,"onUpdate:modelValue":a[1]||(a[1]=a=>e.data.email=a),autocomplete:"email",label:"Email Address",block:"",view:e.validation.email.$invalid?"danger":""},null,8,["modelValue","view"]),(i(!0),n(f,null,v(e.validation.email.$errors,((e,a)=>(i(),n("small",{class:"text-red-base block mt-2",key:a},u(e.$message)+". ",1)))),128))]),c("div",M,[d(k,{modelValue:e.data.password,"onUpdate:modelValue":a[3]||(a[3]=a=>e.data.password=a),autocomplete:"new-password",type:e.isShowPassword?"text":"password",label:"Password",block:"",view:e.validation.password.$invalid?"danger":"",icon:"",right:""},{icon:r((()=>[c("i",{onClick:a[2]||(a[2]=a=>e.isShowPassword=!e.isShowPassword),class:"material-icons select-none cursor-pointer"},u(e.isShowPassword?"visibility_off":"visibility"),1)])),_:1},8,["modelValue","type","view"]),(i(!0),n(f,null,v(e.validation.password.$errors,((e,a)=>(i(),n("small",{class:"text-red-base block mt-2",key:a},u(e.$message)+". ",1)))),128))])]),e.isRegisteredReady&&!e.showExistAccountOption?(i(),n("div",G,a[8]||(a[8]=[c("div",{class:"flex gap-x-2"},[c("span",{class:"material-icons text-4xl"},"info"),c("p",{class:"text-base leading-7"},[m(" This email is already associated with an account, but the password you entered is incorrect, Please try again or "),c("a",{href:"/forgot-password",class:"hover:underline text-grey-darken"}," reset password "),m(" if you've forgetten it. ")])],-1)]))):g("",!0),a[10]||(a[10]=c("div",{whitelabel:"remove",class:"my-8"},[c("p",null,[m(" By signing up, you agree to our "),c("a",{href:"https://www.reusely.com/privacy-policy",target:"_blank",rel:"noreferrer noopener"},"Privacy Policy"),m(" and "),c("a",{href:"https://www.reusely.com/terms-of-service",target:"_blank",rel:"noreferrer noopener"},"Terms & Conditions")])],-1)),d(V,{loading:e.loading,color:"teal",disabled:e.isIncompleteForm},{default:r((()=>a[9]||(a[9]=[m("Continue "),c("i",{class:"material-icons ml-2"},"east",-1)]))),_:1},8,["loading","disabled"])],32)]))]))])),_:1})])])}]]);export{Z as default};
