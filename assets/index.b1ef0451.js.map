{"version":3,"file":"index.b1ef0451.js","sources":["../../src/views/reset-password/index.vue"],"sourcesContent":["<template>\n  <div class=\"flex items-start justify-center h-screen w-screen overflow-y-auto\">\n    <Card class=\"lg:py-8 py-1 lg:px-20 px-1 box-content my-auto text-center shadow-2xl\" style=\"width: 450px\" v-if=\"isSuccess\">\n      <div class=\"my-5\">\n        <img class=\"mb-16 mx-auto\" src=\"@/assets/icon/check.svg\" alt=\"Success Icon\">\n        <h5 class=\"text-black mb-2\">Successful!</h5>\n        <p class=\"text-grey-02 my-8\">Your password has been reset. You can now use your new password  to log in to your account</p>\n        <Button color=\"teal\" :link=\"true\" :to=\"{ name: 'login' }\">Continue</Button>\n      </div>\n    </Card>\n    <Card class=\"lg:py-8 py-1 lg:px-20 px-1 box-content my-auto shadow-2xl\" style=\"width: 450px\" v-else>\n      <div class=\"flex justify-center items-center flex-col mb-12\">\n        <img src=\"@/assets/logo.svg\" alt=\"Brand logo\" whitelabel=\"image-replace\" data-image-type=\"logo\" class=\"mb-4\" width=\"180\">\n        <p class=\"text-dark\">Create new password</p>\n      </div>\n      <div class=\"mb-6 form\">\n        <form @submit.prevent=\"submit\">\n          <div class=\"block my-5\">\n            <Input placeholder=\"Password\" v-model=\"data.password\" :type=\"showPassword ? 'text' : 'password'\" id=\"password\" :view=\"validation.password.$invalid && 'danger' || 'default'\" block icon right>\n              <template #icon>\n                <span class=\"material-icons block cursor-pointer text-grey-03\" @click=\"showPassword = !showPassword\">{{showPassword ? 'visibility_off' : 'visibility'}}</span>\n              </template>\n            </Input>\n            <span class=\"text-red-base mt-2 block\" v-for=\"error of validation.password.$errors\">{{ error.$message }}. </span>\n          </div>\n          <div class=\"block my-5\">\n            <Input placeholder=\"Confirm Password\" v-model=\"data.confirm_password\" :type=\"showConfirmPassword ? 'text' : 'password'\" type=\"password\" id=\"confirmPassword\" :view=\"validation.confirm_password.$invalid && 'danger' || 'default'\" block icon right>\n              <template #icon>\n                <span class=\"material-icons block cursor-pointer text-grey-03\" @click=\"showConfirmPassword = !showConfirmPassword\">{{showConfirmPassword ? 'visibility_off' : 'visibility'}}</span>\n              </template>\n            </Input>\n            <span class=\"text-red-base mt-2 block\" v-for=\"error of validation.confirm_password.$errors\">{{ error.$message }}. </span>\n            <span class=\"text-red-base mt-2 block\" v-if=\"error.show\">{{ error.message }}</span>\n          </div>\n          <div class=\"block my-4\">\n            <Button color=\"teal\" type=\"submit\" block :loading=\"loading\" :disabled=\"error.show\">Reset My Password</Button>\n          </div>\n        </form>\n      </div>\n    </Card>\n  </div>\n</template>\n\n<script>\nimport { defineComponent, reactive, ref, watch } from 'vue'\nimport { useResetPassword } from 'composable/user'\nimport { useRoute, useRouter } from 'vue-router'\nimport Card from 'bbUi/components/card/card.vue'\nimport Input from 'bbUi/components/input/input.vue'\nimport Button from 'bbUi/components/button/button.vue'\nimport { helpers } from \"@vuelidate/validators\"\nimport { required } from '@/validations/index'\nimport { useVuelidate } from \"@vuelidate/core\"\n\nexport default defineComponent({\n  name: 'ResetPassword',\n  components: {\n    Card,\n    Input,\n    Button\n  },\n  setup() {\n    const { data, loading, action } = useResetPassword()\n    const route = useRoute()\n    const router = useRouter()\n    const isSuccess = ref(false)\n    const showPassword = ref(false)\n    const showConfirmPassword = ref(false)\n\n    if(route.query.key) data.key = route.query.key\n    else router.push({\n      name: 'login'\n    })\n\n    const error = reactive({\n      show: false,\n      message: null\n    })\n    const rules = {\n      // password: { required, passwordValidation: helpers.withMessage('At least 6 alphanumerics and include capital letters', helpers.regex(/^(?=.*\\d)(?=.*[A-Z])[a-zA-Z0-9]{6,}$/)) },\n      password: { required, passwordValidation: helpers.withMessage('At least 6 characters and include capital letters', helpers.regex(/^(?=.*?[A-Z]).{6,}$/)) },\n      confirm_password: { required }\n    }\n    const validation = useVuelidate(rules, data, {\n      $lazy: true\n    })\n    const validate = () => {\n      validation.value.$validate()\n      return !validation.value.$invalid\n    }\n    const submit = async () => {\n      if(validate()) {\n        await action(() => {\n          isSuccess.value = true\n        })\n      }\n    }\n    watch(data, () => {\n      if((data.confirm_password != data.password) && data.confirm_password) error.show = true, error.message = 'Your confirmation password does not match'\n      else error.show = false, error.message = null\n    })\n\n    return {\n      submit,\n      isSuccess,\n      data,\n      loading,\n      showPassword,\n      showConfirmPassword,\n      error,\n      validation\n    }\n  }\n})\n</script>"],"names":["_sfc_main","defineComponent","name","components","Card","Input","Button","[object Object]","data","loading","action","useResetPassword","route","useRoute","router","useRouter","isSuccess","ref","showPassword","showConfirmPassword","query","key","push","error","reactive","show","message","rules","password","required","passwordValidation","helpers","withMessage","regex","confirm_password","validation","useVuelidate","$lazy","watch","submit","async","value","$validate","$invalid","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_openBlock","_createElementBlock","default","_withCtx","_cache","_createElementVNode","src","_imports_0","_createVNode","_component_Button","color","link","_imports_1","alt","whitelabel","data-image-type","_component_Input","placeholder","modelValue","_ctx","onUpdate:modelValue","$event","type","id","view","block","icon","_Fragment","_renderList","$errors","_hoisted_9"],"mappings":"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"}