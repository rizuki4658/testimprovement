var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,l=(a,t,n)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[t]=n,s=(e,a)=>{for(var t in a||(a={}))i.call(a,t)&&l(e,t,a[t]);if(n)for(var t of n(a))o.call(a,t)&&l(e,t,a[t]);return e},c=(e,n)=>a(e,t(n));import{y as r,o as d,s as u,r as g,v as p}from"./index.e231b017.js";import{r as h,f as m,g as y,az as v}from"./vendor.f1efedad.js";const f=[{name:"Linked",value:"1"},{name:"Pending Request",value:"2"},{name:"Unlinked",value:"0"}],w={state:Symbol(),actionAll:Symbol(),loading:Symbol()},L=()=>{const e=h({old_location_id:null,name:null,street:null,city:null,zip_code:null,state:null,country:null,phone:null,lat:null,lon:null,email:null,address_text:null,suite:null}),a=m(!1),t=m(!1),n=y((()=>{const a=["name","email","address_text","phone"];return Object.entries(e).filter((([e,t])=>a.includes(e)&&null===t)).length>0}));return{data:e,modal:a,loading:t,isIncompleteForm:n,action:async(a=(()=>{}))=>{try{t.value=!0,await u.dispatch("setting/manageLocation/switchLocation",e),p(a)&&a()}finally{t.value=!1}}}},F=()=>{const e=h({page:1,limit:10,search:"",sort_by:"",order_by:"",franchisor_accept_status:{name:"",value:""}}),a=h({new_store_id:null}),t=h({all:!1,delete:!1,mailin_location:!1}),n=h({create:!1,update:!1,delete:!1}),i=m(!1),o=m(!1),l=m(null),f=y((()=>[{id:0,name:"Store Locations",route:{name:"settingManageLocationStoreLocations"}},{id:1,name:"Linked Locations",route:{name:"settingManageLocationLinkedLocations"}}].map((e=>r(e,e.route.name,{},"id","name"))))),L=y((()=>d(u.state.setting.manageLocation.all)?g(s({},u.state.setting.manageLocation.all)):{data:[]})),F=y((()=>{var e;return(null==(e=u.state.setting.manageLocation.all)?void 0:e.data)||[]})),_=()=>{l.value=null,a.new_store_id=null},b=async(a,n=(()=>{}))=>{t.all=!0;const i=s(c(s({},e),{franchisor_accept_status:e.franchisor_accept_status.value||""}),a&&{admin_id:a});await u.dispatch("setting/manageLocation/all",i),p(n)&&n(),t.all=!1};return v(w.actionAll,b),v(w.loading,t),v(w.state,L),{data:e,dataLocation:a,state:L,loading:t,modal:n,isShowSwitchLocationModal:i,isShowEnableMailinModal:o,selected:l,tab:f,locationList:F,unsetData:_,openModal:(e,a=(()=>{}))=>{n[e]=!0,p(a)&&a()},actionAll:b,actionDelete:async(e=(()=>{}))=>{try{t.delete=!0,await u.dispatch("setting/manageLocation/delete",{id:l.value,data:a}),p(e)&&e(),n.delete=!1,_(),await b(u.state.user.me.id)}finally{t.delete=!1}},actionMailLocation:async(e,a=(()=>{}))=>{try{t.mailin_location=!0,await u.dispatch("setting/manageLocation/mailLocation",e),p(a)&&a(void 0)}catch(n){p(a)&&a(n)}finally{t.mailin_location=!1}}}},_=()=>{const e=h({page:1,limit:10,search:"",sort_by:"",order_by:""}),a=h({all:!1}),t=y((()=>d(u.state.setting.manageLocation.franchisee)?g(s({},u.state.setting.manageLocation.franchisee)):{data:[]}));return{data:e,loading:a,state:t,actionAll:async(t=1,n=(()=>{}))=>{a.all=!0;const i=c(s({},e),{linked_status:t||1});await u.dispatch("setting/manageLocation/getFranchiseeStore",i),p(n)&&n(),a.all=!1}}},b=()=>{const e=m(f),a=h({requestFranchisee:new Map,approveFranchisee:new Map,rejectFranchisee:new Map,revokeFranchisee:new Map,cancelFranchisee:new Map,unlinkFranchisee:new Map});return{linkedStatuses:e,loading:a,actionRequestFranchisee:async(e,t=(()=>{}))=>{try{a.requestFranchisee.set(e.location_id,!0);const n={id:e.location_id,data:{franchisor_code:e.franchisor_code}};await u.dispatch("setting/manageLocation/requestFranchisee",n),p(t)&&t()}finally{a.requestFranchisee.delete(e.location_id)}},actionApproveFranchisee:async(e,t=(()=>{}))=>{try{a.approveFranchisee.set(e,!0);const n=await u.dispatch("setting/manageLocation/approveFranchisee",e);p(t)&&t(n)}finally{a.approveFranchisee.delete(e)}},actionRejectFranchisee:async(e,t=(()=>{}))=>{try{a.rejectFranchisee.set(e,!0);const n=await u.dispatch("setting/manageLocation/rejectFranchisee",e);p(t)&&t(n)}finally{a.rejectFranchisee.delete(e)}},actionRevokeFranchisee:async(e,t=(()=>{}))=>{try{a.revokeFranchisee.set(e,!0);const n=await u.dispatch("setting/manageLocation/revokeFranchisee",e);p(t)&&t(n)}finally{a.revokeFranchisee.delete(e)}},actionCancelFranchisee:async(e,t=(()=>{}))=>{try{a.cancelFranchisee.set(e,!0);const n=await u.dispatch("setting/manageLocation/cancelFranchisee",e);p(t)&&t(n)}finally{a.cancelFranchisee.delete(e)}},actionUnlinkFranchisee:async(e,t=(()=>{}))=>{try{a.unlinkFranchisee.set(e,!0);const n=await u.dispatch("setting/manageLocation/unlinkFranchisee",e);p(t)&&t(n)}finally{a.unlinkFranchisee.delete(e)}}}},k=()=>{const e=h({show:!1,update:!1}),a=h({id:null,widget_app_type:null});return{loading:e,data:a,resetData:()=>{Object.assign(a,{id:null,widget_app_type:null})},actionUpdate:async(t=(()=>{}))=>{try{e.update=!0;const l=a,{id:c}=l,r=((e,a)=>{var t={};for(var l in e)i.call(e,l)&&a.indexOf(l)<0&&(t[l]=e[l]);if(null!=e&&n)for(var l of n(e))a.indexOf(l)<0&&o.call(e,l)&&(t[l]=e[l]);return t})(l,["id"]),d=await u.dispatch("setting/manageLocation/widgetCodeFranchisee",{id:c,data:s({},r)});p(t)&&t(d)}finally{e.update=!1}}}},j=()=>{const e=m(!1),a=m(null),t=m(null),n=m("monthly"),i=y((()=>{var e,a;return null==(a=null==(e=n.value)?void 0:e.toLowerCase)?void 0:a.call(e)}));return{loading:e,chargedProrateAmount:a,refundedProrateAmount:t,billingCycleType:i,getChargedProrateAmount:async()=>{try{e.value=!0;const t=await u.dispatch("setting/manageLocation/getProrateAmount",{type:"add"}),{total:i,interval:o}=t||{};a.value=i,n.value=o}catch(t){console.warn("Error while getting charged prorate price amount: ",t.message)}finally{e.value=!1}},getRefundedProrateAmount:async()=>{try{e.value=!0;const a=await u.dispatch("setting/manageLocation/getProrateAmount",{type:"remove"}),{total:i,interval:o}=a||{};t.value=i,n.value=o}catch(a){console.warn("Error while getting refunded prorate price amount: ",a.message)}finally{e.value=!1}}}};export{j as a,L as b,b as c,k as d,_ as e,w as s,F as u};
