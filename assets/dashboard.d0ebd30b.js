var e=Object.defineProperty,t=Object.defineProperties,r=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,l=(t,r,a)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[r]=a,i=(e,t)=>{for(var r in t||(t={}))s.call(t,r)&&l(e,r,t[r]);if(a)for(var r of a(t))o.call(t,r)&&l(e,r,t[r]);return e},n=(e,a)=>t(e,r(a));import{j as d}from"./vendor.f1efedad.js";import{s as b,aN as c,z as u}from"./index.9aa6481b.js";const h=d("dashboard",{state:()=>({getCard:{isLoading:!1,result:{},isLoadingItem:!1,resultItem:[]},getPersonalize:{abortController:null,result:void 0},lastFetched:new Map}),getters:{buybackType:()=>1===b.state.user.me.is_location_mail_in?"mailin":"instore"},actions:{async resetAll(){this.lastFetched=new Map},async $getPersonalize(){var e;const t="dashboard_card_pesonalize",{now:r,should:a}=c(this.lastFetched,t);if(!a)return this.getPersonalize.result;const s=await u({url:"/v1/pos/order-status/dashboard/setting",method:"get",params:{buyback_type:this.buybackType}});return null==(e=null==s?void 0:s.data)||e.forEach((e=>{this.getCard.result=n(i({},this.getCard.result),{[`dashboard_card_${e.id}`]:void 0})})),this.lastFetched.set(t,r),this.getPersonalize.result=s,s},async $updatePersonalize(e){this.getPersonalize.abortController&&this.getPersonalize.abortController.abort();const t=new AbortController;this.getPersonalize.abortController=t;try{await u({url:"/v1/pos/order-status/dashboard/setting",method:"put",data:n(i({},e),{buyback_type:this.buybackType}),signal:t.signal}),this.getPersonalize.abortController=null}catch(r){if("AbortError"!==r.name)throw r;console.log("Request Canceled!")}},async $getItem(e,t){return await u({url:`/v1/pos/dashboard/order/${e}`,method:"get",params:{month:"all",year:"all",limit:t,buyback_type:"mailin"===this.buybackType?1:2}})}}});export{h as u};
