{"version":3,"file":"index.7681e67c.js","sources":["../../src/views/integration/publicapi/index.vue","../../src/views/integration/publicapi/index.js"],"sourcesContent":["<template>\n  <div class=\"my-4\">\n    <label for=\"\">Secret Key</label>\n    <div class=\"flex\">\n      <Input\n        v-model=\"data.secret_key\"\n        :type=\"isRestrictedPublicApi ? 'password' : 'text'\"\n        view=\"default\"\n        class=\"mr-2\"\n        placeholder=\"\"\n        block\n        disabled\n      />\n      <Button\n        color=\"teal\"\n        @click=\"copyText(data.secret_key)\"\n        dense\n      >\n        <i class=\"material-symbols-outlined text-lg mx-2\">content_copy</i>\n      </Button>\n    </div>\n  </div>\n  <div class=\"my-4\">\n    <label for=\"\">Tenant ID</label>\n    <div class=\"flex\">\n      <Input\n        v-model=\"data.tenant_id\"\n        :type=\"isRestrictedPublicApi ? 'password' : 'text'\"\n        view=\"default\"\n        class=\"mr-2\"\n        placeholder=\"\"\n        block\n        disabled\n      />\n      <Button\n        color=\"teal\"\n        @click=\"copyText(data.tenant_id)\"\n        dense\n      >\n        <i class=\"material-symbols-outlined text-lg mx-2\">content_copy</i>\n      </Button>\n    </div>\n  </div>\n  <div class=\"my-4\">\n    <label for=\"\">Public API Key</label>\n    <div class=\"flex mb-6\">\n      <Input\n        v-model=\"data.api_key\"\n        :type=\"isRestrictedPublicApi ? 'password' : 'text'\"\n        view=\"default\"\n        class=\"mr-2\"\n        placeholder=\"\"\n        block\n        disabled\n      />\n      <Button color=\"teal\" @click=\"copyText(data.api_key)\" dense>\n        <i class=\"material-symbols-outlined text-lg mx-2\">content_copy</i>\n      </Button>\n    </div>\n  </div>\n  <!--\n    REMOVE MARKET PLACE\n    <div v-if=\"me.is_marketplace\" class=\"my-4\">\n      <label for=\"\">Marketplace Key</label>\n      <div class=\"flex mb-6\">\n        <Input\n          v-model=\"data.marketplace_key\"\n          :type=\"isRestrictedPublicApi ? 'password' : 'text'\"\n          view=\"default\"\n          class=\"mr-2\"\n          placeholder=\"\"\n          block\n          disabled\n        />\n        <Button\n          color=\"teal\"\n          @click=\"copyText(data.marketplace_key)\"\n          dense\n        >\n          <i class=\"material-symbols-outlined text-lg mx-2\">content_copy</i>\n        </Button>\n      </div>\n    </div>\n  -->\n  <!-- <Button\n    class=\"mr-2 mt-4\"\n    :loading=\"loading.public_api\"\n    color=\"teal\"\n    @click=\"showModal = true\"\n    dense\n  >\n    Generate New API Key\n  </Button> -->\n</template>\n\n<script>\nimport { defineComponent, computed, ref, watch } from 'vue'\nimport { useShowAll } from 'composable/integration'\nimport { usePaywall } from 'composable/paywall'\nimport { useUser } from 'composable/user'\nimport Button from 'bbUi/components/button/button.vue'\nimport Alert from 'bbUi/components/alert/alert.vue'\nimport Input from 'bbUi/components/input/input.vue'\nimport { ElMessage } from 'element-plus'\nimport Modal from 'bbUi/components/modal/modal.vue'\nimport { useRoute } from 'vue-router'\n\nexport default defineComponent({\n  components: {\n    Button,\n    Alert,\n    Input,\n    Modal\n  },\n  async setup() {\n    const {\n      state,\n      data,\n      actionPublicApi,\n      actionGeneratePublicApiKey,\n      loading\n    } = useShowAll()\n    const { isProPlan, me, hasPublicApiAccess } = useUser()\n    const { open: openPaywall } = usePaywall()\n    const showModal = ref(false)\n    const route = useRoute()\n\n    const isRestrictedPublicApi = computed(() =>\n      !isProPlan.value ? hasPublicApiAccess.value == 0 : false\n    )\n\n    const copyText = (text) => {\n      if (isRestrictedPublicApi.value) {\n        openPaywall({\n          title: 'API',\n          description:\n            'With our API, there are endless possibilities for what you can do with buybacks. Create your own custom buyback website or features, or integrate buyback directly into your app.',\n          image_url: '/images/paywall/paywall-public-api.svg'\n        })\n        return\n      }\n      navigator.clipboard.writeText(text).then(() => {\n        ElMessage({\n          type: 'success',\n          message: 'Text copied to clipboard'\n        })\n      })\n    }\n\n    watch(() => route.fullPath, async () => {\n      await actionPublicApi()\n    })\n\n\n    await Promise.all([actionPublicApi()])\n\n    return {\n      me,\n      state,\n      data,\n      loading,\n      showModal,\n      isRestrictedPublicApi,\n      copyText,\n    }\n  }\n})\n</script>\n","import { defineComponent, h, ref, reactive } from 'vue'\nimport { useSuspense } from 'composable/components'\nimport { useRoute, useRouter } from 'vue-router'\nimport Modal from 'bbUi/components/modal/modal.vue'\nimport Button from 'bbUi/components/button/button.vue'\nimport Index from './index.vue'\n\nexport default defineComponent({\n  async setup() {\n    const { genSuspense } = useSuspense()\n    const refComponent = ref(null)\n    const route = useRoute()\n    const router = useRouter()\n\n    const genComponent = () =>\n      genSuspense(\n        h(Index, {\n          ref: refComponent\n        })\n      )\n\n    const headerComponent = () => {\n      return h('div', { class: 'flex justify-between items-center w-full' }, [\n        h('span', 'Public API Account'),\n        h(Button, {\n          color: 'teal',\n          dense: true,\n          onClick: () => {\n            router.push({\n              name: 'integrationModal',\n              query: {\n                back: route.query.back\n              }\n            })\n          }\n        }, () => 'Generate New API Key')\n      ])\n    }\n\n    const modalProps = reactive({\n      modelValue: true,\n      closeTo: {\n        name: 'integration',\n        query: {\n          reload: 1\n        }\n      },\n      size: 'xs'\n    })\n    const modalSlots = reactive({\n      header: headerComponent,\n      default: () => genComponent(),\n      footer: () => ''\n    })\n\n    return () => h(Modal, modalProps, modalSlots)\n  }\n})\n"],"names":["_sfc_main","defineComponent","components","Button","Alert","Input","Modal","state","data","actionPublicApi","actionGeneratePublicApiKey","loading","useShowAll","isProPlan","me","hasPublicApiAccess","useUser","open","openPaywall","usePaywall","showModal","ref","route","useRoute","isRestrictedPublicApi","computed","value","watch","fullPath","async","Promise","all","copyText","text","title","description","image_url","navigator","clipboard","writeText","then","_u","type","message","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_openBlock","_createElementBlock","_Fragment","_createElementVNode","_cache","for","_createVNode","_component_Input","modelValue","_ctx","secret_key","onUpdate:modelValue","$event","view","placeholder","block","_component_Button","color","onClick","default","_withCtx","tenant_id","_hoisted_6","api_key","index","[object Object]","genSuspense","useSuspense","refComponent","router","useRouter","modalProps","reactive","closeTo","name","query","reload","size","modalSlots","header","h","dense","push","back","Index","footer"],"mappings":"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"}