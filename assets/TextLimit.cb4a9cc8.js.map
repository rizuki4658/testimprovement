{"version":3,"file":"TextLimit.cb4a9cc8.js","sources":["../../src/components/TextLimit.vue"],"sourcesContent":["<script setup>\nimport { defineProps, ref, onMounted, onUnmounted } from 'vue'\n\nconst props = defineProps({\n  text: {\n    type: String,\n    default: ''\n  },\n  limit: {\n    type: Number,\n    default: 25\n  },\n  tooltipMaxWidth: {\n    type: Number,\n    default: 9999\n  },\n  tooltipPlacement: {\n    type: String,\n    default: 'bottom'\n  }\n})\n\nconst textRef = ref(null)\nconst childEl = ref(null)\nconst isShowTooltip = ref(false)\n\nlet observer\n\nconst onMouseEneter = () => {\n  const el = childEl.value\n  if (el) {\n    const hasOverflow = el.scrollWidth > el.clientWidth\n    isShowTooltip.value = hasOverflow\n    el.classList.toggle('cursor-pointer', hasOverflow)\n  }\n}\n\nonMounted(() => {\n  const wrapper = textRef.value\n  if (wrapper) {\n    childEl.value = wrapper.firstElementChild\n    if (childEl.value) {\n      childEl.value.classList.add('truncate')\n\n      observer = new ResizeObserver(() => {\n        onMouseEneter()\n      })\n\n      observer.observe(childEl.value)\n\n      childEl.value.addEventListener('mouseenter', onMouseEneter)\n    }\n  }\n})\n\nonUnmounted(() => {\n  if (childEl.value) {\n    childEl.value.removeEventListener('mouseenter', onMouseEneter)\n    observer?.disconnect()\n  }\n})\n</script>\n\n<template>\n  <Tooltip :placement=\"tooltipPlacement\" :disabled=\"!isShowTooltip\">\n    <template #content>\n      <div :style=\"{ maxWidth: `${tooltipMaxWidth}px` }\">\n        <p>{{ text }}</p>\n      </div>\n    </template>\n\n    <div\n      ref=\"textRef\"\n      class=\"overflow-hidden inline-block\">\n      <slot :text=\"text\">\n        {{ text }}\n      </slot>\n    </div>\n  </Tooltip>\n</template>\n\n<style scoped>\n.ellipsis-text {\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  max-width: 100%;\n  font-size: 1.125rem;\n}\n</style>\n"],"names":["textRef","ref","childEl","isShowTooltip","observer","onMouseEneter","el","value","hasOverflow","scrollWidth","clientWidth","classList","toggle","onMounted","wrapper","firstElementChild","add","ResizeObserver","observe","addEventListener","onUnmounted","removeEventListener","disconnect"],"mappings":"yVAsBA,MAAMA,EAAUC,EAAI,MACdC,EAAUD,EAAI,MACdE,EAAgBF,GAAI,GAEtB,IAAAG,EAEJ,MAAMC,EAAgB,KACpB,MAAMC,EAAKJ,EAAQK,MACnB,GAAID,EAAI,CACA,MAAAE,EAAcF,EAAGG,YAAcH,EAAGI,YACxCP,EAAcI,MAAQC,EACnBF,EAAAK,UAAUC,OAAO,iBAAkBJ,YAI1CK,GAAU,KACR,MAAMC,EAAUd,EAAQO,MACpBO,IACFZ,EAAQK,MAAQO,EAAQC,kBACpBb,EAAQK,QACFL,EAAAK,MAAMI,UAAUK,IAAI,YAEjBZ,EAAA,IAAIa,gBAAe,KAC5BZ,OAGFD,EAASc,QAAQhB,EAAQK,OAEjBL,EAAAK,MAAMY,iBAAiB,aAAcd,QAKnDe,GAAY,KACNlB,EAAQK,QACFL,EAAAK,MAAMc,oBAAoB,aAAchB,GACtC,MAAAD,GAAAA,EAAAkB"}