var a=Object.defineProperty,e=Object.defineProperties,t=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,n=(e,t,s)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,r=(a,e)=>{for(var t in e||(e={}))o.call(e,t)&&n(a,t,e[t]);if(s)for(var t of s(e))l.call(e,t)&&n(a,t,e[t]);return a};import{u as d}from"./components.00bf6492.js";import{k as i,r as u,g as m,y as c,m as f,o as p,t as b,a1 as v,a2 as y,D as g,K as k,a5 as h,f as C,$ as B,B as _,w as T,I as w,A as x,n as j,O as P,aw as I,a3 as M,aU as U,a6 as A,_ as O}from"./vendor.9695fe57.js";import{c as V,d as D,b as F,e as S}from"./customer.0e359727.js";import{f as E}from"./setting.10b5d883.js";import{f as $,u as G,_ as q,b as z,d as N}from"./index.c2f66179.js";import{C as R}from"./card.f57f7ca5.js";import{_ as Z}from"./tab.c78d43fc.js";import{C as J}from"./Form.40aeeb48.js";import{A as K,E as L,P as H,S as Q,a as W,V as X,C as Y,Z as aa,c as ea,b as ta,d as sa,G as oa,F as la,e as na,f as ra,g as da,I as ia,D as ua,B as ma,h as ca,R as fa,i as pa}from"./Custom.97caf407.js";import{S as ba}from"./select.9d161386.js";import{u as va}from"./index.f40e4a9e.js";import{b as ya}from"./index.54844a74.js";import{B as ga}from"./Breadcrumb.9ae3c470.js";import"./LoadingCard.c138fa92.js";import"./date.f86face7.js";import"./format.f845777a.js";import"./index.6b6f6369.js";import"./InputPhone.9a75428a.js";import"./SelectCountry.7b805536.js";import"./buyback.5c4fd99a.js";import"./breadcrumb.4b2ddf0a.js";const ka=i({components:{Input:$,Select:ba},props:{list:{type:Array,default:()=>[]},data:{type:Object,default:()=>({})},disabled:{type:Boolean,default:!1},attributes:{type:Array,default:()=>[]}},emits:["update:data"],setup(a,{emit:e}){const{bankTransferConfig:t,isUseIBAN:s}=G(),o=u({}),l=m((()=>ya(a.attributes))),n=va(l,o,{$lazy:!0});return c((()=>o),(()=>{e("update:data",o)}),{deep:!0}),c((()=>JSON.stringify(a.attributes)),(()=>{(()=>{for(let e of a.attributes)Object.keys(a.data).includes(e.attribute_name)?o[e.attribute_name]=a.data[e.attribute_name]:o[e.attribute_name]=""})()}),{immediate:!0,deep:!0}),{data:o,validation:n,validate:()=>(n.value.$validate(),!n.value.$invalid),bankTransferConfig:t,isUseIBAN:s}}});const ha=i({components:{Button:z,Card:R,Modal:N,BankTransferForm:q(ka,[["render",function(a,e,t,s,o,l){const n=f("Input");return p(),b("div",null,[(p(!0),b(v,null,y(a.attributes,(e=>(p(),b("div",{class:"mb-4",key:e.attribute_name},[g(n,{modelValue:a.data[e.attribute_name],"onUpdate:modelValue":t=>a.data[e.attribute_name]=t,type:"text",label:e.name,class:"w-full",placeholder:e.name,disabled:a.disabled,view:a.validation[e.attribute_name].$invalid?"danger":"default"},null,8,["modelValue","onUpdate:modelValue","label","placeholder","disabled","view"]),(p(!0),b(v,null,y(a.validation[e.attribute_name].$errors,((a,e)=>(p(),b("small",{class:"text-red-base block mt-2",key:e},k(a.$message)+". ",1)))),128))])))),128))])}]])},setup(){const{bankTransferConfig:a}=G(),{state:e}=V(),{data:t,loading:s,modal:o,selected:l,openModal:n,unsetData:r,actionAll:d,actionCreate:i,actionUpdate:u,actionDelete:c}=D(),{state:f,loading:p,action:b}=E(),v=h(),y=C(null),g=C([]),k=m((()=>{const a=f.value.find((a=>"Bank Transfer"===a.name&&4===a.id));return a?a.attributes:[]})),B=m((()=>!!l.value));return{refBankTransferForm:y,data:t,modal:o,selected:l,loading:s,loadingPaymentMethods:p,openModal:n,unsetData:r,state:e,statePaymentMethods:f,selectedBankTranfserAttributes:g,bankTransferAttributes:k,isBankTransferFormUpdate:B,editBank:a=>{if(a.bank_transfer){for(let e of a.bank_transfer)t[e.attribute_name]=e.value;g.value=a.bank_transfer}l.value=a.id},bankTransferConfig:a,openModalSelected:(a,e)=>n(a,(()=>{l.value=e.id})),createBankTransfer:async()=>{var a;(null==(a=y.value)?void 0:a.validate())&&await i(v.params.customerId,(async()=>{await d(v.params.customerId)}))},updateBankTransfer:async()=>{var a;(null==(a=y.value)?void 0:a.validate())&&await u(v.params.customerId,(async()=>{await d(v.params.customerId)}))},deleteBankTransfer:async()=>{await c(v.params.customerId,(async()=>{await d(v.params.customerId)}))},handleAddBankTransferInfo:async()=>{await b(),n("form")},handleFormUpdate:a=>{Object.assign(t,a)}}}}),Ca={class:"text-right"},Ba={key:0,class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-2 xl:grid-cols-3 gap-4"},_a={class:"flex mb-4"},Ta={class:"font-semibold mb-0"},wa={class:"flex ml-auto gap-2"},xa={class:"small mb-0"},ja={class:"mb-3"},Pa={key:1,class:"text-center text-red-base font-bold"};const Ia=i({components:{Button:z,Card:R,Tab:Z,CustomerForm:J,AmazonGiftCard:K,BankTransfer:q(ha,[["render",function(a,e,t,s,o,l){const n=f("Button"),r=f("Card"),d=f("BankTransferForm"),i=f("Modal"),u=B("loading");return p(),b("div",null,[_("div",Ca,[g(n,{view:"smooth",color:"teal",onClick:a.handleAddBankTransferInfo,loading:a.loadingPaymentMethods,dense:""},{default:T((()=>e[2]||(e[2]=[w("Add Bank")]))),_:1},8,["onClick","loading"])]),e[9]||(e[9]=_("hr",{class:"mt-5 mb-8 border-grey-01"},null,-1)),a.state.banks.length>0?x((p(),b("div",Ba,[(p(!0),b(v,null,y(a.state.banks,((t,s)=>(p(),j(r,{key:s},{default:T((()=>[_("div",_a,[_("p",Ta,k(t.full_name),1),_("div",wa,[g(n,{view:"smooth",color:"blue",onClick:e=>(a.editBank(t),a.openModal("form")),dense:""},{default:T((()=>e[3]||(e[3]=[_("i",{class:"fas fa-edit"},null,-1)]))),_:2},1032,["onClick"]),g(n,{view:"smooth",color:"red",onClick:e=>a.openModalSelected("delete",t),dense:""},{default:T((()=>e[4]||(e[4]=[_("i",{class:"fas fa-trash"},null,-1)]))),_:2},1032,["onClick"])])]),(p(!0),b(v,null,y(t.bank_transfer,(a=>(p(),b("div",{key:a.attribute_name},[_("p",xa,k(a.name)+":",1),_("p",ja,k(a.value),1)])))),128))])),_:2},1024)))),128))])),[[u,a.loading.all]]):(p(),b("p",Pa," There's no available data to show. ")),g(i,{modelValue:a.modal.form,"onUpdate:modelValue":e[0]||(e[0]=e=>a.modal.form=e),title:null===a.selected?"Add Bank Transfer":"Edit Bank Transfer",onClose:a.unsetData},{footer:T((()=>[null===a.selected?(p(),j(n,{key:0,loading:a.loading.form,onClick:a.createBankTransfer,color:"teal",view:"smooth"},{default:T((()=>e[5]||(e[5]=[w("Add Bank Transfer")]))),_:1},8,["loading","onClick"])):(p(),j(n,{key:1,loading:a.loading.form,onClick:a.updateBankTransfer,color:"teal",view:"smooth"},{default:T((()=>e[6]||(e[6]=[w("Update Bank Transfer")]))),_:1},8,["loading","onClick"]))])),default:T((()=>[g(d,{ref:"refBankTransferForm",data:a.data,"onUpdate:data":a.handleFormUpdate,attributes:a.isBankTransferFormUpdate?a.selectedBankTranfserAttributes:a.bankTransferAttributes},null,8,["data","onUpdate:data","attributes"])])),_:1},8,["modelValue","title","onClose"]),g(i,{modelValue:a.modal.delete,"onUpdate:modelValue":e[1]||(e[1]=e=>a.modal.delete=e),size:"xs",title:"Delete Bank",onClose:a.unsetData},{footer:T((()=>[g(n,{loading:a.loading.delete,view:"smooth",color:"red",onClick:a.deleteBankTransfer},{default:T((()=>e[7]||(e[7]=[w("Delete")]))),_:1},8,["loading","onClick"])])),default:T((()=>[e[8]||(e[8]=_("p",{class:"my-5"},"Are you sure want to delete this bank data?",-1))])),_:1},8,["modelValue","onClose"])])}]]),PaperCheck:L,ExpressCheck:L,PayPal:H,Swish:Q,SquareCash:W,Venmo:X,Coinbase:Y,Zelle:aa,CashApp:ea,Cash:ta,ApplePay:sa,GooglePay:oa,FacebookPay:la,StoreCredit:na,VirtualDebitCard:ra,GiftCard:da,InteraceTransfer:ia,Donate:ua,Bill:ma,ECheck:ca,Rebate:fa,Custom:pa,Breadcrumb:ga},async setup(){const a=C(null),s=h(),o=P(),{data:l,loading:n,action:d}=F(),{state:i,data:f,loading:p,action:b,actionUpdate:v,actionUpdateCustom:y}=V(),{state:g,action:k}=E(),{action:B,loading:_}=S();await Promise.all([d({id:s.params.customerId,is_store:1}),b(s.params.customerId),k()]);const T=u(s);c((()=>({name:s.name,query:s.query,params:s.params})),((a,e)=>{T.value=e}));const w=Object.assign({},f.value),x=C(null),j=C(null);j.value=g.value[0];const M=m((()=>{const a={};return"BankTransfer"!==j.value.component&&(a["update:data"]=a=>f.value=a),a})),U=m((()=>{const a={};if("BankTransfer"===j.value.component||j.value.is_custom||(a.data=f.value),j.value.is_custom){const e=i.value.custom&&i.value.custom.custom_payout&&[...i.value.custom.custom_payout].shift()||{};a.data={[e.attribute_name]:e.value},a.payout=j.value}return a})),A=I(l)?l:u(r({},l.value));return{data:A,dataPaymentInfo:f,loadingUpdate:_,paymentMethod:j,statePaymentInfo:i,statePaymentMethods:g,vOn:M,vBind:U,updateCustomer:async()=>{var l,n;a.value.validate()&&(!x.value.validate||x.value.validate&&x.value.validate())&&(await B(s.params.customerId,r({},A)),j.value.is_custom?await y(s.params.customerId,r({},x.value.data)):await v(s.params.customerId,(l=r({},f.value),n={payment_method:j.value.name},e(l,t(n)))),O({message:"Data has been updated!",type:"success"}),T.value&&T.value.name?o.push({name:T.value.name,params:T.value.params}):o.push({name:"layoutCustomer"}))},resetData:()=>{f.value=Object.assign({},w)},breadcrumb:[{text:"Customer",to:{name:"layoutCustomer"}},{text:"Edit Customer"}],refForm:a,refPaymentMethod:x,backTo:T}}}),Ma={class:"space-y-10"},Ua={class:"space-y-5"},Aa={class:"space-y-5"},Oa={class:"grid grid-cols-5 gap-4 border border-grey-01 rounded-lg ml-14"},Va={class:"xl:col-span-1 lg:col-span-2 col-span-5 xl:border-r lg:border-r border-r-0 border-grey-01 p-5"},Da={class:"xl:col-span-4 lg:col-span-3 col-span-5 p-5"};var Fa=q(Ia,[["render",function(a,e,t,s,o,l){const n=f("Button"),r=f("Breadcrumb"),d=f("CustomerForm"),i=f("Tab"),u=f("Card");return p(),b("div",null,[g(r,{class:"mb-8 mt-4",pageTitle:"Edit Customer",backTo:{name:"layoutCustomer"},items:a.breadcrumb},{right:T((()=>[g(n,{color:"teal",loading:a.loadingUpdate,onClick:a.updateCustomer},{default:T((()=>e[2]||(e[2]=[w("Save Changes")]))),_:1},8,["loading","onClick"])])),_:1},8,["items"]),g(u,null,{default:T((()=>[_("div",Ma,[_("div",Ua,[e[3]||(e[3]=_("div",{class:"flex"},[_("div",{class:"flex w-10 h-10 bg-teal-04 rounded-full text-white font-semibold"},[_("div",{class:"my-auto mx-auto"},"1")]),_("h6",{class:"text-lg text-teal-04 ml-5 my-auto"}," Personal Information ")],-1)),g(d,{data:a.data,"onUpdate:data":e[0]||(e[0]=e=>a.data=e),class:"mb-4 ml-14",ref:"refForm"},null,8,["data"])]),_("div",Aa,[e[5]||(e[5]=_("div",{class:"flex"},[_("div",{class:"flex w-10 h-10 bg-teal-04 rounded-full text-white font-semibold"},[_("div",{class:"my-auto mx-auto"},"2")]),_("h6",{class:"text-lg text-teal-04 ml-5 my-auto"}," Payout Information ")],-1)),_("div",Oa,[_("div",Va,[e[4]||(e[4]=_("p",{class:"mb-3 font-semibold ml-3"},"Choose Payout Method",-1)),g(i,{modelValue:a.paymentMethod,"onUpdate:modelValue":e[1]||(e[1]=e=>a.paymentMethod=e),by:null,items:a.statePaymentMethods,onChange:a.resetData,"use-external-icon":!0,component:"",type:"vertical"},null,8,["modelValue","items","onChange"])]),_("div",Da,[a.paymentMethod.is_custom?(p(),j(A(a.paymentMethod.component),M({key:0},a.vBind,U(a.vOn),{ref:"refPaymentMethod"}),null,16)):(p(),j(A(a.paymentMethod.component),M({key:1},a.vBind,U(a.vOn),{ref:"refPaymentMethod"}),null,16))])])])])])),_:1})])}]]),Sa=i({setup(){const{genSuspense:a}=d();return()=>a(Fa)}});export{Sa as default};
