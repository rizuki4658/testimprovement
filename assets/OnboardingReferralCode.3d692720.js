import{z as e,f as a,R as l,b as r,d,t as s}from"./index.e231b017.js";import{_ as o}from"./success.3f91e874.js";import{j as i,f as t,o as n,t as c,D as u,w as f,B as p,ap as v,U as m,I as C,K as g}from"./vendor.f1efedad.js";const y=i("onboarding",{state:()=>({referralCode:{modal:!1,isError:!1,isLoading:!1,result:void 0}}),getters:{},actions:{async $applyReferralCode(a={referral_code:void 0}){const l=await e({url:"/v1/pos/billing/apply-referral",method:"post",data:a});this.referralCode.result=l}}}),h={key:0},x={key:0,class:"text-red-04"},b={key:1,class:"flex flex-col justify-center items-center gap-8 py-10"},k={class:"flex justify-center items-center gap-x-4"},w={key:2,class:"flex flex-col justify-center items-center gap-8 py-10"},_={class:"space-y-2 text-center"},j={class:"text-sm text-grey-03"},E={class:"flex justify-center items-center gap-x-4"},L={class:"flex items-center justify-end gap-x-4"},V={__name:"OnboardingReferralCode",emits:["skip","applied"],setup(e,{emit:i}){const V=i,A=y(),R=t(!1),U=t(null),z=t(!1),I=()=>{A.referralCode.modal=!1,R.value=!1,U.value=null},O=()=>{V("skip"),I()},W=()=>{R.value=!0},$=()=>{R.value=!1},B=async()=>{await s(A.referralCode,(()=>A.$applyReferralCode({referral_code:U.value}).then((()=>{z.value=!0,A.referralCode.isError=!1,V("applied")})).catch((()=>{z.value=!1,R.value=!1,A.referralCode.isError=!0}))))},D=()=>{O()},H=()=>{A.referralCode.isError&&(A.referralCode.isError=!1)};return(e,s)=>(n(),c("div",null,[u(d,{modelValue:v(A).referralCode.modal,"onUpdate:modelValue":s[1]||(s[1]=e=>v(A).referralCode.modal=e),size:"xs","hide-header":R.value,"hide-footer":R.value,onClose:I},{header:f((()=>s[2]||(s[2]=[p("span",null,"Have a referral code?",-1)]))),default:f((()=>{var e,d;return[R.value?!z.value&&R.value?(n(),c("div",b,[s[6]||(s[6]=p("img",{src:l,alt:"Warning icon",height:"10",width:"10",class:"w-40"},null,-1)),s[7]||(s[7]=p("div",{class:"space-y-2 text-center"},[p("h5",{class:"font-medium text-2xl"},"Apply referral code"),p("p",{class:"text-sm text-grey-03"},"Only one referral source can be used per subscription.")],-1)),p("div",k,[u(r,{disabled:v(A).referralCode.isLoading,color:"white",view:"outlined",onClick:$},{default:f((()=>s[4]||(s[4]=[C(" Cancel ")]))),_:1},8,["disabled"]),u(r,{disabled:v(A).referralCode.isLoading,loading:v(A).referralCode.isLoading,color:"teal",onClick:B},{default:f((()=>s[5]||(s[5]=[C(" Yes, Apply ")]))),_:1},8,["disabled","loading"])])])):z.value&&R.value?(n(),c("div",w,[s[10]||(s[10]=p("img",{src:o,alt:"Warning icon",height:"10",width:"10",class:"w-40"},null,-1)),p("div",_,[s[8]||(s[8]=p("h5",{class:"font-medium text-2xl"},"Apply referral code applied succesfully!",-1)),p("p",j,g(null!=(d=null==(e=v(A).referralCode.result)?void 0:e.message)?d:"-"),1)]),p("div",E,[u(r,{disabled:v(A).referralCode.isLoading,loading:v(A).referralCode.isLoading,color:"teal",onClick:D},{default:f((()=>s[9]||(s[9]=[C(" Continue to App ")]))),_:1},8,["disabled","loading"])])])):m("",!0):(n(),c("div",h,[u(a,{modelValue:U.value,"onUpdate:modelValue":s[0]||(s[0]=e=>U.value=e),view:v(A).referralCode.isError?"danger":"default",disabled:v(A).referralCode.isLoading,placeholder:"Enter referral code",block:"",onInput:H},{label:f((()=>s[3]||(s[3]=[p("span",{class:"font-medium"}," Referral Code ",-1)]))),_:1},8,["modelValue","view","disabled"]),v(A).referralCode.isError?(n(),c("small",x," The referral code you entered is invalid ")):m("",!0)]))]})),footer:f((()=>{var e;return[p("div",L,[u(r,{disabled:v(A).referralCode.isLoading,color:"white",view:"outlined",onClick:O},{default:f((()=>s[11]||(s[11]=[C(" Skip ")]))),_:1},8,["disabled"]),u(r,{disabled:!U.value||(null==(e=U.value)?void 0:e.length)<=3,color:"teal",onClick:W},{default:f((()=>s[12]||(s[12]=[C(" Apply Code ")]))),_:1},8,["disabled"])])]})),_:1},8,["modelValue","hide-header","hide-footer"])]))}};export{V as _,y as u};
