var a=Object.defineProperty,e=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,o=(e,t,l)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):e[t]=l,s=(a,s)=>{for(var r in s||(s={}))t.call(s,r)&&o(a,r,s[r]);if(e)for(var r of e(s))l.call(s,r)&&o(a,r,s[r]);return a};import{h as r}from"./dashboard.e0b0dd28.js";import{C as d}from"./card.6a96327d.js";import{C as n}from"./CardHeader.d0ce4a2b.js";import{p as i}from"./chartjs-plugin-zoom.esm.f842a922.js";import{_ as u,b as c,u as p,a5 as m}from"./index.161fb295.js";import{f,y as b,W as h,o as y,t as v,B as g,k as C,m as x,n as j,w,I as S,K as k,D as L}from"./vendor.f1efedad.js";import{C as R}from"./chart.b16d9eb5.js";import{S as V}from"./select.fad79672.js";import{C as B}from"./Currency.009127db.js";import{_ as F}from"./group-container.8de30f60.js";import"./date.f86face7.js";import"./setting.a9fe6242.js";const M={ref:"chartRef",height:"105",id:"charts"};const _=C({components:{Card:d,CardHeader:n,ChartDashboard:u({components:{Button:c},props:{labels:Array,data:Array,dataLeads:Array,type:{default:"line",type:String}},setup(a){var e,t,l;const o=f(null),{me:r}=p(),d=f(!1),n={chart:null,props:s({},a)},u=(a=>{const e=Math.pow(10,Math.floor(Math.log10(a)));return Math.ceil(a/e)*e})(Math.max(...a.data,...a.dataLeads)),c=Math.max((null==(e=null==a?void 0:a.dataLeads)?void 0:e.filter((a=>a>0)).length)||0,(null==(l=null==(t=null==a?void 0:a.data)?void 0:t.filter((a=>0)))?void 0:l.length)||0),y=Math.ceil(u/c),v={id:"extraLegendSpacing",beforeInit(a){const e=a.legend.fit;a.legend.fit=function(){e.bind(a.legend)(),this.height+=20}}},g=(a,e,t)=>{if(n.chart)return n.chart.update("reset");var l=document.getElementById("charts").getContext("2d").createLinearGradient(0,0,0,400);return l.addColorStop(0,"#4ED3BB"),l.addColorStop(.5,"#4ED3BB"),l.addColorStop(1,"#FFFFFF"),R.register(i),R.defaults.font.family="'Poppins'",R.register(i,v),n.chart=new R(o.value.getContext("2d"),{type:n.props.type,responsive:!1,maintainAspectRatio:!1,options:{plugins:{legend:{display:!0,labels:{usePointStyle:!0,pointStyle:"circle",color:"#a8a8a890"}},tooltip:{callbacks:{label:function(a){let e=a.dataset.label||"";return e&&(e+=": "),null!==a.parsed.y&&(e+=m(r.value,a.parsed.y)),e}}}},scales:{y:{max:u+y,ticks:{stepSize:y,beginAtZero:!0,color:"#a8a8a890",callback:a=>m(r.value,a),autoSkip:!0,font:{size:12}}},x:{ticks:{callback:function(a){return window.innerWidth<=1028?this.getLabelForValue(a).slice(0,3):this.getLabelForValue(a)},color:"#a8a8a890",autoSkip:!1,maxRotation:0,minRotation:0,font:{size:12}}}}},data:{labels:a,datasets:[{label:"Paid",data:e,fill:!1,backgroundColor:"#424242",borderColor:"#424242",tension:.4,smooth:!0,borderWidth:1.5,pointRadius:0,pointHoverRadius:5,pointHitRadius:20},{label:"Leads",data:t,fill:!1,backgroundColor:"#1672ec",borderColor:"#1672ec",tension:.4,smooth:!0,borderWidth:1.5,pointRadius:0,pointHoverRadius:5,pointHitRadius:20}]}})};return b((()=>({data:a.data,dataLeads:a.dataLeads})),(()=>{n.chart&&(n.chart.destroy(),n.chart=null),g(a.labels,a.data,a.dataLeads)}),{deep:!0}),h((()=>g(a.labels,a.data,a.dataLeads))),{chartRef:o,togglePoints:()=>{d.value=!d.value,n.chart&&(n.chart.data.datasets.forEach((a=>{a.pointRadius=d.value?3:0,a.pointHoverRadius=d.value?5:6})),n.chart.update())}}}},[["render",function(a,e,t,l,o,s){return y(),v("div",null,[g("canvas",M,null,512)])}]]),Select:V,Currency:B,GroupContainer:F},async setup(){const{data:a,state:e,chart:t}=r(),l=(()=>{for(var a=(new Date).getFullYear(),e=a-9,t=[],l=a;l>=e;l--)t.push(l);return t})();return await t(),b((()=>a),(async()=>{await t()}),{deep:!0}),{data:a,state:e,months:[{id:"all",name:"All"},{id:1,name:"January"},{id:2,name:"February"},{id:3,name:"March"},{id:4,name:"April"},{id:5,name:"May"},{id:6,name:"June"},{id:7,name:"July"},{id:8,name:"August"},{id:9,name:"September"},{id:10,name:"October"},{id:11,name:"November"},{id:12,name:"December"}],years:l,localBuyback:[{id:"",name:"All"},{id:"leads",name:"Leads"},{id:"paid",name:"Paid"}]}}}),A={class:"sm:flex"},P={class:"w-1/2 space-y-3"},D={class:"text-teal-02"},H={class:"text-teal-04 font-bold"},O={class:"text-teal-02"},I={class:"text-teal-04 font-bold"},E={class:"text-teal-02"},z={class:"text-teal-04 font-bold"},W={class:"w-1/2 flex"};var G=u(_,[["render",function(a,e,t,l,o,s){const r=x("Currency"),d=x("Select"),n=x("GroupContainer"),i=x("ChartDashboard"),u=x("Card");return y(),j(u,{class:"shadow-lg h-full"},{default:w((()=>[g("div",A,[g("div",P,[g("p",D,[e[3]||(e[3]=S(" Total Buybacks: ")),g("span",H,k(a.state.total_count),1)]),g("p",O,[e[4]||(e[4]=S(" Total Payouts: ")),g("span",I,[L(r,{value:a.state.total},null,8,["value"])])]),g("p",E,[e[5]||(e[5]=S(" Total Item Quantity: ")),g("span",z,k(a.state.total_device_quantity),1)])]),g("div",W,[L(n,{class:"filter-container"},{default:w((()=>[L(d,{placeholder:"Status",class:"w-full",items:a.localBuyback,by:"id",name:"name",modelValue:a.data.local,"onUpdate:modelValue":e[0]||(e[0]=e=>a.data.local=e)},null,8,["items","modelValue"]),L(d,{placeholder:"Month",class:"w-full",items:a.months,by:"id",name:"name",modelValue:a.data.month,"onUpdate:modelValue":e[1]||(e[1]=e=>a.data.month=e)},null,8,["items","modelValue"]),L(d,{class:"w-full",items:a.years,modelValue:a.data.year,"onUpdate:modelValue":e[2]||(e[2]=e=>a.data.year=e)},null,8,["items","modelValue"])])),_:1})])]),L(i,{labels:a.state.labels,data:a.state.data,"data-leads":a.state.data_leads},null,8,["labels","data","data-leads"])])),_:1})}],["__scopeId","data-v-30e5daf0"]]);export{G as default};
