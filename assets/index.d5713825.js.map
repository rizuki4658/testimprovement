{"version":3,"file":"index.d5713825.js","sources":["../../src/views/integration/tremendous/index.vue"],"sourcesContent":["<script setup>\nimport { useTemplateRef } from 'vue'\nimport { useRoute, useRouter } from 'vue-router'\nimport { useAll } from '@/composable/integration'\nimport { tryCatchRequest } from '@/utils/request'\nimport { useIntegrationTremendous } from '@/store/pinia/integration/tremendeous'\n\nimport { ElMessage } from 'element-plus'\nimport Button from 'bbUi/components/button'\nimport Modal from 'bbUi/components/modal'\nimport BaseLoading from '@/components/BaseLoading.vue'\n\nconst excludeRoutes = ['integrationTremendousCampaignTemplate', 'integrationTremendousConfig']\nconst route = useRoute()\nconst router = useRouter()\nconst refComponent = useTemplateRef('refComponent')\nconst integrationTremendousStore = useIntegrationTremendous()\nconst { getIntegrationByName } = useAll()\n\nconst handleCloseForm = async () => {\n\tawait router.push({\n\t\tname: 'integration'\n\t})\n\n\tintegrationTremendousStore.reset()\n}\n\nconst onSubmit = async () => {\n\tif (route.name === 'integrationTremendousCampaignTemplate') {\n\t\tif (refComponent.value.onValidate())\n\t\t\tawait router.push({ name: 'integrationTremendousConfig' })\n\t}\n\telse {\n\t\tawait tryCatchRequest(integrationTremendousStore.update, async () => {\n\t\t\tawait integrationTremendousStore.$update().then(() => {\n\t\t\t\tElMessage({\n\t\t\t\t\ttype: 'success',\n\t\t\t\t\tmessage: 'Update Successful!'\n\t\t\t\t})\n\t\t\t})\n\t\t})\n\n\t\thandleCloseForm()\n\t}\n}\n\nawait integrationTremendousStore.$get()\n\nif (route.path !== '/add-ons/tremendous/callback') {\n\tif (\n\t\tgetIntegrationByName('tremendous').is_enable === 1 &&\n\t\troute.path !== '/add-ons/tremendous/callback'\n\t) {\n\t\tif (!integrationTremendousStore.form.selectedCampaignId)\n\t\t\trouter.push({\n\t\t\t\tname: 'integrationTremendousCampaignTemplate'\n\t\t\t})\n\t\telse router.push({\n\t\t\tname: 'integrationTremendousConfig'\n\t\t})\n\t}\n\telse\n\t\trouter.push({\n\t\t\tname: 'integrationTremendousConnect'\n\t\t})\n}\n</script>\n\n<template>\n\t<Modal\n\t\tsize=\"md\"\n\t\t:modelValue=\"true\"\n\t\t:hideFooter=\"!excludeRoutes.includes(route.name)\"\n\t\t@click-close=\"handleCloseForm\"\n\t\twithout-transition>\n\t\t<template #header>\n\t\t\t<div class=\"flex justify-between\">\n\t\t\t\t<span>Tremendous Settings</span>\n\t\t\t\t<Button v-if=\"route.name === 'integrationTremendousConfig'\" color=\"teal\" to=\"/add-ons/tremendous/campaign-template\" link dense>\n\t\t\t\t\tEdit Template\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t</template>\n\t\t<template #default>\n\t\t\t<RouterView v-slot=\"{ Component, route }\">\n\t\t\t\t<template v-if=\"Component\">\n\t\t\t\t\t<Transition name=\"slide-fade\" :key=\"route.matched[route.matched.length - 2].name\">\n\t\t\t\t\t\t<Suspense>\n\t\t\t\t\t\t\t<template #default>\n\t\t\t\t\t\t\t\t<div v-loading=\"integrationTremendousStore.isLoading\">\n\t\t\t\t\t\t\t\t\t<keep-alive>\n\t\t\t\t\t\t\t\t\t\t<component ref=\"refComponent\" :is=\"Component\" />\n\t\t\t\t\t\t\t\t\t</keep-alive>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<template #fallback>\n\t\t\t\t\t\t\t\t<div class=\"w-full flex items-center justify-center\">\n\t\t\t\t\t\t\t\t\t<BaseLoading />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</Suspense>\n\t\t\t\t\t</Transition>\n\t\t\t\t</template>\n\t\t\t</RouterView>\n\t\t</template>\n\t\t<template #footer>\n\t\t\t<Button :loading=\"integrationTremendousStore.isLoading\" color=\"teal\" @click=\"onSubmit\">\n\t\t\t\t<template v-if=\"route.name === 'integrationTremendousCampaignTemplate'\">Continue</template>\n\t\t\t\t<template v-else>Save</template>\n\t\t\t</Button>\n\t\t</template>\n\t</Modal>\n</template>\n"],"names":["excludeRoutes","route","useRoute","router","useRouter","refComponent","useTemplateRef","integrationTremendousStore","useIntegrationTremendous","getIntegrationByName","useAll","handleCloseForm","async","push","name","reset","onSubmit","value","onValidate","tryCatchRequest","update","$update","then","_u","type","message","__temp","__restore","_withAsyncContext","$get","path","is_enable","form","selectedCampaignId"],"mappings":"4dAYM,MAAAA,EAAgB,CAAC,wCAAyC,+BAC1DC,EAAQC,IACRC,EAASC,IACTC,EAAeC,EAAe,gBAC9BC,EAA6BC,KAC7BC,qBAAEA,GAAyBC,IAE3BC,EAAkBC,gBACjBT,EAAOU,KAAK,CACjBC,KAAM,gBAGoBP,EAAAQ,SAGtBC,EAAWJ,UACG,0CAAfX,EAAMa,KACLT,EAAaY,MAAMC,oBAChBf,EAAOU,KAAK,CAAEC,KAAM,uCAGrBK,EAAgBZ,EAA2Ba,QAAQR,gBAClDL,EAA2Bc,UAAUC,MAAK,KACrCC,EAAA,CACTC,KAAM,UACNC,QAAS,6BAKZd,aAIFe,EAAAC,GAAAC,GAAA,IAAMrB,EAA2BsB,qBAEd,iCAAf5B,EAAM6B,OAEyC,IAAjDrB,EAAqB,cAAcsB,WACpB,iCAAf9B,EAAM6B,KAEDvB,EAA2ByB,KAAKC,mBAIhC9B,EAAOU,KAAK,CAChBC,KAAM,gCAJNX,EAAOU,KAAK,CACXC,KAAM,0CAORX,EAAOU,KAAK,CACXC,KAAM"}