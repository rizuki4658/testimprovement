import{u as e}from"./components.d5e25037.js";import{b as a,f as t,_ as o,e as l,d as n,aN as s,u as i,aO as d,a9 as r,k as c}from"./index.dcc9fc55.js";import{k as u,g as m,y as f,m as p,$ as h,A as b,o as v,n as g,aO as w,w as y,B as _,D as C,I as A,t as x,a1 as k,a2 as V,K as F,_ as S,S as D,U as P,f as j}from"./vendor.9695fe57.js";import{u as $}from"./index.f40e4a9e.js";import{r as M,e as T}from"./index.54844a74.js";import{C as U}from"./card.323f324c.js";import{c as B}from"./index.6b6f6369.js";import{I}from"./InputPhone.29ac6a8e.js";import{_ as q}from"./verify-phone.fdfb0887.js";import{_ as O}from"./attention-warning.f7b3f9bc.js";import"./LoadingCard.d443bc39.js";import"./SelectCountry.50087423.js";import"./setting.7b680124.js";const R=u({name:"AccountSettingProfile",components:{Button:a,Card:U,Input:t},props:{data:{type:Object,default:()=>({})},loading:{type:Boolean,default:!1},footer:{type:Boolean,default:!0}},emits:["submit","update:data"],setup(e,{emit:a}){const t=m((()=>e.data));f((()=>t.value),(e=>{a("update:data",e)}),{deep:!0});const o=$({first_name:{required:M},last_name:{required:M},email:{required:M,email:T}},t,{$lazy:!0}),l=()=>(o.value.$validate(),!o.value.$invalid);return{formData:t,validation:o,validate:l,handleSubmit:()=>{const e=l();e&&a("submit",e)}}}}),E={class:"grid grid-cols-2"},N={class:"xl:col-span-1 lg:col-span-1 col-span-2"},z={class:"grid grid-cols-2 gap-6"},L={class:"col-span-2"},Y={class:"flex justify-end"};var K=o(R,[["render",function(e,a,t,o,l,n){const s=p("Input"),i=p("Button"),d=p("Card"),r=h("loading");return b((v(),g(d,null,w({header:y((()=>[a[3]||(a[3]=_("span",{class:"font-bold text-black"},"Profile",-1))])),default:y((()=>[_("div",E,[_("div",N,[_("div",z,[_("div",null,[C(s,{modelValue:e.formData.first_name,"onUpdate:modelValue":a[0]||(a[0]=a=>e.formData.first_name=a),label:"First Name",view:e.validation.first_name.$invalid?"danger":"default",block:""},null,8,["modelValue","view"]),(v(!0),x(k,null,V(e.validation.first_name.$errors,((e,a)=>(v(),x("small",{class:"mt-2 text-red-base block",key:a},F(e.$message)+". ",1)))),128))]),_("div",null,[C(s,{modelValue:e.formData.last_name,"onUpdate:modelValue":a[1]||(a[1]=a=>e.formData.last_name=a),label:"Last Name",view:e.validation.last_name.$invalid?"danger":"default",block:""},null,8,["modelValue","view"]),(v(!0),x(k,null,V(e.validation.last_name.$errors,((e,a)=>(v(),x("small",{class:"mt-2 text-red-base block",key:a},F(e.$message)+". ",1)))),128))]),_("div",L,[C(s,{modelValue:e.formData.email,"onUpdate:modelValue":a[2]||(a[2]=a=>e.formData.email=a),label:"Email",view:e.validation.email.$invalid?"danger":"default",block:""},null,8,["modelValue","view"]),(v(!0),x(k,null,V(e.validation.email.$errors,((e,a)=>(v(),x("small",{class:"mt-2 text-red-base block",key:a},F(e.$message)+". ",1)))),128))])])])])])),_:2},[e.footer?{name:"footer",fn:y((()=>[_("div",Y,[C(i,{onClick:e.handleSubmit,color:"teal",loading:e.loading},{default:y((()=>a[4]||(a[4]=[A("Save")]))),_:1},8,["onClick","loading"])])])),key:"0"}:void 0]),1024)),[[r,e.loading]])}]]);const G=u({name:"AccountSettingTwoFactorAuth",components:{Button:a,Card:U,Checkbox:l,Modal:n,Input:t,InputPhone:I},props:{loading:{type:Boolean,default:!1}},setup(){const{resendCountdownTimer:e,setResendCountdownTimer:a,openModal:t,openModalDeactivate:o,closeModal:l,actionSend:n,actionVerifyCode:c,actionDeactivate:u}=s(),{me:f}=i(),p=m((()=>d.twoFactorAuth.is_send)),h=m((()=>!d.twoFactorAuth.data.phone_number)),b=m((()=>0===e.value)),v=m((()=>!d.twoFactorAuth.data.phone_code||!d.twoFactorAuth.is_send)),g=m((()=>1==f.value.dual_factor_authentication)),w={phone_number:{required:M},phone_code:{required:B.withMessage("Verification code is required",(()=>0==d.twoFactorAuth.is_send||1==d.twoFactorAuth.is_send&&!!d.twoFactorAuth.data.phone_code))}},y=$(w,d.twoFactorAuth.data,{$lazy:!0}),_=()=>(y.value.$validate(),!y.value.$invalid);return{me:f,state:d,resendCountdownTimer:e,isVerificationSend:p,isDisableSend:h,isDisableVerify:v,isEnableResendCode:b,validation:y,validate:_,handleOpenModal:()=>{if(!g.value)return t();o()},handleCloseModal:l,handleSendCode:async()=>{d.twoFactorAuth.is_send=!1;_()&&await n((()=>{a(60)}))},handleVerifyCode:async()=>{_()&&await c((()=>{S({type:"success",message:"2-Factor Authentication enabled"})}))},handleDisableTwoFactorAuth:async()=>{d.twoFactorAuth.data={phone_number:"",phone_code:""},await u((()=>{S({type:"success",message:"2-Factor Authentication disabled"})}))},phoneNumber:r}}}),H={class:"grid grid-cols-2"},J={class:"xl:col-span-1 lg:col-span-1 col-span-2"},Q={class:"flex items-start"},W={class:"flex items-end mb-4"},X={class:"mr-4 w-4/6"},Z={class:"w-2/6"},ee={key:0,class:"block text-green-04 mb-2"},ae={class:"flex flex-wrap items-center justify-between"},te={class:"flex flex-wrap flex-col text-center justify-center"},oe={class:"my-10"};const le=u({name:"AccountSetting",components:{Button:a,Profile:K,TwoFactorAuth:o(G,[["render",function(e,a,t,o,l,n){const s=p("Checkbox"),i=p("Card"),d=p("InputPhone"),r=p("Button"),c=p("Input"),u=p("Modal"),m=h("loading"),f=h("maska");return v(),x("div",null,[b((v(),g(i,null,{header:y((()=>a[7]||(a[7]=[_("span",{class:"font-bold text-black"},"Security",-1)]))),default:y((()=>[_("div",H,[_("div",J,[_("div",Q,[C(s,{modelValue:e.me.dual_factor_authentication,"onUpdate:modelValue":a[0]||(a[0]=a=>e.me.dual_factor_authentication=a),class:"mt-3",type:"toggle",value:"1","value-off":"0",onClick:D(e.handleOpenModal,["prevent"])},null,8,["modelValue","onClick"]),_("div",null,[_("p",{onClick:a[1]||(a[1]=(...a)=>e.handleOpenModal&&e.handleOpenModal(...a)),class:"cursor-pointer font-semibold mb-2"},"Two-factor authentication"),a[8]||(a[8]=_("small",null,[A("Add an extra layer of security to your account by requiring a one-time SMS security code each time you sign into "),_("span",{whitelabel:"text-replace","data-label":"addons host"},"Reusely.com"),A(".")],-1))])])])])])),_:1})),[[m,e.loading]]),C(u,{title:"Enable 2FA",modelValue:e.state.twoFactorAuth.modal.activate,"onUpdate:modelValue":a[5]||(a[5]=a=>e.state.twoFactorAuth.modal.activate=a),onClose:e.handleCloseModal,size:"xs"},{default:y((()=>[a[9]||(a[9]=_("div",{class:"flex flex-wrap flex-col items-center text-center mb-6"},[_("img",{class:"mb-6",src:q,alt:"verify phone number icon"}),_("h6",{class:"mb-2"},"Verify Phone Number"),_("p",{class:"text-grey-04"},"Add your phone number to get a verification code sent to your phone")],-1)),_("div",W,[_("div",X,[C(d,{modelValue:e.state.twoFactorAuth.data.phone_number,"onUpdate:modelValue":a[2]||(a[2]=a=>e.state.twoFactorAuth.data.phone_number=a),label:"Phone",block:"","country-autofill-setting":""},null,8,["modelValue"])]),_("div",Z,[C(r,{onClick:e.handleSendCode,color:"teal",view:"smooth",loading:e.state.twoFactorAuth.loading.phone_number_send,block:"",disabled:e.isDisableSend||!e.isEnableResendCode},{default:y((()=>[A(F(e.isVerificationSend?e.isEnableResendCode?"Resend":`Resend (${e.resendCountdownTimer})`:"Send Code"),1)])),_:1},8,["onClick","loading","disabled"])])]),e.isVerificationSend?(v(),x("span",ee,"The verification code is being sent to "+F(e.phoneNumber(e.state.twoFactorAuth.last_saved_phone_number)),1)):P("",!0),b(C(c,{modelValue:e.state.twoFactorAuth.data.phone_code,"onUpdate:modelValue":a[3]||(a[3]=a=>e.state.twoFactorAuth.data.phone_code=a),label:"Enter Your Verification Code",block:"",disabled:!e.state.twoFactorAuth.is_send},null,8,["modelValue","disabled"]),[[f,"######"]])])),footer:y((()=>[_("div",ae,[_("a",{class:"text-red-04 hover:text-red-03 select-none",onClick:a[4]||(a[4]=D(((...a)=>e.handleCloseModal&&e.handleCloseModal(...a)),["prevent"]))},"Cancel"),C(r,{onClick:e.handleVerifyCode,disabled:e.isDisableVerify,loading:e.state.twoFactorAuth.loading.verify_code,color:"teal",view:"smooth",dense:""},{default:y((()=>a[10]||(a[10]=[A("Set Up")]))),_:1},8,["onClick","disabled","loading"])])])),_:1},8,["modelValue","onClose"]),C(u,{modelValue:e.state.twoFactorAuth.modal.deactivate,"onUpdate:modelValue":a[6]||(a[6]=a=>e.state.twoFactorAuth.modal.deactivate=a),"hide-footer":"",size:"xs"},{default:y((()=>[_("div",te,[a[12]||(a[12]=_("img",{class:"mb-12",src:O,alt:"warning icon"},null,-1)),a[13]||(a[13]=_("h6",{class:"mb-4"},"Disable 2FA from your account?",-1)),a[14]||(a[14]=_("p",{class:"text-grey-04"},[A("This will disable Two-Factor Authentication from your account. "),_("br"),A(" Are you sure you want to continue?")],-1)),_("div",oe,[C(r,{onClick:e.handleDisableTwoFactorAuth,color:"teal",view:"outlined",loading:e.state.twoFactorAuth.loading.deactivate},{default:y((()=>a[11]||(a[11]=[A("Yes, Disable")]))),_:1},8,["onClick","loading"])])])])),_:1},8,["modelValue"])])}]])},async setup(){const e=j(null),{loading:a,data:t,action:o}=c();return{refProfile:e,dataProfile:t,loadingProfile:a,updatingData:async()=>{var a;await(null==(a=null==e?void 0:e.value)?void 0:a.handleSubmit())},handleProfileUpdate:async(e=!1)=>{a.value=!0,e&&await o((()=>{S({type:"success",message:"Profile updated"}),a.value=!1}))}}}}),ne={class:"relative flex items-center justify-between mt-3 mb-8"};var se=o(le,[["render",function(e,a,t,o,l,n){const s=p("Button"),i=p("Profile"),d=p("TwoFactorAuth");return v(),x("div",null,[_("div",ne,[a[2]||(a[2]=_("div",{class:"flex items-center justify-between gap-x-2"},[_("h5",null,"My Settings")],-1)),C(s,{color:"teal",onClick:e.updatingData},{default:y((()=>a[1]||(a[1]=[A(" Save Changes ")]))),_:1},8,["onClick"])]),C(i,{ref:"refProfile",data:e.dataProfile,"onUpdate:data":a[0]||(a[0]=a=>e.dataProfile=a),loading:e.loadingProfile,footer:!1,class:"mb-4",onSubmit:e.handleProfileUpdate},null,8,["data","loading","onSubmit"]),C(d,{loading:e.loadingProfile},null,8,["loading"])])}]]),ie=u({setup(){const{genSuspense:a}=e();return()=>a(se)}});export{ie as default};
