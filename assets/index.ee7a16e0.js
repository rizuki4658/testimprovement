import{k as a,O as e,a5 as i,f as t,g as o,W as r,m as l,$ as s,o as m,t as n,B as d,D as p,w,I as f,A as c,a1 as b}from"./vendor.9695fe57.js";import{D as u,j as v}from"./setting.598aa5c3.js";import{_ as g,b as j,d as k}from"./index.35a87af4.js";import{C as P}from"./card.85454cb1.js";import{W as E}from"./Form.5a18ffcb.js";import{B as W}from"./Breadcrumb.a04d3c7a.js";import{P as _}from"./PreviewEmailTemplate.11ff5851.js";import"./index.f40e4a9e.js";import"./index.6b6f6369.js";import"./index.54844a74.js";import"./fieldset.3185be27.js";import"./InputFile.b42f11bd.js";import"./Colorpicker.0d951354.js";import"./MultipleEmailInput.9acaf1f0.js";import"./TextEditor.17462d6a.js";import"./index.b563e87f.js";import"./select.5dc6bc5e.js";import"./breadcrumb.f242deab.js";import"./IframeRender.46e71567.js";var T=g(a({components:{Button:j,Card:P,WorkflowForm:E,Breadcrumb:W,Modal:k,PreviewEmail:_},setup(){const a=e(),l=i(),s=t(null),{data:m,loading:n,loadingInit:d,actionCreate:p,actionShowInitData:w}=u(),{emailBody:f,isPreview:c,previewedTemplate:b,loading:g,actionWorkflowEmailCreate:j}=v(),k=o((()=>!m.status_name));return r((async()=>{await w()})),{data:m,loading:n,breadcrumb:[{text:"Settings",to:{name:"setting"}},{text:"Workflow",to:{name:"settingWorkflow"}},{text:"Add Workflow"}],refForm:s,emailBody:f,isPreview:c,isDisableEmailPreview:k,previewedTemplate:b,loadingPreviewEmailTemplate:g,loadingInit:d,handlePreviewEmailTemplate:async()=>{f.value=m.email_template,await j(m.status_name,m.color_mail_template,m.is_mail_logo_show)},createWorkflow:async()=>{await s.value.validate()&&await p(l.params.buyback,(async e=>{e&&200===e.status&&await a.push({name:"settingWorkflow"})}))}}}}),[["render",function(a,e,i,t,o,r){const u=l("Button"),v=l("Breadcrumb"),g=l("WorkflowForm"),j=l("Card"),k=l("PreviewEmail"),P=s("loading");return m(),n(b,null,[d("div",null,[p(v,{class:"mt-2 mb-8",pageTitle:"Add Workflow",backTo:{name:"settingWorkflow"},items:a.breadcrumb},{right:w((()=>[p(u,{color:"teal",loading:a.loading,onClick:a.createWorkflow},{default:w((()=>e[1]||(e[1]=[f(" Save ")]))),_:1},8,["loading","onClick"])])),_:1},8,["items"]),p(j,{class:"mb-24"},{default:w((()=>[c(p(g,{data:a.data,ref:"refForm",onPreviewEmail:a.handlePreviewEmailTemplate,"loading-preview-email":a.loadingPreviewEmailTemplate,"disable-email-preview":a.isDisableEmailPreview},null,8,["data","onPreviewEmail","loading-preview-email","disable-email-preview"]),[[P,a.loadingInit]])])),_:1})]),p(k,{show:a.isPreview,"onUpdate:show":e[0]||(e[0]=e=>a.isPreview=e),body:a.previewedTemplate},null,8,["show","body"])],64)}]]);export{T as default};
