var e=Object.defineProperty,a=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,l=(a,t,o)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[t]=o;import{u as s}from"./components.d5e25037.js";import{k as d,a5 as n,W as i,m as c,$ as r,A as m,o as u,n as p,w as b,B as v,K as f,t as y,D as g,I as k,U as I,f as C,y as j,s as h,_ as D,a1 as _,a2 as w,O as x}from"./vendor.9695fe57.js";import{d as S,G as B,e as A,H as O,I as V}from"./buyback.727430ce.js";import{B as M}from"./Breadcrumb.5b80dabd.js";import{C as U}from"./card.323f324c.js";import{b as F,_ as P,f as T,d as Q,g as R}from"./index.dcc9fc55.js";import{_ as H}from"./badge.b1ac8285.js";import{c as G}from"./status.6f59bf91.js";import{e as L}from"./setting.7b680124.js";import{S as q}from"./select.79191f70.js";import{D as E}from"./Form.7afe0459.js";import{I as K}from"./ItemTable.4be7dc34.js";import"./LoadingCard.d443bc39.js";import"./date.f86face7.js";import"./breadcrumb.82cee0bd.js";import"./device.234cc64b.js";import"./auto-complete.55b1ecae.js";import"./index.f40e4a9e.js";import"./index.6b6f6369.js";import"./Currency.db0f01d2.js";import"./Accordion.b89c6abe.js";import"./BBTable.b2532361.js";import"./DeviceSearch.11e8ffd7.js";import"./BDropdown.9661bf97.js";import"./DeviceGolfSpec.96f35cb4.js";import"./BSelect.94cede0b.js";import"./fieldset.7eca078e.js";import"./dymo.cbd9801c.js";import"./PrintLabel.7ddc729b.js";const N=d({components:{Button:F,Card:U,Badge:H},props:{},setup(e){const{action:s,state:d,loading:c}=S("online"),r=n();return i((async()=>{await s(((e,s)=>{for(var d in s||(s={}))t.call(s,d)&&l(e,d,s[d]);if(a)for(var d of a(s))o.call(s,d)&&l(e,d,s[d]);return e})({id:r.params.buybackId},r.params.marketerId&&"me"===r.params.marketerId&&{marketer_id:""}||r.params.marketerId&&{marketer_id:r.params.marketerId}))})),{state:d,loading:c,color:G}}}),W={key:0,class:"my-4"},$={class:"flex items-center mb-2"},z={class:"items-center"};var J=P(N,[["render",function(e,a,t,o,l,s){const d=c("Badge"),n=c("Card"),i=r("loading");return m((u(),p(n,null,{header:b((()=>{var a;return[v("h6",null,"Buyback ID #"+f(null==(a=e.state)?void 0:a.box_id),1)]})),default:b((()=>{var t,o,l,s;return[(null==(t=e.state)?void 0:t.box_id)?(u(),y("div",W,[v("div",$,[a[0]||(a[0]=v("span",{class:"material-icons text-base mr-2"},"date_range",-1)),v("p",z,f((null==(o=e.state)?void 0:o.created_at)||"-"),1)]),g(d,{color:e.color((null==(s=null==(l=e.state)?void 0:l.order_status)?void 0:s.short_name)||"-")},{default:b((()=>{var a,t;return[k(f((null==(t=null==(a=e.state)?void 0:a.order_status)?void 0:t.status_name)||"-"),1)]})),_:1},8,["color"])])):I("",!0)]})),_:1})),[[i,e.loading]])}]]);const X=d({components:{Button:F,Card:U,Badge:H,Input:T,Select:q,Modal:Q,DeviceForm:E},props:{},setup(e){const{loading:a,state:t,filters:o,modal:l,data:s,actionShow:d,actionCreate:c,setSelectedDevice:r,unsetSelectedDevice:m}=B(),{actionAll:u}=A("online"),{actionAll:p,stateAll:b,filter:v,loading:f}=L(),y=n(),g=C(null);return j((()=>o),R((()=>{d(y.params.buybackId)}),500),{deep:!0}),i((async()=>{v.is_notpaginate=1,await Promise.all([d(y.params.buybackId),p()])})),{refDeviceForm:g,data:s,stateConditions:b,state:t,loading:a,loadingCondition:f,filters:o,modal:l,handleQuickAdd:e=>{r(e),l.create=!0},handleAddDevice:async()=>{await h((()=>g.value.validate()))&&await c(y.params.buybackId,(async()=>{D({type:"success",message:"Item added"}),l.create=!1,await u(y.params.buybackId,!0)}))},unsetSelectedDevice:m}}}),Y={class:"grid grid-cols-5 gap-4 mb-4"},Z={class:"col-span-3"},ee={class:"col-span-2"},ae={class:"overflow-y-auto min-h-max",style:{maxHeight:"450px",minHeight:"60px"}},te={key:0,class:"mt-6"},oe={class:"font-semibold text-teal-04 mb-3"},le={class:"flex justify-between"},se={class:"mr-3"},de={class:"font-bold"},ne={class:"mr-3"},ie={class:"font-bold"},ce={class:"mr-3"},re={class:"font-bold"},me={key:1,class:"mt-8 mb-4"},ue={class:"flex justify-end"};var pe=P(X,[["render",function(e,a,t,o,l,s){const d=c("Input"),n=c("Select"),i=c("Button"),p=c("Card"),I=c("DeviceForm"),C=c("Modal"),j=r("loading");return u(),y(_,null,[g(p,null,{header:b((()=>a[6]||(a[6]=[v("h6",null,"Items",-1)]))),default:b((()=>{var t;return[v("div",null,[v("div",Y,[v("div",Z,[g(d,{modelValue:e.filters.search,"onUpdate:modelValue":a[0]||(a[0]=a=>e.filters.search=a),placeholder:"Search items",block:""},null,8,["modelValue"])]),v("div",ee,[g(n,{modelValue:e.filters.condition,"onUpdate:modelValue":a[1]||(a[1]=a=>e.filters.condition=a),placeholder:"Condition",class:"w-full",items:e.stateConditions,by:"condition_name",name:"condition_name",loading:e.loadingCondition.all},null,8,["modelValue","items","loading"])])]),m((u(),y("div",ae,[(null==(t=e.state.data)?void 0:t.length)?(u(),y("div",te,[(u(!0),y(_,null,w(e.state.data,((t,o)=>(u(),y("div",{key:o,class:"flex justify-between items-center mb-8"},[v("div",null,[v("p",oe,f(t.product_name),1),v("div",le,[v("p",se,[a[7]||(a[7]=k("Qty: ")),v("span",de,f(t.qty),1)]),v("p",ne,[a[8]||(a[8]=k("Price: ")),v("span",ie,f(t.price),1)]),v("p",ce,[a[9]||(a[9]=k("Condition: ")),v("span",re,f(t.condition),1)])])]),v("div",null,[g(i,{onClick:a=>e.handleQuickAdd(t),color:"teal",dense:""},{default:b((()=>a[10]||(a[10]=[k("Quick Add")]))),_:2},1032,["onClick"])])])))),128))])):(u(),y("div",me,a[11]||(a[11]=[v("p",{class:"font-semibold text-center"},"No data",-1)])))])),[[j,e.loading.all]])])]})),_:1}),g(C,{modelValue:e.modal.create,"onUpdate:modelValue":a[5]||(a[5]=a=>e.modal.create=a),title:"Quick Add Item",onClose:e.unsetSelectedDevice},{default:b((()=>[g(I,{ref:"refDeviceForm","auto-fill":"",data:e.data.selected.device.detail,"onUpdate:data":a[2]||(a[2]=a=>e.data.selected.device.detail=a),device:e.data.selected.device.specs.device,"onUpdate:device":a[3]||(a[3]=a=>e.data.selected.device.specs.device=a),dataComputer:e.data.selected.device.specs.computer,"onUpdate:dataComputer":a[4]||(a[4]=a=>e.data.selected.device.specs.computer=a),"multi-imei":""},null,8,["data","device","dataComputer"])])),footer:b((()=>[v("div",ue,[g(i,{onClick:e.handleAddDevice,loading:e.loading.create,color:"teal",view:"outlined"},{default:b((()=>a[12]||(a[12]=[k("Add")]))),_:1},8,["onClick","loading"])])])),_:1},8,["modelValue","onClose"])],64)}]]);const be=d({components:{Card:U,Button:F,Modal:Q,ItemTable:K,DeviceForm:E},async setup(){const{device:e,modal:a,unsetData:t,openModal:o,loading:l,actionCreate:s}=A("online"),d=n(),i=C(null);return{refDeviceForm:i,loading:l,device:e,modal:a,unsetData:t,openModal:o,actionCreate:s,loadingShow:O,addDevice:async()=>{await h((()=>i.value.validate()))&&await s(d.params.buybackId,(async()=>{D({type:"success",message:"Item added"})}),!0)}}}}),ve={class:"flex justify-between items-center"};const fe=d({components:{Breadcrumb:M,Card:U,Button:F,Show:J,Devices:pe,Items:P(be,[["render",function(e,a,t,o,l,s){const d=c("Button"),n=c("ItemTable"),i=c("Card"),f=c("DeviceForm"),I=c("Modal"),C=r("loading");return u(),y(_,null,[m((u(),p(i,null,{header:b((()=>[v("div",ve,[a[5]||(a[5]=v("h6",null,"Data Match Items",-1)),g(d,{color:"teal",dense:"",onClick:a[0]||(a[0]=a=>e.openModal("create"))},{default:b((()=>a[4]||(a[4]=[v("i",{class:"material-icons mr-2"},"add",-1),k("Add Item")]))),_:1})])])),default:b((()=>[g(n,{"scan-in":"","buyback-type":"mailin"})])),_:1})),[[C,e.loadingShow.items.all]]),g(I,{modelValue:e.modal.create,"onUpdate:modelValue":a[3]||(a[3]=a=>e.modal.create=a),title:"Add Item",onClose:e.unsetData},{default:b((()=>[g(f,{ref:"refDeviceForm",data:e.device.data,"onUpdate:data":a[1]||(a[1]=a=>e.device.data=a),dataComputer:e.device.computer,"onUpdate:dataComputer":a[2]||(a[2]=a=>e.device.computer=a),"multi-imei":"","buyback-type":"mailin"},null,8,["data","dataComputer"])])),footer:b((()=>[g(d,{color:"teal",loading:e.loading.create,onClick:e.addDevice},{default:b((()=>a[6]||(a[6]=[k("Add Item")]))),_:1},8,["loading","onClick"])])),_:1},8,["modelValue","onClose"])],64)}]])},props:{},async setup(){const{loading:e,actionSave:a,actionRestore:t}=V(),{actionAll:o}=A("online"),l=n(),s=x();return{breadcrumb:[{text:"Mail-In",to:{name:"buybackOnline"}},{text:"Offer Detail",to:{name:"buybackOnlineDetail",params:{buybackId:l.params.buybackId}}},{text:"Data Match"}],loading:e,route:l,handleRestore:()=>t(l.params.buybackId,(async()=>{await o(l.params.buybackId,!0),D({type:"success",message:"Data match restored"})})),handleSave:()=>a(l.params.buybackId,(async()=>{await o(l.params.buybackId,!0),D({type:"success",message:"Data match saved"}),s.push({name:"buybackOnlineDetail",params:{buybackId:l.params.buybackId}})}))}}}),ye={class:"flex justify-center justify-between"},ge={class:"grid gap-6 grid-cols-8"},ke={class:"col-span-8 xl:col-span-2 lg-col-span-2"},Ie={class:"col-span-8 xl:col-span-6 lg-col-span-6"};var Ce=P(fe,[["render",function(e,a,t,o,l,s){const d=c("Breadcrumb"),n=c("Button"),i=c("Show"),r=c("Devices"),m=c("Items");return u(),y("div",null,[v("div",ye,[g(d,{class:"mb-12","page-title":"Data Match",backTo:{name:"buybackOnlineDetail",params:{buybackId:e.route.params.buybackId}},items:e.breadcrumb},null,8,["backTo","items"]),v("div",null,[g(n,{onClick:e.handleRestore,class:"mr-4",color:"orange",view:"outlined",loading:e.loading.restore},{default:b((()=>a[0]||(a[0]=[v("i",{class:"material-icons mr-1"},"replay",-1),k(" Restore")]))),_:1},8,["onClick","loading"]),g(n,{onClick:e.handleSave,color:"teal",view:"outlined",loading:e.loading.save},{default:b((()=>a[1]||(a[1]=[v("i",{class:"material-icons mr-1"},"save",-1),k(" Save")]))),_:1},8,["onClick","loading"])])]),v("div",ge,[v("div",ke,[g(i,{class:"mb-8"}),g(r)]),v("div",Ie,[g(m)])])])}]]),je=d({setup(){const{genSuspense:e}=s();return()=>[e(Ce)]}});export{je as default};
