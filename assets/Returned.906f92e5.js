var e=Object.defineProperty,a=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,l=(a,t,o)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[t]=o;import{k as s,a5 as n,f as r,m as d,o as i,t as m,n as c,w as u,a1 as p,a2 as f,B as b,I as y,K as v,D as j,F as _,U as k,s as h}from"./vendor.9695fe57.js";import{e as x,g as C,h as g}from"./invoice.24eb8130.js";import{_ as P,b as w,f as M,d as I,T as R,Z as T}from"./index.10c203ea.js";import{C as O}from"./card.6034dd30.js";import{_ as V,a as S}from"./timeline-item.53300fe2.js";import{E}from"./expandable-panel.6983dc97.js";import{P as U}from"./PaymentMethod.b1a7f989.js";import{R as A}from"./Form.a7df49ee.js";import{C as B}from"./Currency.44e498e4.js";import"./date.f86face7.js";import"./tab.7ba2ad83.js";import"./Custom.c9acbe94.js";import"./InputPhone.ff167384.js";import"./SelectCountry.e96a458a.js";import"./setting.694f0663.js";import"./index.f40e4a9e.js";import"./index.6b6f6369.js";import"./index.54844a74.js";import"./buyback.cd2a735e.js";import"./payment.933968d2.js";import"./select.46ff5c73.js";import"./TremendousCard.60fa6d1b.js";const F=s({components:{Button:w,Card:O,Input:M,Modal:I,Timeline:V,TimelineItem:S,ExpandablePanel:E,PaymentMethod:U,RecordPaymentForm:A,Currency:B},async setup(e){const{state:s,selected:d,loading:i,modal:m,openModal:c,actionAll:u,actionRecord:p}=x("invoice"),{data:f,actionAll:b}=C("invoice"),{state:y}=g("invoice"),v=n();await u(v.params.buybackId);const j=r(null),_=r(null);return{data:j,dataRecord:f,state:s,statePaymentMethod:y,loading:i,modal:m,openModalSelected:(e,a)=>c(e,(()=>{d.value=a.id})),createRecord:async()=>{await h((()=>_.value.refChildComponent.validate()))&&await p(v.params.buybackId,((e,s)=>{for(var n in s||(s={}))t.call(s,n)&&l(e,n,s[n]);if(a)for(var n of a(s))o.call(s,n)&&l(e,n,s[n]);return e})({amount:f.amount},j.value),(async()=>{await b(v.params.buybackId)}))},money:R,filterNumber:T,refPaymentMethod:_}}}),K={class:"font-bold"},D={class:"font-bold text-dark mb-0"},N={class:"block"},Z={class:"block"},q={key:1,class:"text-center"},z=["onClick"],G={class:"flex items-center"},H={class:"font-bold"},J={class:"mx-3"},L={class:"font-bold"},Q={key:1,class:"text-center"};var W=P(F,[["render",function(e,a,t,o,l,s){const n=d("Currency"),r=d("TimelineItem"),h=d("Timeline"),x=d("Button"),C=d("ExpandablePanel"),g=d("Card"),P=d("Input"),w=d("PaymentMethod"),M=d("Modal");return i(),m(p,null,[0!=e.state.length?(i(),c(g,{key:0,class:"mb-6"},{default:u((()=>[0!=e.state.length?(i(!0),m(p,{key:0},f(e.state,((t,o)=>(i(),c(C,{class:"mb-4",key:o},{default:u((()=>[(i(!0),m(p,null,f(t.details,((e,t)=>(i(),m("div",{class:"mb-4",key:t},[b("span",K,[y(v(e.order_items.product_name)+" - "+v(e.order_items.condition)+" ",1),b("small",null,"("+v(e.order_items.imei_sn)+")",1)]),a[3]||(a[3]=b("br",null,null,-1)),b("small",null,[y(v(1==e.order_items.is_mac?e.order_items.processor_speed+", "+e.order_items.hard_drive+", "+e.order_items.memory:"")+" - ",1),j(n,{value:e.order_items.price},null,8,["value"])])])))),128)),0!=t.refunds.length?(i(),c(h,{key:0,class:"ml-4"},{default:u((()=>[(i(!0),m(p,null,f(t.refunds,((a,t)=>(i(),c(r,{view:"filled",color:"blue",key:t},{content:u((()=>[b("p",D,v(a.payment_method)+": "+v(e.money(a.amount)),1),b("small",N,v(a.created_at),1),b("small",Z,v(a.note),1)])),_:2},1024)))),128))])),_:2},1024)):(i(),m("div",q,a[4]||(a[4]=[b("span",{class:"font-bold text-red-base"},"There's no detail.",-1)])))])),header:u((({toggle:o})=>[b("div",{onClick:o,class:"flex justify-between items-center"},[b("div",null,[b("p",null,[a[5]||(a[5]=b("span",{class:"font-bold"},"Reason: ",-1)),y(v(t.reason),1)]),b("p",null,v(t.refunds.length)+" list item",1)]),b("div",G,[b("p",{class:_(["mx-3",[0==parseInt(t.due)?"text-green-03":"text-red-base"]])},[a[6]||(a[6]=y("Due: ")),b("span",H,[j(n,{value:t.due},null,8,["value"])])],2),b("p",J,[a[7]||(a[7]=y("Total: ")),b("span",L,[j(n,{value:t.total},null,8,["value"])])]),0!=t.due?(i(),c(x,{key:0,view:"outlined",color:"teal",onClick:a=>e.openModalSelected("record",t),dense:""},{default:u((()=>a[8]||(a[8]=[y("Refund")]))),_:2},1032,["onClick"])):k("",!0)])],8,z)])),_:2},1024)))),128)):(i(),m("div",Q,a[9]||(a[9]=[b("span",{class:"font-bold text-red-base"},"There's no payment history change.",-1)])))])),_:1})):k("",!0),j(M,{modelValue:e.modal.record,"onUpdate:modelValue":a[2]||(a[2]=a=>e.modal.record=a),title:"Record Payout"},{footer:u((()=>[j(x,{color:"teal",loading:e.loading.record,onClick:e.createRecord},{default:u((()=>a[10]||(a[10]=[y("Save Payout")]))),_:1},8,["loading","onClick"])])),default:u((()=>[j(w,{ref:"refPaymentMethod",data:e.data,"onUpdate:data":a[1]||(a[1]=a=>e.data=a),items:e.statePaymentMethod},{additional:u((()=>[j(P,{modelValue:e.dataRecord.amount,"onUpdate:modelValue":a[0]||(a[0]=a=>e.dataRecord.amount=a),type:"number",min:"0",label:"Amount",currency:!0,class:"w-full",onKeypress:e.filterNumber},null,8,["modelValue","onKeypress"])])),_:1},8,["data","items"])])),_:1},8,["modelValue"])],64)}]]);export{W as default};
