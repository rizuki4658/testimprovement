import{u as e}from"./components.dd762bd4.js";import{k as a,_ as o,m as t,o as l,t as s,D as n,w as i,B as r,I as d,a1 as u,a2 as c,K as g,f as m,a5 as p,O as f,r as v,x as y}from"./vendor.9695fe57.js";import{b,j as _,f as x,_ as h,v as j,d as w}from"./index.6438e939.js";import{a as A}from"./integration.761f6e9e.js";import{u as G}from"./index.f40e4a9e.js";import{r as k}from"./index.54844a74.js";import"./LoadingCard.6426fb93.js";import"./card.33d29bf3.js";import"./index.6b6f6369.js";var C=h(a({components:{Button:b,Alert:_,Input:x},async setup(){const{state:e,data:a,actionAll:t,actionUpdate:l,loading:s}=A(),n=G({google_analytic_code:{required:k}},a,{$lazy:!0});return await Promise.all([t()]),{state:e,data:a,loading:s,validation:n,update:async(e=(()=>{}))=>{if(!(n.value.$validate(),!n.value.$invalid))return;const t=Object.assign({},{google_analytic_code:a.google_analytic_code});await l(t,(a=>{if("connection failed"===a.toLowerCase())return o({type:"warning",message:"Invalid Google Analytics configurations"});o({type:"success",message:"Google Analytics integration updated!"}),j(e)&&e()}))}}}}),[["render",function(e,a,o,m,p,f){const v=t("Alert"),y=t("Input");return l(),s(u,null,[n(v,{view:"smooth",dense:"",style:{"align-items":"center"},class:"mb-4"},{left:i((()=>a[1]||(a[1]=[r("span",{class:"material-icons text-4xl"},"info",-1)]))),default:i((()=>[a[2]||(a[2]=r("p",null,[d(" Check out Google's support resources:Â  "),r("a",{href:"https://support.google.com/analytics/answer/13128484",target:"_blank",class:"text-blue-04 hover:text-blue-03 hover:underline"},[r("b",null,"Conversion Guide")])],-1))])),_:1}),n(y,{modelValue:e.data.google_analytic_code,"onUpdate:modelValue":a[0]||(a[0]=a=>e.data.google_analytic_code=a),view:e.validation.google_analytic_code.$invalid?"danger":"default",class:"my-4 w-full",label:"Measurement ID",placeholder:"G-XXXXXX"},null,8,["modelValue","view"]),(l(!0),s(u,null,c(e.validation.google_analytic_code.$errors,((e,a)=>(l(),s("small",{class:"text-red-base block mb-4",key:a},g(e.$message)+". ",1)))),128))],64)}]]),X=a({async setup(){const{genSuspense:a}=e(),o=m(null),t=p(),l=f(),s=()=>{o.value.update((()=>{var e;l.push({name:"integration",query:{enable:(null==(e=t.query)?void 0:e.id)||""}})}))},n=v({modelValue:!0,closeTo:{name:"integration",query:{reload:1}},size:"xs"}),i=v({header:()=>"Google Analytics Config",subtitle:()=>"This is only compatible with GA4 Google Analytics Properties",default:()=>a(y(C,{ref:o})),footer:()=>{return y(b,{color:"teal",loading:o.value&&(null==(a=null==(e=o.value)?void 0:e.loading)?void 0:a.update),onClick:s},{default:()=>"Save"});var e,a}});return()=>y(w,n,i)}});export{X as default};
