import{k as e,O as a,a5 as i,f as t,g as o,W as r,m as l,a0 as s,o as m,t as d,B as n,D as p,w,I as c,A as f,a2 as b}from"./vendor.f1efedad.js";import{D as u,j as v}from"./setting.bd993b06.js";import{_ as g,b as j,d as k}from"./index.ec266ec1.js";import{C as P}from"./card.198a6be1.js";import{W as E}from"./Form.72dd3f81.js";import{B as W}from"./Breadcrumb.0ccfede3.js";import{P as _}from"./PreviewEmailTemplate.a1b4d7b5.js";import"./index.32689823.js";import"./index.05b14cb2.js";import"./index.a87b789d.js";import"./fieldset.93cf49f0.js";import"./InputFile.5108b087.js";import"./Colorpicker.62d2aff0.js";import"./MultipleEmailInput.b9018edb.js";import"./TextEditor.7498b5b6.js";import"./index.d8d5d1fe.js";import"./select.5f1e68e6.js";import"./breadcrumb.624a01cc.js";import"./IframeRender.ac49ebc3.js";var T=g(e({components:{Button:j,Card:P,WorkflowForm:E,Breadcrumb:W,Modal:k,PreviewEmail:_},setup(){const e=a(),l=i(),s=t(null),{data:m,loading:d,loadingInit:n,actionCreate:p,actionShowInitData:w}=u(),{emailBody:c,isPreview:f,previewedTemplate:b,loading:g,actionWorkflowEmailCreate:j}=v(),k=o((()=>!m.status_name));return r((async()=>{await w()})),{data:m,loading:d,breadcrumb:[{text:"Settings",to:{name:"setting"}},{text:"Workflow",to:{name:"settingWorkflow"}},{text:"Add Workflow"}],refForm:s,emailBody:c,isPreview:f,isDisableEmailPreview:k,previewedTemplate:b,loadingPreviewEmailTemplate:g,loadingInit:n,handlePreviewEmailTemplate:async()=>{c.value=m.email_template,await j(m.status_name,m.color_mail_template,m.is_mail_logo_show)},createWorkflow:async()=>{await s.value.validate()&&await p(l.params.buyback,(async a=>{a&&200===a.status&&await e.push({name:"settingWorkflow"})}))}}}}),[["render",function(e,a,i,t,o,r){const u=l("Button"),v=l("Breadcrumb"),g=l("WorkflowForm"),j=l("Card"),k=l("PreviewEmail"),P=s("loading");return m(),d(b,null,[n("div",null,[p(v,{class:"mt-2 mb-8",pageTitle:"Add Workflow",backTo:{name:"settingWorkflow"},items:e.breadcrumb},{right:w((()=>[p(u,{color:"teal",loading:e.loading,onClick:e.createWorkflow},{default:w((()=>a[1]||(a[1]=[c(" Save ")]))),_:1},8,["loading","onClick"])])),_:1},8,["items"]),p(j,{class:"mb-24"},{default:w((()=>[f(p(g,{data:e.data,ref:"refForm",onPreviewEmail:e.handlePreviewEmailTemplate,"loading-preview-email":e.loadingPreviewEmailTemplate,"disable-email-preview":e.isDisableEmailPreview},null,8,["data","onPreviewEmail","loading-preview-email","disable-email-preview"]),[[P,e.loadingInit]])])),_:1})]),p(k,{show:e.isPreview,"onUpdate:show":a[0]||(a[0]=a=>e.isPreview=a),body:e.previewedTemplate},null,8,["show","body"])],64)}]]);export{T as default};
