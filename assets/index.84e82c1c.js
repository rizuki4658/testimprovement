import{u as a}from"./components.2c51ae72.js";import{k as e,_ as o,m as t,o as l,t as n,D as s,a2 as i,a3 as r,K as d,f as g,a5 as u,O as c,r as m,x as p}from"./vendor.f1efedad.js";import{b as v,j as f,f as _,_ as b,v as j,d as y}from"./index.ec266ec1.js";import{a as x}from"./integration.db2aa4c7.js";import{u as w}from"./index.32689823.js";import{r as $}from"./index.a87b789d.js";import"./LoadingCard.93d3634e.js";import"./card.198a6be1.js";import"./index.05b14cb2.js";var k=b(e({components:{Button:v,Alert:f,Input:_},async setup(){const{state:a,data:e,actionAll:t,actionUpdate:l,loading:n}=x(),s=w({google_tag_id:{required:$}},e,{$lazy:!0});return await Promise.all([t()]),{state:a,data:e,loading:n,validation:s,update:async(a=(()=>{}))=>{if(!(s.value.$validate(),!s.value.$invalid))return;const t=Object.assign({},{google_tag_id:e.google_tag_id});await l(t,(e=>{if("connection failed"===e.toLowerCase())return o({type:"warning",message:"Invalid GoogleTagManager configurations"});o({type:"success",message:"GoogleTagManager integration updated!"}),j(a)&&a()}))}}}}),[["render",function(a,e,o,g,u,c){const m=t("Input");return l(),n(i,null,[s(m,{modelValue:a.data.google_tag_id,"onUpdate:modelValue":e[0]||(e[0]=e=>a.data.google_tag_id=e),view:a.validation.google_tag_id.$invalid?"danger":"default",class:"my-4",label:"Google Tag Id",placeholder:"",block:""},null,8,["modelValue","view"]),(l(!0),n(i,null,r(a.validation.google_tag_id.$errors,((a,e)=>(l(),n("small",{class:"text-red-base block mb-4",key:e},d(a.$message)+". ",1)))),128))],64)}]]),T=e({async setup(){const{genSuspense:e}=a(),o=g(null),t=u(),l=c(),n=()=>{o.value.update((()=>{var a;l.push({name:"integration",query:{enable:(null==(a=t.query)?void 0:a.id)||""}})}))},s=m({modelValue:!0,closeTo:{name:"integration",query:{reload:1}},size:"xs"}),i=m({header:()=>"GoogleTagManager Config",default:()=>e(p(k,{ref:o})),footer:()=>{return p(v,{color:"teal",loading:o.value&&(null==(e=null==(a=o.value)?void 0:a.loading)?void 0:e.update),onClick:n},{default:()=>"Save"});var a,e}});return()=>p(y,s,i)}});export{T as default};
