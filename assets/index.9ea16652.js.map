{"version":3,"file":"index.9ea16652.js","sources":["../../src/views/setting/manage-user/edit/index.vue","../../src/views/setting/manage-user/edit/index.js"],"sourcesContent":["<template>\n  <div class=\"flex justify-between items-center mb-8\">\n    <Breadcrumb\n      pageTitle=\"Edit User\"\n      :backTo=\"{ name: 'settingManageUser' }\"\n      :items=\"breadcrumb\"\n    />\n  </div>\n  <Card>\n    <ManageUserForm\n      ref=\"refComponent\"\n      v-model:data=\"data\"\n      edit\n      :readonly=\"data.permission.update == false\"\n      :permission-readonly=\"data.menu_list.permission.update == false\"\n    />\n    <template #footer>\n      <div class=\"text-right\">\n        <Button\n          :disabled=\"data.permission.update == false\"\n          color=\"teal\"\n          :loading=\"loading.form\"\n          @click=\"updateUser\"\n          >Save</Button\n        >\n      </div>\n    </template>\n  </Card>\n</template>\n\n<script>\nimport { defineComponent, ref } from 'vue'\nimport { useRoute, useRouter } from 'vue-router'\nimport { useManageUserForm } from 'composable/setting'\nimport { useUser } from 'composable/user'\nimport { useUserLocation  } from 'composable/setting/user'\nimport Button from 'bbUi/components/button/button.vue'\nimport Breadcrumb from 'components/Breadcrumb.vue'\nimport Card from 'bbUi/components/card/card.vue'\nimport ManageUserForm from 'components/ManageUser/Form.vue'\n\nexport default defineComponent({\n  components: {\n    Button,\n    Breadcrumb,\n    Card,\n    ManageUserForm\n  },\n  async setup() {\n    const route = useRoute()\n    const router = useRouter()\n    const { data, loading, actionShow, actionUpdate, getMenu } =\n      useManageUserForm()\n    const { action: actionMe } = useUser()\n    const { selectDefaultLocation, selectedLocations, selectedDefaultLocationDetailed } = useUserLocation()\n\n    const refComponent = ref(null)\n    const breadcrumb = [\n      {\n        text: 'Settings',\n        to: {\n          name: 'setting'\n        }\n      },\n      {\n        text: 'Manage Users',\n        to: {\n          name: 'settingManageUser'\n        }\n      },\n      {\n        text: 'Edit User'\n      }\n    ]\n\n    const updateUser = async () => {\n      data.locations = selectedLocations.value\n      data.default_location_id = selectedDefaultLocationDetailed.value.id\n      data.default_location_name = selectedDefaultLocationDetailed.value.name\n      if (refComponent.value.validate()) {\n        await actionUpdate(route.params.userId, async () => {\n          await actionMe()\n          router.push({\n            name: 'settingManageUser'\n          })\n        })\n      }\n    }\n\n    await Promise.all([\n      actionShow(route.params.userId),\n      getMenu(route.params.userId)\n    ])\n\n    selectDefaultLocation({\n      id: data.default_location_id,\n      name: data.default_location_name,\n    })\n\n    return {\n      data,\n      breadcrumb,\n      refComponent,\n      loading,\n      updateUser\n    }\n  }\n})\n</script>\n","import { defineComponent } from 'vue'\nimport { useSuspense } from 'composable/components'\nimport index from './index.vue'\n\nexport default defineComponent({\n  setup() {\n    const { genSuspense } = useSuspense()\n\n    return () => genSuspense(index)\n  }\n})"],"names":["_sfc_main","defineComponent","components","Button","Breadcrumb","Card","ManageUserForm","[object Object]","route","useRoute","router","useRouter","data","loading","actionShow","actionUpdate","getMenu","useManageUserForm","action","actionMe","useUser","selectDefaultLocation","selectedLocations","selectedDefaultLocationDetailed","useUserLocation","refComponent","ref","Promise","all","params","userId","id","default_location_id","name","default_location_name","breadcrumb","text","to","updateUser","async","locations","value","validate","push","_hoisted_1","class","_openBlock","_createElementBlock","_Fragment","_createVNode","_component_Breadcrumb","pageTitle","backTo","footer","_withCtx","_hoisted_2","_component_Button","disabled","_ctx","permission","update","color","form","_cache","_component_ManageUserForm","onUpdate:data","$event","edit","readonly","index","genSuspense","useSuspense"],"mappings":"mnBAyCA,MAAKA,EAAaC,EAAa,CAC7BC,WAAY,CACVC,OAAAA,EACAC,WAAAA,EACAC,KAAAA,EACAC,eAAAA,GAAAC,cAGA,MAAMC,EAAQC,IACRC,EAASC,KACTC,KAAEA,EAAAC,QAAMA,EAASC,WAAAA,EAAAC,aAAYA,UAAcC,GAC/CC,KACMC,OAAQC,GAAaC,KACvBC,sBAAEA,EAAuBC,kBAAAA,EAAAC,gCAAmBA,GAAoCC,IAEhFC,EAAeC,EAAI,MA2ClB,aAVDC,QAAQC,IAAI,CAChBd,EAAWN,EAAMqB,OAAOC,QACxBd,EAAQR,EAAMqB,OAAOC,UAGDT,EAAA,CACpBU,GAAInB,EAAKoB,oBACTC,KAAMrB,EAAKsB,wBAGN,CACLtB,KAAAA,EACAuB,WA5CiB,CACjB,CACEC,KAAM,WACNC,GAAI,CACFJ,KAAM,YAGV,CACEG,KAAM,eACNC,GAAI,CACFJ,KAAM,sBAGV,CACEG,KAAM,cA+BRX,aAAAA,EACAZ,QAAAA,EACAyB,WA7BiBC,UACjB3B,EAAK4B,UAAYlB,EAAkBmB,MAC9B7B,EAAAoB,oBAAsBT,EAAgCkB,MAAMV,GAC5DnB,EAAAsB,sBAAwBX,EAAgCkB,MAAMR,KAC/DR,EAAagB,MAAMC,kBACf3B,EAAaP,EAAMqB,OAAOC,QAAQS,gBAChCpB,IACNT,EAAOiC,KAAK,CACVV,KAAM,8BAlEPW,EAAA,CAAAC,MAAM,oLAhBfC,OAAAA,IAMMC,EAAAC,EAAA,KAAA,GADF,MAAAJ,EAAA,CAHAK,EAAUC,EAAW,CACpBC,UAAqC,YACrCC,OAAiB,CAAAnB,KAAA,6DAWTgB,IASH,KAAA,CARNI,OAAAC,GAAA,OAOG,MAAAC,EAAA,CALEN,EAAUO,EAAe,CAC1BC,SAAY,GAAAC,EAAA9C,KAAA+C,WAAAC,OACXC,MAAO,OACPhD,QAAO6C,EAAU7C,QAAAiD,2CACbC,EAAA,OAAA,GAAA,qEARTT,GAAA,IAAA,CALAL,EAAkBe,EAAA,CACVtC,+BACRuC,gBAAIF,EAAA,OAAA,GAAAG,GAAAR,EAAA9C,KAAAsD,GACHC,KAAA,GACAC,YAAAV,EAAA9C,KAAA+C,WAAyBC,wICVhCS,EAAepE,EAAgB,CAC7BM,QACE,MAAM+D,YAAEA,GAAgBC,IAExB,MAAO,IAAMD,EAAYD"}