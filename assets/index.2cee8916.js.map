{"version":3,"file":"index.2cee8916.js","sources":["../../src/views/setting/payment-method/promo-code/edit/index.vue"],"sourcesContent":["<template>\n  <Modal v-model=\"showModal\" size=\"xs\" @close=\"closeModal\">\n    <template #header>\n      <h5>Edit Promo Code</h5>\n    </template>\n    <template #default>\n      <PromoCodeForm ref=\"refForm\" v-model:data=\"formData\" />\n    </template>\n    <template #footer>\n      <div class=\"flex items-center justify-between\">\n        <a\n          class=\"text-red-04 py-4 px-4 hover:text-red-02\"\n          @click.prevent=\"closeModal\">\n          Cancel\n        </a>\n        <Button\n          view=\"smooth\"\n          color=\"blue\"\n          @click=\"updateCoupon\"\n          :loading=\"loading.update\">\n          Save\n        </Button>\n      </div>\n    </template>\n  </Modal>\n</template>\n\n<script>\nimport { defineComponent, ref } from 'vue'\nimport { useRouter, useRoute } from 'vue-router'\nimport { useCouponCodes } from 'composable/setting'\nimport Button from 'bbUi/components/button/button.vue'\nimport Modal from 'bbUi/components/modal/modal.vue'\nimport PromoCodeForm from 'components/CouponCode/Form.vue'\nimport { ElMessage } from 'element-plus'\n\nexport default defineComponent({\n  components: {\n    Button,\n    PromoCodeForm,\n    Modal\n  },\n  async setup(props, { emit }) {\n    const showModal = ref(true)\n    const { stateShow, formData, loading, actionShow, actionUpdate } = useCouponCodes()\n    const router = useRouter()\n    const route = useRoute()\n    const refForm = ref(null)\n    const closeModal = () => {\n      router.push({\n        name: 'settingPayoutsPromoCode'\n      })\n    }\n    const updateCoupon = async () => {\n      const isValid = refForm.value?.validate && refForm.value.validate() || false\n      if(isValid) await actionUpdate(route.params.id, () => {\n        router.push({\n          name: 'settingPayoutsPromoCode'\n        })\n        ElMessage({\n          type: 'success',\n          message: 'Promo Code updated'\n        })\n      })\n    }\n    await actionShow(route.params.id)\n    Object.assign(formData, {\n      code: stateShow.value.code,\n      type: stateShow.value.type,\n      amount: stateShow.value.amount\n    })\n    return {\n      stateShow,\n      refForm,\n      formData,\n      loading,\n      updateCoupon,\n      showModal,\n      closeModal\n    }\n  }\n})\n</script>"],"names":["_sfc_main","defineComponent","components","Button","PromoCodeForm","Modal","[object Object]","props","emit","showModal","ref","stateShow","formData","loading","actionShow","actionUpdate","useCouponCodes","router","useRouter","route","useRoute","refForm","params","id","Object","assign","code","value","type","amount","updateCoupon","async","_a","validate","push","name","_u","message","closeModal","_createBlock","_component_Modal","onUpdate:modelValue","_cache","$event","_ctx","size","header","_withCtx","_createVNode","_component_PromoCodeForm","footer","_hoisted_1","_createElementVNode","class","_withModifiers","args","_component_Button","view","color","onClick"],"mappings":"sXAoCA,MAAKA,EAAaC,EAAa,CAC7BC,WAAY,CACVC,OAAAA,gBACAC,QACAC,GAEIC,YAAMC,GAAOC,KAAEA,IACnB,MAAMC,EAAYC,GAAI,IAChBC,UAAEA,EAAAC,SAAWA,EAAUC,QAAAA,EAAAC,WAASA,eAAYC,GAAiBC,IAC7DC,EAASC,IACTC,EAAQC,IACRC,EAAUX,EAAI,MAwBb,aANDI,EAAWK,EAAMG,OAAOC,IAC9BC,OAAOC,OAAOb,EAAU,CACtBc,KAAMf,EAAUgB,MAAMD,KACtBE,KAAMjB,EAAUgB,MAAMC,KACtBC,OAAQlB,EAAUgB,MAAME,SAEnB,CACLlB,UAAAA,EACAU,QAAAA,EACAT,SAAAA,EACAC,QAAAA,EACAiB,aAvBmBC,kBACH,OAAQC,EAAAX,EAAAM,gBAAOM,WAAYZ,EAAQM,MAAMM,aAAc,UACrDlB,EAAaI,EAAMG,OAAOC,IAAI,KAC9CN,EAAOiB,KAAK,CACVC,KAAM,4BAEEC,EAAA,CACRR,KAAM,UACNS,QAAS,2BAgBb5B,UAAAA,EACA6B,WA9BiB,KACjBrB,EAAOiB,KAAK,CACVC,KAAM,2LAjDaI,EAAAC,EAAA,wBAAEC,sBAASC,EAAA,OAAA,GAAAC,GAAAC,EAAAnC,UAAAkC,GAAEE,KAAA,2BACzB,CACTC,OAAAC,GAAA,aAAmB,GAAA,+CAGoCA,GAAA,IAAA,CAAxCC,EAAaC,EAAA,CAASvC,gGAGrCwC,OAAAH,GAAA,OAKM,MAAAI,EAAA,CAHFC,EAA+C,IAAA,CAC9CC,MAAK,kDAERX,EAAA,KAAAA,EAAA,GAAAY,GAAA,IAAAC,IAAAX,EAAAN,YAAAM,EAAAN,cAAAiB,IAAA,CAAA,cAOS,YALPP,EAAaQ,EAAA,CACbC,cACCC,MAAK,OACLC,QAASf,EAAOd,uDAEnBY,EAAA,OAAA,GAAA"}