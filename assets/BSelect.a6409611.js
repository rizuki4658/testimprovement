import{k as e,g as t,m as l,$ as a,o as s,t as d,D as i,w as o,B as m,F as c,q as n,G as r,a3 as u,a1 as p,a2 as y,K as b,U as v,A as f,Q as k,S as g,I as _}from"./vendor.9695fe57.js";import{e as h,_ as I}from"./index.73ae30fa.js";import{B as x}from"./BDropdown.85a0a8cb.js";const K=e({name:"BSelect",components:{Checkbox:h,BDropdown:x},props:{modelValue:{type:[Object,Array,String],default:()=>({})},multiple:{type:Boolean,default:!1},placeholder:{type:String,default:""},block:{type:Boolean,default:!1},itemKey:{type:[String,Function],default:"id"},itemName:{type:[String,Function],default:"name"},itemDisabled:{type:[String,Function],default:"disabled"},itemFilter:{type:Function,default:null},items:{type:Array,default:()=>[]},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},maxHeight:{type:[String,Number],default:"auto"},selectAll:{type:Boolean,default:!1},error:{type:Boolean,default:!1}},emits:["update:modelValue","selectItem"],setup(e,{emit:l}){const a=t({get:()=>e.modelValue||(e.multiple?[]:{}),set:e=>{l("update:modelValue",e)}}),s=t((()=>"function"==typeof e.itemKey)),d=t((()=>"function"==typeof e.itemName)),i=t((()=>"function"==typeof e.itemDisabled)),o=t((()=>e.placeholder||"Select an item")),m=t((()=>e.multiple?b(a.value):y(a.value))),c=t((()=>e.multiple?a.value.map((e=>p(e))):p(a.value))),n=t((()=>b(e.items))),r=t((()=>!!e.selectAll||(e.multiple?a.value.length>0:s.value?e.itemKey(a.value):a.value[e.itemKey]))),u=t((()=>"number"!=typeof e.maxHeight&&isNaN(parseInt(e.maxHeight))?e.maxHeight:`${e.maxHeight}px`)),p=t=>s.value?e.itemKey(t):t[e.itemKey],y=(t,l=null)=>({key:(s.value?e.itemKey(t):t[e.itemKey])||l,name:d.value?e.itemName(t):t[e.itemName],disabled:(i.value?e.itemDisabled(t):t[e.itemDisabled])||!1,value:t}),b=(t=[])=>{const l=t.map(y);return e.itemFilter?l.filter(e.itemFilter):l};return{items:n,selectedItem:a,placeholderText:o,hasSelectedItem:r,formattedSelectedItem:m,selectedItemKey:c,maxHeight:u,selectItem:t=>{if(!t.disabled){if(e.multiple){return c.value.includes(t.key)?void(a.value=a.value.filter((l=>s.value?e.itemKey(l):l[e.itemKey]!==t.key))):void(a.value=[...a.value,t.value])}a.value=t.value,l("selectItem",t.value)}}}}}),w={class:"b-select-trigger"},S={class:"b-select-trigger__placeholder"},B={key:1},$={class:"b-select-dropdown"},D={key:0,class:"b-select-dropdown__prepend"},F=["onClick"],H={key:1,class:"b-select-dropdown__append"};var N=I(K,[["render",function(e,t,h,I,x,K){const N=l("Checkbox"),A=l("BDropdown"),C=a("loading");return s(),d("div",{class:c(["b-select",e.block&&"b-select--block",e.disabled&&"b-select--disabled",e.error&&"b-select--error"])},[i(A,{block:e.block,offset:4,disabled:e.disabled},{default:o((({isExpanded:l})=>[m("div",w,[m("button",{class:c(["b-select-trigger__button",l&&"b-select-trigger__button--active"])},[m("div",S,[e.hasSelectedItem?n(e.$slots,"selected-item",r(u({key:0},{items:e.formattedSelectedItem})),(()=>[e.multiple?(s(!0),d(p,{key:0},y(e.formattedSelectedItem,(e=>(s(),d("div",{key:e.key,class:"b-select-chip"},[m("span",null,b(e.name),1)])))),128)):(s(),d("span",B,b(e.formattedSelectedItem.name),1))]),!0):n(e.$slots,"placeholder",{key:1},(()=>[m("p",null,b(e.placeholderText),1)]),!0)]),t[0]||(t[0]=m("div",{class:"b-select-trigger__icon"},[m("i",{class:"material-icons"},"keyboard_arrow_down")],-1))],2)])])),dropdown:o((({collapse:l})=>[m("div",$,[e.$slots.prepend?(s(),d("div",D,[n(e.$slots,"prepend",{},void 0,!0)])):v("",!0),f((s(),d("div",null,[m("div",{class:"b-select-dropdown__item-list",style:k({maxHeight:e.maxHeight})},[e.items.length>0?(s(),d(p,{key:0},[e.multiple?(s(!0),d(p,{key:0},y(e.items,(t=>(s(),d("div",{key:t.key,class:"b-select-dropdown__item"},[i(N,{disabled:t.disabled,"model-value":(e.multiple?e.selectedItemKey.includes(t.key):t.key==e.selectedItemKey)||e.selectAll&&!t.disabled,onClick:g((l=>e.selectItem(t)),["prevent"]),class:"font-medium"},{default:o((()=>[_(b(t.name),1)])),_:2},1032,["disabled","model-value","onClick"])])))),128)):(s(!0),d(p,{key:1},y(e.items,(t=>(s(),d("div",{key:t.key,class:c(["b-select-dropdown__item",t.disabled&&"b-select-dropdown__item--disabled",((e.multiple?e.selectedItemKey.includes(t.key):t.key==e.selectedItemKey)||e.selectAll)&&"b-select-dropdown__item--active"]),onClick:()=>{e.selectItem(t),!t.disabled&&l()}},b(t.name),11,F)))),128))],64)):n(e.$slots,"empty",{key:1},(()=>[t[1]||(t[1]=m("div",{class:"text-center px-4 pt-4 pb-6"},"No item found",-1))]),!0)],4)])),[[C,e.loading]]),e.$slots.append?(s(),d("div",H,[n(e.$slots,"append",{collapse:l},void 0,!0)])):v("",!0)])])),_:3},8,["block","disabled"])],2)}],["__scopeId","data-v-fb56b228"]]);export{N as B};
