import{u as e}from"./components.2c51ae72.js";import{f as t,_ as a,b as s}from"./index.ec266ec1.js";import{C as o}from"./card.198a6be1.js";import{S as r}from"./select.5f1e68e6.js";import{B as d}from"./Breadcrumb.0ccfede3.js";import{u as i}from"./index.32689823.js";import{r as l}from"./index.a87b789d.js";import{k as c,f as n,r as p,_ as u,m,o as f,t as b,B as x,D as g,n as y,w as v,K as j,U as T,a0 as k,I as w,A as _}from"./vendor.f1efedad.js";import{T as B,c as C}from"./TextEditor.7498b5b6.js";import{A as R}from"./setting.bd993b06.js";import"./LoadingCard.93d3634e.js";import"./breadcrumb.624a01cc.js";import"./index.05b14cb2.js";const A=c({components:{Input:t,TextEditor:B},props:{codes:{type:Array,default:()=>[]},data:{type:Object,default:()=>({receipt_text:""})}},setup(e){const t=n(null),a=p(e.data),s=p({editor:C.exports.Editor,config:{htmlSupport:{allow:[{styles:!0,classes:!0}]}}}),o=i({receipt_text:{required:l}},a,{$lazy:!0});return{refTextEditor:t,data:a,validation:o,ckeditor:s,validate:async()=>{if(!t.value.isEditorReady)return!1;return!!(await t.value.forceSave())&&(o.value.$validate(),!o.value.$invalid)},copyText:e=>{navigator.clipboard.writeText(e).then((()=>{u({type:"success",message:"Text copy to clipbord"})}))}}}}),E={class:"grid grid-cols-1"},S={class:"flex"},h={class:"mr-2"},F=["onClick"];const U=c({components:{Button:s,Card:o,Input:t,Select:r,Breadcrumb:d,ReceiptForm:a(A,[["render",function(e,t,a,s,o,r){const d=m("TextEditor"),i=m("TableColumn"),l=m("Table");return f(),b("div",E,[x("div",null,[g(d,{ref:"refTextEditor",modelValue:e.data.receipt_text,"onUpdate:modelValue":t[0]||(t[0]=t=>e.data.receipt_text=t),options:e.ckeditor},null,8,["modelValue","options"]),e.codes&&Array.isArray(e.codes)?(f(),y(l,{key:0,data:e.codes,class:"mt-6"},{default:v((()=>[g(i,{prop:"code",label:"Code"},{default:v((t=>[x("div",S,[x("span",h,j(t.row.code),1),x("i",{class:"material-symbols-outlined text-lg text-teal-04",onClick:a=>e.copyText(t.row.code)},"content_copy",8,F)])])),_:1}),g(i,{prop:"desc",label:"Description"})])),_:1},8,["data"])):T("",!0)])])}]])},async setup(e,{emit:t}){const a=n(null),{state:s,data:o,loading:r,actionAll:d,actionUpdate:i}=R();await d();return{refReceiptForm:a,breadcrumb:[{text:"Settings",to:{name:"setting"}},{text:"Buyback Receipt"}],stateAll:s,data:o,loading:r,updateReceipt:async()=>{if(a.value){r.update=!0;await a.value.validate()&&await i((()=>{u({type:"success",message:"Buyback receipt changed"})}))}}}}}),I={class:"flex justify-between lg:items-center md:items-end md:flex-row flex-col items-start mb-8"},V={class:"flex justify-end"};var $=a(U,[["render",function(e,t,a,s,o,r){const d=m("Breadcrumb"),i=m("ReceiptForm"),l=m("Button"),c=m("Card"),n=k("loading");return f(),b("div",null,[x("div",I,[g(d,{pageTitle:"Buyback Receipt",backTo:{name:"setting"},items:e.breadcrumb},null,8,["items"])]),g(c,null,{header:v((()=>t[1]||(t[1]=[x("h5",{class:"text-lg"},"Receipt Text",-1)]))),footer:v((()=>[x("div",V,[g(l,{color:"teal",view:"smooth",onClick:e.updateReceipt,loading:e.loading.update},{default:v((()=>t[2]||(t[2]=[w("Save")]))),_:1},8,["onClick","loading"])])])),default:v((()=>[_(g(i,{ref:"refReceiptForm",data:e.data,"onUpdate:data":t[0]||(t[0]=t=>e.data=t),codes:e.stateAll.receipt.codes,class:"mt-6"},null,8,["data","codes"]),[[n,e.loading.all]])])),_:1})])}]]),D=c({setup(){const{genSuspense:t}=e();return()=>t($)}});export{D as default};
