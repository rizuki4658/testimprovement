var e=Object.defineProperty,t=Object.defineProperties,s=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,o=(t,s,l)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[s]=l,c=(e,t)=>{for(var s in t||(t={}))a.call(t,s)&&o(e,s,t[s]);if(l)for(var s of l(t))r.call(t,s)&&o(e,s,t[s]);return e},n=(e,l)=>t(e,s(l));import{s as i,a3 as u,v as d}from"./index.dcc9fc55.js";import{r as p,g as m,f as y,b as v}from"./vendor.9695fe57.js";const f=p({devices:!1,detail:!1,processor:!1,hardDrive:!1,memory:!1,graphicsCard:!1}),_=p({devices:[],detail:[],processor:[],hardDrive:[],memory:[],graphicsCard:[]}),h=(e="instore",t=!1)=>{const s=p({product_id:null,product_name:null,category_id:null,category_name:null,condition_id:null,condition_price:0,color_id:null,color:null,is_mac:0,is_custom:0,qty:1,price:0,imei_sn:null,buyback_type:e,is_editable:t?1:0,questions:[]}),l=p({processor:null,hardDrive:null,memory:null,graphicsCard:null}),a=p({length:{selected:null,is_custom:!1},loft:{selected:null,is_custom:!1},gender:{selected:null,is_custom:!1},shaft_model:{selected:null,is_custom:!1},shaft_material:{selected:null,is_custom:!1}}),r=m((()=>i.state.user&&i.state.user.bbbScan&&!!i.state.user.bbbScan.device)),o=()=>{l.processor=null,l.hardDrive=null,l.memory=null,l.graphicsCard=null},c=()=>{a.length.selected=null,a.loft.selected=null,a.gender.selected=null,a.shaft_model.selected=null,a.shaft_material.selected=null};return{data:s,dataComputer:l,dataGolf:a,isDeviceScan:r,unsetData:(e=!0)=>{e&&(s.product_id=null,s.category_id=null,s.category_name=null,s.product_name=null,s.is_mac=0,s.is_custom=0,s.color_id=s.color=null,s.questions=[]),s.condition_id=null,s.condition_price=0,s.qty=1,s.price=0,o(),c()},unsetDataComputer:o}},b=(e={buybackType:"instore"})=>{const t=y(1),s=y([]),l=y(!1),a=p({productId:null}),r=e=>({name:e,value:e}),o=e=>({name:e,options:[],is_custom:!1,selected:r(null)}),n=p({length:o("Length"),loft:o("Loft"),gender:o("Gender"),shaft_model:o("Shaft Model"),shaft_material:o("Shaft Material")}),u=m((()=>Object.fromEntries(Object.entries(n).map((([e,t])=>[e,t.selected.value])).filter((([e,t])=>null!==t))))),d=m((()=>s.value.map((e=>n[e]?c({key:e},n[e]):null)).filter((e=>null!==e)))),v=m((()=>d.value.slice(0,t.value))),f=(e,t=[])=>{n[e]?n[e].options=t:console.warn(`Invalid key ${e} for golf spec`)};return{item:a,step:t,steps:s,specsOptions:v,specsValues:u,specs:n,loading:l,setItem:(e={})=>{for(const t in a)void 0!==e[t]&&(a[t]=e[t])},setSteps:(e=[])=>{s.value=e,t.value=e.length},setSpec:(e,t,s={})=>{if(!n.hasOwnProperty(e))return void console.warn(`Invalid key ${e} for golf spec`);n[e].selected=t;s.hasOwnProperty("is_custom")&&(n[e].is_custom=s.is_custom)},getSpecOptions:async()=>{try{l.value=!0;const e=await i.dispatch("buyback/getGolfSpecs",{product_id:a.productId,golf_spec:u.value});for(const[t,s]of Object.entries(e||{}))f(t,(Array.isArray(s)?s:[]).map((e=>({name:e,value:e}))))}catch(e){console.error("Error getting spec options: ",e)}finally{l.value=!1}},unsetSpecs:()=>{Object.entries(n).forEach((([e])=>{n[e].selected={name:null,value:null},n[e].is_custom=!1}))},createSelectedSpecOption:r,setCustomSpec:(e,t=!0)=>{n.hasOwnProperty(e)?n[e].is_custom=t:console.warn(`Invalid key ${e} for golf spec`)}}},g=(e="instore",t=!1)=>{const s=p({q:null}),l=p({devices:!1,processor:!1,hardDrive:!1,memory:!1,graphicsCard:!1}),a=p({devices:[],detail:[],processor:[],hardDrive:[],memory:[],graphicsCard:[]}),r=m((()=>a.devices.map((t=>n(c({},t),{disabled:0===t[e]})))));let o=!1;return{data:s,loading:l,items:a,devices:r,action:async(r={},p=(()=>{}))=>{const m=r.type?u(r.type):"devices",y=n(c({},r),{buyback_type:e,is_editable:t?1:0});try{l[m]=!0,f[m]=!0,a[m]=await i.dispatch("device/search",c(c({},s),y)),_[m]=a[m],d(p)&&p(null)}catch(h){v.isCancel(h)&&(o=!0),d(p)&&p(h)}finally{if(o)return void(o=!1);l[m]=!1,f[m]=!1}}}},O=(e="instore",t=!1)=>{const s=y(!1),l=y([]);return{loading:s,items:l,action:async(a,r=(()=>{}))=>{try{const o=n(c({},a),{buyback_type:e,is_editable:t?1:0});s.value=!0,l.value=await i.dispatch("device/conditions",o),d(r)&&r()}finally{s.value=!1}},actionCustom:async(e,t=(()=>{}))=>{try{s.value=!0,l.value=await i.dispatch("device/customConditions",e),d(t)&&t()}finally{s.value=!1}},unset:()=>{l.value=[]}}},w=()=>{const e=y([]);return{colors:e,getColors:async e=>{try{return await i.dispatch("device/colors",c({},e))}finally{}},unset:()=>{e.value=[]}}};export{g as a,O as b,w as c,b as d,_ as i,f as l,h as u};
