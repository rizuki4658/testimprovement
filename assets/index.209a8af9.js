var e=Object.defineProperty,a=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,o=(a,t,s)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s;import{u as l}from"./components.2c51ae72.js";import{k as d,a5 as i,W as n,m as r,a0 as c,A as m,o as u,n as p,w as f,B as b,K as v,t as y,D as g,I as k,U as C,f as j,y as I,s as h,_ as D,a2 as _,a3 as w,O as x}from"./vendor.f1efedad.js";import{d as S,F as B,e as A,G as O,H as V}from"./buyback.129968bf.js";import{B as F}from"./Breadcrumb.0ccfede3.js";import{C as M}from"./card.198a6be1.js";import{b as U,_ as P,f as T,d as Q,g as R}from"./index.ec266ec1.js";import{_ as H}from"./badge.add574f9.js";import{c as E}from"./status.6f59bf91.js";import{e as G}from"./setting.bd993b06.js";import{S as L}from"./select.5f1e68e6.js";import{D as q}from"./Form.692df6cc.js";import{I as K}from"./ItemTable.9d29a947.js";import"./LoadingCard.93d3634e.js";import"./date.f86face7.js";import"./breadcrumb.624a01cc.js";import"./device.1c0535c0.js";import"./auto-complete.ab057b68.js";import"./index.32689823.js";import"./index.05b14cb2.js";import"./Currency.36fab82a.js";import"./Accordion.f9ded6bf.js";import"./BBTable.f8945a26.js";import"./DeviceSearch.94524008.js";import"./BDropdown.fa3d473f.js";import"./DeviceGolfSpec.ca3b8ee6.js";import"./BSelect.326ec8ec.js";import"./fieldset.93cf49f0.js";import"./dymo.05bd7577.js";import"./PrintLabel.c66231c2.js";const N=d({components:{Button:U,Card:M,Badge:H},props:{},setup(e){const{action:l,state:d,loading:r}=S("online"),c=i();return n((async()=>{await l(((e,l)=>{for(var d in l||(l={}))t.call(l,d)&&o(e,d,l[d]);if(a)for(var d of a(l))s.call(l,d)&&o(e,d,l[d]);return e})({id:c.params.buybackId},c.params.marketerId&&"me"===c.params.marketerId&&{marketer_id:""}||c.params.marketerId&&{marketer_id:c.params.marketerId}))})),{state:d,loading:r,color:E}}}),W={key:0,class:"my-4"},z={class:"flex items-center mb-2"},J={class:"items-center"};var X=P(N,[["render",function(e,a,t,s,o,l){const d=r("Badge"),i=r("Card"),n=c("loading");return m((u(),p(i,null,{header:f((()=>{var a;return[b("h6",null,"Buyback ID #"+v(null==(a=e.state)?void 0:a.box_id),1)]})),default:f((()=>{var t,s,o,l;return[(null==(t=e.state)?void 0:t.box_id)?(u(),y("div",W,[b("div",z,[a[0]||(a[0]=b("span",{class:"material-icons text-base mr-2"},"date_range",-1)),b("p",J,v((null==(s=e.state)?void 0:s.created_at)||"-"),1)]),g(d,{color:e.color((null==(l=null==(o=e.state)?void 0:o.order_status)?void 0:l.short_name)||"-")},{default:f((()=>{var a,t;return[k(v((null==(t=null==(a=e.state)?void 0:a.order_status)?void 0:t.status_name)||"-"),1)]})),_:1},8,["color"])])):C("",!0)]})),_:1})),[[n,e.loading]])}]]);const Y=d({components:{Button:U,Card:M,Badge:H,Input:T,Select:L,Modal:Q,DeviceForm:q},props:{},setup(e){const{loading:a,state:t,filters:s,modal:o,data:l,actionShow:d,actionCreate:r,setSelectedDevice:c,unsetSelectedDevice:m}=B(),{actionAll:u}=A("online"),{actionAll:p,stateAll:f,filter:b,loading:v}=G(),y=i(),g=j(null);return I((()=>s),R((()=>{d(y.params.buybackId)}),500),{deep:!0}),n((async()=>{b.is_notpaginate=1,await Promise.all([d(y.params.buybackId),p()])})),{refDeviceForm:g,data:l,stateConditions:f,state:t,loading:a,loadingCondition:v,filters:s,modal:o,handleQuickAdd:e=>{c(e),o.create=!0},handleAddDevice:async()=>{await h((()=>g.value.validate()))&&await r(y.params.buybackId,(async()=>{D({type:"success",message:"Item added"}),o.create=!1,await u(y.params.buybackId,!0)}))},unsetSelectedDevice:m}}}),Z={class:"grid grid-cols-5 gap-4 mb-4"},$={class:"col-span-3"},ee={class:"col-span-2"},ae={class:"overflow-y-auto min-h-max",style:{maxHeight:"450px",minHeight:"60px"}},te={key:0,class:"mt-6"},se={class:"font-semibold text-teal-04 mb-3"},oe={class:"flex justify-between"},le={class:"mr-3"},de={class:"font-bold"},ie={class:"mr-3"},ne={class:"font-bold"},re={class:"mr-3"},ce={class:"font-bold"},me={key:1,class:"mt-8 mb-4"},ue={class:"flex justify-end"};var pe=P(Y,[["render",function(e,a,t,s,o,l){const d=r("Input"),i=r("Select"),n=r("Button"),p=r("Card"),C=r("DeviceForm"),j=r("Modal"),I=c("loading");return u(),y(_,null,[g(p,null,{header:f((()=>a[6]||(a[6]=[b("h6",null,"Items",-1)]))),default:f((()=>{var t,s;return[b("div",null,[b("div",Z,[b("div",$,[g(d,{modelValue:e.filters.search,"onUpdate:modelValue":a[0]||(a[0]=a=>e.filters.search=a),placeholder:"Search items",block:""},null,8,["modelValue"])]),b("div",ee,[g(i,{modelValue:e.filters.condition,"onUpdate:modelValue":a[1]||(a[1]=a=>e.filters.condition=a),placeholder:"Condition",class:"w-full",items:e.stateConditions,by:"condition_name",name:"condition_name",loading:e.loadingCondition.all},null,8,["modelValue","items","loading"])])]),m((u(),y("div",ae,[(null==(s=null==(t=e.state)?void 0:t.data)?void 0:s.length)?(u(),y("div",te,[(u(!0),y(_,null,w(e.state.data,((t,s)=>(u(),y("div",{key:s,class:"flex justify-between items-center mb-8"},[b("div",null,[b("p",se,v(t.product_name),1),b("div",oe,[b("p",le,[a[7]||(a[7]=k("Qty: ")),b("span",de,v(t.qty),1)]),b("p",ie,[a[8]||(a[8]=k("Price: ")),b("span",ne,v(t.price),1)]),b("p",re,[a[9]||(a[9]=k("Condition: ")),b("span",ce,v(t.condition),1)])])]),b("div",null,[g(n,{onClick:a=>e.handleQuickAdd(t),color:"teal",dense:""},{default:f((()=>a[10]||(a[10]=[k("Quick Add")]))),_:2},1032,["onClick"])])])))),128))])):(u(),y("div",me,a[11]||(a[11]=[b("p",{class:"font-semibold text-center"},"No data",-1)])))])),[[I,e.loading.all]])])]})),_:1}),g(j,{modelValue:e.modal.create,"onUpdate:modelValue":a[5]||(a[5]=a=>e.modal.create=a),title:"Quick Add Item",onClose:e.unsetSelectedDevice},{default:f((()=>[g(C,{ref:"refDeviceForm","auto-fill":"",data:e.data.selected.device.detail,"onUpdate:data":a[2]||(a[2]=a=>e.data.selected.device.detail=a),device:e.data.selected.device.specs.device,"onUpdate:device":a[3]||(a[3]=a=>e.data.selected.device.specs.device=a),dataComputer:e.data.selected.device.specs.computer,"onUpdate:dataComputer":a[4]||(a[4]=a=>e.data.selected.device.specs.computer=a),"multi-imei":""},null,8,["data","device","dataComputer"])])),footer:f((()=>[b("div",ue,[g(n,{onClick:e.handleAddDevice,loading:e.loading.create,color:"teal",view:"outlined"},{default:f((()=>a[12]||(a[12]=[k("Add")]))),_:1},8,["onClick","loading"])])])),_:1},8,["modelValue","onClose"])],64)}]]);const fe=d({components:{Card:M,Button:U,Modal:Q,ItemTable:K,DeviceForm:q},async setup(){const{device:e,modal:a,unsetData:t,openModal:s,loading:o,actionCreate:l}=A("online"),d=i(),n=j(null);return{refDeviceForm:n,loading:o,device:e,modal:a,unsetData:t,openModal:s,actionCreate:l,loadingShow:O,addDevice:async()=>{await h((()=>n.value.validate()))&&await l(d.params.buybackId,(async()=>{D({type:"success",message:"Item added"})}),!0)}}}}),be={class:"flex justify-between items-center"};const ve=d({components:{Breadcrumb:F,Card:M,Button:U,Show:X,Devices:pe,Items:P(fe,[["render",function(e,a,t,s,o,l){const d=r("Button"),i=r("ItemTable"),n=r("Card"),v=r("DeviceForm"),C=r("Modal"),j=c("loading");return u(),y(_,null,[m((u(),p(n,null,{header:f((()=>[b("div",be,[a[5]||(a[5]=b("h6",null,"Data Match Items",-1)),g(d,{color:"teal",dense:"",onClick:a[0]||(a[0]=a=>e.openModal("create"))},{default:f((()=>a[4]||(a[4]=[b("i",{class:"material-icons mr-2"},"add",-1),k("Add Item")]))),_:1})])])),default:f((()=>[g(i,{"scan-in":"","buyback-type":"mailin"})])),_:1})),[[j,e.loadingShow.items.all]]),g(C,{modelValue:e.modal.create,"onUpdate:modelValue":a[3]||(a[3]=a=>e.modal.create=a),title:"Add Item",onClose:e.unsetData},{default:f((()=>[g(v,{ref:"refDeviceForm",data:e.device.data,"onUpdate:data":a[1]||(a[1]=a=>e.device.data=a),dataComputer:e.device.computer,"onUpdate:dataComputer":a[2]||(a[2]=a=>e.device.computer=a),"multi-imei":"","buyback-type":"mailin"},null,8,["data","dataComputer"])])),footer:f((()=>[g(d,{color:"teal",loading:e.loading.create,onClick:e.addDevice},{default:f((()=>a[6]||(a[6]=[k("Add Item")]))),_:1},8,["loading","onClick"])])),_:1},8,["modelValue","onClose"])],64)}]])},props:{},async setup(){const{loading:e,actionSave:a,actionRestore:t}=V(),{actionAll:s}=A("online"),o=i(),l=x();return{breadcrumb:[{text:"Ease Offer",to:{name:"easyOffer"}},{text:"Offer Detail",to:{name:"easyOfferDetail",params:{buybackId:o.params.buybackId}}},{text:"Data Match"}],loading:e,route:o,handleRestore:()=>t(o.params.buybackId,(async()=>{await s(o.params.buybackId,!0),D({type:"success",message:"Data match restored"})})),handleSave:()=>a(o.params.buybackId,(async()=>{await s(o.params.buybackId,!0),D({type:"success",message:"Data match saved"}),l.push({name:"easyOfferDetail",params:{buybackId:o.params.buybackId}})}))}}}),ye={class:"flex justify-center justify-between"},ge={class:"grid gap-6 grid-cols-8"},ke={class:"col-span-8 xl:col-span-2 lg-col-span-2"},Ce={class:"col-span-8 xl:col-span-6 lg-col-span-6"};var je=P(ve,[["render",function(e,a,t,s,o,l){const d=r("Breadcrumb"),i=r("Button"),n=r("Show"),c=r("Devices"),m=r("Items");return u(),y("div",null,[b("div",ye,[g(d,{class:"mb-12","page-title":"Data Match",backTo:{name:"easyOfferDetail",params:{buybackId:e.route.params.buybackId}},items:e.breadcrumb},null,8,["backTo","items"]),b("div",null,[g(i,{onClick:e.handleRestore,class:"mr-4",color:"orange",view:"outlined",loading:e.loading.restore},{default:f((()=>a[0]||(a[0]=[b("i",{class:"material-icons mr-1"},"replay",-1),k(" Restore")]))),_:1},8,["onClick","loading"]),g(i,{onClick:e.handleSave,color:"teal",view:"outlined",loading:e.loading.save},{default:f((()=>a[1]||(a[1]=[b("i",{class:"material-icons mr-1"},"save",-1),k(" Save")]))),_:1},8,["onClick","loading"])])]),b("div",ge,[b("div",ke,[g(n,{class:"mb-8"}),g(c)]),b("div",Ce,[g(m)])])])}]]),Ie=d({setup(){const{genSuspense:e}=l();return()=>[e(je)]}});export{Ie as default};
