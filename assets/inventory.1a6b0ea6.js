var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,o=(a,t,n)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[t]=n,s=(e,a)=>{for(var t in a||(a={}))l.call(a,t)&&o(e,t,a[t]);if(n)for(var t of n(a))i.call(a,t)&&o(e,t,a[t]);return e},r=(e,n)=>a(e,t(n));import{u as c,s as u,v as d,r as p,o as h}from"./index.9aa6481b.js";import{n as y}from"./date.f86face7.js";import{f as m,r as _,g as v,y as g}from"./vendor.f1efedad.js";import{c as w}from"./setting.2daa7691.js";const f=()=>{const{dateByTimezone:e}=c(),a=_({page:1,limit:10,search:"",sort_by:"",order_by:""}),t=_({all:!1,delete:!1,restore:!1,reset:!1,dataMatch:!1,singleSoldDate:!1,update:{status:new Map}}),n=_({delete:!1,restore:!1,reset:!1,phonecheck_info:!1,move_inventory:!1,singleSoldDate:!1}),l=m(null),i=m(null),o=v((()=>u.state.inventory.all));v((()=>{u.state.inventory.filter}));const p=()=>{l.value=null},h=v((()=>u.state.inventory.alert)),g=m(null),w=_({disabledDate:a=>a.getTime()>e.value.getTime(),shortcuts:[{text:"A Week Ago",value:[new Date(e.value.getTime()-y(e.value).weekAgo),e.value]},{text:"A Month Ago",value:[new Date(e.value.getTime()-y(e.value).monthAgo),e.value]},{text:"2 Month Ago",value:[new Date(e.value.getTime()-2*y(e.value).monthAgo),e.value]},{text:"3 Month Ago",value:[new Date(e.value.getTime()-3*y(e.value).monthAgo),e.value]}]});let f=!1;const b=v((()=>u.state.inventory.deeplink)),D=v((()=>u.state.inventory.data_match.post)),k=v((()=>u.state.inventory.data_match.get));return{data:a,state:o,loading:t,modal:n,selected:l,deleteNotes:i,unsetData:p,openModal:(e,a=(()=>{}))=>{n[e]=!0,d(a)&&a()},actionAll:async(e,n={},l=(()=>{}))=>{t.all=SVGComponentTransferFunctionElement;try{await u.dispatch("inventory/all",r(s(s({status:e},a),n),{page:a.page,search:a.search}))}finally{t.all=!1}d(l)&&l()},actionShowDeepLink:async(e,a=(()=>{}))=>{await u.dispatch("inventory/deeplink",e),d(a)&&a()},actionDataMatch:async(e,a=(()=>{}))=>{try{t.dataMatch=!0,await u.dispatch("inventory/dataMatch",e),d(a)&&a()}finally{t.dataMatch=!1}},actionGetDataMatch:async(e,a=(()=>{}))=>{await u.dispatch("inventory/getDataMatch",e),d(a)&&a()},removeGetDataMatch:()=>{u.dispatch("inventory/removeDataMatch")},actionDelete:async(e,a=(()=>{}))=>{t.delete=!0,await u.dispatch("inventory/updateNotes",{id:l.value,data:i.value}),await u.dispatch("inventory/delete",l.value),d(a)&&a(),i.value=null,n.delete=!1,t.delete=!1,p()},actionReset:async(e,a=(()=>{}))=>{t.reset=!0,await u.dispatch("inventory/reset",l.value),d(a)&&a(),n.reset=!1,t.reset=!1,p()},actionRestore:async(e,a=(()=>{}))=>{t.restore=!0,await u.dispatch("inventory/restore",l.value),d(a)&&a(),n.restore=!1,t.restore=!1,p()},alert:h,actionAlert:(e,a)=>{"default"===e&&u.dispatch("inventory/alertDefault",a),"pending"===e&&u.dispatch("inventory/alertPending",a)},filterDateRef:g,filterDateOptions:w,filterDateFocus:()=>{f?f=!1:(f=!0,g.value.focus())},stateDeeplink:b,stateDataMatch:D,stateGetDataMatch:k,actionSingleSoldPrice:async(e,a=(()=>{}))=>{try{t.singleSoldDate=!0;const l=await u.dispatch("inventory/updateSingleSoldPrice",e);return d(a)&&a(),n.singleSoldDate=!1,t.singleSoldDate=!1,l}catch(l){return t.singleSoldDate=!1,l}},actionChangeStatus:async(e,a,n=(()=>{}))=>{try{t.update.status.set(e,!0),await u.dispatch("inventory/updateStatus",{id:e,data:{status_id:a}}),d(n)&&n(!1)}catch(l){d(n)&&n(l)}finally{t.update.status.delete(e)}}}},b=()=>{const e=_({product_id:null,condition_name:null,imei_sn:null,is_mac:0,paid:0}),a=m(!1);return{data:e,loading:a,action:async(t=(()=>{}))=>{a.value=!0;try{const n={};Object.keys(e).forEach((a=>{"golfSpecs"===a?Object.keys(e[a]).forEach((t=>{var l;n[t]=null==(l=e[a][t])?void 0:l.value})):"golfSteps"!==a&&(n[a]=e[a])}));const l=await u.dispatch("inventory/create",n);d(t)&&t(l)}finally{a.value=!1}}}},D=m(null),k=m({all:!1}),S=()=>{const e=m(null),a=m(!1),t={backmarket_new_price:null,backmarket_id_manual:null,box_id:null,graphics:null,is_continue:null,location:[],works_with:null},n=_({show:void 0,update:void 0}),l=v((()=>u.state.inventory.update)),i=v((()=>u.state.inventory.backmarket)),o=v((()=>u.state.inventory.show.data));return{data:e,loading:a,state:o,actionShow:async(e,l=(()=>{}))=>{a.value=!0,k.value.all=!0,n.show&&n.show.abort(),n.show=new AbortController;try{await u.dispatch("inventory/show",{id:e,signal:n.show.signal});const i=p(o.value);t.box_id=i.order_detail?i.order_detail.order.box_id:null,t.graphics=i.graphics?i.graphics:"N/A",t.is_continue=null!=i.continue?i.continue:null,D.value=s(s({},i),t),d(l)&&l(),a.value=!1,k.value.all=!1}catch(i){if("canceled"===i.message)return;a.value=!1,k.value.all=!1}},actionUpdate:async(e,t=(()=>{}))=>{n.update&&n.update.abort(),n.show&&n.show.abort(),n.update=new AbortController,a.value=!0;try{const l=await u.dispatch("inventory/update",{id:e.id,data:e.data,signal:n.update.signal});return d(t)&&t(),await M().action(e.id),a.value=!1,l}catch(l){return a.value=!1,!1}},actionCreateTag:async(e,a=(()=>{}))=>{await u.dispatch("inventory/createTag",e)},actionSearchBackmarket:async(e,a=(()=>{}))=>{await u.dispatch("inventory/searchBackmarket",{search:e})},actionGetColors:async(e,a=(()=>{}))=>await u.dispatch("inventory/getColors",s({},e)),stateUpdate:l,stateBackmarket:i}},M=()=>{const e=m(!1),a=v((()=>u.state.inventory.show.transferHistories));return{loading:e,state:a,action:async(a,t=(()=>{}))=>{e.value=!0,await u.dispatch("inventory/showTransferHistories",a),d(t)&&t(),e.value=!1}}},j=()=>{const e=m(!1),a=v((()=>u.state.inventory.show.sellingHistories));return{loading:e,state:a,action:async(a,t=(()=>{}))=>{e.value=!0,await u.dispatch("inventory/showSellingHistories",a),d(t)&&t(),e.value=!1}}},O=()=>{const e=m(!1),a=v((()=>u.state.inventory.show.morePrice));return{loading:e,state:a,action:async(a,t=(()=>{}))=>{e.value=!0,await u.dispatch("inventory/storeMorePrice",a),d(t)&&t(),e.value=!1},actionUpdate:async(a,t=(()=>{}))=>{e.value=!0,await u.dispatch("inventory/updateMorePrice",a),d(t)&&t(),e.value=!1},actionDelete:async(a,t=(()=>{}))=>{e.value=!0,await u.dispatch("inventory/deleteMorePrice",a),d(t)&&t(),e.value=!1}}},A=()=>{const e=_({delete:!1});return{loading:e,actionDelete:async(a,t=(()=>{}))=>{try{e.delete=!0,await u.dispatch("inventory/deleteShopify",a),d(t)&&t()}finally{e.delete=!1}}}},x=()=>{const e=v((()=>u.state.inventory.move_locations)),a=m({location_id:null}),t=m(!1),n=m(!1),l=m({is_visibled:!1,is_loading:!1,selected:null});return{data:a,stateLocations:e,loading:t,modal:n,dropdown:l,actionLocation:async(e=(()=>{}))=>{try{t.value=!0,await u.dispatch("inventory/allMoveLocation"),d(e)&&e()}finally{t.value=!1}},actionMoveLocation:async(e,a=(()=>{}))=>{try{t.value=!0,await u.dispatch("inventory/moveLocation",e),d(a)&&a()}finally{t.value=!1}},actionMoveLocationBulk:async(e,a=(()=>{}))=>{try{t.value=!0,await u.dispatch("inventory/moveLocationBulk",e),d(a)&&a()}finally{t.value=!1}}}},P=()=>{const{data:e,actionShow:a}=w(),t=m(!0),n=_({admin:{email:null,first_name:null,last_name:null},company:{name:null,sub_domain:null,company_email:null,email_sender:null,address:null,suite:null,phone:"",city:null,zip:null,country:null,address_text:null},item:[],payment_method:[],total_price:0,wholeseller:null,wholeseller_name:null,wholeseller_currency_symbol:null}),l=_({box_id:null,invoice_id:null,created_at:null,payment_method:null,customer_email:null,company_name:null,company_address:null,company_phone:"",company_email:null,order_detail:[],total:0,sub_total:0,pdf:"#",shipping_label:"#",is_fetched:!1,payment_extra_amount:0,shipping_label_is_generate:0}),i=_({wholeseller_subdomain:null,customer_email:null,shipping_firstname:null,shipping_lastname:null,shipping_address1:null,shipping_city:null,shipping_state:null,shipping_zip:null,shipping_phone:"",shipping_country:null,shipping_suite:null,order_detail:[]}),o=m({}),c=_({show:!1,get:!1,create:!1,autofill:!1}),p=m(!1);return g((()=>{var e;return null==(e=o.value)?void 0:e.payment_method}),(t=>{if(t)switch(t.toLowerCase()){case"bill":c.autofill=!0,a().then((()=>{o.value.bill_legal_business_name=e.legal_business_name,o.value.bill_network_id=""})).catch((()=>c.autofill=!1)).finally((()=>c.autofill=!1))}})),{isShowDetails:t,state:n,stateShow:l,formData:i,formDataPaymentMethod:o,modal:p,loading:c,resetData:()=>{Object.assign(n,{company:null,item:[],payment_method:[],total_price:0,wholeseller:null,wholeseller_name:null}),Object.assign(l,{box_id:null,invoice_id:null,created_at:null,payment_method:null,customer_email:null,company_name:null,company_address:null,company_phone:"",company_email:null,order_detail:[],total:0,sub_total:0,pdf:"#",shipping_label:"#",is_fetched:!1,shipping_label_is_generate:0}),Object.assign(i,{wholeseller_subdomain:null,customer_email:null,shipping_firstname:null,shipping_lastname:null,shipping_address1:null,shipping_city:null,shipping_state:null,shipping_zip:null,shipping_phone:null,shipping_country:null,shipping_suite:null,order_detail:[]}),o.value={}},actionShow:async(e,a=(()=>{}))=>{try{c.show=!0;const t=await u.dispatch("inventory/showSellBulkInstantly",e);if(!h(t))throw new Error;for(const[e,a]of Object.entries(t))Object.keys(l).includes(e)&&(l[e]=a);l.is_fetched=!0,d(a)&&a()}catch(t){d(a)&&a(t)}finally{c.show=!1}},actionGet:async(e,a=(()=>{}))=>{try{c.get=!0;(e=>{if(h(e)){for(const[a,t]of Object.entries(e))if("payment_method"!==a)n[a]=t;else if("payment_method"===a){let e=t;Array.isArray(e)||(e=Object.keys(t).map((e=>s({},t[e])))),n[a]=e.map((e=>r(s({},e),{component:e.is_custom?"Custom":e.name?e.name.replace(/ /g,""):""})))}if(1===n.payment_method.length){const e=n.payment_method[0];o.value.payment_method=e.name}i.customer_email=n.admin.email,i.shipping_firstname=n.admin.first_name||n.company.first_name,i.shipping_lastname=n.admin.last_name||n.company.last_name,i.shipping_address1=n.company.address,i.shipping_city=n.company.city,i.shipping_state=n.company.state,i.shipping_zip=n.company.zip,i.shipping_phone=n.company.phone,i.shipping_country=n.company.country,i.shipping_suite=n.company.suite,i.wholeseller_subdomain=n.wholeseller,i.order_detail=n.item}})(await u.dispatch("inventory/getSellBulkInstantly",e)),d(a)&&a()}catch(t){d(a)&&a(t)}finally{c.get=!1}},actionCreate:async(e=(()=>{}))=>{try{c.create=!0,delete i.true,delete i.undefined;const a=await u.dispatch("inventory/sellBulkInstantly",s(s({},r(s({},i),{order_detail:i.order_detail.map((e=>({product_id:e.product_id,inventory_id:e.inventory_id,condition_id:e.condition_id,name:e.name,qty:1,imei_sn:e.imei_sn,price:e.price_who_seller,is_price_parameterize:e.is_price_parameterize})))})),o.value));d(e)&&e(!1,a)}catch(a){d(e)&&e(a,null)}finally{c.create=!1}}}};export{S as a,f as b,O as c,D as d,x as e,A as f,j as g,M as h,P as i,b as u};
