{"version":3,"file":"index.15da2519.js","sources":["../../src/views/integration/odoo/index.vue","../../src/views/integration/odoo/index.js"],"sourcesContent":["<template>\n  <Input v-model=\"data.odoo_url\" :view=\"validation.odoo_url.$invalid ? 'danger' : 'default'\" class=\"my-4\" label=\"Odoo Url\" placeholder=\"\" block />\n  <small class=\"text-red-base block mb-4\" v-for=\"(error, errorIndex) of validation.odoo_url.$errors\" :key=\"errorIndex\">{{ error.$message }}. </small>\n  <Input v-model=\"data.odoo_database\" :view=\"validation.odoo_database.$invalid ? 'danger' : 'default'\" class=\"my-4\" label=\"Odoo Database\" placeholder=\"\" block />\n  <small class=\"text-red-base block mb-4\" v-for=\"(error, errorIndex) of validation.odoo_database.$errors\" :key=\"errorIndex\">{{ error.$message }}. </small>\n  <Input v-model=\"data.odoo_username\" :view=\"validation.odoo_username.$invalid ? 'danger' : 'default'\" class=\"my-4\" label=\"Odoo Username\" placeholder=\"\" block />\n  <small class=\"text-red-base block mb-4\" v-for=\"(error, errorIndex) of validation.odoo_username.$errors\" :key=\"errorIndex\">{{ error.$message }}. </small>\n  <Input v-model=\"data.odoo_password\" :view=\"validation.odoo_password.$invalid ? 'danger' : 'default'\" class=\"my-4\" label=\"Odoo Password\" placeholder=\"\" block />\n  <small class=\"text-red-base block mb-4\" v-for=\"(error, errorIndex) of validation.odoo_password.$errors\" :key=\"errorIndex\">{{ error.$message }}. </small>\n\n\n</template>\n\n<script>\nimport { defineComponent } from 'vue'\nimport { useShowAll } from 'composable/integration'\nimport { useVuelidate } from '@vuelidate/core'\nimport { required } from '@/validations/index'\nimport Button from 'bbUi/components/button/button.vue'\nimport Alert from 'bbUi/components/alert/alert.vue'\nimport Input from 'bbUi/components/input/input.vue'\nimport { ElMessage } from 'element-plus'\nimport { isFunction } from '@/utils/is'\n\nexport default defineComponent({\n  components: {\n    Button,\n    Alert,\n    Input\n  },\n  async setup(){\n    const { state, data, actionAll, actionUpdate, loading } = useShowAll()\n    const rules = {\n      odoo_url: {\n        required\n      },\n      odoo_database: {\n        required\n      },\n      odoo_username: {\n        required\n      },\n      odoo_password: {\n        required\n      }\n    }\n    const validation = useVuelidate(rules, data, {\n      $lazy: true\n    })\n    const validate = () => {\n      validation.value.$validate()\n      return !validation.value.$invalid\n    }\n\n    const update = async (callback=()=>{}) => {\n      const isValid = validate()\n      if( !isValid ) return\n      const payload = Object.assign({}, {\n        odoo_url: data.odoo_url,\n        odoo_database: data.odoo_database,\n        odoo_username: data.odoo_username,\n        odoo_password: data.odoo_password\n      })\n      await actionUpdate(payload, (response) => {\n        if( response.toLowerCase() === 'connection failed' ) return ElMessage({\n          type: 'warning',\n          message: 'Invalid Odoo configurations'\n        })\n        ElMessage({\n          type: 'success',\n          message: 'Odoo integration updated!'\n        })\n        isFunction(callback) && callback()\n      })\n    }\n\n    await Promise.all([\n      actionAll()\n    ])\n\n    return {\n      state,\n      data,\n      loading,\n      validation,\n      update\n    }\n  }\n})\n</script>","import { defineComponent, h, ref, reactive } from 'vue'\nimport { useSuspense } from 'composable/components'\nimport { useRoute, useRouter } from 'vue-router'\nimport Modal from 'bbUi/components/modal/modal.vue'\nimport Button from 'bbUi/components/button/button.vue'\nimport Index from './index.vue'\n\nexport default defineComponent({\n  async setup() {\n    const { genSuspense } = useSuspense()\n    const refComponent = ref(null)\n    const route = useRoute()\n    const router = useRouter()\n\n    const saveChanges = () => {\n      refComponent.value.update(() => {\n        router.push({\n          name: 'integration',\n          query: {\n            enable: route.query?.id || ''\n          }\n        })\n      })\n    }\n    const genSaveButton = () =>\n      h(\n        Button,\n        {\n          color: 'teal',\n          loading: refComponent.value && refComponent.value?.loading?.update,\n          onClick: saveChanges\n        },\n        {\n          default: () => 'Save'\n        }\n      )\n    const genComponent = () =>\n      genSuspense(\n        h(Index, {\n          ref: refComponent\n        })\n      )\n    const modalProps = reactive({\n      modelValue: true,\n      closeTo: {\n        name: 'integration',\n        query: {\n          reload: 1\n        }\n      },\n      size: 'xs'\n    })\n    const modalSlots = reactive({\n      header: () => 'Odoo Config',\n      default: () => genComponent(),\n      footer: () => genSaveButton()\n    })\n\n    return () => h(Modal, modalProps, modalSlots)\n  }\n})\n"],"names":["defineComponent","components","Button","Alert","Input","state","data","actionAll","actionUpdate","loading","useShowAll","validation","useVuelidate","odoo_url","required","odoo_database","odoo_username","odoo_password","$lazy","Promise","all","update","async","callback","value","$validate","$invalid","payload","Object","assign","response","toLowerCase","ElMessage","type","message","_u","isFunction","_openBlock","_createElementBlock","_Fragment","_createVNode","_component_Input","modelValue","_ctx","onUpdate:modelValue","_cache","$event","view","class","label","placeholder","_renderList","$errors","error","errorIndex","index","[object Object]","genSuspense","useSuspense","refComponent","ref","route","useRoute","router","useRouter","saveChanges","push","name","query","enable","_a","id","modalProps","reactive","closeTo","reload","size","modalSlots","header","default","h","Index","footer","genSaveButton","color","_b","onClick","Modal"],"mappings":"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"}