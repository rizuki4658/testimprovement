import{u as e}from"./components.2c51ae72.js";import{k as a,_ as n,m as o,o as s,t as l,D as t,a2 as i,a3 as r,K as d,f as c,a5 as u,O as p,r as m,x as h}from"./vendor.f1efedad.js";import{b as k,j as v,f,_,v as y,d as g}from"./index.ec266ec1.js";import{a as b}from"./integration.db2aa4c7.js";import{u as j}from"./index.32689823.js";import{r as x}from"./index.a87b789d.js";import"./LoadingCard.93d3634e.js";import"./card.198a6be1.js";import"./index.05b14cb2.js";var $=_(a({components:{Button:k,Alert:v,Input:f},async setup(){const{state:e,data:a,actionAll:o,actionUpdate:s,loading:l}=b(),t=j({phonecheck_api_key:{required:x},phonecheck_username:{required:x}},a,{$lazy:!0});return await Promise.all([o()]),{state:e,data:a,loading:l,validation:t,update:async(e=(()=>{}))=>{if(!(t.value.$validate(),!t.value.$invalid))return;const o=Object.assign({},{phonecheck_api_key:a.phonecheck_api_key,phonecheck_username:a.phonecheck_username});await s(o,(a=>{if("connection failed"===a.toLowerCase())return n({type:"warning",message:"Invalid PhoneCheck configurations"});n({type:"success",message:"PhoneCheck integration updated!"}),y(e)&&e()}))}}}}),[["render",function(e,a,n,c,u,p){const m=o("Input");return s(),l(i,null,[t(m,{modelValue:e.data.phonecheck_api_key,"onUpdate:modelValue":a[0]||(a[0]=a=>e.data.phonecheck_api_key=a),view:e.validation.phonecheck_api_key.$invalid?"danger":"default",class:"my-4",label:"PhoneCheck API Key",placeholder:"",block:""},null,8,["modelValue","view"]),(s(!0),l(i,null,r(e.validation.phonecheck_api_key.$errors,((e,a)=>(s(),l("small",{class:"text-red-base block mb-4",key:a},d(e.$message)+". ",1)))),128)),t(m,{modelValue:e.data.phonecheck_username,"onUpdate:modelValue":a[1]||(a[1]=a=>e.data.phonecheck_username=a),view:e.validation.phonecheck_username.$invalid?"danger":"default",class:"my-4",label:"Station Name",placeholder:"",block:""},null,8,["modelValue","view"]),(s(!0),l(i,null,r(e.validation.phonecheck_username.$errors,((e,a)=>(s(),l("small",{class:"text-red-base block mb-4",key:a},d(e.$message)+". ",1)))),128))],64)}]]),w=a({async setup(){const{genSuspense:a}=e(),n=c(null),o=u(),s=p(),l=()=>{n.value.update((()=>{var e;s.push({name:"integration",query:{enable:(null==(e=o.query)?void 0:e.id)||""}})}))},t=m({modelValue:!0,closeTo:{name:"integration",query:{reload:1}},size:"xs"}),i=m({header:()=>"PhoneCheck Config",default:()=>a(h($,{ref:n})),footer:()=>{return h(k,{color:"teal",loading:n.value&&(null==(a=null==(e=n.value)?void 0:e.loading)?void 0:a.update),onClick:l},{default:()=>"Save"});var e,a}});return()=>h(g,t,i)}});export{w as default};
