var e=Object.defineProperty,a=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,i=(a,t,o)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[t]=o,l=(e,l)=>{for(var s in l||(l={}))t.call(l,s)&&i(e,s,l[s]);if(a)for(var s of a(l))o.call(l,s)&&i(e,s,l[s]);return e};import{u as s}from"./components.bc8fc588.js";import{k as n,O as r,g as d,y as c,m as u,a0 as m,o as p,t as g,B as b,D as f,w as _,I as y,A as v,n as w,K as h,S as C,a2 as k,a3 as x,U as D,F as P}from"./vendor.f1efedad.js";import{_ as S,b as M,f as q,d as j,P as B,O as U,aq as A,g as O}from"./index.161fb295.js";import{u as I}from"./setting.a9fe6242.js";import{_ as V}from"./tab.1390e648.js";import{C as T}from"./card.6a96327d.js";import{_ as N}from"./badge.b78bf7eb.js";import{B as E}from"./Breadcrumb.5c6bcf4b.js";import{_ as G}from"./catalog-not-found.379a4c88.js";import"./LoadingCard.105ff0f2.js";import"./breadcrumb.2d36d495.js";const K=n({components:{Tab:V,Button:M,Card:T,Input:q,Badge:N,Modal:j,Breadcrumb:E,Pagination:B},async setup(e,{emit:a}){const t=r(),{data:o,state:i,stateSelectedMoreDevice:s,isAvailableDevice:n,loading:u,modal:m,selected:p,unsetData:g,openModal:b,actionAll:f,actionDelete:_,actionMoreDevice:y,actionConditionDeviceAvailability:v}=I(),w=d((()=>A.value.uploadProgress>0&&A.value.uploadProgress<100)),h=O((async()=>{await Promise.all([f(),v()])}),300);return c((()=>({page:o.page,limit:o.limit})),(async(e,a)=>{await h()}),{deep:!0}),await Promise.all([f(),v()]),{cellMouseEnter:(e,a,t,o)=>{},cellMouseLeave:(e,a,t,o)=>{},rowClick:(e,a,o)=>{if(w.value)return;const i={name:"settingConditionEdit",params:{conditionId:e.id},query:l({},(e.is_price_sync?{price_sync:1,unique_id:e.unique_id?e.unique_id:""}:e.unique_id&&{unique_id:e.unique_id})||{})};o.metaKey||o.ctrlKey?window.open(`${t.resolve(i).href}`,"_blank"):t.push(i)},data:o,state:i,stateSelectedMoreDevice:s,isAvailableDevice:n,loading:u,modal:m,breadcrumb:[{text:"Settings",to:{name:"setting"}},{text:"Conditions"}],unsetData:g,actionDelete:_,openModalSelected:(e,a)=>b(e,(()=>{p.value=a.id})),handleShowMoreDevice:async(e=null)=>{e&&await y(e.id,{is_price_sync:e.is_price_sync?e.is_price_sync:0,unique_id:e.unique_id?e.unique_id:null},(()=>{b("more_device")}))},handleSearch:h,sanitize:U,priceUploadProcess:w}}}),L={class:"flex justify-between lg:items-center md:items-end md:flex-row flex-col items-start mb-8"},$={class:"text-dark",style:{"word-break":"normal"}},J={class:"flex flex-col md:flex-row mb-10"},z={class:"flex-grow md:mr-3 md:mb-0 mb-3"},F={class:"table__container"},H={key:0,class:"max-w-lg mx-auto mt-10 mb-6 space-y-6"},R={key:1,class:"mx-auto mt-10 mb-6 space-y-6"},Y={key:1,class:"font-semibold opacity-50"},Q={class:"list"},W={class:"font-semibold text-base text-black mb-3"},X=["innerHTML"],Z={key:0,class:"list w-full"},ee={key:0},ae={class:"opacity-50"},te={class:"mb-6"},oe={class:"mb-4"},ie={class:"list"};var le=S(K,[["render",function(e,a,t,o,i,s){const n=u("Breadcrumb"),r=u("router-link"),d=u("Button"),c=u("Popover"),S=u("Input"),M=u("TableColumn"),q=u("Badge"),j=u("Table"),B=u("Pagination"),U=u("Card"),A=u("Modal"),O=m("loading");return p(),g("div",null,[b("div",L,[f(n,{pageTitle:"Conditions",backTo:{name:"setting"},items:e.breadcrumb},null,8,["items"]),f(c,{placement:"left",width:360,trigger:"hover",disabled:e.isAvailableDevice},{reference:_((()=>[b("div",null,[f(d,{disabled:!e.isAvailableDevice||e.priceUploadProcess,color:"teal",class:"lg:mt-0 mt-4 ml-auto",to:{name:"settingConditionCreate"},link:""},{default:_((()=>a[11]||(a[11]=[y("Add Condition Group")]))),_:1},8,["disabled"])])])),default:_((()=>[b("p",$,[a[9]||(a[9]=y(" Before you can set up conditions, you must first enable products from the ")),f(r,{to:{name:"settingBuybackDevice"}},{default:_((()=>a[8]||(a[8]=[y("Catalog Settings")]))),_:1}),a[10]||(a[10]=y(" page. "))])])),_:1},8,["disabled"])]),f(U,null,{default:_((()=>[b("div",J,[b("div",z,[f(S,{modelValue:e.data.search,"onUpdate:modelValue":a[0]||(a[0]=a=>e.data.search=a),placeholder:"Search by Category Name, or Item Name",class:"w-full",icon:"",onKeyup:e.handleSearch},{icon:_((()=>a[12]||(a[12]=[b("span",{class:"material-icons"},"search",-1)]))),_:1},8,["modelValue","onKeyup"])])]),v((p(),g("div",F,[f(j,{class:"mb-6 w-full",data:e.state,"row-class-name":!e.priceUploadProcess&&"condition-row",onRowClick:e.rowClick},{empty:_((()=>[e.isAvailableDevice?(p(),g("div",H,[a[14]||(a[14]=b("img",{class:"mx-auto",alt:"not-found",src:G},null,-1)),a[15]||(a[15]=b("p",{class:"leading-5 text-2xl"},"No Condition",-1)),a[16]||(a[16]=b("p",{class:"leading-5 text-base"},"You don't have any conditions set yet. Before proceeding to pricing, please add conditions according to your needs.",-1)),f(d,{link:"",color:"teal",view:"outlined",to:{name:"settingConditionCreate"}},{default:_((()=>a[13]||(a[13]=[b("div",{class:"flex"},[y(" Add Condition Group "),b("span",{class:"material-icons"},"arrow_right")],-1)]))),_:1})])):(p(),g("div",R,[a[18]||(a[18]=b("img",{class:"mx-auto",alt:"not-found",src:G},null,-1)),a[19]||(a[19]=b("p",{class:"leading-5 text-2xl"},"No Items Found",-1)),a[20]||(a[20]=b("p",{class:"leading-5 text-base"},[y(" To set items condition, you first need to enable items in the Catalog. Click the "),b("b",null,"Go to Catalog Page"),y(" button below, switch on the toggle for the items you want to display, and then proceed to the Price Editor to set their conditions and prices ")],-1)),f(d,{link:"",color:"teal",view:"outlined",to:{name:"settingBuybackDevice"}},{default:_((()=>a[17]||(a[17]=[b("div",{class:"flex"},[y(" Go to Catalog Page "),b("span",{class:"material-icons"},"arrow_right")],-1)]))),_:1})]))])),default:_((()=>[f(M,{prop:"group_name",label:"Group By Condition"},{default:_((t=>[e.priceUploadProcess?(p(),g("p",Y,h(t.row.group_name)+" "+h(t.row.price_sync_source?` (${t.row.price_sync_source})`:""),1)):(p(),w(r,{key:0,to:{name:"settingConditionEdit",params:{conditionId:t.row.id},query:l({},(t.row.is_price_sync?{price_sync:1,unique_id:t.row.unique_id?t.row.unique_id:""}:t.row.unique_id&&{unique_id:t.row.unique_id})||{})},class:"font-semibold",onClick:a[1]||(a[1]=C((()=>{}),["stop"]))},{default:_((()=>[y(h(t.row.group_name)+" "+h(t.row.price_sync_source?` (${t.row.price_sync_source})`:""),1)])),_:2},1032,["to"]))])),_:1}),f(M,{prop:"devices",label:"Items"},{default:_((t=>[b("div",{class:P(e.priceUploadProcess&&"opacity-50")},[b("ul",Q,[(p(!0),g(k,null,x(t.row.devices,(e=>(p(),g("li",{key:e,class:"text-grey-04"},h(e.brand)+" - "+h(e.name),1)))),128))]),t.row.show_more>0?(p(),w(d,{key:0,onClick:C((a=>e.handleShowMoreDevice(t.row)),["stop"]),onMouseenter:a[2]||(a[2]=C((()=>{}),["stop"])),loading:e.loading.more_device.get(t.row.id),class:"mt-4 mb-2",color:"teal",view:"smooth",dense:""},{default:_((()=>[y("Show More +"+h(t.row.show_more),1)])),_:2},1032,["onClick","loading"])):D("",!0)],2)])),_:1}),f(M,{prop:"conditions",label:"Conditions"},{default:_((t=>[b("div",{class:P([e.priceUploadProcess&&"opacity-50","flex flex-wrap gap-2"]),onMouseenter:a[3]||(a[3]=C((()=>{}),["stop"]))},[(p(!0),g(k,null,x(t.row.conditions,(a=>(p(),w(c,{key:a,placement:t.$index>=6?"top-start":"bottom-start",width:400,trigger:"hover"},{reference:_((()=>[f(q,{color:"grey",class:"cursor-pointer"},{default:_((()=>[y(h(a.name),1)])),_:2},1024)])),default:_((()=>{var t;return[b("h6",W," Condition: "+h(a.name),1),b("p",{class:"text-dark mb-2",innerHTML:e.sanitize(a.condition_term&&(null==(t=JSON.parse(a.condition_term))?void 0:t[0])||"")},null,8,X),a.condition_term&&JSON.parse(a.condition_term)?(p(),g("ul",Z,[(p(!0),g(k,null,x(JSON.parse(a.condition_term),((e,a)=>(p(),g(k,{key:a},[0!==a?(p(),g("li",ee,h(e),1)):D("",!0)],64)))),128))])):D("",!0)]})),_:2},1032,["placement"])))),128))],34)])),_:1}),f(M,{prop:"updated_at",label:"Last Update",class:"opacity-50"},{default:_((e=>{var a;return[b("p",ae,h(null==(a=null==e?void 0:e.row)?void 0:a.updated_at),1)]})),_:1})])),_:1},8,["data","row-class-name","onRowClick"])])),[[O,e.loading.all]]),f(B,{page:e.data.page,"onUpdate:page":a[4]||(a[4]=a=>e.data.page=a),limit:e.data.limit,"onUpdate:limit":a[5]||(a[5]=a=>e.data.limit=a),data:e.data.table},null,8,["page","limit","data"])])),_:1}),f(A,{modelValue:e.modal.delete,"onUpdate:modelValue":a[6]||(a[6]=a=>e.modal.delete=a),title:"Delete Category",onClose:e.unsetData},{footer:_((()=>[f(d,{color:"red",loading:e.loading.delete,onClick:e.actionDelete},{default:_((()=>a[21]||(a[21]=[y("Delete Category")]))),_:1},8,["loading","onClick"])])),default:_((()=>[a[22]||(a[22]=b("p",null,"Are you sure want to delete this category?",-1))])),_:1},8,["modelValue","onClose"]),f(A,{modelValue:e.modal.more_device,"onUpdate:modelValue":a[7]||(a[7]=a=>e.modal.more_device=a),title:`Products - ${e.stateSelectedMoreDevice.group_name}`,"hide-footer":""},{default:_((()=>[b("div",te,[b("p",oe,h(e.stateSelectedMoreDevice.devices.length)+" Products ",1),b("ul",ie,[(p(!0),g(k,null,x(e.stateSelectedMoreDevice.devices,(e=>(p(),g("li",{key:e.id,class:"text-grey-04"},h(e.brand)+" - "+h(e.name),1)))),128))])])])),_:1},8,["modelValue","title"])])}]]),se=n({setup(){const{genSuspense:e}=s();return()=>e(le)}});export{se as default};
