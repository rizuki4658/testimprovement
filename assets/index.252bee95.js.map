{"version":3,"file":"index.252bee95.js","sources":["../../src/components/Integration/Usps/Accounts.vue","../../src/views/integration/usps/tab/index.vue","../../src/views/integration/usps/tab/index.js"],"sourcesContent":["<template>\n  <div class=\"grid grid-cols-1 gap-6\">\n    <div class=\"flex justify-between items-center\">\n      <div>\n        <span class=\"font-semibold block mb-4\">Current USPS Account: </span>\n        <Select :modelValue=\"state.current_account.current_location\" by=\"location\" name=\"location\" class=\"w-64\" :items=\"state.current_account.list_location\" @input=\"updateLocation\" />\n      </div>\n      <div>\n        <Button color=\"teal\" :to=\"{ name: 'integrationUspsCreate' }\" link><span class=\"material-icons text-lg\">add</span> Add USPS Account</Button>\n      </div>\n    </div>\n    <Table class=\"mb-6\" :data=\"state.accounts.data\" ref=\"refTable\" v-loading=\"loading.updateCurrentLocation\">\n      <!--    <TableColumn type=\"selection\" width=\"55\" />-->\n      <TableColumn prop=\"user_id\" label=\"User ID\" />\n      <TableColumn prop=\"merchant_account_code\" label=\"Merchant Account Code\" />\n      <!-- <TableColumn prop=\"merchant_account_id\" label=\"Merchant Account ID\" /> -->\n      <TableColumn prop=\"mid\" label=\"MID\" />\n      <TableColumn prop=\"location\" label=\"Location\" />\n      <TableColumn prop=\"is_default\" label=\"Set as Default\">\n        <template #default=\"scope\">\n          <span v-if=\"scope.row.is_default === 1\" class=\"material-icons text-xl text-green-04\">check_circle</span>\n        </template>\n      </TableColumn>\n      <TableColumn prop=\"action\" label=\"\">\n        <template #default=\"scope\">\n          <div class=\"lg:opacity-0 group-hover:opacity-100 transition-opacity\" @click.stop>\n            <Button color=\"teeal\" :to=\"{ name: 'integrationUspsEdit', params: { uspsId: scope.row.id } }\" class=\"mr-2\" link dense><span class=\"material-icons text-xl\">edit</span></Button>\n            <Button v-if=\"scope.row.is_default !== 1\" @click=\"onDelete(scope.row)\" view=\"smooth\" color=\"red\" dense><span class=\"material-icons text-xl\">delete</span></Button>\n          </div>\n        </template>\n      </TableColumn>\n    </Table>\n    <Pagination v-model:page=\"data.accounts.page\" v-model:limit=\"data.accounts.limit\" :data=\"state.accounts\" />\n  </div>\n  <Modal v-model=\"modal.deleteAccount\" size=\"xs\" hide-header hide-footer>\n    <div class=\"text-center py-10\">\n      <img class=\"mb-10 mx-auto\" src=\"@/assets/icon/attention.svg\" alt=\"Success Icon\">\n      <div class=\"mt-8 mb-10\">\n        <h5 class=\"mb-4\">Attention!</h5>\n        <p class=\"my-5\">Are you sure want to delete this account?</p>\n      </div>\n      <Button view=\"smooth\" color=\"red\" class=\"mr-3\" :loading=\"loading.deleteAccount\" @click=\"deleteAccount\">Yes, Delete</Button>\n      <Button view=\"outlined\" color=\"teal\" class=\"bg-white\" :disabled=\"loading.deleteAccount\" @click=\"modal.deleteAccount = false\">Cancel</Button>\n    </div>\n  </Modal>\n</template>\n\n<script>\nimport { defineComponent, watch, ref } from 'vue'\nimport { useShowUsps } from 'composable/integration'\nimport Input from 'bbUi/components/input/input.vue'\nimport Fieldset from 'bbUi/components/fieldset/fieldset.vue'\nimport Checkbox from 'bbUi/components/checkbox/checkbox.vue'\nimport Select from 'bbUi/components/select/select.vue'\nimport Button from 'bbUi/components/button/button.vue'\nimport Pagination from 'components/Pagination.vue'\nimport debounce from 'utils/debounce'\nimport Modal from 'bbUi/components/modal/modal.vue'\nimport { ElMessage } from 'element-plus'\n\nexport default defineComponent({\n  components: {\n    Modal,\n    Input,\n    Fieldset,\n    Checkbox,\n    Select,\n    Button,\n    Pagination,\n    \n  },\n  async setup(props) {\n    const { state, data, loading, modal, actionAccounts, actionDeleteAccount, actionUpdateCurrentLocation } = useShowUsps()\n    const selectedAccount = ref(null)\n\n    watch(() => ({\n      limit: data.limit\n    }), () => {\n      data.page = 1\n    }, {\n      deep: true\n    })\n    watch(() => ({\n      ...data\n    }), debounce(async () => {\n      await actionAccounts()\n    }, 500), {\n      deep: true\n    })\n\n    const updateLocation = async (e) => {\n      await actionUpdateCurrentLocation(e.id)\n      await actionAccounts()\n    }\n    const deleteAccount = async() => {\n      const accountId = selectedAccount.value.id\n      actionDeleteAccount(accountId, async() => {\n        modal.deleteAccount = false\n        ElMessage({\n          type: 'success',\n          message: 'USPS account deleted'\n        })\n        await actionAccounts()\n      })\n    }\n    const onDelete = async(account) => {\n      modal.deleteAccount = true\n      selectedAccount.value = account\n    }\n    const unsetData = () => {\n      selectedAccount.value = null\n    }\n\n    return {\n      state,\n      data,\n      modal,\n      loading,\n      selectedAccount,\n      updateLocation,\n      deleteAccount,\n      onDelete,\n      unsetData\n    }\n  }\n})\n</script>\n","<template>\n  <div v-loading=\"loading.all\">\n    <Tab v-model=\"tab.current\" :items=\"tab.items\" component />\n    <keep-alive>\n      <component v-bind=\"componentBind\" ref=\"refTabComponent\" :is=\"tab.current\" />\n    </keep-alive>\n  </div>\n  <div class=\"flex justify-end mt-6\">\n    <Button color=\"teal\" v-if=\"tab.current !== 'Accounts'\" @click=\"updateData\" :loading=\"loading.update\">Save</Button>\n  </div>\n</template>\n\n<script>\nimport { useShowUsps } from 'composable/integration'\nimport { computed, defineComponent, reactive, ref } from 'vue'\nimport Modal from 'bbUi/components/modal/modal.vue'\nimport Button from 'bbUi/components/button/button.vue'\nimport Tab from 'bbUi/components/tab/tab.vue'\nimport Accounts from 'components/Integration/Usps/Accounts.vue'\nimport ShippingKitForm from 'components/Integration/ShippingKitForm.vue'\nimport { ElMessage } from 'element-plus'\nimport { useRouter } from 'vue-router'\n\nexport default defineComponent({\n  components: {\n    Modal,\n    Button,\n    Tab,\n    Accounts,\n    ShippingKitForm\n  },\n  async setup() {\n    const { state, loading, data, actionAll, actionUpdateShippingKit } = useShowUsps()\n    const router = useRouter()\n    const refTabComponent = ref(null)\n    const tab = reactive({\n      items: [{\n        name: 'Account',\n        component: 'Accounts'\n      }, \n      // {\n      //   name: 'Edit Shipping Kit',\n      //   component: 'ShippingKitForm'\n      // }\n    ],\n      current: 'Accounts'\n    })\n    const componentBind = computed(() => {\n      if( tab.current === 'ShippingKitForm' ) return Object.assign({}, {\n        data: data.shipping_kit\n      })\n    })\n    const updateData = async() => {\n\n      switch(tab.current){\n        case 'ShippingKitForm':\n          await actionUpdateShippingKit(() => {\n            ElMessage({\n              type: 'success',\n              message: 'USPS Shipping kit updated!'\n            })\n            router.push({\n              name: 'integration'\n            })\n          })\n          break\n      }\n    }\n\n    await actionAll()\n\n    return {\n      state,\n      data,\n      loading,\n      tab,\n      refTabComponent,\n      componentBind,\n      updateData\n    }\n  }\n})\n</script>","import { defineComponent } from 'vue'\nimport { useSuspense } from 'composable/components'\nimport index from './index.vue'\n\nexport default defineComponent({\n  setup() {\n    const { genSuspense } = useSuspense()\n\n    return () => genSuspense(index)\n  }\n})"],"names":["_sfc_main","defineComponent","components","Modal","Input","Fieldset","Checkbox","Select","Button","Pagination","[object Object]","props","state","data","loading","modal","actionAccounts","actionDeleteAccount","actionUpdateCurrentLocation","useShowUsps","selectedAccount","ref","watch","limit","page","deep","__spreadValues","debounce","async","updateLocation","e","id","deleteAccount","accountId","value","_u","type","message","onDelete","account","unsetData","_hoisted_1","class","key","Tab","Accounts","_openBlock","_createElementBlock","_Fragment","_createElementVNode","_hoisted_2","_cache","_createVNode","_component_Select","modelValue","_ctx","current_account","current_location","by","name","items","list_location","_component_Button","color","to","default","_withCtx","_withDirectives","_createBlock","_component_Table","accounts","_component_TableColumn","prop","scope","params","uspsId","row","link","onClick","$event","view","_component_Pagination","onUpdate:page","onUpdate:limit","_component_Modal","onUpdate:modelValue","size","hide-header","src","_imports_0","disabled","ShippingKitForm","actionAll","actionUpdateShippingKit","router","useRouter","refTabComponent","tab","reactive","component","current","componentBind","computed","Object","assign","shipping_kit","updateData","push","_component_Tab","_KeepAlive","index","genSuspense","useSuspense"],"mappings":"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"}