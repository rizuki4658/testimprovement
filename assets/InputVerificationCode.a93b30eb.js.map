{"version":3,"file":"InputVerificationCode.a93b30eb.js","sources":["../../src/components/InputVerificationCode.vue"],"sourcesContent":["<template>\n  <div class=\"verification-code\">\n    <div\n      v-for=\"(_, codeIndex) of codes\"\n      class=\"verification-code__field\"\n      :key=\"codeIndex\"\n    >\n      <input\n        autocomplete=\"none\"\n        class=\"verification-code__input\"\n        v-maska=\"'#'\"\n        v-model=\"codes[codeIndex]\"\n        :ref=\"(el) => (refCodeFields[codeIndex] = el)\"\n        @input.prevent=\"(ev) => onInput(ev, codeIndex)\"\n        @paste.prevent=\"onPaste\"\n      />\n    </div>\n  </div>\n</template>\n<script>\nimport { computed } from '@vue/reactivity'\nimport { defineComponent, onMounted, ref, watch } from 'vue'\nexport default defineComponent({\n  props: {\n    codeLength: {\n      type: Number,\n      default: 6\n    },\n    modelValue: {\n      type: String,\n      default: ''\n    }\n  },\n  emits: ['update:modelValue'],\n  setup(props, { emit }) {\n    const refCodeFields = ref([])\n    const codes = ref([])\n\n    const parsedCodes = computed(() => codes.value.join(''))\n\n    const onInput = (ev, currentIndex) => {\n      const isBackspace = !ev.data && ev.inputType === 'deleteContentBackward'\n      if (isBackspace) {\n        const isNotFirstIndex = currentIndex > 0\n        if (isNotFirstIndex) refCodeFields.value[currentIndex - 1]?.focus?.()\n        emit('update:modelValue', parsedCodes.value)\n        return\n      }\n\n      const isNotLastIndex = currentIndex < refCodeFields.value.length\n      if (isNotLastIndex) refCodeFields.value[currentIndex + 1]?.focus?.()\n      codes.value[currentIndex] = ev.data\n      emit('update:modelValue', parsedCodes.value)\n    }\n\n    const onPaste = async (ev) => {\n      const clipboardData = ev.clipboardData || window.clipboardData\n      const pastedData = clipboardData.getData('Text')\n      emit('update:modelValue', pastedData)\n    }\n\n    onMounted(() => {\n      const initialValue = [...new Array(parseInt(props.codeLength))]\n      if (props.modelValue && typeof props.modelValue === 'string') {\n        const currentValue = props.modelValue.split('')\n        codes.value = initialValue.map((_, index) =>\n          index < currentValue.length ? currentValue[index] : ''\n        )\n        return\n      }\n      codes.value = initialValue\n    })\n\n    watch(\n      () => props.codeLength,\n      () => {\n        codes.value = [...new Array(parseInt(props.codeLength))].map(() => '')\n      }\n    )\n    watch(\n      () => props.modelValue,\n      (newValue) => {\n        const initialValue = [...new Array(parseInt(props.codeLength))]\n        if (newValue && typeof newValue === 'string') {\n          const currentValue = props.modelValue.split('')\n          codes.value = initialValue.map((_, index) =>\n            index < currentValue.length ? currentValue[index] : ''\n          )\n        }\n      }\n    )\n    return {\n      refCodeFields,\n      parsedCodes,\n      codes,\n      onInput,\n      onPaste\n    }\n  }\n})\n</script>\n<style lang=\"scss\">\n.verification-code {\n  @apply flex gap-2;\n  .verification-code__field {\n    width: 54px;\n    height: 68px;\n    .verification-code__input {\n      font-size: 32px;\n      font-weight: 500;\n      @apply w-full h-full rounded-lg text-center text-teal-04;\n      &:focus {\n        @apply border-teal-04;\n        caret-color: rgba(66, 66, 66, 0.1);\n      }\n    }\n  }\n}\n</style>\n"],"names":["_sfc_main","defineComponent","props","codeLength","type","Number","default","modelValue","String","emits","[object Object]","emit","refCodeFields","ref","codes","parsedCodes","computed","value","join","onMounted","initialValue","Array","parseInt","currentValue","split","map","_","index","length","watch","newValue","onInput","ev","currentIndex","data","inputType","_b","_a","focus","call","_d","_c","onPaste","async","pastedData","clipboardData","window","getData","_openBlock","_createElementBlock","_hoisted_1","_Fragment","_renderList","_ctx","codeIndex","class","_withDirectives","_createElementVNode","autocomplete","ref_for","el","_directive_maska"],"mappings":"gLAsBA,MAAKA,EAAaC,EAAa,CAC7BC,MAAO,CACLC,WAAY,CACVC,KAAMC,OACNC,QAAS,GAEXC,WAAY,CACVH,KAAMI,OACNF,QAAS,KAGbG,MAAO,CAAC,qBACRC,MAAMR,GAAOS,KAAEA,IACb,MAAMC,EAAgBC,EAAI,IACpBC,EAAQD,EAAI,IAEZE,EAAcC,GAAS,IAAMF,EAAMG,MAAMC,KAAK,MAqD7C,OA9BPC,GAAU,KACR,MAAMC,EAAe,IAAI,IAAIC,MAAMC,SAASpB,EAAMC,cAClD,GAAID,EAAMK,YAA0C,iBAArBL,EAAMK,WAArC,CACQ,MAAAgB,EAAerB,EAAMK,WAAWiB,MAAM,IACtCV,EAAAG,MAAQG,EAAaK,KAAI,CAACC,EAAGC,IACjCA,EAAQJ,EAAaK,OAASL,EAAaI,GAAS,UAIxDb,EAAMG,MAAQG,KAIdS,GAAA,IAAM3B,EAAMC,aACZ,KACQW,EAAAG,MAAQ,IAAI,IAAII,MAAMC,SAASpB,EAAMC,cAAcsB,KAAI,IAAM,QAGvEI,GACE,IAAM3B,EAAMK,aACXuB,IACC,MAAMV,EAAe,IAAI,IAAIC,MAAMC,SAASpB,EAAMC,cAC9C,GAAA2B,GAAgC,iBAAbA,EAAuB,CACtC,MAAAP,EAAerB,EAAMK,WAAWiB,MAAM,IACtCV,EAAAG,MAAQG,EAAaK,KAAI,CAACC,EAAGC,IACjCA,EAAQJ,EAAaK,OAASL,EAAaI,GAAS,SAKrD,CACLf,cAAAA,EACAG,YAAAA,EACAD,MAAAA,EACAiB,QAvDc,CAACC,EAAIC,iBAEnB,IADqBD,EAAGE,MAAyB,0BAAjBF,EAAGG,UAClB,CAIf,OAHwBF,EAAe,IAClB,OAAAG,EAAA,OAAAC,EAAAzB,EAAcK,MAAMgB,EAAe,SAAnC,EAAAI,EAAuCC,QAAvCF,EAAAG,KAAAF,SACrB1B,EAAK,oBAAqBI,EAAYE,OAIjBgB,EAAerB,EAAcK,MAAMW,SACtC,OAAAY,EAAA,OAAAC,EAAA7B,EAAcK,MAAMgB,EAAe,SAAnC,EAAAQ,EAAuCH,QAAvCE,EAAAD,KAAAE,IACd3B,EAAAG,MAAMgB,GAAgBD,EAAGE,KAC/BvB,EAAK,oBAAqBI,EAAYE,QA4CtCyB,QAzCcC,MAAOX,IACf,MACAY,GADgBZ,EAAGa,eAAiBC,OAAOD,eAChBE,QAAQ,QACzCpC,EAAK,oBAAqBiC,wIAxD5BI,OAAAA,IAAAC,EAC2B,MAAAC,EAAA,UAarBC,EAAA,KAAAC,EAAAC,EAAAvC,OAAA,CAAAY,EAAA4B,SAZ4BL,EAAA,MAAA,CAC/BM,MAAc,mCAGbC,EAAaC,EAAM,QAAA,CACnBC,aAAgC,OAEvBH,MAAA,iEACRI,SAAQ,EACR9C,IAAA+C,sBAA+BA,EAC/B7B,gIAJW,CACH,CAAA8B,EAAA"}