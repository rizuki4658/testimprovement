{"version":3,"file":"ghl.7c4248f7.js","sources":["../../src/composable/integration/ghl.js"],"sourcesContent":["import { reactive, computed, ref } from 'vue'\nimport { useStore } from 'vuex'\nimport { ElMessage } from 'element-plus'\n\nconst useGHL = () => {\n  const store = useStore()\n  const tutorials = ref([\n    {\n      title: 'Tutorial - Installing Reusely App in GoHighLevel',\n      is_collapsed: false,\n      steps: [{\n        text: 'Login to your GoHighLevel account (Ensure you\\'re in the Agency View).',\n        image: undefined,\n      },\n        {\n          text: 'Click on the \"App Marketplace\" tab in the navigation menu.',\n          image: undefined,\n        },\n        {\n          text: 'Find and Install Reusely',\n          image: '/images/ghl/ghl-step-3.png',\n          width: '400px',\n        },\n        {\n          text: 'Select the appropriate sub-account and click \"Continue\".',\n          image: '/images/ghl/ghl-step-4.png',\n          width: '256px',\n        },\n        {\n          text: 'Follow any on-screen steps from Reusely (login, permissions).',\n          image: undefined,\n        },\n        {\n          text: 'All set! Your Reusely integration with GoHighLevel is now complete.',\n          image: undefined,\n        }]\n    },\n    {\n      title: 'Tutorial - How to display data from Reusely to your customer\\'s Opportunity Details',\n      is_collapsed: false,\n      steps: [{\n        text: 'Go to settings > choose custom fields',\n        image: undefined\n      }, {\n        text: 'Select the field names you wish to display on Opportunity Details',\n        image: undefined\n      }, {\n        text: 'Click Bulk Actions > Move To Group',\n        image: '/images/ghl/ghl-bulk-move-to-group-step.png',\n        width: '330px',\n      }, {\n        text: 'Select Opportunity Details folder > click move',\n        image: '/images/ghl/ghl-opportunity-details-step.png',\n        width: '262px',\n      }]\n    },\n  ])\n  const subAccounts = computed(() => {\n    if (!!query?.searchSub?.length) {\n      return [...store.state.integration.ghl.subAccounts].filter(subAccount =>\n        subAccount.name.toLowerCase().includes(query?.searchSub?.toLowerCase())\n      )\n    }\n\n    return store.state.integration.ghl.subAccounts\n  })\n  const pipelines = computed(() => {\n    if (!!query?.searchPipe?.length) {\n      return [...store.state.integration.ghl.pipelines].filter(subAccount =>\n        subAccount.name.toLowerCase().includes(query?.searchPipe?.toLowerCase())\n      )\n    }\n\n    return store.state.integration.ghl.pipelines\n  })\n  const claimed = computed(() => store.state.integration.ghl.claimed)\n  const code = computed(() => store.state.integration.ghl.code)\n  const isUninstalled = computed(() => store.state.integration.ghl.isUninstalled)\n  const status = ref(undefined)\n  const query = reactive({\n    searchSub: null,\n    searchPipe: null\n  })\n  const form = reactive({\n    subAccount: {},\n    pipeline: {}\n  })\n  const loading = reactive({\n    default: false,\n    subAccount: false,\n    pipeline: false,\n    update: false\n  })\n\n  const setCode = () => { /* await request() */ }\n  const setClaims = async (code) => {\n    loading.default = true\n    return await store.dispatch('integration/ghl/setClaimed', { code })\n      .then(() => {\n        if (claimed.value) {\n          ElMessage({\n            message: 'GoHighLevel was integrated!',\n            type: 'success'\n          })\n        }\n        loading.default = false\n      })\n      .catch(() => {\n        loading.default = false\n      })\n  }\n  const setSubAccounts = async() => {\n    loading.subAccount = true\n    return await store.dispatch('integration/ghl/setSubAccounts')\n      .then(() => {\n        loading.subAccount = false\n      })\n      .catch(() => {\n        loading.subAccount = false\n      })\n  }\n  const setPipelines = async(payload) => {\n    loading.pipeline = true\n    return await store.dispatch('integration/ghl/setPipelines', payload)\n      .then(() => {\n        loading.pipeline = false\n      })\n      .catch(() => {\n        loading.pipeline = false\n      })\n  }\n  const init = async() => {\n    loading.default = true\n    status.value = undefined\n    return await store.dispatch('integration/ghl/init').then(res => {\n      status.value = res || undefined\n      loading.default = false\n    }).catch(() => {\n      status.value = undefined\n      loading.default = false\n    })\n  }\n  const updateGHL = async(payload) => {\n    loading.update = true\n    return await store.dispatch('integration/ghl/updateGHL', {\n      pipeline_id: payload\n    })\n      .then(() => {\n        loading.update = false\n        return 'success'\n      })\n      .catch(() => {\n        loading.update = false\n        return 'failed'\n      })\n  }\n  const setUninstall = async (payload) => {\n    await store.dispatch('integration/ghl/setUninstall', payload)\n  }\n\n  return {\n    isUninstalled,\n    subAccounts,\n    tutorials,\n    pipelines,\n    claimed,\n    loading,\n    status,\n    query,\n    code,\n    form,\n    setSubAccounts,\n    setUninstall,\n    setPipelines,\n    setClaims,\n    updateGHL,\n    setCode,\n    init\n  }\n}\n\nexport default useGHL"],"names":["useGHL$1","store","useStore","tutorials","ref","title","is_collapsed","steps","text","image","width","subAccounts","computed","_a","query","searchSub","length","state","integration","ghl","filter","subAccount","name","toLowerCase","includes","_a2","pipelines","searchPipe","claimed","code","isUninstalled","status","reactive","form","pipeline","loading","default","update","setSubAccounts","async","dispatch","then","catch","setUninstall","payload","setPipelines","setClaims","code2","value","_u","message","type","updateGHL","pipeline_id","setCode","init","res"],"mappings":"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"}