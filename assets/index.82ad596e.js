import{u as e}from"./components.dd762bd4.js";import{k as l,f as a,m as o,o as t,t as n,I as s,D as i,w as r,B as d,K as c,a1 as u,a2 as m,_ as p,a5 as h,O as f,r as w,x as v}from"./vendor.9695fe57.js";import{_,b as y,j as g,f as b,v as C,d as k}from"./index.6438e939.js";import{a as x,b as W}from"./integration.761f6e9e.js";import{u as $}from"./index.f40e4a9e.js";import{r as j}from"./index.54844a74.js";import"./LoadingCard.6426fb93.js";import"./card.33d29bf3.js";import"./index.6b6f6369.js";const V=l({name:"WholeCell Header",setup:()=>({tooltipContent:a({title:"Purchase Offers in WholeCell.io will be mapped with the following information",contents:["Channel = reusely.com","Status = completed","Transaction Number = buyback/offer ID","Organization = Customer Name","Purchase Offer Date = date offer is completed"]})})}),P={class:"flex items-center gap-x-2"},A={class:"w-80"},q={class:"text-sm"},I={class:"pt-4 pl-4"},O={class:"list-disc"};var T=_(V,[["render",function(e,l,a,p,h,f){const w=o("Tooltip");return t(),n("div",P,[l[1]||(l[1]=s(" WholeCell.io ")),i(w,null,{content:r((()=>[d("div",A,[d("span",q,c(e.tooltipContent.title)+":",1),d("div",I,[d("ul",O,[(t(!0),n(u,null,m(e.tooltipContent.contents,((e,l)=>(t(),n("li",{key:l,class:"text-sm leading-6"},c(e),1)))),128))])])])])),default:r((()=>[l[0]||(l[0]=d("span",{class:"material-icons text-teal-04 text-4xl"},"info",-1))])),_:1})])}]]);var D=_(l({components:{Button:y,Alert:g,Input:b},async setup(){const{state:e,data:l,actionAll:a,actionUpdate:o,loading:t}=x(),{wholeCell:n,loading:s}=W(),i=$({wholecell_name:{required:j},wholecell_appid:{required:j},wholecell_secret_key:{required:j}},l,{$lazy:!0}),r=()=>(i.value.$validate(),!i.value.$invalid);return await Promise.all([a()]),{state:e,data:l,loading:t,loadingTestConnection:s,validation:i,testConnection:async()=>{if(!r())return;const e={wholecell_name:l.wholecell_name,wholecell_appid:l.wholecell_appid,wholecell_secret_key:l.wholecell_secret_key};await n(e)},update:async(e=(()=>{}))=>{if(!r())return;const a=Object.assign({},{wholecell_name:l.wholecell_name,wholecell_appid:l.wholecell_appid,wholecell_secret_key:l.wholecell_secret_key});await o(a,(l=>{if("connection failed"===l.toLowerCase())return p({type:"warning",message:"WholeCell.io connection failed"});p({type:"success",message:"WholeCell.io integration updated!"}),C(e)&&e()}))}}}}),[["render",function(e,l,a,p,h,f){const w=o("Alert"),v=o("Input"),_=o("Button");return t(),n(u,null,[i(w,{view:"smooth",color:"blue",class:"mb-4"},{default:r((()=>l[3]||(l[3]=[d("div",{class:"flex space-x-4"},[d("i",{class:"material-icons"},"info"),d("span",null,"When enabling the Wholecell.io add-on, any item that is added to your inventory will automatically have a Purchase Offer generated and moved to your Wholecell.io inventory.")],-1)]))),_:1}),i(v,{modelValue:e.data.wholecell_name,"onUpdate:modelValue":l[0]||(l[0]=l=>e.data.wholecell_name=l),view:e.validation.wholecell_name.$invalid?"danger":"default",class:"my-4",label:"WholeCell.io Name",placeholder:"WholeCell.io Name",block:""},null,8,["modelValue","view"]),(t(!0),n(u,null,m(e.validation.wholecell_name.$errors,((e,l)=>(t(),n("small",{class:"text-red-base block mb-4",key:l},c(e.$message)+". ",1)))),128)),i(v,{modelValue:e.data.wholecell_appid,"onUpdate:modelValue":l[1]||(l[1]=l=>e.data.wholecell_appid=l),view:e.validation.wholecell_appid.$invalid?"danger":"default",class:"my-4",label:"WholeCell.io APP ID",placeholder:"WholeCell.io APP ID",block:""},null,8,["modelValue","view"]),(t(!0),n(u,null,m(e.validation.wholecell_appid.$errors,((e,l)=>(t(),n("small",{class:"text-red-base block mb-4",key:l},c(e.$message)+". ",1)))),128)),i(v,{modelValue:e.data.wholecell_secret_key,"onUpdate:modelValue":l[2]||(l[2]=l=>e.data.wholecell_secret_key=l),view:e.validation.wholecell_secret_key.$invalid?"danger":"default",class:"my-4",label:"WholeCell.io App Secret",placeholder:"WholeCell.io App Secret",block:""},null,8,["modelValue","view"]),(t(!0),n(u,null,m(e.validation.wholecell_secret_key.$errors,((e,l)=>(t(),n("small",{class:"text-red-base block mb-4",key:l},c(e.$message)+". ",1)))),128)),i(_,{color:"teal",onClick:e.testConnection,loading:e.loadingTestConnection},{default:r((()=>l[4]||(l[4]=[s("Test Connection")]))),_:1},8,["onClick","loading"])],64)}]]),S=l({async setup(){const{genSuspense:l}=e(),o=a(null),t=h(),n=f(),s=()=>{o.value.update((()=>{var e;n.push({name:"integration",query:{enable:(null==(e=t.query)?void 0:e.id)||""}})}))},i=w({modelValue:!0,closeTo:{name:"integration",query:{reload:1}},size:"xs"}),r=w({header:()=>l(v(T)),default:()=>l(v(D,{ref:o})),footer:()=>{return v(y,{color:"teal",loading:o.value&&(null==(l=null==(e=o.value)?void 0:e.loading)?void 0:l.update),onClick:s},{default:()=>"Save"});var e,l}});return()=>v(k,i,r)}});export{S as default};
