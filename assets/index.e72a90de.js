import{u as e}from"./receipt.bdaf7d71.js";import{_ as t,b as a,d as s,r as i,t as r}from"./index.e231b017.js";import{O as l,m as o,o as n,n as d,w as p,D as c,B as u,I as m,S as f,K as v,f as w,r as b,W as g,a0 as y,t as _,ap as x,U as h,A as k,a2 as $}from"./vendor.f1efedad.js";import{B as j}from"./Breadcrumb.e5dd1515.js";import{C as O}from"./card.de1f0319.js";import{V as T}from"./vue3-pdf-app.umd.d4072a1c.js";import"./breadcrumb.e60df23d.js";const R={class:"text-center"};var D=t({__name:"SettingReceiptActionDropdown",props:{receipt:{type:Object,required:!0}},emits:["preview"],setup(e,{emit:t}){const s=e,i=t,r=l(),w=()=>{r.push(s.receipt.to)},b=()=>{i("preview",s.receipt.type)};return(t,s)=>{const i=o("DropdownItem"),r=o("DropdownMenu"),l=o("Dropdown"),g=o("Tooltip");return e.receipt.is_enable?(n(),d(l,{key:0,trigger:"click",placement:"bottom-end","hide-on-click":"",class:"mr-8"},{dropdown:p((()=>[c(r,{class:"py-1"},{default:p((()=>[c(i,{class:"text-base",onClick:w},{default:p((()=>s[2]||(s[2]=[u("span",{class:"material-icons mr-2"},"edit",-1),m(" Edit ")]))),_:1}),c(i,{class:"text-base",onClick:b},{default:p((()=>s[3]||(s[3]=[u("span",{class:"material-icons mr-2"},"visibility",-1),m(" Preview ")]))),_:1})])),_:1})])),default:p((()=>[u("div",{onClick:s[0]||(s[0]=f((()=>{}),["stop"]))},[c(a,{color:"teal",view:"outlined",dense:"",icon:""},{default:p((()=>s[1]||(s[1]=[u("span",{class:"material-icons"},"more_horiz",-1)]))),_:1})])])),_:1})):(n(),d(g,{key:1,placement:"top"},{default:p((()=>[u("div",null,[c(a,{disabled:"",color:"teal",view:"outlined",class:"mr-8",dense:"",icon:""},{default:p((()=>s[4]||(s[4]=[u("span",{class:"material-icons"},"more_horiz",-1)]))),_:1})])])),content:p((()=>[u("div",null,[u("p",R,v(e.receipt.tooltip),1)])])),_:1}))}}},[["__scopeId","data-v-500e4fe6"]]);const M={class:"flex items-center gap-4"},C={key:0,class:"px-3 py-1 -ml-2 bg-teal-04 text-white rounded-full flex items-center justify-center box-border text-xs truncate"},P={__name:"index",setup(t){const a=e(),d=w(!1);l();const m=b({isModalOpen:{preview:!1}}),f={toolbar:{toolbarViewerRight:!1},secondaryToolbar:!1},R=async e=>{m.isModalOpen.preview=!0,d.value=!0,a.$state.preview.isLoading=!0;try{const t={buyback_type:e};await a.$get({params:t}),a.$state.get.result&&Object.assign(a.$state.form,i(a.$state.get.result)),await r(a.$state.preview,(()=>a.$preview({data:a.$state.form,params:t})))}catch(t){console.error("Preview error:",t),m.isModalOpen.preview=!1}finally{d.value=!1,a.$state.preview.isLoading=!1}};return g((async()=>{await a.$getList()})),(e,t)=>{const i=o("TableColumn"),r=o("Table"),l=y("loading");return n(),_($,null,[c(j,{pageTitle:"Receipts",backTo:{name:"setting"},items:[{text:"Settings",to:{name:"setting"}},{text:"Receipts"}]}),c(O,{class:"my-6"},{header:p((()=>t[1]||(t[1]=[u("h2",{class:"text-xl font-bold"},"Receipts Template",-1)]))),default:p((()=>{var e;return[c(r,{clickable:!1,data:null==(e=x(a).list)?void 0:e.result,class:"cursor-text"},{default:p((()=>[c(i,{label:"Receipt Type"},{default:p((({row:e})=>[u("div",M,[u("p",null,v(e.type),1),"Easy Offer"==e.type?(n(),_("div",C," API ")):h("",!0)])])),_:1}),c(i,{label:"Description",prop:"desc",width:"1000"}),c(i,{align:"right"},{default:p((({row:e})=>[c(D,{receipt:e,onPreview:R},null,8,["receipt"])])),_:1})])),_:1},8,["data"])]})),_:1}),c(s,{modelValue:m.isModalOpen.preview,"onUpdate:modelValue":t[0]||(t[0]=e=>m.isModalOpen.preview=e),title:"Preview Receipt",size:"lg",style:{"z-index":"1001"},"hide-footer":"","no-padding":""},{default:p((()=>[k(c(x(T),{pdf:x(a).$state.preview.result,config:f,style:{height:"60vh"},theme:"dark"},null,8,["pdf"]),[[l,x(a).$state.preview.isLoading]])])),_:1},8,["modelValue"])],64)}}};export{P as default};
