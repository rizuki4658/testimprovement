import{k as e,O as a,f as t,g as s,aV as l,at as o,m as n,a0 as i,o as d,t as r,D as m,w as c,I as u,B as p,A as f,a2 as v,a3 as y,K as h,n as b,U as _,S as g}from"./vendor.f1efedad.js";import{u as x}from"./index.32689823.js";import{r as w,e as k}from"./index.2fb3814c.js";import{c as V}from"./index.1c09f422.js";import{e as A}from"./easypost.91b0e580.js";import{c as $}from"./setting.86482221.js";import{_ as C,f as j,d as S,b as q}from"./index.e231b017.js";import{I as P}from"./InputPhone.f8d9b657.js";import"./SelectCountry.75182cc2.js";const z=e({name:"EasypostActivation",components:{Input:j,Modal:S,Button:q,InputPhone:P},async setup(){const{data:e,loading:n,actionShow:i}=$(),{data:d,address:r,loading:m,fetch:c,create:u}=A(),p=a(),f=t(),v={company_email:{required:w,email:k},address_text:{required:V.withMessage("Address is required",w)},street:{required:w},state:{required:w},city:{required:w},zip_code:{required:w},phone:{required:w,invalidNumber:V.withMessage("Phone number is invalid",(()=>{var e;return null==(e=f.value)?void 0:e.isValid}))}},y=["address_text","street","state","city","zip_code"],h=x(v,d,{$lazy:!0}),b=s((()=>{const e=[];return y.map((a=>{h.value[a].$invalid&&e.push(h.value[a].$invalid)})),!!e.length})),_=(e,a={})=>{d.company_email=e.email||e.company_email||a.company_email||null,d.address_text=e.address_text||a.address_text||null,d.street=e.street||a.street||a.address||null,d.state=e.state||a.state||null,d.city=e.city||a.city||null,d.zip_code=e.zip||a.zip||null,d.phone=e.phone||a.phone||null},g=()=>{p.go(-1)};return l((async()=>{await i({is_store:1}),await c((a=>_(a,e)))})),o((()=>{h.value.$reset(),_({})})),{data:d,loading:m,address:r,refPhone:f,validation:h,dataCompany:e,errorAddress:y,loadingCompany:n,viewValidAddress:b,handleClose:g,handleSubmit:async()=>{if(await h.value.$validate()){["company_email","phone"].concat(y).forEach((e=>{d[e]})),await u(d,(()=>{g()}))}}}}}),I={class:"space-y-8 mt-8"};var M=C(z,[["render",function(e,a,t,s,l,o){const x=n("Input"),w=n("InputPhone"),k=n("Button"),V=n("Modal"),A=i("gmap"),$=i("loading");return d(),r("form",{autocomplete:"off",onSubmit:a[3]||(a[3]=g(((...a)=>e.handleSubmit&&e.handleSubmit(...a)),["prevent"]))},[m(V,{size:"sm",modelValue:!0,class:"modal--overflow-none","without-transition":"",onClickClose:e.handleClose},{header:c((()=>a[4]||(a[4]=[u(" Activate USPS Return Account ")]))),default:c((()=>[a[6]||(a[6]=p("div",{class:"flex items-center gap-x-4 text-orange-03"},[p("span",{class:"material-icons text-4xl"},"warning"),p("p",null,"Must match easypost account information")],-1)),f((d(),r("div",I,[p("div",null,[m(x,{modelValue:e.data.company_email,"onUpdate:modelValue":a[0]||(a[0]=a=>e.data.company_email=a),view:e.validation.company_email.$invalid?"danger":"default",placeholder:"Company Email",label:"Company Email",autocomplete:"none",class:"w-full"},null,8,["modelValue","view"]),(d(!0),r(v,null,y(e.validation.company_email.$errors,((e,a)=>(d(),r("small",{key:a,class:"text-red-base block mt-1"},h(e.$message)+". ",1)))),128))]),p("div",null,[f((d(),b(x,{modelValue:e.data.address_text,"onUpdate:modelValue":a[1]||(a[1]=a=>e.data.address_text=a),view:e.viewValidAddress?"danger":"default",placeholder:"Mail-in Address",label:"Mail-in Address",autocomplete:"none",class:"w-full","icon-block":"",icon:""},{icon:c((()=>a[5]||(a[5]=[p("span",{class:"material-icons"},"location_on",-1)]))),_:1},8,["modelValue","view"])),[[A,e.address]]),(d(!0),r(v,null,y(e.errorAddress,(a=>(d(),r("span",{key:a,class:"block"},[e.validation[a]?(d(!0),r(v,{key:0},y(e.validation[a].$errors,((e,a)=>(d(),r("small",{key:a,class:"text-red-base block mt-1"},h(e.$message)+". ",1)))),128)):_("",!0)])))),128))]),p("div",null,[m(w,{ref:"refPhone",modelValue:e.data.phone,"onUpdate:modelValue":a[2]||(a[2]=a=>e.data.phone=a),"country-autofill-setting":"",placement:"bottom","static-position":"",label:"Phone",block:""},null,8,["modelValue"]),(d(!0),r(v,null,y(e.validation.phone.$errors,((e,a)=>(d(),r("small",{key:a,class:"text-red-base block mt-1"},h(e.$message)+". ",1)))),128))])])),[[$,e.loading]])])),footer:c((()=>[f((d(),b(k,{color:"teal",type:"submit"},{default:c((()=>a[7]||(a[7]=[u(" Activate ")]))),_:1})),[[$,e.loading]])])),_:1},8,["onClickClose"])],32)}]]);export{M as default};
