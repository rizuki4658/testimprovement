var e=Object.defineProperty,l=Object.defineProperties,a=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,i=(l,a,t)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[a]=t,s=(e,l)=>{for(var a in l||(l={}))o.call(l,a)&&i(e,a,l[a]);if(t)for(var a of t(l))n.call(l,a)&&i(e,a,l[a]);return e};import{u as r}from"./components.00bf6492.js";import{s as c,z as d,b as u,t as p,_ as m,u as v,d as g,R as f,j as y,P as b,S as h,x as k}from"./index.c2f66179.js";import{j as x,o as _,n as w,w as L,B as P,ap as S,t as V,U as C,I as j,_ as B,f as R,g as U,W as $,a1 as O,a2 as T,D as F,K as I,F as M,a3 as q,a4 as A,k as D,m as z,$ as Y,A as E,b0 as N,S as W,O as G,aq as K}from"./vendor.9695fe57.js";import{u as H}from"./dashboard.b5a7a3a4.js";import{p as J}from"./packages.538e9c6e.js";import{C as Q}from"./card.f57f7ca5.js";import{a as X,b as Z}from"./billing.a74d85fb.js";import{s as ee}from"./vue-multiselect.esm.973e2e45.js";import"./LoadingCard.c138fa92.js";import"./date.f86face7.js";import"./setting.10b5d883.js";const le=x("settingPlansBilling",{state:()=>({packages:{isLoading:!1,result:void 0,selectedPlan:void 0},verifyPayment:{isLoading:!1,result:void 0},reSubscribe:{modal:!1,isLoading:!1,result:void 0},unpaidBilling:{isLoading:!1,result:void 0}}),getters:{trial(){var e,l,a;return 1===(null==(a=null==(l=null==(e=c)?void 0:e.state)?void 0:l.user)?void 0:a.isTrialEnd)},canceled(){var e,l,a,t;return 3==(null==(t=null==(a=null==(l=null==(e=c)?void 0:e.state)?void 0:l.user)?void 0:a.me)?void 0:t.subscription_status)},unpaid(){var e,l,a;return 0!==(null==(a=null==(l=null==(e=c)?void 0:e.state)?void 0:l.user)?void 0:a.isUnpaidBilling)}},actions:{async $getStripePortal(){const e=await d({url:"/v1/pos/billing/customer/portal",method:"get"});this.stripePortal.result=e},async $getBillingPackages(){const e=await d({url:"/v1/pos/billing/package",method:"get"});this.packages.result=e},async $getVerifyPayment(){const e=await d({url:"/v1/login-status",method:"get"});this.verifyPayment.result=e},async $planCheckout(e){const l=await d({url:"/v1/pos/billing/package/checkout",method:"post",data:e});this.reSubscribe.result=l},async $unpaidBilling(){const e=await d({url:"/v1/pos/billing/invoice/unpaid",method:"post"});this.unpaidBilling.result=e}}}),ae={class:"flex items-center justify-center gap-x-2"},te={key:0,class:"material-icons"},oe={__name:"SettingPlanBillingVerifyPayment",setup(e){const l=le(),a=async()=>{await p(l.verifyPayment,(()=>l.$getVerifyPayment().then((()=>{const e=null==l?void 0:l.verifyPayment.result;0===(null==e?void 0:e.is_unpaid_billing)&&0===(null==e?void 0:e.is_trial_end)&&(window.location.href="/dashboard"),1!==(null==e?void 0:e.is_unpaid_billing)&&1!==(null==e?void 0:e.is_trial_end)||B.warning("Payment has not been confirmed")}))))};return(e,t)=>(_(),w(u,{disabled:S(l).verifyPayment.isLoading,loading:S(l).verifyPayment.isLoading,color:"teal",onClick:a},{default:L((()=>[P("div",ae,[S(l).verifyPayment.isLoading?C("",!0):(_(),V("span",te," refresh ")),t[0]||(t[0]=j(" Verify Payment "))])])),_:1},8,["disabled","loading"]))}};const ne={key:0,class:"flex flex-wrap"},ie={class:"space-y-8"},se={class:"space-y-4"},re={class:"flex items-center gap-x-2"},ce={class:"text-xl font-medium"},de={key:0,class:"px-3 py-0.5 bg-teal-04 rounded-full text-white text-sm"},ue={class:"text-grey-03"},pe={class:"text-5xl font-medium inline-block"},me={key:0,class:"ml-2"},ve={key:1,class:"ml-2"},ge={key:0,class:"bg-green-01 text-green-04 rounded-full px-4 py-1 inline-block"},fe={class:"font-semibold"},ye={key:1},be={class:"font-medium text-teal-04"},he={class:"flex items-center gap-x-3"},ke={class:"space-y-2"},xe={class:"border border-grey-01 rounded-xl p-4"},_e={class:"text-sm text-gray-700"},we={class:"ml-3 text-base space-y-1 list-disc list-inside"},Le={class:"flex justify-between"};var Pe=m({__name:"SettingPlanBillingPackages",props:{period:{type:String,default:"monthly"}},setup(e,{expose:l}){var a;const t=e,o=le(),n=R(!1),i=R(null),{stateFiltered:r}=H(),{me:c}=v(),d=U((()=>{var e,l;return(null==(e=o.packages)?void 0:e.result)&&(null==t?void 0:t.period)?null==(l=o.packages)?void 0:l.result[null==t?void 0:t.period].map((e=>{const l=J.find((l=>e.package_id===l.id));return s(s({},l),e)})).sort(((e,l)=>e.sort-l.sort)):[]})),m=U((()=>{var e;const l=null==(e=o.packages)?void 0:e.result;if(!l)return null;let a=null;if(l.monthly&&(a=l.monthly.find((e=>!0===e.current_price_id))),!a&&l.yearly&&(a=l.yearly.find((e=>!0===e.current_price_id))),!a)return null;const t=J.find((e=>a.package_id===e.id));return s(s({},t),a)})),f=e=>{var l,a;if(!m.value||!e)return!1;const n=J.find((l=>e.package_id===l.id)),i=s(s({},n),e),r=null==(a=null==(l=null==o?void 0:o.packages)?void 0:l.result)?void 0:a.current_interval,c=(["year","annual"].includes(r)?"yearly":"monthly")!==t.period,d=i.sort===m.value.sort,u=i.sort<m.value.sort,p=e.price_id!==m.value.price_id;if(c&&d)return!1;return u||c||p},y=U((()=>{if(!m.value||!i.value)return[];const e=J.find((e=>e.id===m.value.package_id)),l=J.find((e=>e.id===i.value.package_id));if(!e||!l)return[];const a=e=>{const l=J.find((l=>l.id===e));if(!l)return[];return J.filter((e=>e.sort<=l.sort&&e.sort>0)).sort(((e,l)=>l.sort-e.sort)).reduce(((e,l)=>[...e,...l.features||[]]),[])},t=a(m.value.package_id),o=a(i.value.package_id);return t.filter((e=>!o.includes(e)))})),b=async()=>{await p(o.packages,(()=>o.$getBillingPackages()))},h=e=>{var l,a;const t=3==(null==(l=c.value)?void 0:l.subscription_status),n=null!==(null==(a=c.value)?void 0:a.trial_end);return!(!t&&!n&&e.current_price_id||!(r.value.total>1))&&(o.reSubscribe.modal=!0,w(),!0)},k=async e=>{var l;const a=(null==e?void 0:e.price_id)===(null==(l=m.value)?void 0:l.price_id),t=!0===o.unpaid,n=window.open();a&&t?await p(o.unpaidBilling,(()=>o.$unpaidBilling().then((()=>{var e,l,a,t;if(!(null==(l=null==(e=o.unpaidBilling)?void 0:e.result)?void 0:l.invoice))return B({type:"error",message:"An error occurred during checkout. Please reach out to our customer support team for assistance. [No Invoice URL]"});o.packages.selectedPlan=void 0,n.location=null==(t=null==(a=o.unpaidBilling)?void 0:a.result)?void 0:t.invoice})))):await p(o.reSubscribe,(()=>o.$planCheckout({price_id:o.packages.selectedPlan.price_id}).then((()=>{o.packages.selectedPlan=void 0,n.location.href=o.reSubscribe.result})).catch((()=>{B({type:"error",message:"An error occurred during checkout. Please reach out to our customer support team for assistance."})}))))},x=async()=>{h(i.value)||(n.value=!1,await k(i.value),i.value=null)},w=()=>{n.value=!1,i.value=null};return $((async()=>{var e;(null==(e=null==o?void 0:o.packages)?void 0:e.result)||b()})),l({currentInterval:null==(a=null==o?void 0:o.packages)?void 0:a.result,onLoad:b,showDowngradeModal:n,showDowngradeModalFromOutside:()=>{o.packages.selectedPlan&&f(o.packages.selectedPlan)&&(i.value=o.packages.selectedPlan,n.value=!0)}}),(e,l)=>{var a;return _(),V("div",null,[(null==(a=S(o).packages)?void 0:a.result)?(_(),V("div",ne,[(_(!0),V(O,null,T(d.value,((e,a)=>(_(),V("div",{key:a,class:"sm:w-1/2 md:w-1/3 py-4 px-2"},[F(Q,{class:"h-full relative"},{default:L((()=>{var o;return[P("div",ie,[P("div",se,[P("div",re,[P("h5",ce,I(e.name),1),e.current_price_id?(_(),V("div",de," Current Plan ")):C("",!0)]),P("p",ue,I(e.description),1)]),P("div",null,[P("h6",pe,I(e.price),1),"monthly"===t.period?(_(),V("span",me," per location/monthly ")):(_(),V("span",ve," savings per year, per location "))]),"monthly"!==t.period&&"$0"!==e.saving_amount?(_(),V("div",ge,[P("span",fe,I(e.saving_amount),1),l[1]||(l[1]=j(" savings per year, per location "))])):(_(),V("div",ye)),P("div",null,[P("p",be,I(e.feature_term),1),P("div",{class:M([(null==(o=e.features)?void 0:o.length)>5&&"columns-2","space-y-1"])},[(_(!0),V(O,null,T(e.features,((e,t)=>(_(),V("div",{key:`${a}_${t}`},[P("div",he,[l[2]||(l[2]=P("span",{class:"material-icons text-teal-04"},"check_circle",-1)),j(" "+I(e),1)])])))),128))],2)])])]})),footer:L((()=>[P("div",null,[F(u,q({ref_for:!0},s({color:"teal"},!e.current_price_id&&{view:"outlined"}),{block:"",loading:S(o).unpaidBilling.isLoading||S(o).reSubscribe.isLoading,onClick:l=>(async e=>{if(o.packages.selectedPlan=e,f(e))return i.value=e,void(n.value=!0);h(e)||await k(e)})(e)}),{default:L((()=>[j(I((S(o).canceled||S(o).unpaid)&&e.current_price_id?"Resubscribe with current plan":"Subscribe"),1)])),_:2},1040,["loading","onClick"])])])),_:2},1024)])))),128))])):C("",!0),F(g,{modelValue:n.value,"onUpdate:modelValue":l[0]||(l[0]=e=>n.value=e),title:"Apply Changes",size:"xs"},{default:L((()=>[P("div",ke,[l[3]||(l[3]=P("div",{class:"flex items-center gap-x-2 text-orange-600"},[P("span",{class:"font-medium"},"You will lose access to:")],-1)),P("div",xe,[P("div",_e,[P("ul",we,[(_(!0),V(O,null,T(y.value,(e=>(_(),V("li",{key:e},I(e),1)))),128))])])])])])),footer:L((()=>[P("div",Le,[P("button",{class:"px-3 py-3 text-lg",onClick:w}," Cancel "),F(u,{color:"teal",loading:S(o).unpaidBilling.isLoading||S(o).reSubscribe.isLoading,onClick:x},{default:L((()=>l[4]||(l[4]=[j(" Apply Changes ")]))),_:1},8,["loading"])])])),_:1},8,["modelValue"])])}}},[["__scopeId","data-v-1fe3e3ec"]]);const Se={class:"px-4 py-8"},Ve={class:"flex flex-wrap justify-center text-center mt-6 gap-4"},Ce={__name:"SettingPlanBillingResubscribe",emits:["reactive","cancel"],setup(e,{emit:l}){const a=l,{stateFiltered:t}=H(),o=le(),n=async()=>{o.reSubscribe.modal=!1,a("cancel")},i=async()=>{if(t.value.total>1)return a("reactive");await(async(e=1)=>{await p(o.reSubscribe,(()=>o.$planCheckout({price_id:o.packages.selectedPlan.price_id,total_location:"object"==typeof e?null==e?void 0:e.total_selected_location:e}).then((()=>{o.packages.selectedPlan=void 0,window.open(o.reSubscribe.result,"_blank","noreferrer noopener")})).catch((()=>{B({type:"error",message:"An error occurred during checkout. Please reach out to our customer support team for assistance."})}))))})()};return(e,l)=>(_(),w(A,{to:"body"},[F(g,{modelValue:S(o).reSubscribe.modal,"onUpdate:modelValue":l[0]||(l[0]=e=>S(o).reSubscribe.modal=e),size:"xs","hide-footer":"","hide-header":""},{default:L((()=>[P("div",Se,[l[4]||(l[4]=P("img",{class:"mb-10 mx-auto text-orange-base",src:f,alt:"Success Icon"},null,-1)),F(y,{color:"orange",view:"smooth"},{default:L((()=>l[1]||(l[1]=[P("div",{class:"flex"},[P("i",{class:"material-icons mr-4"},"info"),P("p",{whitelabel:"text-replace","data-label":"addons host"}," Your Reusely.com subscription has been canceled due to either unpaid billing, incorrect billing information, or because you canceled it. ")],-1)]))),_:1}),l[5]||(l[5]=P("div",{class:"text-grey-04 rounded-lg px-4 py-6 my-4",style:{backgroundColor:"rgba(0,0,0,0.03)"}},[P("p",{class:"font-medium"},"Important actions to take:"),P("ul",{class:"text-grey-03 my-4"},[P("li",null,"1. When your subscription ends, you will no longer be able to access your account, and your data will be deleted."),P("li",null,"2. If your account is still active, please take this time to download any customer or other data you may need.")]),P("p",{class:"text-grey-03"},"Reach out to our support team for additional help.")],-1)),P("div",Ve,[F(u,{disabled:S(o).reSubscribe.isLoading,color:"white",onClick:n},{default:L((()=>l[2]||(l[2]=[j(" Cancel ")]))),_:1},8,["disabled"]),F(u,{loading:S(o).reSubscribe.isLoading,color:"teal",onClick:i},{default:L((()=>l[3]||(l[3]=[j(" Reactive Subscription ")]))),_:1},8,["loading"])])])])),_:1},8,["modelValue"])]))}},je=D({name:"ResubsLocationForm",components:{MultiSelect:ee,Pagination:b,Select:h},props:{modelValue:{type:Object,default:()=>({})},mainLoading:{type:Boolean,default:!1}},emits:["update:modelValue","continue"],setup(e,t){const{loading:o,data:n,query:i,showLocation:r}=X(),c=U({get:()=>e.modelValue,set:e=>t.emit("update:modelValue",e)}),d=U((()=>{var e,l;const a=null==(l=null==(e=c.value)?void 0:e.locations)?void 0:l.map((e=>e.id));return a.length?[...n.locations].filter((e=>!a.includes(e.id))):n.locations})),u=U((()=>{var e,l,a;return((null==(e=null==n?void 0:n.locations)?void 0:e.length)||0)-((null==(a=null==(l=c.value)?void 0:l.locations)?void 0:a.length)||0)})),p=e=>(n.locations=n.locations.map((t=>{return o=s({},t),n={transfer:null,checked:e.id!==t.id&&t.checked},l(o,a(n));var o,n})),e.checked=!1,e),m=e=>(e.checked=!0,e);return $((async()=>{await r()})),{loading:o,data:n,query:i,form:c,locationToTransfer:d,showLocation:r,unselecLocation:u,handleUpdateCheck:(e,l)=>{if(null==l?void 0:l.checked)return p(l);m(l)},handleRemoveLocation:p,handleSelectLocation:m,handleSelectTransferLocation:e=>(c.value.transfers=[...d.value].filter((e=>![null,void 0].includes(e.transfer))),e)}}}),Be={class:"border border-grey-01 rounded-lg p-4 space-y-8"},Re={class:"space-y-2"},Ue={class:"lg:mx-10"},$e={class:"flex items-center gap-x-4"},Oe=["onUpdate:modelValue"],Te={class:"text-sm text-grey-03 mb-1"},Fe={key:0,class:"lg:mx-10 space-y-6"},Ie={key:0,class:"bg-orange-01 text-orange-04 rounded-md px-4 py-2"},Me={class:"flex items-center gap-x-4"},qe={class:"border border-grey-01 border-opacity-50 space-y-6"},Ae={class:"space-y-2"},De={class:"w-full block text-sm font-semibold"},ze={class:"w-full text-xs"},Ye={key:0,class:"px-4 pb-4"};const Ee=D({name:"ResubsLocation",components:{Modal:g,Button:u,ResubsLocationForm:m(je,[["render",function(e,l,a,t,o,n){var i,s,r,c,d,u;const p=z("MultiSelect"),m=z("TableColumn"),v=z("Select"),g=z("Table"),f=z("Pagination"),y=Y("loading");return _(),V("form",{onSubmit:l[3]||(l[3]=W((()=>{}),["prevent"]))},[P("div",Be,[P("div",Re,[l[5]||(l[5]=P("div",{class:"flex items-center gap-x-4 mb-6"},[P("div",{class:"bg-teal-04 w-6 h-6 text-white flex items-center justify-center rounded-full"},"1"),P("p",{class:"font-semibold"},"Resubscribe Location")],-1)),P("div",Ue,[P("div",null,[l[4]||(l[4]=P("label",{class:"text-sm"},"Location",-1)),F(p,{modelValue:e.form.locations,"onUpdate:modelValue":l[0]||(l[0]=l=>e.form.locations=l),placeholder:"Choose Location",loading:e.loading.location,disabled:e.loading.location,options:e.data.locations,multiple:!0,"hide-selected":!1,"show-labels":!1,"show-no-results":!0,"show-no-options":!0,searchable:!1,"track-by":"id",label:"name",onRemove:e.handleRemoveLocation,onSelect:e.handleSelectLocation,required:""},{option:L((e=>[P("div",$e,[E(P("input",{"onUpdate:modelValue":l=>e.option.checked=l,type:"checkbox",class:"w-5 h-5 text-teal-04 bg-teal-04 border-gray-300 rounded",style:{"accent-color":"rgba(66, 66, 66, 0.11)"}},null,8,Oe),[[N,e.option.checked]]),P("div",null,[P("p",Te,I(e.option.name),1),P("p",null,I(e.option.address_text),1)])])])),_:1},8,["modelValue","loading","disabled","options","onRemove","onSelect"])])])]),P("div",{class:M([[(null==(s=null==(i=e.form)?void 0:i.locations)?void 0:s.length)?"opacity-100":"opacity-50"],"space-y-2"])},[l[8]||(l[8]=P("div",{class:"flex items-center gap-x-4 mb-6"},[P("div",{class:"bg-teal-04 w-6 h-6 text-white flex items-center justify-center rounded-full"},"2"),P("p",{class:"font-semibold"},"Transfer Data")],-1)),(null==(c=null==(r=e.form)?void 0:r.locations)?void 0:c.length)?(_(),V("div",Fe,[e.unselecLocation?(_(),V("div",Ie,[P("div",Me,[l[7]||(l[7]=P("i",{class:"material-icons"},"info",-1)),P("p",null,[P("b",null,"Important: "+I(e.unselecLocation)+" locations are currently unselected",1),l[6]||(l[6]=j(". These locations will be permanently deleted; however, you must transfer their data to another location to proceed. Select the locations you want to transfer the data to below. "))])])])):C("",!0),P("div",qe,[E((_(),w(g,{data:e.locationToTransfer},{default:L((()=>[F(m,{prop:"name",label:"Location Name"}),F(m,{prop:"address_text",label:"Address"}),F(m,{prop:"email",label:"Email"}),F(m,{prop:"phone",label:"Phone Number"}),F(m,{label:"Transfer Location",width:"350"},{default:L((({row:l})=>[F(v,{modelValue:l.transfer,"onUpdate:modelValue":e=>l.transfer=e,by:"id",name:"name",placeholder:"Choose Location",items:e.form.locations,block:"","no-border":"","max-height":"200px",onChange:a=>e.handleSelectTransferLocation(l)},{item:L((({item:e})=>[P("div",Ae,[P("span",De,I(e.name),1),P("span",ze,I(e.address_text),1)])])),_:2},1032,["modelValue","onUpdate:modelValue","items","onChange"])])),_:1})])),_:1},8,["data"])),[[y,e.loading.transfer]]),(null==(u=null==(d=e.form)?void 0:d.locations)?void 0:u.length)>10?(_(),V("div",Ye,[F(f,{page:e.query.page,"onUpdate:page":l[1]||(l[1]=l=>e.query.page=l),limit:e.query.limit,"onUpdate:limit":l[2]||(l[2]=l=>e.query.limit=l)},null,8,["page","limit"])])):C("",!0)])])):C("",!0)],2)])],32)}]])},props:{modelValue:{type:Boolean,default:!1}},emits:["update:modelValue","subscribe"],setup(e,l){const a=R(),{form:t,loading:o,removeLocation:n}=Z(),i=U({get:()=>e.modelValue,set:e=>l.emit("update:modelValue",e)}),s=U((()=>{var e,l,t;return(null==(t=null==(l=null==(e=null==a?void 0:a.value)?void 0:e.data)?void 0:l.locations)?void 0:t.length)||0})),r=U((()=>{var e,l,o,n;return!(null==(e=null==t?void 0:t.locations)?void 0:e.length)||(!(null==(l=null==t?void 0:t.transfers)?void 0:l.length)||(null==(o=null==t?void 0:t.transfers)?void 0:o.length)<(null==(n=null==a?void 0:a.value)?void 0:n.unselecLocation))})),c=()=>{i.value=!1,t.locations=[],t.transfers=[]};return{show:i,form:t,loading:o,locations:s,disabledButton:r,resubsLocationForm:a,removeLocation:n,continueRemoveLocation:async()=>{var e,a;(null==(e=null==t?void 0:t.locations)?void 0:e.length)<s.value&&await n(),l.emit("subscribe",{total_selected_location:null==(a=null==t?void 0:t.locations)?void 0:a.length}),c()},cancelRemoveLocation:c}}}),Ne={class:"py-4 space-y-6"},We={class:"space-y-6"},Ge={key:0,class:"bg-blue-01 text-blue-04 rounded-lg px-4 py-2"},Ke={class:"flex gap-x-4"},He={class:"text-sm"},Je={class:"font-semibold"},Qe={class:"flex items-center justify-end gap-x-4"};var Xe=m(Ee,[["render",function(e,l,a,t,o,n){const i=z("ResubsLocationForm"),s=z("Button"),r=z("Modal"),c=Y("loading");return _(),w(A,{to:"body"},[F(r,{modelValue:e.show,"onUpdate:modelValue":l[2]||(l[2]=l=>e.show=l),size:"lg","hide-header":""},{default:L((()=>[P("div",Ne,[P("div",We,[l[4]||(l[4]=P("div",{class:"flex items-center justify-center"},[P("img",{src:"/assets/attention-blue.85832a40.svg",alt:"Info Icon"})],-1)),l[5]||(l[5]=P("p",{class:"text-center text-lg font-semibold"},"Before you continue",-1)),e.locations&&e.locations>1?(_(),V("div",Ge,[P("div",Ke,[P("p",He,[P("span",Je," You have "+I(`${e.locations} locations`),1),l[3]||(l[3]=j(". Choose the locations you want to include in your billing update. "))])])])):C("",!0)]),E((_(),V("div",null,[F(i,{ref:"resubsLocationForm",modelValue:e.form,"onUpdate:modelValue":l[0]||(l[0]=l=>e.form=l),"main-loading":e.loading},null,8,["modelValue","main-loading"])])),[[c,e.loading]])])])),footer:L((()=>[P("div",Qe,[P("a",{href:"#",class:"hover:opacity-50 hover:bg-grey-01 px-6 py-3.5 rounded-md",onClick:l[1]||(l[1]=W(((...l)=>e.cancelRemoveLocation&&e.cancelRemoveLocation(...l)),["prevent"]))}," Cancel "),F(s,{color:"teal",loading:e.loading,disabled:e.disabledButton,onClick:e.continueRemoveLocation},{default:L((()=>l[6]||(l[6]=[j(" Continue ")]))),_:1},8,["loading","disabled","onClick"])])])),_:1},8,["modelValue"])])}]]);const Ze={key:0,class:"mt-6 space-y-10"},el={class:"flex items-center justify-between"},ll={class:"space-y-6"},al={key:0},tl={key:1,class:"h-96"};var ol={__name:"index",async setup(e){var l,a;let t,o;const n=G(),i=k(),s=le(),r=R(!1),c=R(),d=R(),u=[{id:"monthly",label:"Monthly"},{id:"yearly",label:"Yearly"}],m=async()=>{var e,l;await p(i.billing,(()=>i.$getUrlBilling()));const a=null==(l=null==(e=i.billing)?void 0:e.result)?void 0:l.url;if(a){const e=(e=>{try{const l=new URL(e);return l.origin.includes("stripe")?{srtipe:!0,url:e}:{srtipe:!1,url:l.pathname}}catch(l){return{srtipe:!1,url:"/setting"}}})(a);i.billing.isLoading=!0,e.srtipe?window.location.href=e.url:"/setting"!==e.url?(i.billing.isLoading=!1,await p(s.packages,(()=>s.$getBillingPackages()))):n.push({name:"/setting"})}},v=async()=>{r.value=!0},g=async e=>{await p(s.reSubscribe,(()=>s.$planCheckout({price_id:s.packages.selectedPlan.price_id,total_location:"object"==typeof e?null==e?void 0:e.total_selected_location:e}).then((()=>{s.packages.selectedPlan=void 0,window.location.href=s.reSubscribe.result})).catch((()=>{B({type:"error",message:"An error occurred during checkout. Please reach out to our customer support team for assistance."})}))))},f=()=>{d.value&&d.value.showDowngradeModalFromOutside&&d.value.showDowngradeModalFromOutside()};return[t,o]=K((()=>m())),await t,o(),c.value=["year","annual"].includes(null==(a=null==(l=null==s?void 0:s.packages)?void 0:l.result)?void 0:a.current_interval)?"yearly":"monthly",(e,l)=>{const a=z("RadioButton"),t=z("RadioGroup"),o=Y("loading");return S(i).billing.isLoading?E((_(),V("div",tl,null,512)),[[o,!0]]):(_(),V("div",Ze,[P("div",el,[l[2]||(l[2]=P("h5",{class:"font-medium"},"Plan & Billing",-1)),F(oe)]),P("div",ll,[S(s).unpaid||S(s).canceled?(_(),V("div",al,l[3]||(l[3]=[P("div",{class:"flex items-center bg-red-lighten text-red-04 py-2 px-4 rounded-lg gap-4"},[P("i",{class:"material-icons"},"info"),P("p",null,' To continue using reusely.com, please update your billing details. Once your payment is successfully made, click "Verify Payment" to confirm. ')],-1)]))):C("",!0),P("div",null,[l[4]||(l[4]=P("label",{class:"font-medium block text-teal-04"}," Compare Plans ",-1)),F(t,{modelValue:c.value,"onUpdate:modelValue":l[0]||(l[0]=e=>c.value=e)},{default:L((()=>[(_(),V(O,null,T(u,(e=>F(a,{key:e.id,label:e.id},{default:L((()=>[j(I(e.label),1)])),_:2},1032,["label"]))),64))])),_:1},8,["modelValue"])]),F(Pe,{ref_key:"refPackages",ref:d,period:c.value},null,8,["period"])]),F(Ce,{onReactive:v,onCancel:f}),F(Xe,{modelValue:r.value,"onUpdate:modelValue":l[1]||(l[1]=e=>r.value=e),onSubscribe:g},null,8,["modelValue"])]))}}},nl=D({setup(){const{genSuspense:e}=r();return()=>e(ol)}});export{nl as default};
