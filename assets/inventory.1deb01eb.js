var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,o=(t,a,n)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,s=(e,t)=>{for(var a in t||(t={}))l.call(t,a)&&o(e,a,t[a]);if(n)for(var a of n(t))i.call(t,a)&&o(e,a,t[a]);return e},r=(e,n)=>t(e,a(n));import{u as c,s as u,v as d,r as p,o as h}from"./index.c2f66179.js";import{n as y}from"./date.f86face7.js";import{f as m,r as _,g as v,y as g}from"./vendor.9695fe57.js";import{c as w}from"./setting.10b5d883.js";const f=()=>{const{dateByTimezone:e}=c(),t=_({page:1,limit:10,search:"",sort_by:"",order_by:""}),a=_({all:!1,delete:!1,restore:!1,reset:!1,dataMatch:!1,singleSoldDate:!1,update:{status:new Map}}),n=_({delete:!1,restore:!1,reset:!1,phonecheck_info:!1,move_inventory:!1,singleSoldDate:!1}),l=m(null),i=m(null),o=v((()=>u.state.inventory.all));v((()=>{u.state.inventory.filter}));const p=()=>{l.value=null},h=v((()=>u.state.inventory.alert)),g=m(null),w=_({disabledDate:t=>t.getTime()>e.value.getTime(),shortcuts:[{text:"A Week Ago",value:[new Date(e.value.getTime()-y(e.value).weekAgo),e.value]},{text:"A Month Ago",value:[new Date(e.value.getTime()-y(e.value).monthAgo),e.value]},{text:"2 Month Ago",value:[new Date(e.value.getTime()-2*y(e.value).monthAgo),e.value]},{text:"3 Month Ago",value:[new Date(e.value.getTime()-3*y(e.value).monthAgo),e.value]}]});let f=!1;const b=v((()=>u.state.inventory.deeplink)),D=v((()=>u.state.inventory.data_match.post)),k=v((()=>u.state.inventory.data_match.get));return{data:t,state:o,loading:a,modal:n,selected:l,deleteNotes:i,unsetData:p,openModal:(e,t=(()=>{}))=>{n[e]=!0,d(t)&&t()},actionAll:async(e,n={},l=(()=>{}))=>{a.all=SVGComponentTransferFunctionElement;try{await u.dispatch("inventory/all",r(s(s({status:e},t),n),{page:t.page,search:t.search}))}finally{a.all=!1}d(l)&&l()},actionShowDeepLink:async(e,t=(()=>{}))=>{await u.dispatch("inventory/deeplink",e),d(t)&&t()},actionDataMatch:async(e,t=(()=>{}))=>{try{a.dataMatch=!0,await u.dispatch("inventory/dataMatch",e),d(t)&&t()}finally{a.dataMatch=!1}},actionGetDataMatch:async(e,t=(()=>{}))=>{await u.dispatch("inventory/getDataMatch",e),d(t)&&t()},removeGetDataMatch:()=>{u.dispatch("inventory/removeDataMatch")},actionDelete:async(e,t=(()=>{}))=>{a.delete=!0,await u.dispatch("inventory/updateNotes",{id:l.value,data:i.value}),await u.dispatch("inventory/delete",l.value),d(t)&&t(),i.value=null,n.delete=!1,a.delete=!1,p()},actionReset:async(e,t=(()=>{}))=>{a.reset=!0,await u.dispatch("inventory/reset",l.value),d(t)&&t(),n.reset=!1,a.reset=!1,p()},actionRestore:async(e,t=(()=>{}))=>{a.restore=!0,await u.dispatch("inventory/restore",l.value),d(t)&&t(),n.restore=!1,a.restore=!1,p()},alert:h,actionAlert:(e,t)=>{"default"===e&&u.dispatch("inventory/alertDefault",t),"pending"===e&&u.dispatch("inventory/alertPending",t)},filterDateRef:g,filterDateOptions:w,filterDateFocus:()=>{f?f=!1:(f=!0,g.value.focus())},stateDeeplink:b,stateDataMatch:D,stateGetDataMatch:k,actionSingleSoldPrice:async(e,t=(()=>{}))=>{try{a.singleSoldDate=!0;const l=await u.dispatch("inventory/updateSingleSoldPrice",e);return d(t)&&t(),n.singleSoldDate=!1,a.singleSoldDate=!1,l}catch(l){return a.singleSoldDate=!1,l}},actionChangeStatus:async(e,t,n=(()=>{}))=>{try{a.update.status.set(e,!0),await u.dispatch("inventory/updateStatus",{id:e,data:{status_id:t}}),d(n)&&n(!1)}catch(l){d(n)&&n(l)}finally{a.update.status.delete(e)}}}},b=()=>{const e=_({product_id:null,condition_name:null,imei_sn:null,is_mac:0,paid:0}),t=m(!1);return{data:e,loading:t,action:async(a=(()=>{}))=>{t.value=!0;try{const n={};Object.keys(e).forEach((t=>{"golfSpecs"===t?Object.keys(e[t]).forEach((a=>{var l;n[a]=null==(l=e[t][a])?void 0:l.value})):"golfSteps"!==t&&(n[t]=e[t])}));const l=await u.dispatch("inventory/create",n);d(a)&&a(l)}finally{t.value=!1}}}},D=m(null),k=m({all:!1}),S=()=>{const e=m(null),t=m(!1),a={backmarket_new_price:null,backmarket_id_manual:null,box_id:null,graphics:null,is_continue:null,location:[],works_with:null},n=_({show:void 0,update:void 0}),l=v((()=>u.state.inventory.update)),i=v((()=>u.state.inventory.backmarket)),o=v((()=>u.state.inventory.show.data));return{data:e,loading:t,state:o,actionShow:async(e,l=(()=>{}))=>{t.value=!0,k.value.all=!0,n.show&&n.show.abort(),n.show=new AbortController;try{await u.dispatch("inventory/show",{id:e,signal:n.show.signal});const i=p(o.value);a.box_id=i.order_detail?i.order_detail.order.box_id:null,a.graphics=i.graphics?i.graphics:"N/A",a.is_continue=null!=i.continue?i.continue:null,D.value=s(s({},i),a),d(l)&&l(),t.value=!1,k.value.all=!1}catch(i){if("canceled"===i.message)return;t.value=!1,k.value.all=!1}},actionUpdate:async(e,a=(()=>{}))=>{n.update&&n.update.abort(),n.show&&n.show.abort(),n.update=new AbortController,t.value=!0;try{const l=await u.dispatch("inventory/update",{id:e.id,data:e.data,signal:n.update.signal});return d(a)&&a(),await M().action(e.id),t.value=!1,l}catch(l){return t.value=!1,!1}},actionCreateTag:async(e,t=(()=>{}))=>{await u.dispatch("inventory/createTag",e)},actionSearchBackmarket:async(e,t=(()=>{}))=>{await u.dispatch("inventory/searchBackmarket",{search:e})},actionGetColors:async(e,t=(()=>{}))=>await u.dispatch("inventory/getColors",s({},e)),stateUpdate:l,stateBackmarket:i}},M=()=>{const e=m(!1),t=v((()=>u.state.inventory.show.transferHistories));return{loading:e,state:t,action:async(t,a=(()=>{}))=>{e.value=!0,await u.dispatch("inventory/showTransferHistories",t),d(a)&&a(),e.value=!1}}},j=()=>{const e=m(!1),t=v((()=>u.state.inventory.show.sellingHistories));return{loading:e,state:t,action:async(t,a=(()=>{}))=>{e.value=!0,await u.dispatch("inventory/showSellingHistories",t),d(a)&&a(),e.value=!1}}},O=()=>{const e=m(!1),t=v((()=>u.state.inventory.show.morePrice));return{loading:e,state:t,action:async(t,a=(()=>{}))=>{e.value=!0,await u.dispatch("inventory/storeMorePrice",t),d(a)&&a(),e.value=!1},actionUpdate:async(t,a=(()=>{}))=>{e.value=!0,await u.dispatch("inventory/updateMorePrice",t),d(a)&&a(),e.value=!1},actionDelete:async(t,a=(()=>{}))=>{e.value=!0,await u.dispatch("inventory/deleteMorePrice",t),d(a)&&a(),e.value=!1}}},A=()=>{const e=_({delete:!1});return{loading:e,actionDelete:async(t,a=(()=>{}))=>{try{e.delete=!0,await u.dispatch("inventory/deleteShopify",t),d(a)&&a()}finally{e.delete=!1}}}},x=()=>{const e=v((()=>u.state.inventory.move_locations)),t=m({location_id:null}),a=m(!1),n=m(!1),l=m({is_visibled:!1,is_loading:!1,selected:null});return{data:t,stateLocations:e,loading:a,modal:n,dropdown:l,actionLocation:async(e=(()=>{}))=>{try{a.value=!0,await u.dispatch("inventory/allMoveLocation"),d(e)&&e()}finally{a.value=!1}},actionMoveLocation:async(e,t=(()=>{}))=>{try{a.value=!0,await u.dispatch("inventory/moveLocation",e),d(t)&&t()}finally{a.value=!1}},actionMoveLocationBulk:async(e,t=(()=>{}))=>{try{a.value=!0,await u.dispatch("inventory/moveLocationBulk",e),d(t)&&t()}finally{a.value=!1}}}},P=()=>{const{data:e,actionShow:t}=w(),a=m(!0),n=_({admin:{email:null,first_name:null,last_name:null},company:{name:null,sub_domain:null,company_email:null,email_sender:null,address:null,suite:null,phone:"",city:null,zip:null,country:null,address_text:null},item:[],payment_method:[],total_price:0,wholeseller:null,wholeseller_name:null,wholeseller_currency_symbol:null}),l=_({box_id:null,invoice_id:null,created_at:null,payment_method:null,customer_email:null,company_name:null,company_address:null,company_phone:"",company_email:null,order_detail:[],total:0,sub_total:0,pdf:"#",shipping_label:"#",is_fetched:!1,payment_extra_amount:0,shipping_label_is_generate:0}),i=_({wholeseller_subdomain:null,customer_email:null,shipping_firstname:null,shipping_lastname:null,shipping_address1:null,shipping_city:null,shipping_state:null,shipping_zip:null,shipping_phone:"",shipping_country:null,shipping_suite:null,order_detail:[]}),o=m({}),c=_({show:!1,get:!1,create:!1,autofill:!1}),p=m(!1);return g((()=>{var e;return null==(e=o.value)?void 0:e.payment_method}),(a=>{if(a)switch(a.toLowerCase()){case"bill":c.autofill=!0,t().then((()=>{o.value.bill_legal_business_name=e.legal_business_name,o.value.bill_network_id=""})).catch((()=>c.autofill=!1)).finally((()=>c.autofill=!1))}})),{isShowDetails:a,state:n,stateShow:l,formData:i,formDataPaymentMethod:o,modal:p,loading:c,resetData:()=>{Object.assign(n,{company:null,item:[],payment_method:[],total_price:0,wholeseller:null,wholeseller_name:null}),Object.assign(l,{box_id:null,invoice_id:null,created_at:null,payment_method:null,customer_email:null,company_name:null,company_address:null,company_phone:"",company_email:null,order_detail:[],total:0,sub_total:0,pdf:"#",shipping_label:"#",is_fetched:!1,shipping_label_is_generate:0}),Object.assign(i,{wholeseller_subdomain:null,customer_email:null,shipping_firstname:null,shipping_lastname:null,shipping_address1:null,shipping_city:null,shipping_state:null,shipping_zip:null,shipping_phone:null,shipping_country:null,shipping_suite:null,order_detail:[]}),o.value={}},actionShow:async(e,t=(()=>{}))=>{try{c.show=!0;const a=await u.dispatch("inventory/showSellBulkInstantly",e);if(!h(a))throw new Error;for(const[e,t]of Object.entries(a))Object.keys(l).includes(e)&&(l[e]=t);l.is_fetched=!0,d(t)&&t()}catch(a){d(t)&&t(a)}finally{c.show=!1}},actionGet:async(e,t=(()=>{}))=>{try{c.get=!0;(e=>{if(h(e)){for(const[t,a]of Object.entries(e))if("payment_method"!==t)n[t]=a;else if("payment_method"===t){let e=a;Array.isArray(e)||(e=Object.keys(a).map((e=>s({},a[e])))),n[t]=e.map((e=>r(s({},e),{component:e.is_custom?"Custom":e.name?e.name.replace(/ /g,""):""})))}if(1===n.payment_method.length){const e=n.payment_method[0];o.value.payment_method=e.name}i.customer_email=n.admin.email,i.shipping_firstname=n.admin.first_name||n.company.first_name,i.shipping_lastname=n.admin.last_name||n.company.last_name,i.shipping_address1=n.company.address,i.shipping_city=n.company.city,i.shipping_state=n.company.state,i.shipping_zip=n.company.zip,i.shipping_phone=n.company.phone,i.shipping_country=n.company.country,i.shipping_suite=n.company.suite,i.wholeseller_subdomain=n.wholeseller,i.order_detail=n.item}})(await u.dispatch("inventory/getSellBulkInstantly",e)),d(t)&&t()}catch(a){d(t)&&t(a)}finally{c.get=!1}},actionCreate:async(e=(()=>{}))=>{try{c.create=!0,delete i.true,delete i.undefined;const t=await u.dispatch("inventory/sellBulkInstantly",s(s({},r(s({},i),{order_detail:i.order_detail.map((e=>({product_id:e.product_id,inventory_id:e.inventory_id,condition_id:e.condition_id,name:e.name,qty:1,imei_sn:e.imei_sn,price:e.price_who_seller,is_price_parameterize:e.is_price_parameterize})))})),o.value));d(e)&&e(!1,t)}catch(t){d(e)&&e(t,null)}finally{c.create=!1}}}};export{S as a,f as b,O as c,D as d,x as e,A as f,j as g,M as h,P as i,b as u};
