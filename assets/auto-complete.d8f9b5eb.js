var e=Object.defineProperty,t=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,o=(t,l,a)=>l in t?e(t,l,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[l]=a,u=(e,u)=>{for(var n in u||(u={}))l.call(u,n)&&o(e,n,u[n]);if(t)for(var n of t(u))a.call(u,n)&&o(e,n,u[n]);return e};import{a as n,f as s,w as i}from"./index.73ae30fa.js";import{k as c,f as r,g as d,y as v,at as p,$ as m,A as f,x as _}from"./vendor.9695fe57.js";const g=c({name:"AutoComplete",mixins:[...n([],"auto-complete")],props:["items","value","modelValue","noData","name","by","placeholder","loading","loadingText","clearOnSelect","icon","rounded","flat","disabled","disabled-item","clearable"],emits:["update:modelValue","select","change","focusIn","focusOut"],directives:{outsideClick:{beforeMount:(e,t,l)=>{t.event=function(l){e==l.target||e.contains(l.target)||t.value instanceof Function&&t.value(l)},document.addEventListener("click",t.event),document.addEventListener("scroll",t.event,!0)},unmounted:(e,t,l)=>{document.removeEventListener("click",t.event),document.removeEventListener("scroll",t.event,!0)}}},setup(e,{slots:t,emit:l}){const a=r(null),o=r(null),n=r(e.value),c=r(!1),m=r(!0),f=d((()=>a.value&&a.value.$el?a.value.$el.offsetWidth:0)),g=t=>{c.value=!1,n.value=t.text,l("update:modelValue",t.value),l("select",t.value),e.clearOnSelect&&(n.value=null)},h=e=>{l("change",e.target.value),n.value=e.target.value},b=e=>{l("focusIn",e),a.value&&a.value.$el&&(o.value=a.value.$el.getBoundingClientRect().top-a.value.$el.offsetParent.getBoundingClientRect().top-a.value.$el.offsetParent.scrollTop+a.value.$el.ownerDocument.defaultView.pageYOffset+40),c.value=!0},I=()=>{n.value=null,l("change",""),a.value.focus()},y=()=>t.icon&&t.icon(),$=v((()=>e.value),(e=>{n.value=e}));return p((()=>$())),{autoCompleteInput:()=>_("div",{class:"auto__complete__input"},_(s,{ref:a,block:!0,value:n.value,clearable:e.clearable,onInput:h,onFocusIn:b,onClear:I,placeholder:e.placeholder,icon:!0,disabled:e.disabled})),autoCompleteSheet:()=>{let l=[],a=e.items;a&&a.length||(a=[]);let n=a.map((t=>(t=>{if("object"==typeof t&&!Array.isArray(t)){let l=i(t,e.by);return{text:i(t,e.name),value:l,data:u({},t)}}return{text:t,value:t}})(t)));for(let o of n){if(o.text&&o.value){const a=!!o.value[e.disabledItem]&&o.value[e.disabledItem];l.push(_("div",{class:["auto__complete__sheet__item",a&&"--disabled"],onClick:a?null:g.bind(this,o)},t.default&&t.default({item:o})||o.text))}}const s=_("div",{class:"auto__complete__sheet",style:{width:`${f.value}px`,top:`${o.value}px`}},l.length>0?l:_("div",{class:"auto__complete__sheet__item sheet__item--nodata"},m?"Nothing to show":e.noData||"No data available"));return m.value=!1,s},autoCompleteLoading:()=>_("div",{class:"auto__complete__sheet",style:{width:`${f.value}px`}},_("div",{class:"auto__complete__sheet__item"},t.loading&&t.loading()||e.loadingText||"Loading ...")),isTriggered:c,selectedItem:n,autoCompleteIcon:()=>_("div",{class:"auto__complete__icon"},y()),slotIcon:y,onInputFocusOut:e=>{a.value&&a.value.$el&&a.value.blur(),l("focusOut",e),c.value=!1}}},render(){const e=m("outside-click"),t=[this.autoCompleteInput(),this.autoCompleteIcon(),this.$props.loading&&this.autoCompleteLoading()||this.isTriggered&&this.autoCompleteSheet()],l=["auto-complete",this.$props.flat&&"auto-complete--flat",this.$props.rounded&&"auto-complete--rounded",this.slotIcon()&&"auto-complete--icon",this.isTriggered?"--triggered":""];return f(_("div",{class:l},t),[[e,this.onInputFocusOut]])}});export{g as _};
