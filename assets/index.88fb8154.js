import{u as a}from"./components.4d38f2db.js";import{k as o,_ as e,m as d,o as l,t as s,D as r,a1 as t,a2 as n,K as i,f as u,a5 as m,O as c,r as p,x as v}from"./vendor.9695fe57.js";import{b,j as f,f as _,_ as g,v as w,d as y}from"./index.73ae30fa.js";import{a as $}from"./integration.549dcf93.js";import{u as k}from"./index.f40e4a9e.js";import{r as V}from"./index.54844a74.js";import"./LoadingCard.d1cef10f.js";import"./card.0f43ecfb.js";import"./index.6b6f6369.js";var j=g(o({components:{Button:b,Alert:f,Input:_},async setup(){const{state:a,data:o,actionAll:d,actionUpdate:l,loading:s}=$(),r=k({odoo_url:{required:V},odoo_database:{required:V},odoo_username:{required:V},odoo_password:{required:V}},o,{$lazy:!0});return await Promise.all([d()]),{state:a,data:o,loading:s,validation:r,update:async(a=(()=>{}))=>{if(!(r.value.$validate(),!r.value.$invalid))return;const d=Object.assign({},{odoo_url:o.odoo_url,odoo_database:o.odoo_database,odoo_username:o.odoo_username,odoo_password:o.odoo_password});await l(d,(o=>{if("connection failed"===o.toLowerCase())return e({type:"warning",message:"Invalid Odoo configurations"});e({type:"success",message:"Odoo integration updated!"}),w(a)&&a()}))}}}}),[["render",function(a,o,e,u,m,c){const p=d("Input");return l(),s(t,null,[r(p,{modelValue:a.data.odoo_url,"onUpdate:modelValue":o[0]||(o[0]=o=>a.data.odoo_url=o),view:a.validation.odoo_url.$invalid?"danger":"default",class:"my-4",label:"Odoo Url",placeholder:"",block:""},null,8,["modelValue","view"]),(l(!0),s(t,null,n(a.validation.odoo_url.$errors,((a,o)=>(l(),s("small",{class:"text-red-base block mb-4",key:o},i(a.$message)+". ",1)))),128)),r(p,{modelValue:a.data.odoo_database,"onUpdate:modelValue":o[1]||(o[1]=o=>a.data.odoo_database=o),view:a.validation.odoo_database.$invalid?"danger":"default",class:"my-4",label:"Odoo Database",placeholder:"",block:""},null,8,["modelValue","view"]),(l(!0),s(t,null,n(a.validation.odoo_database.$errors,((a,o)=>(l(),s("small",{class:"text-red-base block mb-4",key:o},i(a.$message)+". ",1)))),128)),r(p,{modelValue:a.data.odoo_username,"onUpdate:modelValue":o[2]||(o[2]=o=>a.data.odoo_username=o),view:a.validation.odoo_username.$invalid?"danger":"default",class:"my-4",label:"Odoo Username",placeholder:"",block:""},null,8,["modelValue","view"]),(l(!0),s(t,null,n(a.validation.odoo_username.$errors,((a,o)=>(l(),s("small",{class:"text-red-base block mb-4",key:o},i(a.$message)+". ",1)))),128)),r(p,{modelValue:a.data.odoo_password,"onUpdate:modelValue":o[3]||(o[3]=o=>a.data.odoo_password=o),view:a.validation.odoo_password.$invalid?"danger":"default",class:"my-4",label:"Odoo Password",placeholder:"",block:""},null,8,["modelValue","view"]),(l(!0),s(t,null,n(a.validation.odoo_password.$errors,((a,o)=>(l(),s("small",{class:"text-red-base block mb-4",key:o},i(a.$message)+". ",1)))),128))],64)}]]),x=o({async setup(){const{genSuspense:o}=a(),e=u(null),d=m(),l=c(),s=()=>{e.value.update((()=>{var a;l.push({name:"integration",query:{enable:(null==(a=d.query)?void 0:a.id)||""}})}))},r=p({modelValue:!0,closeTo:{name:"integration",query:{reload:1}},size:"xs"}),t=p({header:()=>"Odoo Config",default:()=>o(v(j,{ref:e})),footer:()=>{return v(b,{color:"teal",loading:e.value&&(null==(o=null==(a=e.value)?void 0:a.loading)?void 0:o.update),onClick:s},{default:()=>"Save"});var a,o}});return()=>v(y,r,t)}});export{x as default};
