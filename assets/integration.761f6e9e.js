var a=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,o=(t,e,i)=>e in t?a(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,l=(a,t)=>{for(var e in t||(t={}))n.call(t,e)&&o(a,e,t[e]);if(i)for(var e of i(t))s.call(t,e)&&o(a,e,t[e]);return a},c=(a,i)=>t(a,e(i));import{g as r,r as d,f as p,_ as u,x as g,b as y}from"./vendor.9695fe57.js";import{s as h,v as f,r as w}from"./index.6438e939.js";const _=()=>{const a=r((()=>h.state.integration.all)),t=r((()=>h.state.integration.enabled_integration)),e=d({all:!1,update:!1});return{state:a,stateEnabledIntegration:t,loading:e,actionAll:async(a=(()=>{}))=>{try{e.all=!0;const t=await h.dispatch("integration/all");f(a)&&a(t)}finally{e.all=!1}},actionEnabledIntegration:async(a=(()=>{}))=>{try{e.update=!0;const t=await h.dispatch("integration/enabledIntegration");f(a)&&a(t)}finally{e.update=!1}},actionUpdate:async(a,t,i=(()=>{}),n=(()=>{}))=>{const s=Object.assign({},{id:a,data:t});try{e.update=!0;const a=await h.dispatch("integration/update",s);f(i)&&i(a)}catch(o){f(n)&&n(o)}finally{e.update=!1}},getIntegrationByName:t=>a.value.find((a=>a.name.toLowerCase()===t.toLowerCase())),enableIntegrationByName:t=>{const e=a.value.findIndex((a=>a.name.toLowerCase()===t.toLowerCase()));-1!==e&&h.commit("integration/SET_ENABLE_INTEGRATION",e)}}},m=()=>{const{state:a}=k(),t=r((()=>h.state.integration.show.all)),e=r((()=>!(!a.value||!a.value.length)&&h.state.integration.refresh_datafeed)),i=r((()=>h.state.integration.show.public_api)),n=r((()=>h.state.integration.show.datafeed.all)),s=r((()=>h.state.integration.show.datafeed.show)),o=d({}),l=d({all:!1,update:!1,public_api:!1,data_feed:!1}),c=d({page:1,limit:10});return{state:t,stateWidgetUrl:a,stateAllDataFeed:n,stateShowDataFeed:s,data:o,datafeed:c,loading:l,actionAll:async(a=(()=>{}))=>{try{l.all=!0,await h.dispatch("integration/showAll"),Object.assign(o,w(t.value)),f(a)&&a()}finally{l.all=!1}},actionUpdate:async(a,t=(()=>{}),e=(()=>{}))=>{try{l.update=!0;const e=await h.dispatch("integration/updateAll",a);f(t)&&t(e)}catch(i){f(e)&&e()}finally{l.update=!1}},actionPublicApi:async(a=(()=>{}))=>{try{l.public_api=!0,await h.dispatch("integration/showPublicApi"),Object.assign(o,i.value.data),f(a)&&a()}finally{l.public_api=!1}},actionGeneratePublicApiKey:async(a=(()=>{}))=>{try{l.public_api=!0;const t=await h.dispatch("integration/showGeneratePublicApiKey");f(a)&&a(t)}finally{l.public_api=!1}},actionAllDataFeed:async(a=(()=>{}))=>{try{l.data_feed=!0,await h.dispatch("integration/allDataFeed",c),f(a)&&a()}finally{l.data_feed=!1}},actionShowDataFeed:async(a=(()=>{}))=>{try{l.data_feed=!0,await h.dispatch("integration/showDataFeed"),f(a)&&a()}finally{l.data_feed=!1}},refreshDatafeed:e,actionRefreshDataFeed:async a=>{await h.dispatch("integration/setRefreshDataFeed",a)},resetAllDataFeed:async(a=(()=>{}))=>{try{c.page=1,l.data_feed=!0,await h.dispatch("integration/allDataFeed",c),f(a)&&a()}finally{l.data_feed=!1}}}},b=()=>{const a=p(!1);return{repairdesk:async(t,e=(()=>{}))=>{try{a.value=!0;const i=await h.dispatch("integration/repairdesk/testConnection",t);f(e)&&e(i)}finally{a.value=!1}},wholeCell:async(t,e=(()=>{}))=>{try{a.value=!0,await h.dispatch("integration/wholecell/testConnection",t),u({type:"success",message:"WholeCell.io connection succeed!"})}catch(i){u({type:"warning",message:"WholeCell.io connection failed!"})}finally{a.value=!1}},loading:a}},v=()=>{const a=r((()=>h.state.integration.show.fedex)),t=d({all:!1,update:!1}),e=d({config:{},shipping_kit:{}});return{state:a,loading:t,data:e,actionAll:async(a=(()=>{}))=>{try{t.all=!0;const[i,n]=await Promise.all([h.dispatch("integration/showFedexConfig"),h.dispatch("integration/showFedexShippingKit")]);Object.assign(e,{config:w(i),shipping_kit:w(n)}),f(a)&&a()}finally{t.all=!1}},actionUpdateConfig:async(a=(()=>{}))=>{try{t.update=!0,await h.dispatch("integration/showFedexConfigUpdate",e.config),f(a)&&a()}finally{t.update=!1}},actionUpdateShippingKit:async(a=(()=>{}))=>{try{t.update=!0,await h.dispatch("integration/showFedexShippingKitUpdate",e.shipping_kit),f(a)&&a()}finally{t.update=!1}}}},U=()=>{const a=r((()=>h.state.integration.show.ups)),t=d({all:!1,update:!1}),e=d({config:{},shipping_kit:{}});return{state:a,loading:t,data:e,actionAll:async(a=(()=>{}))=>{try{t.all=!0;const[i,n]=await Promise.all([h.dispatch("integration/showUpsConfig"),h.dispatch("integration/showUpsShippingKit")]);Object.assign(e,{config:w(i),shipping_kit:w(n)}),f(a)&&a()}finally{t.all=!1}},actionUpdateConfig:async(a=(()=>{}))=>{try{t.update=!0;const i=Object.assign({},c(l({},e.config),{ups_account_postal_code:e.config.ups_postal_code,ups_account_country_code:e.config.ups_country_code}));await h.dispatch("integration/showUpsConfigUpdate",i),f(a)&&a()}finally{t.update=!1}},actionUpdateShippingKit:async(a=(()=>{}))=>{try{t.update=!0,await h.dispatch("integration/showUpsShippingKitUpdate",e.shipping_kit),f(a)&&a()}finally{t.update=!1}}}},C=()=>{const a=r((()=>h.state.integration.show.usps)),t=d({all:!1,update:!1,updateCurrentLocation:!1,deleteAccount:!1}),e=d({deleteAccount:!1}),i=d({shipping_kit:{},accounts:{page:1,limit:10},current_account:{}});return{state:a,loading:t,modal:e,data:i,actionAll:async(a=(()=>{}))=>{try{t.all=!0;const[e,n,s]=await Promise.all([h.dispatch("integration/showUspsShippingKit"),h.dispatch("integration/showUspsAccounts"),h.dispatch("integration/showUspsCurrentAccount")]);Object.assign(i,{shipping_kit:w(e),current_account:w(s)}),f(a)&&a()}finally{t.all=!1}},actionAccounts:async(a=(()=>{}))=>{try{t.all=!0;await h.dispatch("integration/showUspsAccounts");f(a)&&a()}finally{t.all=!1}},actionDeleteAccount:async(a,e=(()=>{}))=>{try{t.deleteAccount=!0,await h.dispatch("integration/showUspsAccountDelete",a),f(e)&&e()}finally{t.deleteAccount=!1}},actionUpdateCurrentLocation:async(a,e=(()=>{}))=>{try{t.updateCurrentLocation=!0,await h.dispatch("integration/showUspsCurrentAccountUpdate",a),f(e)&&e()}finally{t.updateCurrentLocation=!1}},actionUpdateShippingKit:async(a=(()=>{}))=>{try{t.update=!0,await h.dispatch("integration/showUspsShippingKitUpdate",i.shipping_kit),f(a)&&a()}finally{t.update=!1}}}},A=()=>{const a=d({user_id:null,merchant_account_code:null,mid:null,is_default:0,location:null,zip_code:null}),t=p(!1);return{data:a,loading:t,actionShow:async(e,i=(()=>{}))=>{t.show=!0;((t={})=>{a.user_id=t.user_id||null,a.merchant_account_code=t.merchant_account_code||null,a.mid=t.mid||null,a.is_default=t.is_default||0,a.location=t.location||null,a.zip_code=t.zip_code||null})(await h.dispatch("integration/showUsps",e)),f(i)&&i(),t.show=!1},actionCreate:async(e=(()=>{}))=>{try{t.value=!0,await h.dispatch("integration/showUspsCreate",a),f(e)&&e()}finally{t.value=!1}},actionUpdate:async(e,i=(()=>{}))=>{try{t.value=!0,await h.dispatch("integration/showUspsUpdate",{id:e,data:a}),f(i)&&i()}finally{t.value=!1}}}},k=()=>{const a=r((()=>{const a=h.state.integration.data_feed_widget_url;return a.includes("https://")?a.replace("https://",""):a})),t=p(!0);return{state:a,loading:t,actionGET:async()=>{try{t.value=!0,await h.dispatch("integration/showWidgetURLDatafeed")}finally{t.value=!1}},actionPOST:async a=>{try{t.value=!0,await h.dispatch("integration/updateWidgetURLDatafeeds",`https://${a}`),u({type:"info",message:g("div",{class:"buyback-custom-message--content"},[g("icon",{class:"material-icons"},"downloading"),g("span",null,"Feel free to navigate away or close this window â€” your Data Feed preparation will continue.")]),customClass:"buyback-custom-message-class"})}finally{t.value=!1}}}},O=()=>{const a=p(null),t=d({search:"",page:1,lastPage:1,limit:10,apiKeys:d({}),items:[],filterFrom:void 0}),e=p(!1),i=r((()=>h.state.integration.repairdesk.loading.config)),n=r((()=>h.state.integration.repairdesk.config));return{data:t,loading:e,configs:n,loadingConfigs:i,actionShow:async(i,n=(()=>{}))=>{a.value&&a.value.cancel(),a.value=y.CancelToken.source(),e.value=!0;try{const a=await h.dispatch("integration/repairdesk/locations",i);t.lastPage=a.last_page,t.items=a.data,t.items.length&&(t.items=t.items.map((a=>(t.apiKeys[`apiKey${a.id}`]=a.repairdesk_api_key,c(l({},a),{is_edit:!1}))))),f(n)&&n()}finally{e.value=!1}},actionUpdate:async(a,t=(()=>{}))=>{e.value=!0;try{await h.dispatch("integration/repairdesk/testConnection",{location_id:a.id,repairdesk_api_key:a.repairdesk_api_key}),u({message:"Connected!",type:"success"}),f(t)&&t()}finally{e.value=!1}},actionDelete:async(a,t=(()=>{}))=>{e.value=!0;try{await h.dispatch("integration/repairdesk/removeConnection",a),f(t)&&t()}finally{e.value=!1}},updateConfig:async(a=(()=>{}))=>{try{h.commit("integration/repairdesk/SET_LOADING_CONFIG_UPDATE",!0),await h.dispatch("integration/repairdesk/updateConfig"),f(a)&&a(null)}catch(t){f(a)&&a(t)}finally{h.commit("integration/repairdesk/SET_LOADING_CONFIG_UPDATE",!1)}},setConfig:a=>h.commit("integration/repairdesk/SET_CONFIG",a)}};export{m as a,b,O as c,v as d,U as e,C as f,A as g,k as h,_ as u};
