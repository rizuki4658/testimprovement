var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,i=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t,d=(e,a)=>{for(var l in a||(a={}))o.call(a,l)&&i(e,l,a[l]);if(t)for(var l of t(a))s.call(a,l)&&i(e,l,a[l]);return e},n=(e,t)=>a(e,l(t));import{u as r}from"./components.2c51ae72.js";import{k as c,f as u,g as m,y as f,m as p,a0 as b,o as v,n as y,w,B as g,I as _,D as h,F as x,K as k,A as D,t as I,a2 as S,a3 as E,T as C,U as O,aQ as L,S as W,a5 as j,O as T,z as V,L as B,_ as A}from"./vendor.f1efedad.js";import{C as F,j as P}from"./setting.bd993b06.js";import{V as U}from"./vue-draggable-next.esm-bundler.0ebea46e.js";import{d as R,b as K,S as M,e as H,_ as z,g as N,f as $,r as J}from"./index.ec266ec1.js";import{D as q}from"./workflow.82480012.js";import{C as Q}from"./card.198a6be1.js";import{_ as G}from"./tab.3f85415b.js";import{B as X}from"./Breadcrumb.0ccfede3.js";import{A as Y}from"./Accordion.f9ded6bf.js";import{P as Z}from"./PreviewEmailTemplate.a1b4d7b5.js";import{d as ee}from"./dashboard.e20cdc3f.js";import{u as ae}from"./dashboard.e053f438.js";import{_ as le}from"./fieldset.93cf49f0.js";import{_ as te}from"./badge.add574f9.js";import"./LoadingCard.93d3634e.js";import"./breadcrumb.624a01cc.js";import"./IframeRender.ac49ebc3.js";import"./date.f86face7.js";const oe=c({name:"WorkflowDashboard",components:{Modal:R,Button:K,Select:M,Fieldset:le,Checkbox:H,Draggable:U},props:{modelValue:{type:Boolean,default:!1},flows:{type:Array,default:()=>[]},form:{type:Object,default:()=>({})},maxLimit:{type:[Number,String],default:10},buyback:{type:String,default:"mail-in"}},emits:["update:modelValue","update:form"],setup(e,a){const l=ae(),{loading:i,getPersonalize:r,updatePersonalize:c}=ee(),p=u([]),b=u(0),v=e=>{const a=[],l=(e,i=null)=>{e.forEach((e=>{const r=e,{child:c}=r,u=((e,a)=>{var l={};for(var i in e)o.call(e,i)&&a.indexOf(i)<0&&(l[i]=e[i]);if(null!=e&&t)for(var i of t(e))a.indexOf(i)<0&&s.call(e,i)&&(l[i]=e[i]);return l})(r,["child"]),m=e.id;Array.isArray(c)&&c.length>0?l(c,m):a.push(n(d({},u),{selected:!1,parent_id:i}))}))};return l(e),a},y=m({get:()=>e.modelValue,set:e=>a.emit("update:modelValue",e)}),w=u([]),g=m({get:()=>{const a=e.form;return(null==a?void 0:a.offer)||(a.offer=10),(null==a?void 0:a.flows)||(a.flows=[]),a},set:e=>a.emit("update:form",e)}),_=m((()=>{const a=[];for(let l=1;l<=(null==e?void 0:e.maxLimit);l++)a.push({value:l,name:l});return a})),h=m((()=>b.value!==g.value.offer||k(p.value.map((e=>`${e.id}_${e.parent_id}`)),g.value.flows.map((e=>`${e.id}_${e.parent_id}`))))),x=N((e=>{e.item.classList.remove("bg-grey-01"),e.item.classList.add("group")}),300),k=(e,a)=>{if(e.length!==a.length)return!0;for(let l=0;l<e.length;l++){const t=e[l],o=a[l];if(JSON.stringify(t)!==JSON.stringify(o))return!0}return!1},D=async()=>{var a;const l=await r({buyback_type:"mail-in"===e.buyback?"mailin":"instore"});p.value=[...null==l?void 0:l.data],b.value=(null==l?void 0:l.limit)||0,g.value.offer=(null==l?void 0:l.limit)||e.maxLimit,w.value=v(e.flows).map((e=>{var a;return n(d({},e),{selected:(null==(a=null==l?void 0:l.data)?void 0:a.findIndex((a=>a.id===e.id&&a.parent_id===e.parent_id)))>=0})})),g.value.flows=(null==(a=null==l?void 0:l.data)?void 0:a.map((e=>{const a=w.value.find((a=>a.id===e.id&&a.parent_id===e.parent_id));return d(d({},e),!!a&&d({},a))})))||[]};return f((()=>y.value),(async()=>{y.value&&D()})),{form:g,modal:y,maxLimits:_,flowOptions:w,dragEnd:x,loading:i,isDifferentFlows:h,saveFlow:async()=>{const a={buyback_type:"mail-in"===e.buyback?"mailin":"instore",limit:g.value.offer,data:g.value.flows.map((e=>({id:e.id,parent_id:e.parent_id,name:(null==e?void 0:e.short_name)||(null==e?void 0:e.name)||(null==e?void 0:e.status_name)})))};await c(a),await D(),l.resetAll()},dragStart:e=>{e.item.classList.add("bg-grey-01"),e.item.classList.remove("group")},selectFlow:(e,a)=>{if(e)return void g.value.flows.push(a);const l=g.value.flows.findIndex((e=>e.id===a.id));l>=0&&g.value.flows.splice(l,1)},deleteFlow:e=>{const a=g.value.flows.findIndex((a=>a.id===e.id)),l=w.value.findIndex((a=>a.id===e.id));a>=0&&g.value.flows.splice(a,1),l>=0&&(w.value[l].selected=!1)},cancelFlow:()=>{g.value.offer=10,g.value.flows=[],w.value=[],y.value=!1},changeLimit:()=>{}}}}),se={class:"space-y-6"},ie={class:"grid grid-cols-3 gap-6"},de={class:"md:pt-1.5"},ne={style:{height:"500px",maxHeight:"340px"},class:"space-y-4 px-4 py-4 overflow-y-auto hide-scrollbar"},re={class:"font-normal"},ce={class:"col-span-2"},ue={class:"flex items-center gap-x-4"},me={key:0,class:"bg-teal-03 text-white px-4 py-1 text-sm rounded-full"},fe={key:0,class:"space-y-8 px-4 pb-4"},pe={style:{height:"500px",maxHeight:"287px"},class:"overflow-y-auto hide-scrollbar"},be=["tabindex"],ve={class:"flex-1"},ye=["onClick"],we={key:1,class:"space-y-8 px-4 py-5 h-36 flex items-center justify-center"},ge={class:"flex items-center justify-between"},_e=["disabled"];const he=c({components:{Button:K,Card:Q,Tab:G,Input:$,Modal:R,Breadcrumb:X,Draggable:U,Accordion:Y,Checkbox:H,PreviewEmail:Z,WorkflowDashboard:z(oe,[["render",function(e,a,l,t,o,s){const i=p("Select"),d=p("Checkbox"),n=p("Fieldset"),r=p("Draggable"),c=p("Button"),u=p("Modal"),m=b("loading");return v(),y(u,{modelValue:e.modal,"onUpdate:modelValue":a[2]||(a[2]=a=>e.modal=a),size:"lg","no-close":e.loading},{header:w((()=>a[3]||(a[3]=[g("p",{class:"font-medium"},"Personlize Dashboard",-1)]))),default:w((()=>[g("div",se,[a[10]||(a[10]=g("div",{class:"text-sm bg-blue-01 bg-opacity-50 rounded-lg text-blue-04 px-4 py-2 flex items-center"},[g("i",{class:"material-icons mr-4"},"info"),_(" Select the Workflow you want to display on the Dashboard ")],-1)),g("div",null,[a[4]||(a[4]=g("p",{class:"font-medium"}," How many Offers would you like to display on each Workflow tile on the dashboard ",-1)),h(i,{modelValue:e.form.offer,"onUpdate:modelValue":[a[0]||(a[0]=a=>e.form.offer=a),e.changeLimit],block:"","no-border":"",by:"value",name:"name","max-height":"300px",placeholder:"Please Select Options",items:e.maxLimits,loading:e.loading},{item:w((({item:a})=>[g("div",{class:x(["-mx-6 -my-4 px-6 py-4",a.value===e.form.offer&&"font-semibold bg-grey-01 bg-opacity-50"])},k(null==a?void 0:a.name),3)])),_:1},8,["modelValue","items","loading","onUpdate:modelValue"])]),g("div",null,[g("div",ie,[g("div",de,[h(n,{class:"rounded-lg"},{label:w((()=>a[5]||(a[5]=[_("Available Workflows")]))),default:w((()=>[D((v(),I("div",ne,[(v(!0),I(S,null,E(e.flowOptions,(a=>{var l;return v(),I("div",{key:a.id},[h(d,{modelValue:a.selected,"onUpdate:modelValue":e=>a.selected=e,value:!0,"value-off":!1,disabled:(null==(l=e.form.flows)?void 0:l.length)>=9&&!a.selected,onInput:l=>e.selectFlow(l,a)},{default:w((()=>[g("span",re,k((null==a?void 0:a.status_name)||"Unknown"),1)])),_:2},1032,["modelValue","onUpdate:modelValue","disabled","onInput"])])})),128))])),[[m,e.loading]])])),_:1})]),D((v(),I("div",ce,[h(n,{class:"rounded-lg"},{label:w((()=>[g("div",ue,[a[6]||(a[6]=_(" Selected Workflow ")),h(C,{name:"slide-fade"},{default:w((()=>{var a,l,t,o;return[(null==(l=null==(a=e.form)?void 0:a.flows)?void 0:l.length)?(v(),I("div",me,k((null==(o=null==(t=e.form)?void 0:t.flows)?void 0:o.length)||0)+" out of "+k(9)+" selected ",1)):O("",!0)]})),_:1})])])),default:w((()=>[h(L,{name:"slide-fade"},{default:w((()=>{var l,t;return[(null==(t=null==(l=e.form)?void 0:l.flows)?void 0:t.length)?(v(),I("div",fe,[a[9]||(a[9]=g("p",null,"Click and drag to reorder the columns",-1)),g("div",pe,[h(r,{list:e.form.flows,handle:".dragable__icon",class:"space-y-4",onStart:e.dragStart,onEnd:e.dragEnd},{default:w((()=>[h(L,{name:"slide-fade"},{default:w((()=>[(v(!0),I(S,null,E(e.form.flows,((l,t)=>(v(),I("div",{key:t,tabindex:100+t,class:"group border border-grey-01 rounded-lg px-6 py-4 flex items-center justify-between gap-x-4 bg-opacity-50"},[a[8]||(a[8]=g("span",{class:"material-icons dragable__icon cursor-move"},"drag_indicator",-1)),g("div",ve,k((null==l?void 0:l.status_name)||(null==l?void 0:l.name)||(null==l?void 0:l.short_name)||"Unknown"),1),g("a",{href:"#",class:"hover:opacity-50 text-red-04 hover:text-red-04 group-hover:opacity-100 group-focus:opacity-0 opacity-0 transition-all ease-out duration-300",onClick:W((a=>e.deleteFlow(l)),["prevent"])},a[7]||(a[7]=[g("i",{class:"material-icons"},"delete",-1)]),8,ye)],8,be)))),128))])),_:1})])),_:1},8,["list","onStart","onEnd"])])])):(v(),I("div",we," Please select workflow! "))]})),_:1})])),_:1})])),[[m,e.loading]])])])])])),footer:w((()=>{var l;return[g("div",ge,[g("a",{href:"#",class:"text-red-04",disabled:e.loading,onClick:a[1]||(a[1]=W(((...a)=>e.cancelFlow&&e.cancelFlow(...a)),["prevent"]))}," Cancel ",8,_e),h(c,{color:"teal",disabled:(null==(l=e.form.flows)?void 0:l.length)<=0||!e.isDifferentFlows||e.loading,onClick:W(e.saveFlow,["prevent"])},{default:w((()=>a[11]||(a[11]=[_(" Save Changes ")]))),_:1},8,["disabled","onClick"])])]})),_:1},8,["modelValue","no-close"])}]]),Badge:te},async setup(){const{data:e,state:a,tab:l,loading:t,modal:o,selected:s,unsetData:i,openModal:d,actionAll:n,actionDelete:r,actionSort:c,specialWorkflowIds:p,locations:b,isMailIn:v,dataDashboard:y,actionUpdateSendEmail:w}=F(),g=u(""),{emailBody:_,isPreview:h,previewedTemplate:x,loading:k,actionWorkflowEmailById:D}=P(),I=j(),S=T(),E=u(I.params.buyback);V((()=>W())),await n(I.params.buyback);const C=u(J(a.value)),O=m((()=>{switch(E.value){case"mail-in":return"mail-in";case"easy-offer":return"easy-offer";default:return"in-store"}})),L=N((async()=>{}),300),W=f((()=>({route:I.params.buyback})),(async()=>{await n(I.params.buyback),C.value=J(a.value)}));f((()=>a.value),(e=>{C.value=J(a.value)}),{deep:!0}),f((()=>E.value),(e=>{S.push({params:{buyback:e}})}));const B=p.value;return{data:e,tab:l,route:I,localState:C,toHideworkflowIds:B,loading:t,modal:o,currentBuybackType:O,unsetData:i,actionDelete:r,breadcrumb:[{text:"Settings",to:{name:"setting"}},{text:"Workflow"}],emailBody:_,isPreview:h,previewedTemplate:x,loadingPreviewEmailTemplate:k,openModalSelected:(e,a)=>d(e,(()=>{s.value=a.id})),dragHandler:async()=>{const e=C.value.map(((e,a)=>e.id));await c(e)},handleSearch:L,handleChangeSendEmail:async e=>{const a={id:e.id,buyback:"mail-in"===I.params.buyback?"mailin":"easy-offer"===I.params.buyback?"easy-offer":"instore",is_send_email:e.is_send_email};return e.loading=!0,await w(a,(()=>{A({type:"success",message:"Success update send email"})})),e.loading=!1,e},handlePreviewEmailTemplate:async e=>{e&&await D({id:e,type:I.params.buyback})},locations:b,buybackType:E,DISABLED_EDIT_WORKFLOW_IDS:q,search:g,dataDashboard:y,handleToEdit:e=>{S.push({name:"settingWorkflowEdit",params:{workflowId:e},query:{type:O.value}})}}}}),xe={class:"flex justify-between lg:items-center md:items-end md:flex-row flex-col items-start mb-8"},ke={class:"flex items-center justify-center gap-4"},De={key:0,class:"px-3 py-1 -ml-2 bg-teal-04 text-white rounded-full flex items-center justify-center box-border text-xs"},Ie={class:"max-w-sm"},Se={class:"mb-6 flex flex-wrap items-center md:justify-between justify-end gap-4"},Ee={class:"text-grey-03 flex items-center justify-center gap-x-2"},Ce={class:"capitalize"},Oe={key:0,class:"max-w-xs"},Le={class:"flex items-center"},We=["onClick"],je={class:"flex w-full justify-between gap-4"},Te={class:"flex-1 md:flex w-full flex-wrap items-center"},Ve={class:"font-medium text-teal-04"},Be={class:"text-teal-02"},Ae={class:"flex-1 flex md:flex-row flex-col md:items-center items-end justify-center md:justify-between gap-4"},Fe={key:0,class:"md:pl-14"},Pe={key:0,class:"max-w-xs"},Ue={key:1,class:"max-w-xs"},Re={class:"flex w-full justify-between gap-4"},Ke={class:"flex-1 md:flex w-full flex-wrap items-center gap-4"},Me={class:"font-medium text-teal-04"},He={class:"text-teal-02"},ze={class:"flex-1 flex md:flex-row flex-col md:items-center items-end justify-center md:justify-between gap-4"},Ne={class:"md:ml-2"};var $e=z(he,[["render",function(e,a,l,t,o,s){const i=p("Breadcrumb"),d=p("Button"),n=p("Tooltip"),r=p("Tab"),c=p("Input"),u=p("Checkbox"),m=p("DropdownItem"),f=p("DropdownMenu"),C=p("Dropdown"),L=p("Accordion"),j=p("Draggable"),T=p("Card"),V=p("Modal"),A=p("PreviewEmail"),F=p("WorkflowDashboard"),P=b("loading");return v(),I(S,null,[g("div",null,[g("div",xe,[h(i,{pageTitle:"Workflow",backTo:{name:"setting"},items:e.breadcrumb},null,8,["items"]),"mail-in"===e.route.params.buyback?(v(),y(d,{key:0,color:"teal",class:"lg:mt-0 mt-4 ml-auto",to:{name:"settingWorkflowCreate",params:{buyback:e.route.params.buyback}},link:""},{default:w((()=>a[10]||(a[10]=[g("span",{class:"material-icons"},"add",-1),_(" Add Workflow ")]))),_:1},8,["to"])):O("",!0)]),D((v(),y(T,null,{default:w((()=>[h(r,{modelValue:e.buybackType,"onUpdate:modelValue":a[0]||(a[0]=a=>e.buybackType=a),by:"id",name:"name",color:"teal",class:"new-view-tab",items:e.tab,component:"","disabled-items":""},{title:w((e=>[g("div",ke,[_(k(e.item.name)+" ",1),"easy-offer"===e.item.id?(v(),I("div",De," API ")):O("",!0),e.item.disabled?(v(),y(n,{key:1,placement:"top"},{content:w((()=>[g("div",Ie,[g("p",null," No active "+k("mail-in"===e.item.id?"Mail-In":"In-Store")+" locations, so these settings are disabled. They'll be available once you add one. ",1)])])),default:w((()=>[a[11]||(a[11]=g("i",{class:"material-icons text-teal-04"},"info",-1))])),_:2},1024)):O("",!0)])])),_:1},8,["modelValue","items"]),g("div",Se,[h(c,{modelValue:e.search,"onUpdate:modelValue":a[1]||(a[1]=a=>e.search=a),placeholder:"Search Everything",icon:"",block:"",class:"md:max-w-2xl w-full",onInput:e.handleSearch},{icon:w((()=>a[12]||(a[12]=[g("i",{class:"material-icons text-lg text-grey-03"},"search",-1)]))),_:1},8,["modelValue","onInput"]),"easy-offer"!==e.route.params.buyback?(v(),y(d,{key:0,color:"white",view:"outlined",class:"custom-table-manager__button dropdown dropdown-arrow",onClick:a[2]||(a[2]=a=>e.dataDashboard.modal=!e.dataDashboard.modal)},{default:w((()=>[g("div",Ee,[a[15]||(a[15]=g("i",{class:"material-icons"},"view_module",-1)),g("div",null,[a[13]||(a[13]=_(" Personalize ")),g("span",Ce,k(e.buybackType),1),a[14]||(a[14]=_(" Dashboard "))])])])),_:1})):O("",!0)]),h(j,{list:e.localState,onChange:e.dragHandler,handle:".dragable__icon"},{default:w((()=>[(v(!0),I(S,null,E(e.localState,((l,t)=>{var o;return D((v(),y(L,{key:t,class:x(["accordion-workflow condition__draggable w-full",e.DISABLED_EDIT_WORKFLOW_IDS.includes(l.id)&&"accordion-workflow--disabled"]),"disable-expand":!(null==(o=null==l?void 0:l.child)?void 0:o.length)},{header:w((({isCollapse:o,isHover:s,toggleCollapse:i})=>[h(n,{placement:"top-start",trigger:"click",disabled:!e.DISABLED_EDIT_WORKFLOW_IDS.includes(l.id)},{content:w((()=>[2002===l.id?(v(),I("p",Oe,"This workflow cannot be edited because it is not linked to any email templates and is not sent to customers.")):O("",!0)])),default:w((()=>{var n,r,c;return[g("div",{class:x([e.DISABLED_EDIT_WORKFLOW_IDS.includes(l.id)&&"cursor-not-allowed"])},[g("div",Le,[a[23]||(a[23]=g("div",{class:"w-12"},[g("span",{class:"material-icons text-grey-04 text-2xl mx-3 cursor-move dragable__icon"}," drag_handle ")],-1)),g("div",{class:x({"el-table__expand-icon el-table__expand-icon--expanded":o,"el-table__expand-icon":!o,"opacity-0":!(null==(n=null==l?void 0:l.child)?void 0:n.length)}),onClick:i},a[16]||(a[16]=[g("i",{class:"el-icon-arrow-right"},null,-1)]),10,We),g("div",je,[g("div",Te,[g("div",{class:x([e.DISABLED_EDIT_WORKFLOW_IDS.includes(l.id)&&"opacity-50","flex-1 px-3"])},[g("p",Ve,k(l.status_name),1),g("p",Be,k(l.short_name),1)],2),g("div",{class:x([e.DISABLED_EDIT_WORKFLOW_IDS.includes(l.id)&&"opacity-50","flex-1 mt-2 px-3"])},[g("p",null,k(l.description),1)],2)]),g("div",Ae,[(null==(r=null==l?void 0:l.child)?void 0:r.length)?O("",!0):(v(),y(u,{key:0,modelValue:l.is_send_email,"onUpdate:modelValue":e=>l.is_send_email=e,type:"toggle",value:1,"value-off":0,loading:l.loading,onChange:a=>e.handleChangeSendEmail(l)},{default:w((()=>a[17]||(a[17]=[g("span",{class:"font-medium"},"Send Email",-1)]))),_:2},1032,["modelValue","onUpdate:modelValue","loading","onChange"])),g("div",{class:x(["flex","items-center",(null==(c=null==l?void 0:l.child)?void 0:c.length)?"justify-end flex-1":"justify-between","mx-4",s&&"--hover"])},[e.DISABLED_EDIT_WORKFLOW_IDS.includes(l.id)?O("",!0):(v(),y(C,{key:0,trigger:"click",placement:"bottom-end","hide-on-click":"",class:"mr-3"},{dropdown:w((()=>[h(f,{class:"py-1"},{default:w((()=>[h(m,{class:"text-base",onClick:a=>e.handleToEdit(l.id)},{default:w((()=>a[19]||(a[19]=[g("span",{class:"material-icons mr-2"},"edit",-1),_(" Edit ")]))),_:2},1032,["onClick"]),h(m,{class:"text-base",onClick:a=>e.handlePreviewEmailTemplate(l.id)},{default:w((()=>a[20]||(a[20]=[g("span",{class:"material-icons mr-2"},"visibility",-1),_(" Preview ")]))),_:2},1032,["onClick"]),"mail-in"!==e.route.params.buyback||e.toHideworkflowIds.includes(l.id)?O("",!0):(v(),y(m,{key:0,class:"text-base",onClick:a=>e.openModalSelected("delete",l,t)},{default:w((()=>a[21]||(a[21]=[g("span",{class:"material-icons mr-2"},"delete",-1),_(" Delete ")]))),_:2},1032,["onClick"]))])),_:2},1024)])),default:w((()=>[g("div",{onClick:a[3]||(a[3]=W((()=>{}),["stop"]))},[h(d,{color:"teal",view:"outlined",dense:"",icon:""},{default:w((()=>a[18]||(a[18]=[g("span",{class:"material-icons"},"more_horiz",-1)]))),_:1})])])),_:2},1024)),e.DISABLED_EDIT_WORKFLOW_IDS.includes(l.id)?(v(),y(d,{key:1,color:"teal",class:"mr-3 text-sm",link:"",dense:"",icon:""},{default:w((()=>a[22]||(a[22]=[g("span",{class:"material-icons text-sm"},"lock",-1)]))),_:1})):O("",!0)],2)])])])],2)]})),_:2},1032,["disabled"])])),default:w((()=>{var o;return[(null==(o=null==l?void 0:l.child)?void 0:o.length)>0?(v(),I("div",Fe,[(v(!0),I(S,null,E(l.child,((l,o)=>(v(),y(L,{key:o,"disable-expand":"",class:x(["accordion-workflow",e.DISABLED_EDIT_WORKFLOW_IDS.includes(l.id)&&"accordion-workflow--disabled"])},{header:w((({isHover:o})=>[h(n,{placement:"top-start",trigger:"click",disabled:!e.DISABLED_EDIT_WORKFLOW_IDS.includes(l.id)},{content:w((()=>[1e3===l.id?(v(),I("p",Pe,"This workflow cannot be edited here because the template is in the Notifications settings under Cart Recovery.")):O("",!0),2002===l.id?(v(),I("p",Ue,"This workflow cannot be edited because it is not linked to any email templates and is not sent to customers.")):O("",!0)])),default:w((()=>[g("div",{class:x([e.DISABLED_EDIT_WORKFLOW_IDS.includes(l.id)&&"cursor-not-allowed"])},[g("div",Re,[g("div",Ke,[g("div",{class:x([e.DISABLED_EDIT_WORKFLOW_IDS.includes(l.id)&&"opacity-50","flex-1"])},[g("p",Me,k(l.status_name),1),g("p",He,k(l.short_name),1)],2),g("div",{class:x([e.DISABLED_EDIT_WORKFLOW_IDS.includes(l.id)&&"opacity-50","flex-1"])},[g("p",null,k(l.description),1)],2)]),g("div",ze,[g("div",Ne,[h(u,{modelValue:l.is_send_email,"onUpdate:modelValue":e=>l.is_send_email=e,type:"toggle",value:1,"value-off":0,loading:l.loading,onChange:a=>e.handleChangeSendEmail(l)},{default:w((()=>a[24]||(a[24]=[g("span",{class:"font-medium"},"Send Email",-1)]))),_:2},1032,["modelValue","onUpdate:modelValue","loading","onChange"])]),g("div",{class:x(["flex","items-center","justify-start","mx-4",o&&"--hover"])},[e.DISABLED_EDIT_WORKFLOW_IDS.includes(l.id)?O("",!0):(v(),y(C,{key:0,trigger:"click",placement:"bottom-end","hide-on-click":"",class:"mr-3"},{dropdown:w((()=>[h(f,{class:"py-1"},{default:w((()=>[h(m,{class:"text-base",onClick:a=>e.handleToEdit(l.id)},{default:w((()=>a[26]||(a[26]=[g("span",{class:"material-icons mr-2"},"edit",-1),_(" Edit ")]))),_:2},1032,["onClick"]),h(m,{class:"text-base",onClick:a=>e.handlePreviewEmailTemplate(l.id)},{default:w((()=>a[27]||(a[27]=[g("span",{class:"material-icons mr-2"},"visibility",-1),_(" Preview ")]))),_:2},1032,["onClick"]),"mail-in"!==e.route.params.buyback||e.toHideworkflowIds.includes(l.id)?O("",!0):(v(),y(m,{key:0,class:"text-base",onClick:a=>e.openModalSelected("delete",l,t)},{default:w((()=>a[28]||(a[28]=[g("span",{class:"material-icons mr-2"},"delete",-1),_(" Delete ")]))),_:2},1032,["onClick"]))])),_:2},1024)])),default:w((()=>[g("div",{onClick:a[4]||(a[4]=W((()=>{}),["stop"]))},[h(d,{color:"teal",view:"outlined",dense:"",icon:""},{default:w((()=>a[25]||(a[25]=[g("span",{class:"material-icons"},"more_horiz",-1)]))),_:1})])])),_:2},1024)),e.DISABLED_EDIT_WORKFLOW_IDS.includes(l.id)?(v(),y(d,{key:1,color:"teal",class:"mr-3 text-sm",link:"",dense:"",icon:""},{default:w((()=>a[29]||(a[29]=[g("span",{class:"material-icons text-sm"},"lock",-1)]))),_:1})):O("",!0)],2)])])],2)])),_:2},1032,["disabled"])])),_:2},1032,["class"])))),128))])):O("",!0)]})),_:2},1032,["class","disable-expand"])),[[B,!e.search||l.short_name.toLowerCase().includes(e.search.toLowerCase())||l.status_name.toLowerCase().includes(e.search.toLowerCase())]])})),128))])),_:1},8,["list","onChange"])])),_:1})),[[P,e.loading.all]]),h(V,{modelValue:e.modal.delete,"onUpdate:modelValue":a[6]||(a[6]=a=>e.modal.delete=a),title:"Delete Workflow",onClose:e.unsetData},{footer:w((()=>[h(d,{color:"red",loading:e.loading.delete,onClick:a[5]||(a[5]=a=>e.actionDelete(e.route.params.buyback))},{default:w((()=>a[30]||(a[30]=[_(" Delete Workflow ")]))),_:1},8,["loading"])])),default:w((()=>[a[31]||(a[31]=g("p",null,"Are you sure want to delete this workflow?",-1))])),_:1},8,["modelValue","onClose"])]),h(A,{show:e.isPreview,"onUpdate:show":a[7]||(a[7]=a=>e.isPreview=a),body:e.previewedTemplate},null,8,["show","body"]),h(F,{modelValue:e.dataDashboard.modal,"onUpdate:modelValue":a[8]||(a[8]=a=>e.dataDashboard.modal=a),form:e.dataDashboard.form,"onUpdate:form":a[9]||(a[9]=a=>e.dataDashboard.form=a),flows:e.localState,buyback:e.currentBuybackType},null,8,["modelValue","form","flows","buyback"])],64)}],["__scopeId","data-v-9d49fc1e"]]),Je=c({setup(){const{genSuspense:e}=r();return()=>e($e)}});export{Je as default};
