import{k as a,a5 as t,y as e,z as s,m as o,$ as l,o as d,t as i,A as r,n as m,w as c,B as n,D as p,I as u,a1 as b,a2 as f,K as j}from"./vendor.9695fe57.js";import{c as y,d as _,f as g}from"./buyback.0f2f20b2.js";import{_ as S}from"./badge.809b6147.js";import{_ as k,b as v,d as I,g as h}from"./index.73ae30fa.js";import{C as w}from"./card.0f43ecfb.js";import{_ as B,a as C}from"./timeline-item.3d9f7f4e.js";import{_ as x}from"./tab.74a5b4bb.js";import{S as T}from"./index.6c1b04bd.js";import{c as D}from"./status.6f59bf91.js";import"./date.f86face7.js";import"./components.4d38f2db.js";import"./LoadingCard.d1cef10f.js";import"./notes.6c148e05.js";import"./index.f40e4a9e.js";import"./index.6b6f6369.js";import"./ItemTable.d17ab6ea.js";import"./dymo.843c8f66.js";import"./Form.77843c53.js";import"./device.cc6073a7.js";import"./select.a72384b0.js";import"./auto-complete.d8f9b5eb.js";import"./Currency.2f332742.js";import"./Accordion.55b8abe4.js";import"./BBTable.2c4b31b0.js";import"./DeviceSearch.02c0c24e.js";import"./BDropdown.85a0a8cb.js";import"./DeviceGolfSpec.3a741466.js";import"./BSelect.a6409611.js";import"./fieldset.1864b72f.js";import"./PrintLabel.7d603e7a.js";import"./BuybackNotesWarning.ab08dc78.js";import"./changelog.c96fc65d.js";import"./Breadcrumb.8a4b1e47.js";import"./breadcrumb.fd540912.js";const U=a({components:{Badge:S,Button:v,Card:w,Modal:I,Timeline:B,TimelineItem:C,Tab:x,StatusesForm:T},async setup(){const{data:a,modal:o,state:l,loading:d,openModal:i,unsetData:r,actionAll:m,actionUpdate:c}=y("local"),{state:n,action:p}=_("local"),{state:u,action:b}=g("local"),f=t(),j=e((()=>f.params.buybackId),h((async(a,t)=>{a&&t&&await Promise.all([m(f.params.buybackId),b(f.params.buybackId)])})));s((()=>j())),await Promise.all([m(f.params.buybackId),b(f.params.buybackId),p(f.params.buybackId)]);return{data:a,state:l,stateStatuses:u,stateShow:n,modal:o,loading:d,openModalEdit:t=>i(t,(()=>{a.status_id=n.value.status_id})),unsetData:r,updateStatus:async()=>{await c(f.params.buybackId,(async()=>{await p(f.params.buybackId)}))},color:D}}}),V={class:"block mt-4"},M={class:"flex justify-between items-center"},A={class:"grid grid-cols-5 gap-6"},F={class:"col-span-2 border-r border-grey-01"},P={class:"col-span-3"};var z=k(U,[["render",function(a,t,e,s,y,_){const g=o("Badge"),S=o("TimelineItem"),k=o("Timeline"),v=o("Button"),I=o("Card"),h=o("Tab"),w=o("StatusesForm"),B=o("Modal"),C=l("loading");return d(),i(b,null,[r((d(),m(I,{class:"my-6"},{header:c((()=>{var e;return[n("div",M,[t[4]||(t[4]=n("h6",null,"Status",-1)),p(v,{disabled:null!=(null==(e=a.stateShow)?void 0:e.deleted_at),color:"teal",onClick:t[0]||(t[0]=t=>a.openModalEdit("update")),dense:""},{default:c((()=>t[3]||(t[3]=[n("i",{class:"material-icons text-base"},"edit",-1),u(" Update Status")]))),_:1},8,["disabled"])])]})),default:c((()=>[p(k,null,{default:c((()=>[(d(!0),i(b,null,f(a.state,((t,e)=>(d(),m(S,{view:"filled",color:a.color(t.short_name),key:e},{datetime:c((()=>[u(j(t.created_at),1)])),content:c((()=>[p(g,{color:a.color(t.short_name)},{default:c((()=>[u(j(t.status_name),1)])),_:2},1032,["color"]),n("small",V,j(t.notes),1)])),_:2},1032,["color"])))),128))])),_:1})])),_:1})),[[C,a.loading.all]]),p(B,{modelValue:a.modal.update,"onUpdate:modelValue":t[2]||(t[2]=t=>a.modal.update=t),title:"Update Status",onClose:a.unsetData,size:"lg"},{default:c((()=>[n("div",A,[n("div",F,[t[5]||(t[5]=n("div",{class:"px-4"},[n("p",{class:"text-md font-semibold"},"Choose Status")],-1)),p(h,{color:"teal",view:"smooth",modelValue:a.data.status_id,"onUpdate:modelValue":t[1]||(t[1]=t=>a.data.status_id=t),by:"id",name:"short_name",items:a.stateStatuses,component:"",type:"vertical"},null,8,["modelValue","items"])]),n("div",P,[p(w,{data:a.data},null,8,["data"])])])])),footer:c((()=>[p(v,{color:"teal",loading:a.loading.update,onClick:a.updateStatus},{default:c((()=>t[6]||(t[6]=[u("Update Status")]))),_:1},8,["loading","onClick"])])),_:1},8,["modelValue","onClose"])],64)}]]);export{z as default};
