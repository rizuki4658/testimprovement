import{k as e,a5 as a,O as i,f as t,aJ as n,m as o,o as s,n as l,w as r,B as d,U as u,t as c,I as p,D as g,T as m,aI as f,ar as h,a6 as C,_ as v}from"./vendor.9695fe57.js";import{b as y,c as S,d as b,a as x}from"./easypost.07780d77.js";import{_,d as k,b as E,B as K}from"./index.73ae30fa.js";import{_ as j}from"./tab.74a5b4bb.js";import{S as w}from"./ShippingKitForm.d73f2b8b.js";import"./index.54844a74.js";import"./index.6b6f6369.js";import"./index.f40e4a9e.js";import"./TextEditor.5cfed8cc.js";const F=e({name:"Easypost",components:{Modal:k,Button:E,Tab:j,ShippingKitForm:w,BaseLoading:K},async setup(){const e=a(),o=i(),{loading:s,updateCarrier:l,resetSelectedCarrier:r,selectedCarrier:d}=y(),{loading:u,updateShippingKit:c}=S(),{loading:p}=b(),{loading:g,status:m}=x(),f=t(null),h=n((()=>e.matched.length>0&&void 0===e.matched.find((e=>"integrationEasypostConfig"===e.name)))),C=n((()=>!h.value)),_=n((()=>"integrationEasypostConfigShippingKit"===e.name)),k=n((()=>null===d.value.carrier_uuid));return{route:e,refComponent:f,loading:s,loadingShippingKit:u,loadingConfig:p,isHideFooter:h,isShowEditCredential:C,isNotSelectedCarrier:k,loadingStatus:g,status:m,handleCloseForm:()=>{o.push({name:"integration",query:{reload:1}})},handleSave:async()=>{var e,a,i,t;if(_.value){if(!(await(null==(t=null==(i=null==(a=null==(e=f.value)?void 0:e.componentElement)?void 0:a.shippingKitFormElement)?void 0:i.validate)?void 0:t.call(i))))return}let n={carrier:!1,shippingKit:!1};await Promise.all([l((e=>n.carrier=e)),c((e=>n.shippingKit=e))]),n.carrier||n.shippingKit?r():(v({type:"success",message:"Changes saved"}),o.push({name:"integration",query:{reload:1}}))},handleEditCredential:()=>{o.push({name:"integrationEasypostConnect"})}}}}),M={class:"flex justify-between"},B={key:0,class:"flex items-center bg-orange-lighten text-orange-04 p-4 rounded-lg w-full mx-auto my-4"},P={class:"w-full flex items-center justify-center"},I={class:"w-max ml-auto"};var L=_(F,[["render",function(e,a,i,t,n,v){const y=o("Button"),S=o("router-link"),b=o("BaseLoading"),x=o("RouterView"),_=o("Tooltip"),k=o("Modal");return s(),l(k,{size:"md",modelValue:!0,"hide-footer":e.isHideFooter,onClickClose:e.handleCloseForm,"without-transition":""},{header:r((()=>[d("div",M,[a[1]||(a[1]=d("span",null,"Easypost Settings",-1)),e.isShowEditCredential?(s(),l(y,{key:0,onClick:e.handleEditCredential,color:"teal",dense:""},{default:r((()=>a[0]||(a[0]=[d("div",{class:"flex flex-auto items-center"},[d("i",{class:"material-icons icon-xxs"},"edit"),d("span",{class:"ml-1"}," Edit API Key")],-1)]))),_:1},8,["onClick"])):u("",!0)])])),default:r((()=>[0==e.status.is_ready?(s(),c("div",B,[a[5]||(a[5]=d("i",{class:"material-icons mr-4 self-start"},"info",-1)),d("span",null,[a[3]||(a[3]=p("We couldn’t connect your integration because you either don’t have an active Mail-in location or your Mail-in location is missing required details like a phone number. Please check your Mail-in settings under Location Settings to fix this and try again. ")),g(S,{class:"font-semibold text-orange-04",to:{name:"settingManageLocation"}},{default:r((()=>a[2]||(a[2]=[p(" Mail-In Settings ")]))),_:1}),a[4]||(a[4]=p(" ."))])])):u("",!0),g(x,null,{default:r((({Component:e,route:a})=>[e?(s(),l(m,{name:"slide-fade",key:a.matched[a.matched.length-2].name},{default:r((()=>[(s(),l(f,null,[(s(),l(h,null,{default:r((()=>[(s(),l(C(e),{ref:"refComponent"},null,512))])),fallback:r((()=>[d("div",P,[g(b)])])),_:2},1024))],1024))])),_:2},1024)):u("",!0)])),_:1})])),footer:r((()=>[g(_,{placement:"top",content:"Please choose a shipping courier first",disabled:!e.isNotSelectedCarrier},{default:r((()=>[d("div",I,[g(y,{onClick:e.handleSave,color:"teal",disabled:e.loading.shippingProvider.fetchAll||e.loading.shippingKit.fetch||e.loadingConfig.integrationChecks||0==e.status.is_ready||e.isNotSelectedCarrier,loading:e.loading.shippingProvider.updateCarrier||e.loadingShippingKit.update||e.loadingStatus},{default:r((()=>a[6]||(a[6]=[p("Save")]))),_:1},8,["onClick","disabled","loading"])])])),_:1},8,["disabled"])])),_:1},8,["hide-footer","onClickClose"])}],["__scopeId","data-v-5a37718f"]]);export{L as default};
