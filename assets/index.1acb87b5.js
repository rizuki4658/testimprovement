import{u as e}from"./components.4d38f2db.js";import{b as a,f as l,_ as i,d as s,ae as n,af as t,ab as r}from"./index.73ae30fa.js";import{C as d}from"./card.0f43ecfb.js";import{C as o}from"./Form.cc5fb681.js";import{B as p}from"./Breadcrumb.8a4b1e47.js";import{_ as u}from"./fieldset.1864b72f.js";import{_ as c}from"./breadcrumb.fd540912.js";import{I as m}from"./InputPhone.a467eb84.js";import{u as g}from"./index.f40e4a9e.js";import{v as b,r as h,e as v}from"./index.54844a74.js";import{c as _,d as f}from"./index.6b6f6369.js";import{S}from"./select.a72384b0.js";import{S as x}from"./ShippingCarrier.bb7a6406.js";import{k as y,f as C,r as k,y as V,m as w,$ as j,o as $,t as L,D as I,w as A,B as F,a1 as B,a2 as U,K as P,A as M,n as q,O,g as z,I as D,x as E}from"./vendor.9695fe57.js";import{_ as N}from"./success.3f91e874.js";import"./LoadingCard.d1cef10f.js";import"./SelectCountry.db8fda5d.js";import"./setting.70ebc1f0.js";const T=y({components:{Button:a,Card:d,CustomerForm:o,Breadcrumb:c,Input:l,Fieldset:u,InputPhone:m,Select:S,ShippingCarrier:x},props:{data:{type:Object,default:()=>({box_id:null,shipping_address1:null,shipping_city:null,shipping_firstname:null,shipping_lastname:null,shipping_phone:null,shipping_state:null,shipping_suite:"",shipping_zip:null,shipping_country:null,shipping_address_text:null,type:null,advance_label:null,customer_email:null})},carriers:{type:Array,default:()=>[]},advanceShippingLabels:{type:Array,default:()=>[]},selectedCarrier:{type:String,default:""}},emits:["update:data","select-carrier"],setup(e,{emit:a}){const l=C(e.carriers),i=C(e.selectedCarrier),s=C(null),n=C(e.advanceShippingLabels),t=k(e.data),r=C(null);Object.assign(t,{valid:!1});const d={valid:{sameAs:b},box_id:{required:h},shipping_firstname:{required:h},shipping_lastname:{required:h},shipping_phone:{required:h,invalidNumber:_.withMessage("Phone number is invalid",(()=>{var e;return!t.shipping_phone||(null==(e=r.value)?void 0:e.isValid)}))},advance_label:{required:f((()=>"usps"==i.value))},customer_email:{required:_.withMessage("Email address is required",h),email:_.withMessage("Invalid email address",v)}},o=g(d,t,{$lazy:!0});V((()=>({data:t,selectedCarrier:i,advance_label:e.data.advance_label})),(()=>{a("update:data",Object.assign(t,{type:"usps"!=i.value?i.value:e.data.advance_label}))}),{deep:!0,immediate:!0});return{refShippingPhone:r,carriers:l,selectedCarrier:i,address:{valid:"valid",country:"shipping_country",route:"shipping_address1",locality:"shipping_city",administrative_area_level_1:"shipping_state",formatted_address:"shipping_address_text",postal_code:"shipping_zip",disallowCustomAddress:!0,subpremise:"shipping_suite"},validation:o,validate:()=>(o.value.$validate(),!o.value.$invalid),advanceShippingLabels:n,selectedAdvanceShippingLabel:s,selectAdvanceShippingLabel:a=>{s.value=a,e.data.advance_label=a.value},handleSelectCarrier:(e=null)=>{e&&(i.value=e)}}}}),G={class:"p-4"},K={class:"grid grid-cols-2 p-4"},H={class:"col-span-1 grid grid-cols-2 gap-6"},J={class:"col-span-2"},Q={class:"col-span-2"},R={class:"col-span-2"};const W=y({components:{Button:a,Card:d,CustomerForm:o,Breadcrumb:p,Input:l,Fieldset:u,Form:i(T,[["render",function(e,a,l,i,s,n){const t=w("ShippingCarrier"),r=w("Fieldset"),d=w("Input"),o=w("InputPhone"),p=j("gmap");return $(),L(B,null,[I(r,{class:"mb-6"},{label:A((()=>a[7]||(a[7]=[F("span",{class:"text-grey-03"},"Shipping Label",-1)]))),default:A((()=>[F("div",null,[I(t,{carriers:e.carriers,selected:e.selectedCarrier,onSelect:e.handleSelectCarrier},null,8,["carriers","selected","onSelect"])])])),_:1}),I(r,{class:"mb-6"},{label:A((()=>a[8]||(a[8]=[F("span",{class:"text-grey-03"},"Buyback Details",-1)]))),default:A((()=>[F("div",G,[I(d,{modelValue:e.data.box_id,"onUpdate:modelValue":a[0]||(a[0]=a=>e.data.box_id=a),label:"Buyback ID",view:e.validation.box_id.$invalid?"danger":"default"},null,8,["modelValue","view"]),($(!0),L(B,null,U(e.validation.box_id.$errors,((e,a)=>($(),L("small",{class:"text-red-base block",key:a},P(e.$message)+". ",1)))),128))])])),_:1}),I(r,null,{label:A((()=>a[9]||(a[9]=[F("span",{class:"text-grey-03"},"Contact Information",-1)]))),default:A((()=>[F("div",K,[F("div",H,[F("div",null,[I(d,{modelValue:e.data.shipping_firstname,"onUpdate:modelValue":a[1]||(a[1]=a=>e.data.shipping_firstname=a),label:"First Name",block:"",view:e.validation.shipping_firstname.$invalid?"danger":"default"},null,8,["modelValue","view"]),($(!0),L(B,null,U(e.validation.shipping_firstname.$errors,((e,a)=>($(),L("small",{class:"text-red-base block",key:a},P(e.$message)+". ",1)))),128))]),F("div",null,[I(d,{modelValue:e.data.shipping_lastname,"onUpdate:modelValue":a[2]||(a[2]=a=>e.data.shipping_lastname=a),label:"Last Name",block:"",view:e.validation.shipping_lastname.$invalid?"danger":"default"},null,8,["modelValue","view"]),($(!0),L(B,null,U(e.validation.shipping_lastname.$errors,((e,a)=>($(),L("small",{class:"text-red-base block",key:a},P(e.$message)+". ",1)))),128))]),F("div",J,[I(d,{modelValue:e.data.customer_email,"onUpdate:modelValue":a[3]||(a[3]=a=>e.data.customer_email=a),label:"Email Address",block:"",view:e.validation.customer_email.$invalid?"danger":"default"},null,8,["modelValue","view"]),($(!0),L(B,null,U(e.validation.customer_email.$errors,((e,a)=>($(),L("small",{class:"text-red-base block",key:a},P(e.$message)+". ",1)))),128))]),F("div",Q,[M(($(),q(d,{modelValue:e.data.shipping_address_text,"onUpdate:modelValue":a[4]||(a[4]=a=>e.data.shipping_address_text=a),label:"Street Address",block:"",icon:"","icon-block":"",view:e.validation.valid.$invalid?"danger":"default"},{icon:A((()=>a[10]||(a[10]=[F("i",{class:"material-icons text-lg"},"location_on",-1)]))),_:1},8,["modelValue","view"])),[[p,e.address]]),($(!0),L(B,null,U(e.validation.valid.$errors,((e,a)=>($(),L("small",{class:"text-red-base block",key:a},P(e.$message)+". ",1)))),128)),a[11]||(a[11]=F("small",null,"Street address, P.O box, company name, c/o.",-1))]),F("div",R,[I(d,{modelValue:e.data.shipping_suite,"onUpdate:modelValue":a[5]||(a[5]=a=>e.data.shipping_suite=a),block:""},null,8,["modelValue"]),a[12]||(a[12]=F("small",null,"Apartment, suite, building, floor, etc.",-1))]),F("div",null,[I(o,{ref:"refShippingPhone",modelValue:e.data.shipping_phone,"onUpdate:modelValue":a[6]||(a[6]=a=>e.data.shipping_phone=a),label:"Phone",block:"","country-autofill-setting":""},null,8,["modelValue"]),($(!0),L(B,null,U(e.validation.shipping_phone.$errors,((e,a)=>($(),L("small",{class:"text-red-base block",key:a},P(e.$message)+". ",1)))),128))])])])])),_:1})],64)}],["__scopeId","data-v-a2cde054"]]),Modal:s},async setup(){const{data:e,action:a,loading:l}=n(),{state:i,stateAdvanceShippingLabel:s,action:d}=t(),{shippingCarriers:o,selectedCarrier:p}=r(),u=C(null),c=C(!1),m=O();await d();if(0===i.value.length)return m.push({name:"shipping"});const g=[{id:"usps",name:"USPS",icon:"/icon/shipping/usps.svg"},{id:"fedex",name:"FedEx",icon:"/icon/shipping/fedex.svg"},{id:"ups",name:"UPS",icon:"/icon/shipping/ups.svg"}],b=z((()=>s.value)),h=z((()=>g.filter((e=>i.value.map((e=>e.toLowerCase())).includes(e.id))))),v=C(g[0].id);return{data:e,loading:l,refForm:u,availableCouriers:g,couriers:h,breadcrumb:[{text:"Shipping",to:{name:"layoutShipping"}},{text:"Add Shipping Label"}],selectedCourier:v,isShowModal:c,generateShippingLabel:async()=>{u.value.validate()&&await a((()=>{c.value=!0}))},advanceShippingLabels:b,shippingCarriers:o,selectedCarrier:p}}}),X={class:"text-center py-10"};var Y=i(W,[["render",function(e,a,l,i,s,n){const t=w("Button"),r=w("Breadcrumb"),d=w("Form"),o=w("Card"),p=w("Modal");return $(),L(B,null,[F("div",null,[I(r,{class:"mb-8 mt-2",pageTitle:"Add Shipping",backTo:{name:"layoutShipping"},items:e.breadcrumb},{right:A((()=>[I(t,{color:"teal",onClick:e.generateShippingLabel,loading:e.loading},{default:A((()=>a[2]||(a[2]=[D("Generate Shipping Label")]))),_:1},8,["onClick","loading"])])),_:1},8,["items"]),I(o,null,{default:A((()=>[I(d,{ref:"refForm",data:e.data,"onUpdate:data":a[0]||(a[0]=a=>e.data=a),carriers:e.shippingCarriers,advanceShippingLabels:e.advanceShippingLabels,"selected-carrier":e.selectedCarrier},null,8,["data","carriers","advanceShippingLabels","selected-carrier"])])),_:1})]),I(p,{size:"xs",modelValue:e.isShowModal,"onUpdate:modelValue":a[1]||(a[1]=a=>e.isShowModal=a),"hide-header":"","hide-footer":""},{default:A((()=>[F("div",X,[a[4]||(a[4]=F("img",{class:"mb-10 mx-auto",src:N,alt:"Success Icon"},null,-1)),a[5]||(a[5]=F("div",{class:"mt-8 mb-10"},[F("h5",{class:"mb-4"},"Success!"),F("p",null,"The new shipping label has been added.")],-1)),I(t,{view:"smooth",color:"teal",class:"mr-3",link:"",to:{name:"shipping"}},{default:A((()=>a[3]||(a[3]=[D("Continue")]))),_:1})])])),_:1},8,["modelValue"])],64)}],["__scopeId","data-v-795f70b6"]]),Z=y({setup(){const{genSuspense:a}=e();return()=>[E("div",{},[a(Y)])]}});export{Z as default};
