var e=Object.defineProperty,l=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,o=(l,a,t)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[a]=t,r=(e,r)=>{for(var n in r||(r={}))a.call(r,n)&&o(e,n,r[n]);if(l)for(var n of l(r))t.call(r,n)&&o(e,n,r[n]);return e};import{e as n,_ as s,r as d}from"./index.67cab78b.js";import{k as c,f as u,r as i,y as h,m as b,o as f,t as y,D as p,U as v,a1 as k,a2 as g,F as m,I as A,K as V,B as C,Q as B,q as S,g as w,W as x,w as _,n as T}from"./vendor.9695fe57.js";const F=c({components:{Checkbox:n},props:{selectable:{type:Boolean,default:!1},header:{type:Array,default:()=>[]},value:{type:Array,default:()=>[]},total:{type:Number,default:0},checkAll:{type:Boolean,deafult:!1},disabled:{type:Boolean,default:!1}},setup(e,{emit:l}){const a=u(e.checkAll),t=u(!e.checkAll),o=i({asc:!1,desc:!1});h((()=>r({},e.value)),(()=>{t.value=!0,a.value=!0,e.value.length==e.total&&(t.value=!1),0==e.value.length&&(a.value=!1)}));return{checkAll:a,isIndeterminate:t,handleCheckAll:()=>{l("check-all",a.value)},sortable:o,handleSortAsc:e=>{o.asc=!o.asc,o.desc=!1,l("sortTHead",{sortby:e,sortType:o.asc?"asc":""})},handleSortDesc:e=>{o.desc=!o.desc,o.asc=!1,l("sortTHead",{sortby:e,sortType:o.desc?"desc":""})},handleSortActive:(e,l,a)=>e.sortActive.sort_by==l&&e.sortActive.order_by==a}}}),$={class:"bb-table-row"},K={key:0,class:"bb-table-header"},O={key:0,class:"caret-wrapper"},j=["onClick"],H=["onClick"];var E=s(F,[["render",function(e,l,a,t,o,r){const n=b("Checkbox");return f(),y("tr",$,[e.selectable?(f(),y("td",K,[p(n,{color:"teal",indeterminate:e.isIndeterminate,modelValue:e.checkAll,"onUpdate:modelValue":l[0]||(l[0]=l=>e.checkAll=l),onChange:e.handleCheckAll,value:"1","value-off":"0",disabled:e.disabled},null,8,["indeterminate","modelValue","onChange","disabled"])])):v("",!0),(f(!0),y(k,null,g(e.header,(l=>(f(),y("td",{class:m(["bb-table-header el-table",`text-${l.align?l.align:"left"}`]),key:l},[A(V(l.label?l.label:l)+" ",1),(null==l?void 0:l.sortable)?(f(),y("span",O,[C("i",{class:"sort-caret ascending",style:B(e.handleSortActive(l,null==l?void 0:l.sortby,"asc")?"border-bottom-color: #409EFF;":""),onClick:a=>e.handleSortAsc(null==l?void 0:l.sortby)},null,12,j),C("i",{class:"sort-caret descending",style:B(e.handleSortActive(l,null==l?void 0:l.sortby,"desc")?"border-top-color: #409EFF;":""),onClick:a=>e.handleSortDesc(null==l?void 0:l.sortby)},null,12,H)])):v("",!0)],2)))),128))])}],["__scopeId","data-v-c8380c86"]]);const I=c({setup(){}}),P={class:"bb-table-row"};var U=s(I,[["render",function(e,l,a,t,o,r){return f(),y("tr",P,[S(e.$slots,"default")])}]]);const D=c({props:{selectable:{type:Boolean,default:!1},header:{type:Array,default:()=>[]},total:{type:Number,default:0},footer:{type:Array,default:()=>[]},footerKey:{type:String,default:"key"},footerValue:{type:String,default:"value"},footerAlign:{type:String,default:"left"},headerKey:{type:String,default:"key"}},setup(e){const l=w((()=>{const l=e.header,a=e.footer,t=e.footerKey,o=e.footerValue,r=e.headerKey;return l.map((e=>{const l=a.find((l=>l.hasOwnProperty(t)&&l.hasOwnProperty(o)&&l[t]===e[r]));return l||null}))})),a=w((()=>l.value.filter((e=>null!==e)).length>0)),t=w((()=>["left","right","center"].includes(e.footerAlign)&&`--align-${e.footerAlign}`||"--align-left"));return{footerValues:l,footerAlignment:t,hasFooterValues:a}}}),N={class:"bb-table-row"},q={key:0,class:"bb-table-footer"};const Q=c({components:{BBTHead:E,BBTBody:U,BBTFooter:s(D,[["render",function(e,l,a,t,o,r){return f(),y("tr",N,[e.selectable?(f(),y("td",q)):v("",!0),e.hasFooterValues?(f(!0),y(k,{key:2},g(e.footerValues,(l=>(f(),y("td",{class:m(["bb-table-footer",e.footerAlignment,"bottom"===(null==l?void 0:l.verticalAlign)&&"--vertical-bottom"]),key:l},[S(e.$slots,"default",{footer:l},(()=>[A(V(l&&l[e.footerValue]),1)]))],2)))),128)):(f(!0),y(k,{key:1},g(e.header,(l=>(f(),y("thead",{key:l,class:"bb-table-footer"},[S(e.$slots,"default",{key:l})])))),128))])}]]),Checkbox:n},props:{loading:{type:Boolean,default:!1},selectable:{type:Boolean,default:!1},header:{type:Array,default:()=>[]},body:{type:Array,default:()=>[]},items:{type:Array,default:()=>[]},children:{type:String,default:""},checkboxValue:{type:String,default:"id"},checkAll:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},collapseAll:{type:Boolean,default:!1},showFooter:{type:Boolean,default:!1},footer:{type:Array,default:()=>[]},footerKey:{type:String,default:"key"},footerValue:{type:String,default:"value"},headerKey:{type:String,default:"value"},footerAlign:{type:String,default:"left"},disableExpand:{type:Boolean,default:!1}},emits:["selection-change","sort"],setup(e,{emit:l}){const a=u([]),t=u([]),o=u([]),n=u(0),s=u(e.checkAll);e.items.map((l=>{a.value.push(!1),e.children&&l[e.children].length>0?l.child.map((e=>{t.value.push(e.id)})):t.value.push(l.id)})),n.value=t.value.length;const c=e=>{o.value=[],e&&(o.value=t.value),i()},i=()=>{const a=(()=>{const l=d(o.value);return e.items.map((l=>e.children&&l[e.children].length>0?l.child.map((e=>e)):l)).flat().filter((e=>l.find((l=>l==e.id))))})();l("selection-change",a)};return h((()=>e.checkAll),(()=>{e.checkAll&&c(!0)}),{immediate:!0}),x((()=>{e.collapseAll&&(a.value=a.value.map((e=>!0)))})),h((()=>r({},e.items)),(()=>{t.value=[],e.items.map((l=>{a.value.push(!1),e.children&&l[e.children].length>0?l.child.map((e=>{t.value.push(e.id)})):t.value.push(l.id)})),o.value=t.value.filter((e=>o.value.includes(e))),n.value=t.value.length})),{action:a,isCheckAll:s,checkValue:o,checkAll:c,valueChange:()=>{i()},total:n,handleSort:e=>{l("sort",e)}}}}),W={class:"w-full overflow-x-auto"},z={class:"bb-table"},G={key:0,class:"bb-table-column"},J={key:1,class:"bb-table-column"},L={key:2,class:"bb-table-column"},M={key:0,class:"bb-table-column"};var R=s(Q,[["render",function(e,l,a,t,o,r){const n=b("BBTHead"),s=b("Checkbox"),d=b("BBTBody"),c=b("BBTFooter");return f(),y("div",W,[C("table",z,[p(n,{selectable:e.selectable,value:e.checkValue,total:e.total,header:e.header,onCheckAll:e.checkAll,"check-all":e.isCheckAll,onSortTHead:e.handleSort,disabled:e.disabled},null,8,["selectable","value","total","header","onCheckAll","check-all","onSortTHead","disabled"]),(f(!0),y(k,null,g(e.items,((a,t)=>(f(),y(k,{key:a},[p(d,{class:m(["group",{"cursor-pointer":e.children&&a[e.children].length>0}]),onClick:l=>e.action[t]=e.disableExpand?e.action[t]:!e.action[t]},{default:_((()=>[e.selectable&&!e.children?(f(),y("td",G,[p(s,{modelValue:e.checkValue,"onUpdate:modelValue":l[0]||(l[0]=l=>e.checkValue=l),color:"teal",value:a.id,"value-off":"0",disabled:e.disabled,onChange:e.valueChange},null,8,["modelValue","value","disabled","onChange"])])):v("",!0),e.selectable&&e.children&&0==a[e.children].length?(f(),y("td",J,[p(s,{modelValue:e.checkValue,"onUpdate:modelValue":l[1]||(l[1]=l=>e.checkValue=l),color:"teal",value:a.id,"value-off":"0",disabled:e.disabled,onChange:e.valueChange},null,8,["modelValue","value","disabled","onChange"])])):v("",!0),e.children&&a[e.children].length>0?(f(),y("td",L,[C("div",{class:m({"el-table__expand-icon el-table__expand-icon--expanded":e.action[t],"el-table__expand-icon":!e.action[t]})},l[3]||(l[3]=[C("i",{class:"el-icon-arrow-right"},null,-1)]),2)])):v("",!0),S(e.$slots,"item",{item:a,collapsed:e.children?a[e.children].length>0&&e.action[t]:e.action[t]})])),_:2},1032,["class","onClick"]),e.children?(f(!0),y(k,{key:0},g(a[e.children],(a=>(f(),T(d,{key:a,class:"group",style:B({display:e.action[t]?"table-row":"none"})},{default:_((()=>[e.selectable?(f(),y("td",M,[p(s,{modelValue:e.checkValue,"onUpdate:modelValue":l[2]||(l[2]=l=>e.checkValue=l),color:"teal",value:a.id,"value-off":"0",disabled:e.disabled,onChange:e.valueChange},null,8,["modelValue","value","disabled","onChange"])])):v("",!0),S(e.$slots,"child",{child:a})])),_:2},1032,["style"])))),128)):v("",!0)],64)))),128)),e.$slots["footer-prepend"]?S(e.$slots,"footer-prepend",{key:0}):v("",!0),e.showFooter&&e.header.length?(f(),T(c,{key:1,selectable:e.selectable,header:e.header,"header-key":e.headerKey,footer:e.footer,"footer-key":e.footerKey,"footer-value":e.footerValue,"footer-align":e.footerAlign},{default:_((l=>[S(e.$slots,"footer",{column:l})])),_:3},8,["selectable","header","header-key","footer","footer-key","footer-value","footer-align"])):v("",!0)])])}]]);export{R as B};
