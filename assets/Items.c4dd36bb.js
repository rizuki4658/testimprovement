var e=Object.defineProperty,t=Object.defineProperties,o=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,i=(t,o,l)=>o in t?e(t,o,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[o]=l,d=(e,t)=>{for(var o in t||(t={}))a.call(t,o)&&i(e,o,t[o]);if(l)for(var o of l(t))n.call(t,o)&&i(e,o,t[o]);return e},s=(e,l)=>t(e,o(l));import{k as c,r,y as u,m,o as p,t as b,B as v,D as y,a5 as C,g,I as f,K as h,U as _,a2 as k,a3 as w,w as I,F as x,n as V,f as S,W as B,a4 as D,aU as U,a6 as O,a0 as j,A,ar as P,_ as T}from"./vendor.f1efedad.js";import{_ as M,f as N,b as E,d as F,e as R,j as $,T as L,u as K,r as q,g as J}from"./index.161fb295.js";import{g as z,h as Y,m as H,d as Q,n as W,b as G,f as X}from"./invoice.f6a9e7f6.js";import{C as Z}from"./card.6a96327d.js";import{S as ee}from"./select.fad79672.js";import{B as te}from"./BBTable.6179d6f5.js";import{I as oe,C as le,B as ae}from"./ChooseCondition.ebe54d8e.js";import{E as ne}from"./expandable-panel.d6d9382d.js";import{_ as ie}from"./tab.1390e648.js";import{R as de}from"./Form.a24e0fb7.js";import{C as se}from"./Currency.009127db.js";import{I as ce}from"./Search.7e89b2fc.js";import{B as re}from"./BSelect.f2eeebf2.js";import{C as ue}from"./CustomConditionInput.07b2c282.js";import{_ as me}from"./badge.b78bf7eb.js";import{_ as pe}from"./attention.c511405b.js";import"./date.f86face7.js";import"./BDropdown.3c24c256.js";const be=c({components:{Tab:ie,RecordPaymentForm:de},props:{data:{type:Object,default:()=>({amount:0,maxAmount:null,note:null,payment_method:null})},items:{type:Array,default:()=>[]},maxAmount:{type:Number,default:0}},emits:["update:data"],setup(e,{emit:t}){const o=r(e.data);return u((()=>d({},o)),(()=>{t("update:data",o)})),o.payment_method=e.items[0]?e.items[0].name:null,e.data.amount=e.maxAmount||0,e.data.maxAmount=e.maxAmount||null,{items:e.items,data:o}}}),ve={class:"grid grid-cols-3 gap-4"},ye={class:"xl:col-span-1 lg:col-span-1 col-span-3"},Ce={class:"xl:col-span-2 lg:col-span-2 col-span-3"};const ge=c({props:{disabled:{type:Boolean,default:!1},items:{type:Object,default:{}}},components:{Input:N,Button:E,Modal:F,Card:Z,ExpandablePanel:ne,RecordPayment:M(be,[["render",function(e,t,o,l,a,n){const i=m("Tab"),d=m("RecordPaymentForm");return p(),b("div",ve,[v("div",ye,[y(i,{modelValue:e.data.payment_method,"onUpdate:modelValue":t[0]||(t[0]=t=>e.data.payment_method=t),by:"name",items:e.items,component:"",type:"vertical"},null,8,["modelValue","items"])]),v("div",Ce,[y(d,{data:e.data,"onUpdate:data":t[1]||(t[1]=t=>e.data=t)},null,8,["data"])])])}]]),Currency:se},async setup(e){const{data:t,state:o,loading:l,modal:a,openModal:n,unsetData:i,actionAll:d,actionCreate:s}=z("invoice"),{state:c}=Y("invoice"),{action:r}=H("invoice"),{loading:u,actionPaperCheckInvoice:m}=Q(),p=C();await d(p.params.buybackId);return{data:t,state:o,statePaymentMethod:c,items:g((()=>e.items)),loading:l,loadingPrint:u,modal:a,unsetData:i,openModal:n,createRecord:async()=>{await s(p.params.buybackId),await r(p.params.buybackId)},printPaperCheck:async e=>{await m(p.params.buybackId,e)}}}}),fe={class:"grid grid-cols-6 my-10"},he={class:"md:col-span-2 col-span-6 md:col-start-5 col-start-1"},_e={class:"flex justify-between"},ke={class:"text-grey-base"},we={class:"flex justify-between mt-2"},Ie={class:"text-grey-base"},xe={class:"flex justify-between py-2 border-grey-01"},Ve={class:"text-grey-base"},Se={key:0},Be={class:"flex justify-between border-t border-b py-4 border-grey-01"},De={class:"font-bold"},Ue={class:"status-history border-b border-grey-01 mb-8 mt-4 py-2"},Oe={class:"grid grid-cols-4"},je={class:"col-span-3"},Ae={class:"block text-grey-base"},Pe={class:"block text-grey-base"},Te={class:"block text-grey-base"},Me=["onClick"],Ne={class:"col-span-1"},Ee={key:1,class:"text-center mb-3"},Fe={class:"d-flex justify-content-between align-items-center"},Re={class:"font-weight-bold mb-0"};var $e=M(ge,[["render",function(e,t,o,l,a,n){var i;const d=m("Currency"),s=m("ExpandablePanel"),c=m("Card"),r=m("Button"),u=m("RecordPayment"),C=m("Modal");return p(),b("div",null,[v("div",fe,[v("div",he,[v("div",_e,[t[3]||(t[3]=v("span",{class:"font-bold"},"Subtotal",-1)),v("span",ke,[y(d,{value:e.items.sub_total},null,8,["value"])])]),v("div",we,[t[4]||(t[4]=v("span",{class:"font-bold"},"Total Cost",-1)),v("span",Ie,[y(d,{value:e.items.total_cost},null,8,["value"])])]),v("div",xe,[t[6]||(t[6]=v("span",{class:"font-bold"},"Profit",-1)),v("span",Ve,[f(h(e.items.total_profit<0?"-":"")+" ",1),y(d,{value:e.items.total_profit},null,8,["value"]),t[5]||(t[5]=f()),"0.0"!=e.items.profit_percentage?(p(),b("span",Se,"("+h(e.items.profit_percentage)+"%)",1)):_("",!0)])]),v("div",Be,[t[7]||(t[7]=v("span",{class:"font-bold"},"Total",-1)),v("h6",De,[y(d,{value:e.items.total},null,8,["value"])])]),v("div",Ue,[0!=e.state.data.length?(p(),b(k,{key:0},[t[8]||(t[8]=v("p",{class:"font-bold"},"Record Payment",-1)),(p(!0),b(k,null,w(e.state.data,((e,t)=>(p(),b("div",{class:"d-flex justify-content-between align-items-start my-4",key:t},[v("div",Oe,[v("div",je,[y(s,{modelValue:e.collapse,"onUpdate:modelValue":t=>e.collapse=t},{header:I((({toggle:t})=>[v("p",{onClick:t,class:x(["flex items-center mb-0",[e.return_id?"text-red-base":"text-dark"]])},[v("span",{class:x(["material-icons mr-2 text-2xl transform transition-all",{"rotate-90":e.collapse}])},"chevron_right",2),f(" "+h(`Amount ${e.return_id?"Return":"Paid"} (${e.payment_method})`),1)],10,Me)])),default:I((()=>[v("small",Ae,"by: "+h(e.admin.name),1),v("small",Pe,h(e.created_at),1),v("small",Te,h(e.note?e.note:"-"),1)])),_:2},1032,["modelValue","onUpdate:modelValue"])]),v("div",Ne,[v("span",{class:x(["p-4 block text-right",[e.return_id?"text-danger":"text-dark"]])},h(e.amount),3)])])])))),128))],64)):(p(),b("div",Ee,t[9]||(t[9]=[v("span",{class:"font-weight-bold text-danger"},"There's no payment history change.",-1)])))]),y(c,{class:"mb-6"},{default:I((()=>[v("div",Fe,[t[10]||(t[10]=v("label",{class:"font-weight-bold mb-0"},"Total Balance Due",-1)),v("h3",Re,[y(d,{value:e.state.balance_due},null,8,["value"])])])])),_:1}),y(r,{color:"teal",disabled:0===(null==(i=e.items)?void 0:i.items.length)||e.disabled,onClick:t[0]||(t[0]=t=>e.openModal("create")),block:""},{default:I((()=>t[11]||(t[11]=[f("RECORD PAYMENT")]))),_:1},8,["disabled"])])]),y(C,{modelValue:e.modal.create,"onUpdate:modelValue":t[2]||(t[2]=t=>e.modal.create=t),title:"Record Payment",onClose:e.unsetData},{footer:I((()=>[y(r,{color:"teal",loading:e.loading.create,onClick:e.createRecord},{default:I((()=>t[12]||(t[12]=[f("Save Payment")]))),_:1},8,["loading","onClick"])])),default:I((()=>[y(u,{data:e.data,"onUpdate:data":t[1]||(t[1]=t=>e.data=t),"max-amount":e.state.balance_due,items:e.statePaymentMethod},null,8,["data","max-amount","items"])])),_:1},8,["modelValue","onClose"])])}]]);var Le=M(c({components:{Input:N},props:{data:{type:Object,default:()=>({imei_sn:null})},disabled:{type:Boolean,default:!1}},emits:["update:data"],setup(e,{emit:t}){const o=r(d({},e.data)),l=g({get:()=>o.imei_sn?o.imei_sn.join("\n"):"",set(e){o.imei_sn=e.split("\n")}});return u((()=>d({},o)),(()=>{t("update:data",o)})),{imei:l}}}),[["render",function(e,t,o,l,a,n){const i=m("Input");return p(),V(i,{modelValue:e.imei,"onUpdate:modelValue":t[0]||(t[0]=t=>e.imei=t),type:"textarea",label:"Scan IMEI or Serial # into it's own row",class:"w-full",disabled:e.disabled},null,8,["modelValue","disabled"])}]]);const Ke=c({components:{Input:N,Checkbox:R,BSelect:re,Button:E,CustomConditionInput:ue},props:{data:{type:Object,default:()=>({product_name:null,is_mac:!1,condition:null,price:null,imei_sn:null,cost:null})},disabled:{type:Boolean,default:!1}},emits:["update:data"],setup(e,{emit:t}){const{getConditions:o,actionDelete:l,actionCreate:a}=W(),n=r(d({},e.data)),i=S({}),s=S(null),c=S(!1),m=S(null),p=async()=>{const e=await o();i.value=e},b=g((()=>0===n.condition.length)),v=g((()=>i.value.custom_conditions.some((e=>{var t;return(null==(t=null==e?void 0:e.name)?void 0:t.toLowerCase())===(null==n?void 0:n.condition.toLowerCase())}))));return u((()=>d({},n)),(()=>{Object.assign(n,{is_custom:1,is_mac:0}),t("update:data",n)})),B((()=>{p()})),{data:n,conditionOptions:i,selectCondition:async e=>{m.value=e.condition_name,n.condition=e.condition_name,n.condition_name=e.condition_name},getConditions:p,deleteCustomCondition:async e=>{try{s.value=e,await l(e),p()}catch(t){console.log(t)}finally{s.value=null}},deleting:s,isCustomCondition:c,handleConfirm:async()=>{await a({condition_name:n.condition,condition_term:"[]"}),p(),m.value=n.condition,c.value=!1},initialCondition:m,isEmptyConditionInput:b,isAlreadyExistCondition:v}}}),qe={class:"block mb-5"},Je={class:"block mb-5"},ze={key:0,class:"text-red-base block -mt-4"},Ye=["onClick"],He={class:"block mb-5"},Qe={class:"block mb-5"};var We=M(c({components:{Tab:ie,InvoiceDeviceSearch:ce,InvoiceDeviceBulk:Le,InvoiceDeviceCustom:M(Ke,[["render",function(e,t,o,l,a,n){var i;const d=m("Input"),s=m("CustomConditionInput"),c=m("Button"),r=m("BSelect");return p(),b(k,null,[v("div",qe,[y(d,{modelValue:e.data.product_name,"onUpdate:modelValue":t[0]||(t[0]=t=>e.data.product_name=t),type:"text",label:"Item Name",class:"w-full",disabled:e.disabled},null,8,["modelValue","disabled"])]),v("div",Je,[y(d,{modelValue:e.data.imei_sn,"onUpdate:modelValue":t[1]||(t[1]=t=>e.data.imei_sn=t),type:"text",label:"IMEI/Serial Number",class:"w-full",disabled:e.disabled},null,8,["modelValue","disabled"])]),t[11]||(t[11]=v("label",null,"Condition",-1)),e.isCustomCondition?(p(),b(k,{key:0},[y(s,{modelValue:e.data.condition,"onUpdate:modelValue":t[2]||(t[2]=t=>e.data.condition=t),placeholder:"Input condition",class:"mb-5",onConfirm:e.handleConfirm,onCancel:t[3]||(t[3]=()=>{e.isCustomCondition=!1,e.data.condition=e.initialCondition}),error:e.isEmptyConditionInput||e.isAlreadyExistCondition},null,8,["modelValue","onConfirm","error"]),e.isEmptyConditionInput||e.isAlreadyExistCondition?(p(),b("small",ze,h(e.isEmptyConditionInput?"This field is required.":"This custom condition already exists."),1)):_("",!0)],64)):(p(),V(r,{key:1,"model-value":{id:e.data.condition,condition_name:e.data.condition},"onUpdate:modelValue":e.selectCondition,"item-name":"condition_name",by:"condition_name",type:"text",class:"w-full mb-5",block:"",placeholder:"Select Condition",items:null==(i=e.conditionOptions)?void 0:i.conditions},{append:I((({collapse:o})=>{var l,a;return[(null==(a=null==(l=e.conditionOptions)?void 0:l.custom_conditions)?void 0:a.length)?(p(),b(k,{key:0},[t[8]||(t[8]=v("label",{class:"px-5 pt-4 pb-2"},"Saved Custom Condition",-1)),(p(!0),b(k,null,w(e.conditionOptions.custom_conditions,(l=>(p(),b("div",{key:l.id,class:"group flex items-center justify-between gap-2 pl-6 border-t border-grey-01 p-4 hover:bg-grey-lighten w-full"},[v("p",{onClick:()=>{e.data.condition=l.name,e.initialCondition=l.name,o()},class:"cursor-pointer w-full"},h(l.name),9,Ye),y(c,{color:"red",dense:"",view:"smooth",class:"group-hover:opacity-100 opacity-0",loading:e.deleting==l.id,onClick:t=>e.deleteCustomCondition(l.id)},{default:I((()=>t[7]||(t[7]=[v("i",{class:"material-icons"},"delete",-1)]))),_:2},1032,["loading","onClick"])])))),128))],64)):_("",!0),v("button",{onClick:t[4]||(t[4]=()=>{e.isCustomCondition=!0,e.data.condition=""}),class:"flex items-center gap-2 pl-6 border-t border-grey-01 p-4 hover:bg-grey-lighten w-full"},t[9]||(t[9]=[v("i",{class:"material-icons"},"add",-1),f(" Add Custom Condition ")]))]})),empty:I((()=>t[10]||(t[10]=[v("span",null,null,-1)]))),_:1},8,["model-value","onUpdate:modelValue","items"])),v("div",He,[y(d,{modelValue:e.data.price,"onUpdate:modelValue":t[5]||(t[5]=t=>e.data.price=t),type:"number",label:"Price",class:"w-full",disabled:e.disabled,currency:!0},null,8,["modelValue","disabled"])]),v("div",Qe,[y(d,{modelValue:e.data.cost,"onUpdate:modelValue":t[6]||(t[6]=t=>e.data.cost=t),type:"number",label:"Cost",class:"w-full",disabled:e.disabled,currency:!0},null,8,["modelValue","disabled"])])],64)}]])},props:{data:[Array,Object],selected:{Array:Array}},emits:["update:data","choose"],setup(e,{emit:t}){const{tab:o}=G(),l=S(null),a=g((()=>{const e={"update:data":e=>l.value=e};return"InvoiceDeviceSearch"===o.selected&&(e.choose=e=>t("choose",e)),e})),n=g((()=>{const t={};return t.data=l.value,"InvoiceDeviceSearch"===o.selected&&(t.selected=e.selected),t}));return u((()=>d({},l.value)),(()=>{t("update:data",l.value)})),u((()=>o.selected),(()=>{l.value={}})),{data:l,tab:o,vOn:a,vBind:n}}}),[["render",function(e,t,o,l,a,n){const i=m("Tab");return p(),b(k,null,[y(i,{modelValue:e.tab.selected,"onUpdate:modelValue":t[0]||(t[0]=t=>e.tab.selected=t),items:e.tab.items,component:""},null,8,["modelValue","items"]),(p(),V(O(e.tab.selected),D(e.vBind,U(e.vOn)),null,16))],64)}]]);const Ge=c({components:{Input:N,Select:ee,Button:E,Modal:F,Alert:$,ItemList:oe,ChooseCondition:le,BBTable:te,BBTColumn:ae},props:{items:{type:Array,default:()=>[]},conditions:{type:Array,default:()=>[]},show:{type:Boolean,default:()=>!1},loading:{type:Boolean,default:()=>!1},me:{type:Object,default:()=>[]}},emits:["close","submit"],setup(e,{emit:t}){const o=S(null),l=S(e.show),a=S(1),n=S([]),i=S(""),d=S(null),s=g((()=>!n.value.length||2===a.value&&!i.value)),c=g((()=>1===a.value?{items:e.items||[],onSelectionChange:e=>{n.value=e.map((e=>e.id||null)).filter((e=>!!e))}}:2===a.value?{conditions:e.conditions||[],onSelectionChange:e=>i.value=e.condition_name||""}:void 0)),r=g((()=>1===a.value?"ItemList":2===a.value?"ChooseCondition":void 0));u((()=>e.show),(e=>{l.value=e}));const m=()=>{for(let t=0;t<e.items.length;t++){let o=0;e.items[t].new_price&&(o=Math.ceil(((e.items[t].new_price-e.items[t].cost)/e.items[t].new_price*100).toFixed(2))),e.items[t].new_profit_percentage=o}};return{props:e,refComponent:o,currentStep:a,isShowModal:l,componentName:r,componentBind:c,selectedIds:n,selectedCondition:i,disableNext:s,handleCloseModal:()=>{a.value=1,n.value=[],i.value="",l.value=!1,t("close",!0)},handleNextStep:()=>{2===a.value&&t("submit",{ids:JSON.stringify(n.value),condition:i.value}),a.value<2&&++a.value},handlePreviousStep:()=>a.value>1&&--a.value,save:()=>{const o={data:e.items.map((e=>({id:e.id,condition:(null==e?void 0:e.new_condition)?null==e?void 0:e.new_condition:null==e?void 0:e.condition,price:(null==e?void 0:e.new_price)?null==e?void 0:e.new_price:null==e?void 0:e.price})))};t("submit",o),d.value=null,i.value="leave it as is"},money:L,filterNumber:e=>{const t=[...e.target.value],o=e.keyCode?e.keyCode:e.which;(o<48||o>57)&&(46!=o&&e.preventDefault(),46==o&&t.map((t=>{"."===t&&e.preventDefault()})))},priceAll:d,setPriceAll:()=>{if(""!=d.value){for(let t=0;t<e.items.length;t++)e.items[t].new_price=d.value;m()}},calculateNewProfitPercentage:m,selectCondition:()=>{for(let t=0;t<e.items.length;t++)e.items[t].new_condition=i.value}}}}),Xe={class:"flex mb-6"},Ze={class:"max-h-96 overflow-y-auto"},et={class:"font-semibold text-grey-04"},tt={class:"text-grey-04"},ot={class:"text-grey-04"},lt={class:"text-grey-04 text-right"},at={class:"text-grey-04 text-right"},nt={class:"text-grey-04"},it={class:"text-grey-04 text-right"},dt={class:"flex justify-between"};const st=c({components:{Input:N,Button:E,Modal:F,Record:$e,Card:Z,Device:We,Badge:me,BBTable:te,BBTColumn:ae,Select:ee,Currency:se,BulkCondition:M(Ge,[["render",function(e,t,o,l,a,n){const i=m("Select"),d=m("Input"),s=m("BBTColumn"),c=m("BBTable"),r=m("Button"),u=m("Modal");return p(),b("div",null,[y(u,{modelValue:e.isShowModal,"onUpdate:modelValue":t[2]||(t[2]=t=>e.isShowModal=t),title:"Change Conditions",onClose:e.handleCloseModal,size:"xl"},{footer:I((()=>[v("div",dt,[t[5]||(t[5]=v("div",null," Â  ",-1)),v("div",null,[y(r,{view:"smooth",class:"mr-2",color:"white",onClick:e.handleCloseModal,disabled:e.loading},{default:I((()=>t[3]||(t[3]=[f("Cancel")]))),_:1},8,["onClick","disabled"]),y(r,{color:"teal",onClick:e.save,loading:e.loading},{default:I((()=>t[4]||(t[4]=[f("Apply Changes")]))),_:1},8,["onClick","loading"])])])])),default:I((()=>[v("div",Xe,[y(i,{class:"mr-6",modelValue:e.selectedCondition,"onUpdate:modelValue":t[0]||(t[0]=t=>e.selectedCondition=t),items:e.props.conditions,onChange:e.selectCondition,name:"condition_name",by:"condition_name",label:"Set All New Condition to",placeholder:"leave it as is",disabled:e.loading},null,8,["modelValue","items","onChange","disabled"]),y(d,{modelValue:e.priceAll,"onUpdate:modelValue":t[1]||(t[1]=t=>e.priceAll=t),type:"number",onKeyup:e.setPriceAll,label:"Set All Unit Price to",icon:"",disabled:e.loading},{icon:I((()=>[f(h(e.me.currency_symbol),1)])),_:1},8,["modelValue","onKeyup","disabled"])]),v("div",Ze,[y(c,{items:e.items,selectable:!1,"check-all":!1,header:["Item","IMEI","Condition","Unit Price","Profit","New Condition","New Unit Price","New Profit"],"collapse-all":""},{item:I((({item:t})=>[y(s,null,{default:I((()=>[v("p",et,h(t.product_name),1)])),_:2},1024),y(s,null,{default:I((()=>[v("p",tt,h(t.imei_sn),1)])),_:2},1024),y(s,null,{default:I((()=>[v("p",ot,h(t.condition),1)])),_:2},1024),y(s,null,{default:I((()=>[v("p",lt,"$"+h(e.money(t.price)),1)])),_:2},1024),y(s,null,{default:I((()=>[v("p",at,"$"+h(e.money(t.price-t.cost))+" ("+h(t.profit_percentage)+"%)",1)])),_:2},1024),y(s,{class:"border-separator"},{default:I((()=>[v("p",nt,h((null==t?void 0:t.new_condition)?null==t?void 0:t.new_condition:"-"),1)])),_:2},1024),y(s,null,{default:I((()=>[y(d,{modelValue:t.new_price,"onUpdate:modelValue":e=>t.new_price=e,type:"text",onKeyup:e.calculateNewProfitPercentage,onKeypress:e.filterNumber,icon:"",currency:!0,disabled:e.loading},{icon:I((()=>[f(h(e.me.currency_symbol),1)])),_:2},1032,["modelValue","onUpdate:modelValue","onKeyup","onKeypress","disabled"])])),_:2},1024),y(s,null,{default:I((()=>[v("p",it,"$"+h(e.money((null==t?void 0:t.new_price)?(null==t?void 0:t.new_price)-t.cost:0))+" ("+h(`${(null==t?void 0:t.new_profit_percentage)?t.new_profit_percentage:0}`)+" %)",1)])),_:2},1024)])),_:1},8,["items"])])])),_:1},8,["modelValue","onClose"])])}],["__scopeId","data-v-0c26b50a"]]),BSelect:re,CustomConditionInput:ue},async setup(){const{data:e,sort:t,state:o,loading:l,modal:a,selected:n,unsetData:i,openModal:c,actionAll:m,actionCreate:p,actionUpdate:b,actionDelete:v,actionBulkDelete:y}=X("invoice"),{state:f,stateItemConditionOptions:h,loading:_,modal:k,actionAll:w,actionUpdate:I,actionBulkUpdate:x,actionCreate:V,getConditions:B,actionDelete:D}=W(),{me:U}=K(),{actionAll:O}=z("invoice"),{state:j}=H("invoice"),A=C(),P=S(null),M=S(null),N=S(null),E=S(!1),F=S([]),R=r({}),$=r([{value:"lowest_unit_price",name:"Lowest Unit Price"},{value:"higest_unit_price",name:"Higest Unit Price"}]);t.sort_by=window.localStorage.getItem("invoice-detail-item-sort_by")?window.localStorage.getItem("invoice-detail-item-sort_by"):"",t.order_by=window.localStorage.getItem("invoice-detail-item-order_by")?window.localStorage.getItem("invoice-detail-item-order_by"):"";const L=S("Sort By"),Y=S(!1),Q=S([]),G=S({}),Z=S({});A.query.new&&(a.create=!0);const ee=g((()=>{var e;return 3===(null==(e=j.value)?void 0:e.status_id)})),te=S(null),oe=e=>{if(!R.items)return null;const t=R.items.find((t=>t.id===e));if(t)return t;for(const o of R.items)if(o.child&&o.child.length>0){const t=o.child.find((t=>t.id===e));if(t)return t}return null},le=e=>!f.value.find((t=>t.condition_name===e))&&e?(f.value.push({condition_name:e}),f.value):f.value;u((()=>o.value),(e=>{e&&Object.assign(R,q(e))}));const ae=(e,t)=>t.id<e.id?-1:t.id>e.id?1:0,ne=(e,t)=>e.price<t.price?-1:e.price>t.price?1:0,ie=(e,t)=>t.price<e.price?-1:t.price>e.price?1:0,de=J((()=>{"lowest_unit_price"==L.value?R.items=R.items.sort(ne):"higest_unit_price"==L.value?R.items=R.items.sort(ie):R.items=R.items.sort(ae),Y.value=!1}),300),se=S({}),ce=S({}),re=async e=>{const t=(null==e?void 0:e.category_id)?`category_${e.category_id}`:(null==e?void 0:e.product_id)?`product_${e.product_id}`:`condition_${e.condition}`;ce.value[t]=!0;try{let o;if(null==e?void 0:e.category_id)o=await B({category_id:e.category_id});else{if(!(null==e?void 0:e.product_id)){const o=le(e.condition);return se.value[t]=o,o}o=await B({product_id:e.product_id})}const l=o.conditions.map((e=>({id:e.id,condition_name:e.name}))),a=o.custom_conditions.map((e=>({id:e.id,condition_name:e.name})));return se.value[t]=l||[],Q.value=a||[],se.value[t]}catch(o){console.error("Error loading conditions:",o);const l=le(e.condition);return se.value[t]=l,l}finally{ce.value[t]=!1}};return await Promise.all([await m(A.params.buybackId)]),{state:o,stateConditions:f,stateItemConditionOptions:h,items:R,me:U,data:e,refDeviceForm:P,refItemTable:M,selectedItems:F,isCompletedInvoice:ee,loading:l,modal:a,loadingCondition:_,modalCondition:k,openModal:c,unsetData:i,rowKey:e=>{const t=e.child?"_parent":"_child";return e.id+t},isParent:(e,t)=>!(e.child&&e.child.length>0),openModalSelected:(e,t)=>c(e,(()=>{n.value=t.id})),openModalBulkDelete:e=>c(e),deviceTableUpdate:async e=>{await b(A.params.buybackId,e.id,{price:e.price||0,notes:e.notes||""},(t=>{const o=t.data;if(o&&(null==o?void 0:o.items)){const t=o.items,l=R.items.map(((o,l)=>{if(o.child.length>0){const l=o.child;for(let[a,n]of l.entries())if(n.id===e.id){const l=t.child.find((t=>t.id===e.id));l&&(o.child[a]=l),o.total=t.total}return o}return o.id===e.id&&(o=t),o}));R.items=l,delete o.items,Object.assign(R,d({},o))}})),await O(A.params.buybackId),await m(A.params.buybackId)},addDevice:async()=>{try{const t=d({},e.device);if(0===Object.keys(t).length)return void T({message:"Please fill the form below",type:"warning"});Array.isArray(null==t?void 0:t.imei_sn)&&(t.imei_sn=JSON.stringify(t.imei_sn));Array.isArray(null==t?void 0:t.selected)&&(Object.assign(t,{ids:JSON.stringify(t.selected.map((e=>e.id)))}),delete t.selected),await p(A.params.buybackId,t),await O(A.params.buybackId)}catch(t){console.log(t)}},addDeviceChoose:async e=>{await p(A.params.buybackId,{ids:JSON.stringify([e.id])})},deleteDevice:async(e,t)=>{await v(A.params.buybackId),await O(A.params.buybackId)},deleteBulkDevice:async()=>{await y({buybackId:A.params.buybackId,data:{ids:F.value.map((e=>e.id))}}),await O(A.params.buybackId),F.value=[],M.value.checkValue=[]},filterNumber:e=>{const t=[...e.target.value],o=e.keyCode?e.keyCode:e.which;(o<48||o>57)&&(46!=o&&e.preventDefault(),46==o&&t.map((t=>{"."===t&&e.preventDefault()})))},expandIndent:e=>{te.value.toggleRowExpansion(e)},handleItemSelect:e=>{F.value=e},handleBulkChangeCondition:()=>{F.value.length&&(k.update=!0)},handleChangeItemCondition:async(e,t)=>{try{Object.keys(e).includes("id")&&Object.keys(t).includes("condition_name")&&await I(A.params.buybackId,{id:e.id,condition:t.condition_name},(()=>{e.condition=t.condition_name,T({type:"success",message:"Item condition changed"})}))}catch(o){console.log(o)}},handleCloseModalBulkCondition:()=>{k.update=!1},handleBulkChangeItemCondition:async e=>{await x(A.params.buybackId,e,(async()=>{await Promise.all([m(A.params.buybackId),await O(A.params.buybackId)]),T({type:"success",message:"Item conditions updated"}),k.update=!1,F.value=[],M.value.checkValue=[]}))},getConditions:le,invoiceDetailRef:te,itemSorts:$,selectedItemSort:L,changeItemSort:()=>{Y.value=!0,de()},loadingItemSort:Y,handleItemSort:async e=>{window.localStorage.setItem("invoice-detail-item-sort_by",e.sortby),window.localStorage.setItem("invoice-detail-item-order_by",e.sortType),t.sort_by=window.localStorage.getItem("invoice-detail-item-sort_by")?window.localStorage.getItem("invoice-detail-item-sort_by"):"",t.order_by=window.localStorage.getItem("invoice-detail-item-order_by")?window.localStorage.getItem("invoice-detail-item-order_by"):"",await m(A.params.buybackId)},itemSort:t,isItemCustomCondition:e=>!!G.value[e],setItemCustomCondition:(e,t)=>{const o=oe(e);o&&(!0===t?(Z.value[e]=o.condition,o.condition="",o.child&&o.child.length>0&&o.child.forEach(((t,o)=>{const l=`${e}_child_${o}`;Z.value[l]=t.condition,t.condition=""}))):!1===t&&(Z.value[e]&&(o.condition=Z.value[e],delete Z.value[e]),o.child&&o.child.length>0&&o.child.forEach(((t,o)=>{const l=`${e}_child_${o}`;Z.value[l]&&(t.condition=Z.value[l],delete Z.value[l])})))),G.value=s(d({},G.value),{[e]:t})},confirmCondition:async(e,t)=>{try{E.value=!0,await V({condition_name:e,condition_term:"[]"},(async()=>{const o=oe(t);o?await I(A.params.buybackId,{id:t,condition:e},(()=>{G.value=s(d({},G.value),{[t]:!1}),Z.value[t]&&delete Z.value[t],o.child&&o.child.length>0&&o.child.forEach(((e,o)=>{const l=`${t}_child_${o}`;Z.value[l]&&delete Z.value[l]})),re(o),T({type:"success",message:"Custom condition added and applied"})})):(G.value=s(d({},G.value),{[t]:!1}),Z.value[t]&&delete Z.value[t],T({type:"success",message:"Custom condition added"}))}))}catch(o){console.log(o),T({type:"error",message:"Failed to add custom condition"})}finally{E.value=!1}},findItemById:oe,getConditionItems:e=>{const t=(null==e?void 0:e.category_id)?`category_${e.category_id}`:(null==e?void 0:e.product_id)?`product_${e.product_id}`:`condition_${e.condition}`;return se.value[t]?se.value[t]:(ce.value[t]||re(e).catch((e=>{console.error("Failed to load conditions:",e)})),le(e.condition))},loadConditionsForItem:re,customConditionOptions:Q,deleting:N,deleteCustomCondition:async e=>{try{N.value=e,await D(e),Q.value=Q.value.filter((t=>t.id!=e))}catch(t){console.log(t)}finally{N.value=null}},loadingStates:ce,creating:E,originalConditions:Z}}}),ct={class:"flex items-center justify-between"},rt={class:"mb-4"},ut={key:0},mt={key:0,class:"flex"},pt={class:"font-bold"},bt={class:"block mt-2"},vt={key:1,class:"text-red-base font-bold"},yt={class:"block"},Ct={class:"block mt-4"},gt={key:0,class:"text-red-base"},ft=["onClick"],ht=["onClick"],_t={class:"block text-right text-sm my-2"},kt={class:"block text-right text-sm my-2"},wt={key:0},It={class:"font-bold"},xt={key:0,class:"block mt-2"},Vt={class:"block"},St={class:"block mt-4"},Bt={key:0,class:"text-red-base"},Dt=["onClick"],Ut=["onClick"],Ot={class:"block text-right text-sm my-2"},jt={class:"block text-right text-sm my-2"},At={key:0},Pt={class:"text-center py-10"},Tt={class:"mt-8 mb-10"},Mt={class:"mb-4"};var Nt=M(st,[["render",function(e,t,o,l,a,n){const i=m("Button"),d=m("BBTColumn"),s=m("Badge"),c=m("Input"),r=m("CustomConditionInput"),u=m("BSelect"),C=m("Currency"),g=m("BBTable"),x=m("Record"),S=m("Card"),B=m("Modal"),D=m("Device"),U=m("BulkCondition"),O=j("loading");return p(),b(k,null,[y(S,{class:"mb-6"},{header:I((()=>[v("div",ct,[t[9]||(t[9]=v("h6",null,"Items",-1)),v("div",null,[e.isCompletedInvoice?(p(),V(i,{key:0,color:"orange",dense:"",link:"",to:{name:"invoiceDetailReturn"},class:"mr-4"},{default:I((()=>t[7]||(t[7]=[v("span",{class:"material-icons text-lg"},"replay",-1),f(" Return Item")]))),_:1})):_("",!0),e.isCompletedInvoice?_("",!0):(p(),V(i,{key:1,color:"teal",onClick:t[0]||(t[0]=t=>e.openModal("create")),dense:""},{default:I((()=>t[8]||(t[8]=[v("span",{class:"material-icons"},"add",-1),f(" Add Item")]))),_:1}))])])])),default:I((()=>[v("div",rt,[e.selectedItems.length?(p(),V(i,{key:0,onClick:e.handleBulkChangeCondition,color:"teal",dense:""},{default:I((()=>t[10]||(t[10]=[f("Change Conditions and Payout")]))),_:1},8,["onClick"])):_("",!0),e.selectedItems.length?(p(),V(i,{key:1,onClick:t[1]||(t[1]=t=>e.openModalBulkDelete("bulkDelete")),class:"ml-2",color:"red",dense:""},{default:I((()=>t[11]||(t[11]=[f("Delete Selected")]))),_:1})):_("",!0)]),y(g,{ref:"refItemTable",items:e.items.items,loading:e.loading.all,children:"child",selectable:!0,header:[{label:"Item #",sortable:!0,sortby:"item",sortActive:e.itemSort},"Item","Condition",{label:"Qty",align:"right"},{label:"Unit Price",align:"right",sortable:!0,sortby:"price",sortActive:e.itemSort},{label:"Total",align:"right"},""],disabled:e.isCompletedInvoice,onSelectionChange:e.handleItemSelect,onSort:e.handleItemSort,"collapse-all":""},{item:I((({item:o,collapsed:l})=>[y(d,{width:"100"},{default:I((()=>[o.child.length?_("",!0):(p(),b("span",ut,h(o.id),1))])),_:2},1024),y(d,null,{default:I((()=>[l?_("",!0):(p(),b("div",mt,[v("p",pt,h(o.product_name),1),o.return_id?(p(),V(s,{key:0,class:"ml-2",color:"red"},{default:I((()=>t[12]||(t[12]=[f("Returned")]))),_:1})):_("",!0)])),!o.child||o.child&&0===o.child.length&&!l?(p(),b(k,{key:1},[v("small",bt,[null!==o.imei_sn?(p(),b(k,{key:0},[f("("+h(o.imei_sn)+")",1)],64)):(p(),b("span",vt,"IMEI/Serial Number not found"))]),o.detail?(p(),b(k,{key:0},[v("small",yt,h(o.detail),1),t[13]||(t[13]=v("br",null,null,-1))],64)):_("",!0),v("div",Ct,[A(y(c,{modelValue:o.notes,"onUpdate:modelValue":e=>o.notes=e,disabled:e.isCompletedInvoice,type:"textarea",placeholder:"Notes...",class:"w-full",onFocusOut:t=>e.deviceTableUpdate(o),dense:""},null,8,["modelValue","onUpdate:modelValue","disabled","onFocusOut"]),[[O,e.loading.update[o.id]]])])],64)):_("",!0)])),_:2},1024),y(d,null,{default:I((()=>{var l,a,n,d;return[o.child.length?_("",!0):(p(),b(k,{key:0},[e.isItemCustomCondition(o.id)?(p(),b(k,{key:0},[y(r,{modelValue:o.condition,"onUpdate:modelValue":e=>o.condition=e,disabled:e.isCompletedInvoice||e.creating,placeholder:"Input condition",error:!o.condition||(null==(l=e.customConditionOptions)?void 0:l.some((e=>e.condition_name.toLowerCase()===o.condition.toLowerCase())))||(null==(a=e.getConditionItems(o))?void 0:a.some((e=>e.condition_name.toLowerCase()===o.condition.toLowerCase()))),onConfirm:t=>e.confirmCondition(t,o.id),onCancel:()=>e.setItemCustomCondition(o.id,!1)},null,8,["modelValue","onUpdate:modelValue","disabled","error","onConfirm","onCancel"]),!o.condition||(null==(n=e.customConditionOptions)?void 0:n.some((e=>e.condition_name.toLowerCase()===o.condition.toLowerCase())))||(null==(d=e.getConditionItems(o))?void 0:d.some((e=>e.condition_name.toLowerCase()===o.condition.toLowerCase())))?(p(),b("small",gt,h(o.condition?"This custom condition already exists.":"This field is required."),1)):_("",!0)],64)):A((p(),V(u,{key:1,"model-value":{id:o.condition,condition_name:o.condition},"onUpdate:modelValue":t=>e.handleChangeItemCondition(o,t),"item-name":"condition_name",by:"condition_name",type:"text",class:"w-full",block:"",placeholder:"Select Condition",items:e.getConditionItems(o),disabled:e.isCompletedInvoice},{prepend:I((()=>t[14]||(t[14]=[v("label",{class:"p-4"},h("Active Condition"),-1)]))),append:I((({collapse:l})=>[e.customConditionOptions.length?(p(),b(k,{key:0},[t[16]||(t[16]=v("label",{class:"px-5 pt-4 pb-2"},"Saved Custom Condition",-1)),(p(!0),b(k,null,w(e.customConditionOptions,(a=>(p(),b("div",{key:a.id,class:"group flex items-center justify-between gap-2 pl-6 border-t border-grey-01 p-4 hover:bg-grey-lighten w-full"},[v("p",{onClick:()=>{o.condition=a.condition_name,e.handleChangeItemCondition(o,a),l()},class:"cursor-pointer w-full"},h(a.condition_name),9,ft),y(i,{onClick:t=>e.deleteCustomCondition(a.id),loading:e.deleting==a.id,color:"red",dense:"",view:"smooth",class:"group-hover:opacity-100 opacity-0"},{default:I((()=>t[15]||(t[15]=[v("i",{class:"material-icons"},"delete",-1)]))),_:2},1032,["onClick","loading"])])))),128))],64)):_("",!0),v("button",{onClick:()=>{e.setItemCustomCondition(o.id,!0)},class:"flex items-center gap-2 pl-6 border-t border-grey-01 p-4 hover:bg-grey-lighten w-full"},t[17]||(t[17]=[v("i",{class:"material-icons"},"add",-1),f(" Add Custom Condition ")]),8,ht)])),empty:I((()=>t[18]||(t[18]=[v("div",{class:"p-4 text-center w-72"},"This item does not have an active condition, because it is a custom item.",-1)]))),_:2},1032,["model-value","onUpdate:modelValue","items","disabled"])),[[O,e.loadingCondition.update[o.id]]])],64))]})),_:2},1024),y(d,{align:"right"},{default:I((()=>[f(h(l?"":o.qty),1)])),_:2},1024),y(d,null,{default:I((()=>[!o.child||o.child&&0===o.child.length?(p(),b(k,{key:0},[A((p(),V(c,{modelValue:o.price,"onUpdate:modelValue":e=>o.price=e,type:"number",disabled:e.isCompletedInvoice,value:o.price,currency:!0,onFocusOut:t=>e.deviceTableUpdate(o),block:"",dense:"",icon:""},{icon:I((()=>[f(h(e.me.currency_symbol),1)])),_:2},1032,["modelValue","onUpdate:modelValue","disabled","value","onFocusOut"])),[[O,e.loading.update[o.id]]]),v("div",_t,[t[19]||(t[19]=f("Cost: ")),v("b",null,[y(C,{value:o.cost},null,8,["value"])])]),v("div",kt,[t[21]||(t[21]=f("Profit: ")),v("b",null,[f(h(o.price-o.cost<0?"-":""),1),y(C,{value:o.price-o.cost},null,8,["value"]),t[20]||(t[20]=f()),o.cost>0?(p(),b("span",wt,"("+h(o.profit_percentage)+"%)",1)):_("",!0)])])],64)):_("",!0)])),_:2},1024),y(d,{align:"right"},{default:I((()=>[l?_("",!0):(p(),V(C,{key:0,value:o.total},null,8,["value"]))])),_:2},1024),y(d,null,{default:I((()=>[o.child&&0!==o.child.length?_("",!0):(p(),V(i,{key:0,color:"red",disabled:e.isCompletedInvoice,onClick:t=>e.openModalSelected("delete",o),dense:""},{default:I((()=>t[22]||(t[22]=[v("span",{class:"material-icons text-sm"},"delete",-1)]))),_:2},1032,["disabled","onClick"]))])),_:2},1024)])),child:I((({child:o})=>[y(d,null,{default:I((()=>[v("span",null,h(o.id),1)])),_:2},1024),y(d,null,{default:I((()=>[v("p",It,h(o.product_name),1),o.imei_sn?(p(),b("small",xt," ("+h(o.imei_sn||"-")+") ",1)):_("",!0),v("small",Vt,h(o.detail||"-"),1),t[23]||(t[23]=v("br",null,null,-1)),v("div",St,[A(y(c,{modelValue:o.notes,"onUpdate:modelValue":e=>o.notes=e,disabled:e.isCompletedInvoice,type:"textarea",placeholder:"Notes...",class:"w-full",onFocusOut:t=>e.deviceTableUpdate(o),dense:""},null,8,["modelValue","onUpdate:modelValue","disabled","onFocusOut"]),[[O,e.loading.update[o.id]]])])])),_:2},1024),y(d,null,{default:I((()=>{var l,a;return[e.isItemCustomCondition(o.id)?(p(),b(k,{key:0},[y(r,{modelValue:o.condition,"onUpdate:modelValue":e=>o.condition=e,disabled:e.isCompletedInvoice||e.creating,placeholder:"Input condition",error:!o.condition||(null==(l=e.customConditionOptions)?void 0:l.some((e=>e.condition_name.toLowerCase()===o.condition.toLowerCase()))),onConfirm:t=>e.confirmCondition(t,o.id),onCancel:()=>e.setItemCustomCondition(o.id,!1)},null,8,["modelValue","onUpdate:modelValue","disabled","error","onConfirm","onCancel"]),!o.condition||(null==(a=e.customConditionOptions)?void 0:a.some((e=>e.condition_name.toLowerCase()===o.condition.toLowerCase())))?(p(),b("small",Bt,h(o.condition?"This custom condition already exists.":"This field is required."),1)):_("",!0)],64)):(p(),V(u,{key:1,"model-value":{id:o.condition,condition_name:o.condition},items:e.getConditionItems(o),"item-name":"condition_name",by:"condition_name","onUpdate:modelValue":t=>e.handleChangeItemCondition(o,t),loading:e.loadingCondition.update[o.id],disabled:e.isCompletedInvoice,class:"w-full",block:""},{prepend:I((()=>t[24]||(t[24]=[v("label",{class:"p-4"},"Active Condition",-1)]))),append:I((({collapse:l})=>[e.customConditionOptions.length?(p(),b(k,{key:0},[t[26]||(t[26]=v("label",{class:"px-5 pt-4 pb-2"},"Saved Custom Condition",-1)),(p(!0),b(k,null,w(e.customConditionOptions,(a=>(p(),b("div",{key:a.id,class:"group flex items-center justify-between gap-2 pl-6 border-t border-grey-01 p-4 hover:bg-grey-lighten w-full"},[v("p",{onClick:()=>{o.condition=a.condition_name,e.handleChangeItemCondition(o,a),l()},class:"cursor-pointer w-full"},h(a.condition_name),9,Dt),y(i,{onClick:t=>e.deleteCustomCondition(a.id),loading:e.deleting==a.id,color:"red",dense:"",view:"smooth",class:"group-hover:opacity-100 opacity-0"},{default:I((()=>t[25]||(t[25]=[v("i",{class:"material-icons"},"delete",-1)]))),_:2},1032,["onClick","loading"])])))),128))],64)):_("",!0),v("button",{onClick:()=>{e.setItemCustomCondition(o.id,!0)},class:"flex items-center gap-2 pl-6 border-t border-grey-01 p-4 hover:bg-grey-lighten w-full"},t[27]||(t[27]=[v("i",{class:"material-icons"},"add",-1),f(" Add Custom Condition ")]),8,Ut)])),empty:I((()=>t[28]||(t[28]=[v("div",{class:"p-4 text-center w-72"},"This item does not have an active condition, because it is a custom item.",-1)]))),_:2},1032,["model-value","items","onUpdate:modelValue","loading","disabled"]))]})),_:2},1024),y(d,{align:"right"},{default:I((()=>[f(h(o.qty),1)])),_:2},1024),y(d,null,{default:I((()=>[A((p(),V(c,{modelValue:o.price,"onUpdate:modelValue":e=>o.price=e,type:"number",disabled:e.isCompletedInvoice,value:o.price,currency:!0,onFocusOut:t=>e.deviceTableUpdate(o),block:"",dense:"",icon:""},{icon:I((()=>[f(h(e.me.currency_symbol),1)])),_:2},1032,["modelValue","onUpdate:modelValue","disabled","value","onFocusOut"])),[[O,e.loading.update[o.id]]]),v("div",Ot,[t[29]||(t[29]=f("Cost: ")),v("b",null,[y(C,{value:o.cost},null,8,["value"])])]),v("div",jt,[t[31]||(t[31]=f("Profit: ")),v("b",null,[f(h(o.price-o.cost<0?"-":""),1),y(C,{value:o.price-o.cost},null,8,["value"]),t[30]||(t[30]=f()),o.cost>0?(p(),b("span",At,"("+h(o.profit_percentage)+"%)",1)):_("",!0)])])])),_:2},1024),y(d,{align:"right"},{default:I((()=>[y(C,{value:o.total},null,8,["value"])])),_:2},1024),y(d,null,{default:I((()=>[y(i,{color:"red",disabled:e.isCompletedInvoice,onClick:t=>e.openModalSelected("delete",o),dense:""},{default:I((()=>t[32]||(t[32]=[v("span",{class:"material-icons text-sm"},"delete",-1)]))),_:2},1032,["disabled","onClick"])])),_:2},1024)])),_:1},8,["items","loading","header","disabled","onSelectionChange","onSort"]),(p(),V(P,null,{default:I((()=>[A(y(x,{disabled:e.isCompletedInvoice,items:e.items},null,8,["disabled","items"]),[[O,e.loading.all]])])),_:1}))])),_:1}),y(B,{modelValue:e.modal.delete,"onUpdate:modelValue":t[2]||(t[2]=t=>e.modal.delete=t),title:"Delete Item",onClose:e.unsetData},{footer:I((()=>[y(i,{color:"teal",loading:e.loading.delete,onClick:e.deleteDevice},{default:I((()=>t[33]||(t[33]=[f("Delete Item")]))),_:1},8,["loading","onClick"])])),default:I((()=>[t[34]||(t[34]=v("p",null,"Are you sure want to delete this item?",-1))])),_:1},8,["modelValue","onClose"]),y(B,{size:"xs",modelValue:e.modal.bulkDelete,"onUpdate:modelValue":t[4]||(t[4]=t=>e.modal.bulkDelete=t),title:"Delete Multiple Item","hide-header":"","hide-footer":"",onClose:e.unsetData},{default:I((()=>[v("div",Pt,[t[37]||(t[37]=v("img",{class:"mb-10 mx-auto",src:pe,alt:"Attention Icon"},null,-1)),v("div",Tt,[v("h5",Mt,"Deleting "+h(e.selectedItems.length)+" item",1),v("p",null,"Are you sure want to delete "+h(e.selectedItems.length)+" item ?",1)]),y(i,{view:"outlined",color:"white",class:"mr-5",disabled:e.loading.bulkDelete,onClick:t[3]||(t[3]=t=>e.modal.bulkDelete=!1)},{default:I((()=>t[35]||(t[35]=[f("Cancel")]))),_:1},8,["disabled"]),y(i,{color:"red",loading:e.loading.bulkDelete,onClick:e.deleteBulkDevice},{default:I((()=>t[36]||(t[36]=[f("Yes, Delete")]))),_:1},8,["loading","onClick"])])])),_:1},8,["modelValue","onClose"]),y(B,{modelValue:e.modal.create,"onUpdate:modelValue":t[6]||(t[6]=t=>e.modal.create=t),title:"Add Item",size:"md",onClose:e.unsetData},{footer:I((()=>[e.refDeviceForm&&"InvoiceDeviceSearch"!==e.refDeviceForm.tab.selected?(p(),V(i,{key:0,color:"teal",loading:e.loading.create,onClick:e.addDevice},{default:I((()=>t[38]||(t[38]=[f("Add Item")]))),_:1},8,["loading","onClick"])):_("",!0)])),default:I((()=>[A((p(),b("div",null,[y(D,{ref:"refDeviceForm",data:e.data.device,"onUpdate:data":t[5]||(t[5]=t=>e.data.device=t),selected:e.data.device.selected,onChoose:e.addDeviceChoose},null,8,["data","selected","onChoose"])])),[[O,e.loading.create]])])),_:1},8,["modelValue","onClose"]),y(U,{loading:e.loadingCondition.bulk,show:e.modalCondition.update,onClose:e.handleCloseModalBulkCondition,items:e.selectedItems,conditions:e.stateConditions,me:e.me,onSubmit:e.handleBulkChangeItemCondition},null,8,["loading","show","onClose","items","conditions","me","onSubmit"])],64)}]]);export{Nt as default};
