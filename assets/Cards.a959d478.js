var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,r=(t,a,l)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[a]=l,i=(e,t)=>{for(var a in t||(t={}))o.call(t,a)&&r(e,a,t[a]);if(l)for(var a of l(t))s.call(t,a)&&r(e,a,t[a]);return e},n=(e,l)=>t(e,a(l));import{j as d,f as u,y as c,m,$ as p,A as v,o as b,n as g,aO as f,w as y,B as h,D as x,K as _,q as k,G as w,H as j,t as L,a1 as O,a2 as C,T as P,F as $,U as M,W as z,aQ as D,ap as I}from"./vendor.9695fe57.js";import{s as T,z as E,g as A}from"./index.c2f66179.js";import{V as F}from"./vue-draggable-next.esm-bundler.4467bcb1.js";import{C as U}from"./card.f57f7ca5.js";import{C as W}from"./Currency.84d5be4a.js";import{_ as q}from"./ExpeditedIcon.e915b9ec.js";const B=d("dashboard",{state:()=>({getCard:{isLoading:!1,result:[],isLoadingItem:!1,resultItem:[]},getPersonalize:{abortController:null}}),getters:{buybackType(){var e,t,a,l;return 1===(null==(l=null==(a=null==(t=null==(e=T)?void 0:e.state)?void 0:t.user)?void 0:a.me)?void 0:l.is_location_mail_in)?"mailin":"instore"}},actions:{async $getPersonalize(){return await E({url:"/v1/pos/order-status/dashboard/setting",method:"get",params:{buyback_type:this.buybackType}})},async $updatePersonalize(e){this.getPersonalize.abortController&&this.getPersonalize.abortController.abort();const t=new AbortController;this.getPersonalize.abortController=t;try{await E({url:"/v1/pos/order-status/dashboard/setting",method:"put",data:n(i({},e),{buyback_type:this.buybackType}),signal:t.signal}),this.getPersonalize.abortController=null}catch(a){if("AbortError"!==a.name)throw a;console.log("Request Canceled!")}},async $getItem(e,t){return await E({url:`/v1/pos/dashboard/order/${e}`,method:"get",params:{month:"all",year:"all",limit:t,buyback_type:"mailin"===this.buybackType?1:2}})}}}),H={class:"flex"},N={class:"flex items-center gap-x-2"},S={class:"text-xl font-medium text-teal-04"},V={class:"bg-teal-04 rounded-full px-2 py-0.5 text-sm inline-block text-center text-white flex items-center font-medium"},G={key:0,class:"space-y-2"},K={class:"w-full space-y-1 p-3"},Q=["onMouseleave"],R={class:"flex items-center gap-4"},J={key:0,class:"absolute bottom-full pb-1"},X=["onMouseenter"],Y={key:0,class:"w-max flex items-center gap-2 bg-green-lighten text-green-04 py-1 px-4 rounded-full text-sm"},Z={class:"font-medium text-teal-04 whitespace-nowrap"},ee={class:"text-dark text-xs"},te={key:1,class:"flex items-center justify-center h-full"},ae={__name:"DashboardCardItem",props:{item:{type:Object,default:()=>({id:null,shortName:null,name:null,isLoading:!0,totalDevices:0,totalOrders:0,orders:[]})}},setup(e){const t=e,a=u(t.item);return c((()=>t.item),(async e=>{a.value=e})),(t,l)=>{var o;const s=m("router-link"),r=p("loading");return v((b(),g(U,{class:"h-full"},f({default:y((()=>{var e,t;return[(null==(t=null==(e=a.value)?void 0:e.orders)?void 0:t.length)?(b(),L("div",G,[(b(!0),L(O,null,C(a.value.orders,((e,t)=>(b(),L("div",{key:t},[x(s,{class:"block cursor-pointer transition duration-200 rounded-lg hover:bg-grey-lighten",to:{name:1==e.buyback_type?"buybackOnlineDetail":"buybackLocalDetail",params:{buybackId:e.box_id,box_id_link:e.box_id_link}}},{default:y((()=>{var t,a,o;return[h("div",K,[h("div",{class:"flex justify-between gap-x-1 relative",onMouseleave:t=>(e=>{e.tooltip=!1})(e)},[h("div",R,[x(P,{name:"fade"},{default:y((()=>{var t,a,l;return[e.tooltip?(b(),L("div",J,[h("div",{class:$([(null==(t=null==e?void 0:e.customer_name)?void 0:t.trim())?"capitalize":"lowercase","bg-teal-04 px-4 py-2 text-sm rounded-lg left-0 text-white"])},_((null==(a=null==e?void 0:e.customer_name)?void 0:a.trim())?null==e?void 0:e.customer_name:null==(l=null==e?void 0:e.customer)?void 0:l.email),3)])):M("",!0)]})),_:2},1024),h("div",{class:$([(null==(t=null==e?void 0:e.customer_name)?void 0:t.trim())?"capitalize":"lowercase","text-teal-04 font-medium overflow-hidden break-all whitespace-nowrap overflow-ellipsis"]),onMouseenter:t=>((e,t)=>{const a=e.target;a.scrollWidth>a.clientWidth?t.tooltip=!0:t.tooltip=!1})(t,e)},_((null==(a=null==e?void 0:e.customer_name)?void 0:a.trim())?null==e?void 0:e.customer_name:null==(o=null==e?void 0:e.customer)?void 0:o.email),43,X),(null==e?void 0:e.expedited_payout_price)?(b(),L("div",Y,[x(q,{class:"text-green-04"}),l[0]||(l[0]=h("span",null,"Expedited Payout",-1))])):M("",!0)]),h("p",Z,[x(W,{value:parseFloat(e.sub_total).toFixed(2).toLocaleString()},null,8,["value"])])],40,Q),h("p",ee,_(e.order_datetimes),1)])]})),_:2},1032,["to"])])))),128))])):(b(),L("div",te,l[1]||(l[1]=[h("span",{class:"text-teal-02"},"Nothing to see here",-1)])))]})),_:2},[t.$slots.header?{name:"header",fn:y((()=>[k(t.$slots,"header",w(j({name:a.value.name,total:a.value.totalOrders})))])),key:"1"}:{name:"header",fn:y((()=>[h("div",H,[h("div",N,[x(s,{to:"#",class:"hover:underline transition-all ease-out duration-300"},{default:y((()=>[h("p",S,_(a.value.name),1)])),_:1}),h("div",V,_(a.value.totalOrders),1)])])])),key:"0"}]),1024)),[[r,null==(o=e.item)?void 0:o.isLoading]])}}},le={class:"flex justify-between"},oe={class:"flex items-center gap-x-2"},se={class:"text-xl font-medium text-teal-04"},re={class:"bg-teal-04 rounded-full px-2 py-0.5 text-sm inline-block text-center text-white flex items-center font-medium"},ie={__name:"DashboardCardList",setup(e){const t=B(),a=u([]),l=u(10),o=A((async()=>{t.$updatePersonalize({limit:l.value,data:a.value.map((e=>({id:e.id,parent_id:e.parent_id,name:e.name})))})}),300);return z((async()=>{const e=await t.$getPersonalize();a.value=e.data||[],l.value=e.limit||10,a.value.length&&a.value.map((async e=>{var a,o,s,r;e.isLoading=!0;const d=await t.$getItem(e.id,l.value);e.orders=(null==(o=null==(a=null==d?void 0:d.data)?void 0:a.data)?void 0:o.map((e=>n(i({},e),{tooltip:!1}))))||[],e.totalDevices=(null==(s=null==d?void 0:d.data)?void 0:s.total_devices)||0,e.totalOrders=(null==(r=null==d?void 0:d.data)?void 0:r.total)||0,e.isLoading=!1,e.link=e.parent_id?`/${"mailin"===t.buybackType?"order":"order-local"}/active/${e.parent_id}/${e.id}`:`/${"mailin"===t.buybackType?"order":"order-local"}/active/${e.id}`}))})),(e,t)=>{const l=m("router-link");return b(),g(I(F),{list:a.value,handle:".dragable__icon",class:$(["grid gap-4",1===a.value.length&&"grid-cols-1",2===a.value.length&&"md:grid-cols-2 grid-cols-1",a.value.length>=3&&"md:grid-cols-3 sm:grid-cols-2 grid-cols-1"]),onUpdate:I(o)},{default:y((()=>[x(D,{name:"slide-fade"},{default:y((()=>[(b(!0),L(O,null,C(a.value,((e,a)=>(b(),L("div",{key:a,class:"h-full"},[x(ae,{item:e},{header:y((({name:a,total:o})=>[h("div",le,[h("div",oe,[x(l,{to:(null==e?void 0:e.link)||"#",class:"hover:underline transition-all ease-out duration-300"},{default:y((()=>[h("p",se,_(a),1)])),_:2},1032,["to"]),h("div",re,_(o>99?"99+":o),1)]),t[0]||(t[0]=h("a",{href:"#",class:"dragable__icon hover:text-teal-04 text-teal-01 transition-all ease-in-out duration-300 cursor-pointer"},[h("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[h("path",{d:"M7.08341 4.58341L10.0001 1.66675M10.0001 1.66675L12.9167 4.58341M10.0001 1.66675V18.3334M18.3334 10.0001H1.66675M18.3334 10.0001L15.4167 12.9167M18.3334 10.0001L15.4167 7.08341M1.66675 10.0001L4.58341 7.08341M1.66675 10.0001L4.58341 12.9167M10.0001 18.3334L7.08341 15.4167M10.0001 18.3334L12.9167 15.4167",stroke:"currentColor","stroke-width":"2"})])],-1))])])),_:2},1032,["item"])])))),128))])),_:1})])),_:1},8,["list","class","onUpdate"])}}},ne={__name:"Cards",setup:e=>(e,t)=>(b(),g(ie))};export{ne as default};
