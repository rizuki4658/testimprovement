{"version":3,"file":"BSelect.221faeb2.js","sources":["../../src/components/BSelect/BSelect.vue"],"sourcesContent":["<template>\n  <div\n    :class=\"[\n      'b-select',\n      block && 'b-select--block',\n      disabled && 'b-select--disabled',\n      error && 'b-select--error'\n    ]\"\n  >\n    <BDropdown :block=\"block\" :offset=\"4\" :disabled=\"disabled\">\n      <template #default=\"{ isExpanded }\">\n        <div class=\"b-select-trigger\">\n          <button\n            :class=\"[\n              'b-select-trigger__button',\n              isExpanded && 'b-select-trigger__button--active'\n            ]\"\n          >\n            <div class=\"b-select-trigger__placeholder\">\n              <template v-if=\"hasSelectedItem\">\n                <slot\n                  v-bind=\"{ items: formattedSelectedItem }\"\n                  name=\"selected-item\"\n                >\n                  <template v-if=\"multiple\">\n                    <div\n                      v-for=\"item in formattedSelectedItem\"\n                      :key=\"item.key\"\n                      class=\"b-select-chip\"\n                    >\n                      <span>{{ item.name }}</span>\n                    </div>\n                  </template>\n                  <template v-else>\n                    <span>{{ formattedSelectedItem.name }}</span>\n                  </template>\n                </slot>\n              </template>\n              <template v-else>\n                <slot name=\"placeholder\">\n                  <p>{{ placeholderText }}</p>\n                </slot>\n              </template>\n            </div>\n            <div class=\"b-select-trigger__icon\">\n              <i class=\"material-icons\">keyboard_arrow_down</i>\n            </div>\n          </button>\n        </div>\n      </template>\n      <template #dropdown=\"{ collapse }\">\n        <div class=\"b-select-dropdown\">\n          <div v-if=\"$slots.prepend\" class=\"b-select-dropdown__prepend\">\n            <slot name=\"prepend\"></slot>\n          </div>\n          <div v-loading=\"loading\">\n            <div\n              class=\"b-select-dropdown__item-list\"\n              :style=\"{\n                maxHeight\n              }\"\n            >\n              <template v-if=\"items.length > 0\">\n                <template v-if=\"multiple\">\n                  <div\n                    v-for=\"item in items\"\n                    :key=\"item.key\"\n                    class=\"b-select-dropdown__item\"\n                  >\n                    <Checkbox\n                      :disabled=\"item.disabled\"\n                      :model-value=\"\n                        (multiple\n                          ? selectedItemKey.includes(item.key)\n                          : item.key == selectedItemKey) || (selectAll && !item.disabled)\n                      \"\n                      @click.prevent=\"selectItem(item)\"\n                      class=\"font-medium\"\n                    >\n                      {{ item.name }}\n                    </Checkbox>\n                  </div>\n                </template>\n                <template v-else>\n                  <div\n                    v-for=\"item in items\"\n                    :key=\"item.key\"\n                    :class=\"[\n                      'b-select-dropdown__item',\n                      item.disabled && 'b-select-dropdown__item--disabled',\n                      ((multiple\n                        ? selectedItemKey.includes(item.key)\n                        : item.key == selectedItemKey) ||\n                        selectAll) &&\n                        'b-select-dropdown__item--active'\n                    ]\"\n                    @click=\"\n                      () => {\n                        selectItem(item)\n                        !item.disabled && collapse()\n                      }\n                    \"\n                  >\n                    {{ item.name }}\n                  </div>\n                </template>\n              </template>\n              <template v-else>\n                <slot name=\"empty\">\n                  <div class=\"text-center px-4 pt-4 pb-6\">No item found</div>\n                </slot>\n              </template>\n            </div>\n          </div>\n          <div v-if=\"$slots.append\" class=\"b-select-dropdown__append\">\n            <slot name=\"append\" :collapse=\"collapse\"></slot>\n          </div>\n        </div>\n      </template>\n    </BDropdown>\n  </div>\n</template>\n<script>\nimport { computed, defineComponent } from 'vue'\n\nimport Checkbox from 'bbUi/components/checkbox/checkbox.vue'\nimport BDropdown from 'components/BDropdown/BDropdown.vue'\n\nexport default defineComponent({\n  name: 'BSelect',\n  components: {\n    Checkbox,\n    BDropdown\n  },\n  props: {\n    modelValue: {\n      type: [Object, Array, String],\n      default: () => ({})\n    },\n    multiple: {\n      type: Boolean,\n      default: false\n    },\n    placeholder: {\n      type: String,\n      default: ''\n    },\n    block: {\n      type: Boolean,\n      default: false\n    },\n    itemKey: {\n      type: [String, Function],\n      default: 'id'\n    },\n    itemName: {\n      type: [String, Function],\n      default: 'name'\n    },\n    itemDisabled: {\n      type: [String, Function],\n      default: 'disabled'\n    },\n    itemFilter: {\n      type: Function,\n      default: null\n    },\n    items: {\n      type: Array,\n      default: () => []\n    },\n    disabled: {\n      type: Boolean,\n      default: false\n    },\n    loading: {\n      type: Boolean,\n      default: false\n    },\n    maxHeight: {\n      type: [String, Number],\n      default: 'auto'\n    },\n    selectAll: {\n      type: Boolean,\n      default: false\n    },\n    error: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: ['update:modelValue', 'selectItem'],\n  setup(props, { emit }) {\n    const selectedItem = computed({\n      get: () => props.modelValue || (props.multiple ? [] : {}),\n      set: (value) => {\n        emit('update:modelValue', value)\n      }\n    })\n    const isFunctionItemKey = computed(\n      () => typeof props.itemKey === 'function'\n    )\n    const isFunctionItemName = computed(\n      () => typeof props.itemName === 'function'\n    )\n    const isFunctionDisabledItem = computed(() => {\n      return typeof props.itemDisabled === 'function'\n    })\n    const placeholderText = computed(() => {\n      return props.placeholder || 'Select an item'\n    })\n    const formattedSelectedItem = computed(() => {\n      if (props.multiple) {\n        return formatItems(selectedItem.value)\n      }\n      return formatItem(selectedItem.value)\n    })\n    const selectedItemKey = computed(() => {\n      if (props.multiple)\n        return selectedItem.value.map((item) => formatItemKey(item))\n      return formatItemKey(selectedItem.value)\n    })\n    const items = computed(() => {\n      return formatItems(props.items)\n    })\n    const hasSelectedItem = computed(() => {\n      if (props.selectAll) return true\n      if (props.multiple) return selectedItem.value.length > 0\n      return isFunctionItemKey.value\n        ? props.itemKey(selectedItem.value)\n        : selectedItem.value[props.itemKey]\n    })\n    const maxHeight = computed(() => {\n      if (\n        typeof props.maxHeight === 'number' ||\n        !isNaN(parseInt(props.maxHeight))\n      )\n        return `${props.maxHeight}px`\n      return props.maxHeight\n    })\n    const formatItemKey = (item) =>\n      isFunctionItemKey.value ? props.itemKey(item) : item[props.itemKey]\n    const formatItem = (item, itemIndex = null) => {\n      return {\n        key:\n          (isFunctionItemKey.value\n            ? props.itemKey(item)\n            : item[props.itemKey]) || itemIndex,\n        name: isFunctionItemName.value\n          ? props.itemName(item)\n          : item[props.itemName],\n        disabled:\n          (isFunctionDisabledItem.value\n            ? props.itemDisabled(item)\n            : item[props.itemDisabled]) || false,\n        value: item\n      }\n    }\n    const formatItems = (items = []) => {\n      const formattedItems = items.map(formatItem)\n      if (props.itemFilter) return formattedItems.filter(props.itemFilter)\n      return formattedItems\n    }\n    const selectItem = (currentItem) => {\n      const isDisabledItem = currentItem.disabled\n      if (isDisabledItem) return\n      if (props.multiple) {\n        const isCurrentItemSelected = selectedItemKey.value.includes(\n          currentItem.key\n        )\n        if (isCurrentItemSelected) {\n          selectedItem.value = selectedItem.value.filter((item) =>\n            isFunctionItemKey.value\n              ? props.itemKey(item)\n              : item[props.itemKey] !== currentItem.key\n          )\n          return\n        }\n        selectedItem.value = [...selectedItem.value, currentItem.value]\n        return\n      }\n      selectedItem.value = currentItem.value\n      emit('selectItem', currentItem.value)\n    }\n    return {\n      items,\n      selectedItem,\n      placeholderText,\n      hasSelectedItem,\n      formattedSelectedItem,\n      selectedItemKey,\n      maxHeight,\n      selectItem\n    }\n  }\n})\n</script>\n<style lang=\"scss\" scoped>\n.b-select {\n  $self: &;\n  @apply inline-block;\n  &--block {\n    @apply block;\n  }\n\n  &--disabled {\n    #{$self}-trigger {\n      &__button {\n        @apply text-grey-02 bg-grey-01 cursor-not-allowed;\n        &:active,\n        &:focus {\n          @apply border-grey-01;\n        }\n      }\n    }\n  }\n\n  &--error{\n    #{$self}-trigger{\n      &__button{\n        @apply border-red-04;\n        &:active,\n        &:focus {\n          @apply border-red-03;\n        }\n      }\n    }\n  }\n\n  &-dropdown {\n    @apply relative;\n    &__item {\n      @apply py-4 px-6 my-1 hover:bg-grey-lighten cursor-pointer;\n      &:not(:last-child) {\n        @apply border-b border-grey-01;\n      }\n\n      &--active {\n        @apply font-semibold;\n      }\n\n      &--disabled {\n        @apply text-grey-02 cursor-not-allowed;\n        background-color: rgba(0, 0, 0, 0.03);\n      }\n    }\n\n    &__item-list {\n      @apply border-t border-b border-grey-lighten relative overflow-y-auto;\n    }\n  }\n\n  &-trigger {\n    &__button {\n      @apply border border-grey-01 bg-white py-3 px-4 rounded-lg w-full text-left flex flex-wrap items-center justify-between;\n      &:active,\n      &:focus,\n      &--active {\n        @apply transition-colors duration-300 border-grey-04;\n      }\n    }\n  }\n\n  &-chip {\n    @apply inline-block py-1 px-4 mr-2 bg-grey-lighten text-sm rounded-full;\n  }\n}\n</style>\n"],"names":["_sfc_main","defineComponent","name","components","Checkbox","BDropdown","props","modelValue","type","Object","Array","String","default","multiple","Boolean","placeholder","block","itemKey","Function","itemName","itemDisabled","itemFilter","items","disabled","loading","maxHeight","Number","selectAll","error","emits","[object Object]","emit","selectedItem","computed","get","set","value","isFunctionItemKey","isFunctionItemName","isFunctionDisabledItem","placeholderText","formattedSelectedItem","formatItems","formatItem","selectedItemKey","map","item","formatItemKey","hasSelectedItem","length","isNaN","parseInt","itemIndex","key","items2","formattedItems","filter","selectItem","currentItem","includes","_hoisted_1","class","_hoisted_3","_openBlock","_createElementBlock","_ctx","_createVNode","_component_BDropdown","offset","_withCtx","isExpanded","_hoisted_2","$slots","_normalizeProps","_mergeProps","_Fragment","_renderList","_renderSlot","_cache","_createElementVNode","dropdown","collapse","_hoisted_4","prepend","_hoisted_5","_component_Checkbox","model-value","onClick","_withModifiers","$event","_hoisted_7"],"mappings":"oRAiIA,MAAKA,EAAaC,EAAa,CAC7BC,KAAM,UACNC,WAAY,CACVC,SAAAA,EACAC,UAAAA,GAEFC,MAAO,CACLC,WAAY,CACVC,KAAM,CAACC,OAAQC,MAAOC,QACtBC,QAAS,KAAO,KAElBC,SAAU,CACRL,KAAMM,QACNF,SAAS,GAEXG,YAAa,CACXP,KAAMG,OACNC,QAAS,IAEXI,MAAO,CACLR,KAAMM,QACNF,SAAS,GAEXK,QAAS,CACPT,KAAM,CAACG,OAAQO,UACfN,QAAS,MAEXO,SAAU,CACRX,KAAM,CAACG,OAAQO,UACfN,QAAS,QAEXQ,aAAc,CACZZ,KAAM,CAACG,OAAQO,UACfN,QAAS,YAEXS,WAAY,CACVb,KAAMU,SACNN,QAAS,MAEXU,MAAO,CACLd,KAAME,MACNE,QAAS,IAAM,IAEjBW,SAAU,CACRf,KAAMM,QACNF,SAAS,GAEXY,QAAS,CACPhB,KAAMM,QACNF,SAAS,GAEXa,UAAW,CACTjB,KAAM,CAACG,OAAQe,QACfd,QAAS,QAEXe,UAAW,CACTnB,KAAMM,QACNF,SAAS,GAEXgB,MAAO,CACLpB,KAAMM,QACNF,SAAS,IAGbiB,MAAO,CAAC,oBAAqB,cAC7BC,MAAMxB,GAAOyB,KAAEA,IACb,MAAMC,EAAeC,EAAS,CAC5BC,IAAK,IAAM5B,EAAMC,aAAeD,EAAMO,SAAW,GAAK,IACtDsB,IAAMC,IACJL,EAAK,oBAAqBK,MAGxBC,EAAoBJ,GACxB,IAA+B,mBAAlB3B,EAAMW,UAEfqB,EAAqBL,GACzB,IAAgC,mBAAnB3B,EAAMa,WAEfoB,EAAyBN,GAAS,IACD,mBAAvB3B,EAAMc,eAEhBoB,EAAkBP,GAAS,IACxB3B,EAAMS,aAAe,mBAExB0B,EAAwBR,GAAS,IACjC3B,EAAMO,SACD6B,EAAYV,EAAaI,OAE3BO,EAAWX,EAAaI,SAE3BQ,EAAkBX,GAAS,IAC3B3B,EAAMO,SACDmB,EAAaI,MAAMS,KAAKC,GAASC,EAAcD,KACjDC,EAAcf,EAAaI,SAE9Bd,EAAQW,GAAS,IACdS,EAAYpC,EAAMgB,SAErB0B,EAAkBf,GAAS,MAC3B3B,EAAMqB,YACNrB,EAAMO,SAAiBmB,EAAaI,MAAMa,OAAS,EAChDZ,EAAkBD,MACrB9B,EAAMW,QAAQe,EAAaI,OAC3BJ,EAAaI,MAAM9B,EAAMW,YAEzBQ,EAAYQ,GAAS,IAEI,iBAApB3B,EAAMmB,WACZyB,MAAMC,SAAS7C,EAAMmB,YAGjBnB,EAAMmB,UADJ,GAAGnB,EAAMmB,gBAGdsB,EAAiBD,GACrBT,EAAkBD,MAAQ9B,EAAMW,QAAQ6B,GAAQA,EAAKxC,EAAMW,SACvD0B,EAAa,CAACG,EAAMM,EAAY,QAC7B,CACLC,OACqBjB,MACf9B,EAAMW,QAAQ6B,GACdA,EAAKxC,EAAMW,WAAamC,EAC9BlD,KAAMoC,EAAmBF,MACrB9B,EAAMa,SAAS2B,GACfA,EAAKxC,EAAMa,UACfI,YAC0Ba,MACpB9B,EAAMc,aAAa0B,GACnBA,EAAKxC,EAAMc,iBAAkB,EACnCgB,MAAOU,IAGLJ,EAAc,CAACY,EAAQ,MACrB,MAAAC,EAAiBD,EAAMT,IAAIF,GACjC,OAAIrC,EAAMe,WAAmBkC,EAAeC,OAAOlD,EAAMe,YAClDkC,GAuBF,MAAA,CACLjC,MAAAA,EACAU,aAAAA,EACAQ,gBAAAA,EACAQ,gBAAAA,EACAP,sBAAAA,EACAG,gBAAAA,EACAnB,UAAAA,EACAgC,WA7BkBC,IAEd,IADmBA,EAAYnC,SAC/B,CACJ,GAAIjB,EAAMO,SAAU,CAIlB,OAH8B+B,EAAgBR,MAAMuB,SAClDD,EAAYL,UAGZrB,EAAaI,MAAQJ,EAAaI,MAAMoB,QAAQV,GAC9CT,EAAkBD,MACd9B,EAAMW,QAAQ6B,GACdA,EAAKxC,EAAMW,WAAayC,EAAYL,YAI5CrB,EAAaI,MAAQ,IAAIJ,EAAaI,MAAOsB,EAAYtB,QAG3DJ,EAAaI,MAAQsB,EAAYtB,MACjCL,EAAK,aAAc2B,EAAYtB,aA1QpBwB,EAAA,CAAAC,MAAM,8DAiCVC,EAAA,CAAAT,IAAK,oCACmBA,IAAK,uDA+DNA,IAAK,sIAjH/BU,OAAAA,IAAAC,EAAA,MAAA,UAA4B,WAAkCC,EAAQjD,OAAA,kBAAgCiD,EAAK1C,UAAA,mDAsHrG,CA/GA2C,EAAYC,EAAA,CAAGnD,QAASA,MAAGoD,OAAQ,uBAC3B,CAChBxD,QAAAyD,GAAA,EAAAC,WAAAA,KAqCM,GADK,MAAAV,EAAA,GAlCD,SAAA,UAA4D,oEAKlE,GACiC,MAAAW,EAAA,GAiBtBvB,kBAZmBiB,EAAAO,OAAA,gBAAAC,EAAAC,EAAA,CAAArB,IAAA,GAAA,CAAA/B,MAAA2C,EAAAxB,0BAAA,IAAA,qBAOhBkC,EAAA,CAAAtB,IAAA,GAAAuB,EAAAX,EAAAxB,uBAAAK,IAJMiB,IAAIC,EAAA,MAAA,CACdX,IAAKP,EAAgBO,2BAEO,8FASlC,GACEwB,EAAAZ,EAAAO,8BAAqB,IAAA,4CAKzBM,EAAA,KAAAA,EAAA,GAAGC,EAAM,aAAoC,0BAAA,sEAMnDC,SAAAX,GAAA,EAmEMY,SAAAA,KAAA,CAlEOF,EAAc,MAAAG,EAAA,CAAzBjB,EAAAO,OAAAW,SAC8BnB,IAAAA,EAAA,MAAAoB,EAAA,mDA4DtBrB,IAAAC,EAAA,MAAA,KAAA,CAxDJe,EAAoC,MAAA,CACnClB,MAAK,uCAA6B,0BAInB,gBA6CL,OA5CeG,EAAAW,EAAA,CAAAtB,IAAA,GAAA,qBAkBhBsB,EAAA,CAAAtB,IAAA,GAAAuB,EAAAX,EAAA3C,OAAAwB,IAfMiB,IAAIC,EAAA,MAAA,CACdX,IAAKP,EAA0BO,qCAapB,GAVMgC,EAAS,CACvB9D,SAAWuB,EAAAvB,SAAoC+D,eAA6BrB,EAAApD,SAA+DoD,EAAKrB,gBAAOe,SAAAb,2DAMxJyC,QAAmBC,GAAAC,GAAAxB,EAAAR,WAAAX,IAAA,CAAA,kCAEhBlC,QAAAyD,GAAA,IAAA,uFA0BDM,EAAA,CAAAtB,IAAA,GAAAuB,EAAAX,EAAA3C,OAAAwB,IAnBMiB,IAAIC,EAAA,MAAA,CACbX,IAAKP,EAAAO,aAA2E,4BAAsF9B,UAAA,sCAA2B0C,EAAApD,SAA6DoD,EAAKrB,gBAAsBe,SAAAb,EAAAO,KAAsCP,EAAAO,KAAAY,EAAArB,4EAUjQ,OAA8Ca,WAASX,qDAaxH+B,EAAAZ,EAAAO,OAAA,QAAA,CAAAnB,IAAA,IAAA,IAAK,8HAMqCW,IAAAA,EAAA,MAAnB0B,EAAU"}