import{f as e,g as a,y as s,m as t,$ as l,o as n,n as o,D as i,w as r,A as d,B as c,F as u,Q as g,ap as v,t as f,a1 as m,a2 as p,K as x,U as w,I as y,L as h,T as b,a4 as N,s as _}from"./vendor.9695fe57.js";import{a4 as k,e as L,b as j}from"./index.6438e939.js";import{u as I}from"./notes.04c74527.js";import{_ as C}from"./fieldset.85092f83.js";const H={class:u(["max-w-5xl bg-white rounded-xl p-16","w-full flex flex-col gap-y-8 border border-grey-01","shadow border-opacity-50 text-teal-base"]),style:{maxHeight:"calc(100vh - 4rem)"}},R={class:"space-y-4"},T={class:"flex items-center gap-x-3"},$={class:"font-medium text-grey-03"},U={key:0,class:"rounded-full bg-grey-03 px-3.5 py-0.5 text-white text-sm font-semibold"},B={class:"space-y-6"},V={class:"text-sm text-grey-02"},z={class:"capitalize"},E={class:"text-grey-04"},P={class:"flex-shrink-0"},W={class:"space-y-8"},A={class:"inline-flex gap-x-4 items-center"},D={class:"flex items-center justify-center gap-x-4"},F={__name:"BuybackNotesWarning",emits:["proceed"],setup(F,{emit:K}){const O=K,Q=I(),q=e(),G=e(null);e(!1);const J=e(!1),M=e(!1);e(15);const S=e(null),X=a((()=>{var e;return{checkbox:!J.value||!!Q.warningNotes.isLoading,button:!(null==(e=null==Q?void 0:Q.warningNotes)?void 0:e.isReviewed)||!!Q.warningNotes.isLoading}})),Y=()=>{clearTimeout(G.value),clearInterval(S.value),q.value&&q.value.removeEventListener("scroll",Z),Q.warningNotes.modal=!1,Q.warningNotes.isLoading=!1,Q.warningNotes.isReviewed=!1},Z=async e=>{const a=e.target,{scrollTop:s,scrollHeight:t,clientHeight:l}=a;s+l>=t-1?Q.warningNotes.page<Q.warningNotes.lastPage&&!Q.warningNotes.isLoading?await(async()=>{Q.warningNotes.page=Q.warningNotes.page+1,await Q.$getNotesUnread(),J.value=!1})():J.value=!0:J.value=!1},ee=async()=>{await Q.$updateNotesUnread()&&(Y(),O("proceed"))};return s((()=>Q.warningNotes.modal),(e=>{e&&_((()=>{if(q.value){M.value=!0,J.value=!1;const{scrollHeight:e,clientHeight:a}=q.value;e===a&&(M.value=!1,J.value=!0),q.value.addEventListener("scroll",Z)}}))})),(e,a)=>{const s=t("Tooltip"),_=l("loading");return n(),o(N,{to:"body"},[i(b,{name:"fade"},{default:r((()=>[d(c("div",{class:u(["bg-black bg-opacity-10","fixed inset-0 flex items-center","justify-center transition-all","ease-in-out duration-300"]),style:g({zIndex:v(Q).warningNotes.modal?1001:0})},[c("div",H,[a[5]||(a[5]=c("div",{class:"flex-shrink-0"},[c("div",{class:"space-y-8"},[c("img",{width:"95",height:"95",alt:"Warning Icon",src:k,class:"mx-auto"}),c("p",{class:"text-2xl font-medium text-center"},"The Offer Contains Internal Notes")])],-1)),c("div",{ref_key:"notesContainer",ref:q,class:u(["flex-1","overflow-y-auto"])},[c("div",R,[(n(!0),f(m,null,p(v(Q).warningNotes.notes,((e,s)=>(n(),f("div",{key:s},[e.order_notes.length?(n(),o(C,{key:0,class:"rounded-md"},{label:r((()=>{var a;return[c("div",T,[c("p",$,x(e.box_id),1),(null==(a=e.order_notes)?void 0:a.length)?(n(),f("div",U,x(e.order_notes.length),1)):w("",!0)])]})),default:r((()=>[c("div",B,[(n(!0),f(m,null,p(e.order_notes,((e,t)=>(n(),f("div",{key:`${s}_${t}`,class:"space-y-2"},[c("p",V,[a[1]||(a[1]=y("By ")),c("span",z,x(null==e?void 0:e.first_name)+" "+x(null==e?void 0:e.last_name),1),y(" - "+x(e.created_at),1)]),c("p",E,x(e.note),1)])))),128))])])),_:2},1024)):w("",!0)])))),128))])],512),d((n(),f("div",P,[c("div",W,[c("div",A,[i(s,{placement:"top-start",disabled:!X.value.checkbox},{content:r((()=>a[2]||(a[2]=[c("div",null," Read the notes first to change the offer status. ",-1)]))),default:r((()=>[c("div",null,[i(L,{modelValue:v(Q).warningNotes.isReviewed,"onUpdate:modelValue":a[0]||(a[0]=e=>v(Q).warningNotes.isReviewed=e),disabled:X.value.checkbox},null,8,["modelValue","disabled"])])])),_:1},8,["disabled"]),c("div",null,[c("p",{class:u(X.value.checkbox?"text-grey-01 cursor-not-allowed":"text-grey-03")}," I have reviewed the internal notes associated with this offer. ",2)])]),c("div",D,[i(j,{color:"teal",disabled:X.value.button,onClick:ee},{default:r((()=>a[3]||(a[3]=[y("Proceed")]))),_:1},8,["disabled"]),i(j,{color:"teal",view:"smooth",onClick:Y},{default:r((()=>a[4]||(a[4]=[y("Cancel")]))),_:1})])])])),[[_,v(Q).warningNotes.isLoading]])])],4),[[h,v(Q).warningNotes.modal]])])),_:1})])}}};export{F as _};
