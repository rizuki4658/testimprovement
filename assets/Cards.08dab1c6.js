var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,i=(t,a,l)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[a]=l;import{f as r,y as n,m as d,a0 as u,A as c,o as m,n as v,aO as p,w as f,B as x,D as b,K as g,q as y,G as h,H as _,t as w,a2 as k,a3 as j,T as O,F as L,U as M,W as $,aQ as D,ap as P}from"./vendor.f1efedad.js";import{g as C}from"./index.e231b017.js";import{u as I}from"./dashboard.6e5349d2.js";import{V as z}from"./vue-draggable-next.esm-bundler.0ebea46e.js";import{C as E}from"./card.de1f0319.js";import{C as F}from"./Currency.3768e3b3.js";import{_ as T}from"./ExpeditedIcon.db9b60c4.js";const U={class:"flex"},W={class:"flex items-center gap-x-2"},B={class:"text-xl font-medium text-teal-04"},H={class:"bg-teal-04 rounded-full px-2 py-0.5 text-sm inline-block text-center text-white flex items-center font-medium"},N={key:0,class:"space-y-2"},S={class:"w-full space-y-1 p-3"},V=["onMouseleave"],q={class:"flex items-center gap-4"},A={key:0,class:"absolute bottom-full pb-1"},G=["onMouseenter"],K={key:0,class:"w-max flex items-center gap-2 bg-green-lighten text-green-04 py-1 px-4 rounded-full text-sm"},Q={class:"font-medium text-teal-04 whitespace-nowrap"},J={class:"text-dark text-xs"},R={key:1,class:"flex items-center justify-center h-full"},X={__name:"DashboardCardItem",props:{item:{type:Object,default:()=>({id:null,shortName:null,name:null,isLoading:!0,totalDevices:0,totalOrders:0,orders:[]})}},setup(e){const t=e,a=r(t.item);return n((()=>t.item),(async e=>{a.value=e})),(t,l)=>{var s;const o=d("router-link"),i=u("loading");return c((m(),v(E,{class:"h-full"},p({default:f((()=>{var e,t;return[(null==(t=null==(e=a.value)?void 0:e.orders)?void 0:t.length)?(m(),w("div",N,[(m(!0),w(k,null,j(a.value.orders,((e,t)=>(m(),w("div",{key:t},[b(o,{class:"block cursor-pointer transition duration-200 rounded-lg hover:bg-grey-lighten",to:{name:1==e.buyback_type?"buybackOnlineDetail":"buybackLocalDetail",params:{buybackId:e.box_id,box_id_link:e.box_id_link}}},{default:f((()=>{var t,a,s;return[x("div",S,[x("div",{class:"flex justify-between gap-x-1 relative",onMouseleave:t=>(e=>{e.tooltip=!1})(e)},[x("div",q,[b(O,{name:"fade"},{default:f((()=>{var t,a,l;return[e.tooltip?(m(),w("div",A,[x("div",{class:L([(null==(t=null==e?void 0:e.customer_name)?void 0:t.trim())?"capitalize":"lowercase","bg-teal-04 px-4 py-2 text-sm rounded-lg left-0 text-white"])},g((null==(a=null==e?void 0:e.customer_name)?void 0:a.trim())?null==e?void 0:e.customer_name:null==(l=null==e?void 0:e.customer)?void 0:l.email),3)])):M("",!0)]})),_:2},1024),x("div",{class:L([(null==(t=null==e?void 0:e.customer_name)?void 0:t.trim())?"capitalize":"lowercase","text-teal-04 font-medium overflow-hidden break-all whitespace-nowrap overflow-ellipsis"]),onMouseenter:t=>((e,t)=>{const a=e.target;a.scrollWidth>a.clientWidth?t.tooltip=!0:t.tooltip=!1})(t,e)},g((null==(a=null==e?void 0:e.customer_name)?void 0:a.trim())?null==e?void 0:e.customer_name:null==(s=null==e?void 0:e.customer)?void 0:s.email),43,G),(null==e?void 0:e.expedited_payout_price)?(m(),w("div",K,[b(T,{class:"text-green-04"}),l[0]||(l[0]=x("span",null,"Expedited Payout",-1))])):M("",!0)]),x("p",Q,[b(F,{value:parseFloat(e.sub_total).toFixed(2).toLocaleString()},null,8,["value"])])],40,V),x("p",J,g(e.order_datetimes),1)])]})),_:2},1032,["to"])])))),128))])):(m(),w("div",R,l[1]||(l[1]=[x("span",{class:"text-teal-02"},"Nothing to see here",-1)])))]})),_:2},[t.$slots.header?{name:"header",fn:f((()=>[y(t.$slots,"header",h(_({name:a.value.name,total:a.value.totalOrders})))])),key:"1"}:{name:"header",fn:f((()=>[x("div",U,[x("div",W,[b(o,{to:"#",class:"hover:underline transition-all ease-out duration-300"},{default:f((()=>[x("p",B,g(a.value.name),1)])),_:1}),x("div",H,g(a.value.totalOrders),1)])])])),key:"0"}]),1024)),[[i,null==(s=e.item)?void 0:s.isLoading]])}}},Y={class:"flex justify-between"},Z={class:"flex items-center gap-x-2"},ee={class:"text-xl font-medium text-teal-04"},te={class:"bg-teal-04 rounded-full px-2 py-0.5 text-sm inline-block text-center text-white flex items-center font-medium"},ae={__name:"DashboardCardList",setup(e){const n=I(),u=r([]),c=r(10),p=C((async()=>{n.$updatePersonalize({limit:c.value,data:u.value.map((e=>({id:e.id,parent_id:e.parent_id,name:e.name})))})}),300);return $((async()=>{const e=await n.$getPersonalize();u.value=e.data||[],c.value=e.limit||10,u.value.length&&u.value.map((async e=>{var r,d,u,m;e.isLoading=!0;const v=await n.$getItem(e.id,c.value);e.orders=(null==(d=null==(r=null==v?void 0:v.data)?void 0:r.data)?void 0:d.map((e=>{return r=((e,t)=>{for(var a in t||(t={}))s.call(t,a)&&i(e,a,t[a]);if(l)for(var a of l(t))o.call(t,a)&&i(e,a,t[a]);return e})({},e),t(r,a({tooltip:!1}));var r})))||[],e.totalDevices=(null==(u=null==v?void 0:v.data)?void 0:u.total_devices)||0,e.totalOrders=(null==(m=null==v?void 0:v.data)?void 0:m.total)||0,e.isLoading=!1,e.link=e.parent_id?`/${"mailin"===n.buybackType?"order":"order-local"}/active/${e.parent_id}/${e.id}`:`/${"mailin"===n.buybackType?"order":"order-local"}/active/${e.id}`}))})),(e,t)=>{const a=d("router-link");return m(),v(P(z),{list:u.value,handle:".dragable__icon",class:L(["grid gap-4",1===u.value.length&&"grid-cols-1",2===u.value.length&&"md:grid-cols-2 grid-cols-1",u.value.length>=3&&"md:grid-cols-3 sm:grid-cols-2 grid-cols-1"]),onUpdate:P(p)},{default:f((()=>[b(D,{name:"slide-fade"},{default:f((()=>[(m(!0),w(k,null,j(u.value,((e,l)=>(m(),w("div",{key:l,class:"h-full"},[b(X,{item:e},{header:f((({name:l,total:s})=>[x("div",Y,[x("div",Z,[b(a,{to:(null==e?void 0:e.link)||"#",class:"hover:underline transition-all ease-out duration-300"},{default:f((()=>[x("p",ee,g(l),1)])),_:2},1032,["to"]),x("div",te,g(s>99?"99+":s),1)]),t[0]||(t[0]=x("a",{href:"#",class:"dragable__icon hover:text-teal-04 text-teal-01 transition-all ease-in-out duration-300 cursor-pointer"},[x("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"},[x("path",{d:"M7.08341 4.58341L10.0001 1.66675M10.0001 1.66675L12.9167 4.58341M10.0001 1.66675V18.3334M18.3334 10.0001H1.66675M18.3334 10.0001L15.4167 12.9167M18.3334 10.0001L15.4167 7.08341M1.66675 10.0001L4.58341 7.08341M1.66675 10.0001L4.58341 12.9167M10.0001 18.3334L7.08341 15.4167M10.0001 18.3334L12.9167 15.4167",stroke:"currentColor","stroke-width":"2"})])],-1))])])),_:2},1032,["item"])])))),128))])),_:1})])),_:1},8,["list","class","onUpdate"])}}},le={__name:"Cards",setup:e=>(e,t)=>(m(),v(ae))};export{le as default};
