import{k as a,r as e,y as t,m as s,o as l,t as o,B as n,D as i,a1 as d,a2 as r,K as c,w as u,I as p,S as m,O as y}from"./vendor.9695fe57.js";import{u as b,a as f}from"./easypost.540e1236.js";import{f as g,b as k,_ as v}from"./index.dcc9fc55.js";import{u as _}from"./index.f40e4a9e.js";import"./index.54844a74.js";import"./index.6b6f6369.js";const h=a({components:{Input:g,Button:k},props:{data:{type:Object,default:()=>({api_key:""})},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},emits:["submit"],setup(a,{emit:s}){const{rules:l}=b(),o=e({api_key:a.data.api_key}),n=_(l,o,{$lazy:!0});return t((()=>a.data),(a=>{o.api_key=a.api_key})),{data:o,validation:n,handleSubmit:()=>{n.value.$validate(),n.value.$invalid||s("submit",o)}}}}),w={class:"my-4"},x={class:"flex items-center"};const S=a({components:{Input:g,Button:k,FormConnect:v(h,[["render",function(a,e,t,y,b,f){const g=s("Input"),k=s("Button");return l(),o("form",{onSubmit:e[1]||(e[1]=m(((...e)=>a.handleSubmit&&a.handleSubmit(...e)),["prevent"]))},[n("div",w,[i(g,{modelValue:a.data.api_key,"onUpdate:modelValue":e[0]||(e[0]=e=>a.data.api_key=e),disabled:a.disabled,class:"mb-2",label:"API Key",placeholder:"Your API key",block:"",view:a.validation.api_key.$invalid?"danger":"default"},null,8,["modelValue","disabled","view"]),(l(!0),o(d,null,r(a.validation.api_key.$errors,((a,e)=>(l(),o("small",{class:"text-red-04",key:e},c(a.$message),1)))),128))]),n("div",x,[i(k,{disabled:a.disabled||!a.data.api_key,loading:a.loading,class:"my-4",color:"teal",block:""},{default:u((()=>e[2]||(e[2]=[p("Connect")]))),_:1},8,["disabled","loading"])])],32)}]])},async setup(){const a=y(),{credentials:t,loading:s,connect:l,setCredential:o}=b(),{status:n,loading:i,fetchStatus:d}=f(),r=e({api_key:null});return await d(),Object.assign(r,{api_key:t.value.api_key}),{data:r,loading:s,status:n,loadingStatus:i,handleSubmit:async({api_key:e})=>{o({api_key:e});try{await l(),a.push({name:"integrationEasypostConfig"})}catch(t){}}}}}),j={class:"pb-16 pt-4"},B={class:"md:w-1/3 w-full mx-auto my-8"};var C=v(S,[["render",function(a,e,t,d,r,c){const u=s("FormConnect");return l(),o("div",j,[e[1]||(e[1]=n("div",{class:"text-center my-6"},[n("img",{draggable:"false",class:"mx-auto my-2 select-none",src:"/assets/connect-easypost.6f88dcc3.svg",alt:"Connect Easypost",whitelabel:"image-replace","data-image-type":"easypost"}),n("p",{whitelabel:"text-replace","data-label":"addons host"}," Reusely.com would like to connect to your Easypost account ")],-1)),n("div",B,[i(u,{data:a.data,disabled:0==a.status.is_ready,loading:a.loading,onSubmit:a.handleSubmit},null,8,["data","disabled","loading","onSubmit"]),e[0]||(e[0]=n("div",{class:"my-2 text-center"},[n("a",{class:"transition duration:300 hover:bg-teal-01 hover:text-teal-04 rounded-lg p-4 block w-full",href:"https://www.easypost.com/login",target:"_blank",rel:"noopener noreferrer"},"Login to your Easypost Account")],-1))])])}]]);export{C as default};
