var e=Object.defineProperty,a=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,l=(a,t,o)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[t]=o;import{u as s}from"./components.41c6afd8.js";import{k as d,a5 as n,W as i,m as r,a0 as c,A as m,o as u,n as p,w as b,B as v,K as f,t as y,D as g,I as k,U as C,f as I,y as j,s as h,_ as D,a2 as _,a3 as w,O as x}from"./vendor.f1efedad.js";import{d as S,F as B,e as A,G as O,H as V}from"./buyback.362c230f.js";import{B as M}from"./Breadcrumb.e5dd1515.js";import{C as F}from"./card.de1f0319.js";import{b as U,_ as P,f as T,d as Q,g as R}from"./index.e231b017.js";import{_ as H}from"./badge.3a8a2c41.js";import{c as G}from"./status.6f59bf91.js";import{e as L}from"./setting.86482221.js";import{S as q}from"./select.04e4ee62.js";import{D as E}from"./Form.7a132e01.js";import{I as K}from"./ItemTable.20c5842c.js";import"./LoadingCard.9892fd7a.js";import"./date.f86face7.js";import"./breadcrumb.e60df23d.js";import"./device.153e721f.js";import"./auto-complete.e1e9f5d6.js";import"./index.32689823.js";import"./index.1c09f422.js";import"./Currency.3768e3b3.js";import"./Accordion.d79a8173.js";import"./BBTable.ed269e36.js";import"./DeviceSearch.34393d74.js";import"./BDropdown.58f98060.js";import"./DeviceGolfSpec.d24334a7.js";import"./BSelect.221faeb2.js";import"./fieldset.32ceb9ab.js";import"./dymo.5603a15d.js";import"./PrintLabel.2242c58e.js";const N=d({components:{Button:U,Card:F,Badge:H},props:{},setup(e){const{action:s,state:d,loading:r}=S("online"),c=n();return i((async()=>{await s(((e,s)=>{for(var d in s||(s={}))t.call(s,d)&&l(e,d,s[d]);if(a)for(var d of a(s))o.call(s,d)&&l(e,d,s[d]);return e})({id:c.params.buybackId},c.params.marketerId&&"me"===c.params.marketerId&&{marketer_id:""}||c.params.marketerId&&{marketer_id:c.params.marketerId}))})),{state:d,loading:r,color:G}}}),W={key:0,class:"my-4"},z={class:"flex items-center mb-2"},J={class:"items-center"};var X=P(N,[["render",function(e,a,t,o,l,s){const d=r("Badge"),n=r("Card"),i=c("loading");return m((u(),p(n,null,{header:b((()=>{var a;return[v("h6",null,"Buyback ID #"+f(null==(a=e.state)?void 0:a.box_id),1)]})),default:b((()=>{var t,o,l,s;return[(null==(t=e.state)?void 0:t.box_id)?(u(),y("div",W,[v("div",z,[a[0]||(a[0]=v("span",{class:"material-icons text-base mr-2"},"date_range",-1)),v("p",J,f((null==(o=e.state)?void 0:o.created_at)||"-"),1)]),g(d,{color:e.color((null==(s=null==(l=e.state)?void 0:l.order_status)?void 0:s.short_name)||"-")},{default:b((()=>{var a,t;return[k(f((null==(t=null==(a=e.state)?void 0:a.order_status)?void 0:t.status_name)||"-"),1)]})),_:1},8,["color"])])):C("",!0)]})),_:1})),[[i,e.loading]])}]]);const Y=d({components:{Button:U,Card:F,Badge:H,Input:T,Select:q,Modal:Q,DeviceForm:E},props:{},setup(e){const{loading:a,state:t,filters:o,modal:l,data:s,actionShow:d,actionCreate:r,setSelectedDevice:c,unsetSelectedDevice:m}=B(),{actionAll:u}=A("online"),{actionAll:p,stateAll:b,filter:v,loading:f}=L(),y=n(),g=I(null);return j((()=>o),R((()=>{d(y.params.buybackId)}),500),{deep:!0}),i((async()=>{v.is_notpaginate=1,await Promise.all([d(y.params.buybackId),p()])})),{refDeviceForm:g,data:s,stateConditions:b,state:t,loading:a,loadingCondition:f,filters:o,modal:l,handleQuickAdd:e=>{c(e),l.create=!0},handleAddDevice:async()=>{await h((()=>g.value.validate()))&&await r(y.params.buybackId,(async()=>{D({type:"success",message:"Item added"}),l.create=!1,await u(y.params.buybackId,!0)}))},unsetSelectedDevice:m}}}),Z={class:"grid grid-cols-5 gap-4 mb-4"},$={class:"col-span-3"},ee={class:"col-span-2"},ae={class:"overflow-y-auto min-h-max",style:{maxHeight:"450px",minHeight:"60px"}},te={key:0,class:"mt-6"},oe={class:"font-semibold text-teal-04 mb-3"},le={class:"flex justify-between"},se={class:"mr-3"},de={class:"font-bold"},ne={class:"mr-3"},ie={class:"font-bold"},re={class:"mr-3"},ce={class:"font-bold"},me={key:1,class:"mt-8 mb-4"},ue={class:"flex justify-end"};var pe=P(Y,[["render",function(e,a,t,o,l,s){const d=r("Input"),n=r("Select"),i=r("Button"),p=r("Card"),C=r("DeviceForm"),I=r("Modal"),j=c("loading");return u(),y(_,null,[g(p,null,{header:b((()=>a[6]||(a[6]=[v("h6",null,"Items",-1)]))),default:b((()=>{var t;return[v("div",null,[v("div",Z,[v("div",$,[g(d,{modelValue:e.filters.search,"onUpdate:modelValue":a[0]||(a[0]=a=>e.filters.search=a),placeholder:"Search items",block:""},null,8,["modelValue"])]),v("div",ee,[g(n,{modelValue:e.filters.condition,"onUpdate:modelValue":a[1]||(a[1]=a=>e.filters.condition=a),placeholder:"Condition",class:"w-full",items:e.stateConditions,by:"condition_name",name:"condition_name",loading:e.loadingCondition.all},null,8,["modelValue","items","loading"])])]),m((u(),y("div",ae,[(null==(t=e.state.data)?void 0:t.length)?(u(),y("div",te,[(u(!0),y(_,null,w(e.state.data,((t,o)=>(u(),y("div",{key:o,class:"flex justify-between items-center mb-8"},[v("div",null,[v("p",oe,f(t.product_name),1),v("div",le,[v("p",se,[a[7]||(a[7]=k("Qty: ")),v("span",de,f(t.qty),1)]),v("p",ne,[a[8]||(a[8]=k("Price: ")),v("span",ie,f(t.price),1)]),v("p",re,[a[9]||(a[9]=k("Condition: ")),v("span",ce,f(t.condition),1)])])]),v("div",null,[g(i,{onClick:a=>e.handleQuickAdd(t),color:"teal",dense:""},{default:b((()=>a[10]||(a[10]=[k("Quick Add")]))),_:2},1032,["onClick"])])])))),128))])):(u(),y("div",me,a[11]||(a[11]=[v("p",{class:"font-semibold text-center"},"No data",-1)])))])),[[j,e.loading.all]])])]})),_:1}),g(I,{modelValue:e.modal.create,"onUpdate:modelValue":a[5]||(a[5]=a=>e.modal.create=a),title:"Quick Add Item",onClose:e.unsetSelectedDevice},{default:b((()=>[g(C,{ref:"refDeviceForm","auto-fill":"",data:e.data.selected.device.detail,"onUpdate:data":a[2]||(a[2]=a=>e.data.selected.device.detail=a),device:e.data.selected.device.specs.device,"onUpdate:device":a[3]||(a[3]=a=>e.data.selected.device.specs.device=a),dataComputer:e.data.selected.device.specs.computer,"onUpdate:dataComputer":a[4]||(a[4]=a=>e.data.selected.device.specs.computer=a),"multi-imei":""},null,8,["data","device","dataComputer"])])),footer:b((()=>[v("div",ue,[g(i,{onClick:e.handleAddDevice,loading:e.loading.create,color:"teal",view:"outlined"},{default:b((()=>a[12]||(a[12]=[k("Add")]))),_:1},8,["onClick","loading"])])])),_:1},8,["modelValue","onClose"])],64)}]]);const be=d({components:{Card:F,Button:U,Modal:Q,ItemTable:K,DeviceForm:E},async setup(){const{device:e,modal:a,unsetData:t,openModal:o,loading:l,actionCreate:s}=A("online"),d=n(),i=I(null);return{refDeviceForm:i,loading:l,device:e,modal:a,unsetData:t,openModal:o,actionCreate:s,loadingShow:O,addDevice:async()=>{await h((()=>i.value.validate()))&&await s(d.params.buybackId,(async()=>{D({type:"success",message:"Item added"})}),!0)}}}}),ve={class:"flex justify-between items-center"};const fe=d({components:{Breadcrumb:M,Card:F,Button:U,Show:X,Devices:pe,Items:P(be,[["render",function(e,a,t,o,l,s){const d=r("Button"),n=r("ItemTable"),i=r("Card"),f=r("DeviceForm"),C=r("Modal"),I=c("loading");return u(),y(_,null,[m((u(),p(i,null,{header:b((()=>[v("div",ve,[a[5]||(a[5]=v("h6",null,"Data Match Items",-1)),g(d,{color:"teal",dense:"",onClick:a[0]||(a[0]=a=>e.openModal("create"))},{default:b((()=>a[4]||(a[4]=[v("i",{class:"material-icons mr-2"},"add",-1),k("Add Item")]))),_:1})])])),default:b((()=>[g(n,{"scan-in":"","buyback-type":"mailin"})])),_:1})),[[I,e.loadingShow.items.all]]),g(C,{modelValue:e.modal.create,"onUpdate:modelValue":a[3]||(a[3]=a=>e.modal.create=a),title:"Add Item",onClose:e.unsetData},{default:b((()=>[g(f,{ref:"refDeviceForm",data:e.device.data,"onUpdate:data":a[1]||(a[1]=a=>e.device.data=a),dataComputer:e.device.computer,"onUpdate:dataComputer":a[2]||(a[2]=a=>e.device.computer=a),"multi-imei":"","buyback-type":"mailin"},null,8,["data","dataComputer"])])),footer:b((()=>[g(d,{color:"teal",loading:e.loading.create,onClick:e.addDevice},{default:b((()=>a[6]||(a[6]=[k("Add Item")]))),_:1},8,["loading","onClick"])])),_:1},8,["modelValue","onClose"])],64)}]])},props:{},async setup(){const{loading:e,actionSave:a,actionRestore:t}=V(),{actionAll:o}=A("online"),l=n(),s=x();return{breadcrumb:[{text:"Mail-In",to:{name:"buybackOnline"}},{text:"Offer Detail",to:{name:"buybackOnlineDetail",params:{buybackId:l.params.buybackId}}},{text:"Data Match"}],loading:e,route:l,handleRestore:()=>t(l.params.buybackId,(async()=>{await o(l.params.buybackId,!0),D({type:"success",message:"Data match restored"})})),handleSave:()=>a(l.params.buybackId,(async()=>{await o(l.params.buybackId,!0),D({type:"success",message:"Data match saved"}),s.push({name:"buybackOnlineDetail",params:{buybackId:l.params.buybackId}})}))}}}),ye={class:"flex justify-center justify-between"},ge={class:"grid gap-6 grid-cols-8"},ke={class:"col-span-8 xl:col-span-2 lg-col-span-2"},Ce={class:"col-span-8 xl:col-span-6 lg-col-span-6"};var Ie=P(fe,[["render",function(e,a,t,o,l,s){const d=r("Breadcrumb"),n=r("Button"),i=r("Show"),c=r("Devices"),m=r("Items");return u(),y("div",null,[v("div",ye,[g(d,{class:"mb-12","page-title":"Data Match",backTo:{name:"buybackOnlineDetail",params:{buybackId:e.route.params.buybackId}},items:e.breadcrumb},null,8,["backTo","items"]),v("div",null,[g(n,{onClick:e.handleRestore,class:"mr-4",color:"orange",view:"outlined",loading:e.loading.restore},{default:b((()=>a[0]||(a[0]=[v("i",{class:"material-icons mr-1"},"replay",-1),k(" Restore")]))),_:1},8,["onClick","loading"]),g(n,{onClick:e.handleSave,color:"teal",view:"outlined",loading:e.loading.save},{default:b((()=>a[1]||(a[1]=[v("i",{class:"material-icons mr-1"},"save",-1),k(" Save")]))),_:1},8,["onClick","loading"])])]),v("div",ge,[v("div",ke,[g(i,{class:"mb-8"}),g(c)]),v("div",Ce,[g(m)])])])}]]),je=d({setup(){const{genSuspense:e}=s();return()=>[e(Ie)]}});export{je as default};
