import{u as e}from"./components.dd762bd4.js";import{k as a,g as t,r as l,m as i,$ as n,o as s,n as o,w as r,B as d,D as c,A as u,t as m,a1 as p,a2 as f,K as y,I as v,y as x,N as b,f as _,U as g,L as w,F as h,_ as C}from"./vendor.9695fe57.js";import{E as k}from"./setting.1af98a84.js";import{j as z,f as A,b as q,_ as S,u as j}from"./index.6438e939.js";import{C as T}from"./card.33d29bf3.js";import{B as L}from"./Breadcrumb.cb17adf4.js";import{_ as V}from"./auto-complete.f5ad78ed.js";import{u as B}from"./index.f40e4a9e.js";import{f as U,g as P,r as $}from"./index.6b6f6369.js";import"./LoadingCard.6426fb93.js";import"./breadcrumb.0bf6764a.js";const O=a({components:{Card:T,Alert:z,Input:A,Button:q},props:{modelValue:{type:[String,Number],default:0},loading:{type:Object,default:()=>({all:!1,update:!1})}},emits:["update:modelValue","update"],setup(e,{emit:a}){const i=t({set:e=>{if(e>90)return i.value=90,null;a("update:modelValue",e)},get:()=>e.modelValue}),n=l({expired_days:i}),s={expired_days:{minValue:U(0),maxValue:P(90)}},o=B(s,n,{$lazy:!0}),r=()=>(o.value.$validate(),!o.value.$invalid);return{expiredDays:i,validation:o,validate:r,handleUpdatePriceLock:()=>{r()&&a("update",i.value)}}}}),D={class:"flex justify-end"};var I=S(O,[["render",function(e,a,t,l,x,b){const _=i("Alert"),g=i("Input"),w=i("Button"),h=i("Card"),C=n("maska");return s(),o(h,null,{header:r((()=>a[1]||(a[1]=[d("div",{class:"flex items-center flex-wrap"},[d("i",{class:"material-icons mr-4"},"lock"),d("h6",{class:"text-lg font-semibold"},"Price Lock Settings")],-1)]))),default:r((()=>[c(_,{color:"blue",view:"smooth",class:"mb-5",style:{"padding-top":"0","padding-bottom":"0",width:"max-content"},dense:""},{left:r((()=>a[2]||(a[2]=[d("span",{class:"material-icons text-2xl"},"info",-1)]))),default:r((()=>[a[3]||(a[3]=d("div",{class:"flex items-center h-full"}," This is the amount of days your buyback offer is valid. Buybacks created that go past this many days will automatically move into expired offers. ",-1))])),_:1}),u((s(),o(g,{modelValue:e.expiredDays,"onUpdate:modelValue":a[0]||(a[0]=a=>e.expiredDays=a),class:"w-52",icon:"","icon-block":"",right:"",view:e.validation.expired_days.$invalid?"danger":"default"},{icon:r((()=>a[4]||(a[4]=[d("span",{class:"text-sm"},"Days",-1)]))),_:1},8,["modelValue","view"])),[[C,"##"]]),(s(!0),m(p,null,f(e.validation.expired_days.$errors,((e,a)=>(s(),m("small",{class:"text-red-base block",key:a},y(e.$message)+". ",1)))),128)),a[5]||(a[5]=d("small",{class:"block mt-4"},[d("span",{class:"font-semibold"},"Max Days"),v(": Up to 90 days")],-1))])),footer:r((()=>[d("div",D,[c(w,{color:"teal",view:"smooth",onClick:e.handleUpdatePriceLock,loading:e.loading.update},{default:r((()=>a[6]||(a[6]=[v("Save")]))),_:1},8,["onClick","loading"])])])),_:1})}]]);const G=a({components:{Card:T,Alert:z,Input:A,Button:q},props:{data:{type:Object,default:()=>({prefix_order_number_sequence:"AS",preview:"AS00001"})},loading:{type:Object,default:()=>({all:!1,update:!1})}},emits:["update"],setup(e,{emit:a}){var t;const i=l({prefix_order_number_sequence:e.data.prefix_order_number_sequence||"AS",zero_padding_order_number_sequence:e.data.zero_padding_order_number_sequence||5,preview:(null==(t=e.data)?void 0:t.preview)||"AS00001"}),n=B({prefix_order_number_sequence:{required:$}},i,{$lazy:!0}),s=()=>(n.value.$validate(),!n.value.$invalid);return x((()=>e.data),(e=>{Object.assign(i,{prefix_order_number_sequence:e.prefix_order_number_sequence,preview:e.preview})}),{deep:!0}),{data:i,validation:n,validate:s,handleUpdateBuybackPrefix:()=>{s()&&a("update",i)}}}}),F={class:"grid grid-cols-1 gap-6"},N={class:"flex justify-end"};const E=a({components:{Card:T,Breadcrumb:L,Button:q,Alert:z,Input:A,Autocomplete:V,PriceLock:I,BuybackPrefix:S(G,[["render",function(e,a,t,l,x,b){const _=i("Input"),g=i("Button"),w=i("Card"),h=n("maska");return s(),o(w,null,{header:r((()=>a[2]||(a[2]=[d("div",{class:"flex items-center flex-wrap"},[d("i",{class:"material-icons mr-4"},"shopping_basket"),d("h6",{class:"text-lg font-semibold"},"Buyback Number Settings")],-1)]))),default:r((()=>[d("div",F,[d("div",null,[u(c(_,{modelValue:e.data.prefix_order_number_sequence,"onUpdate:modelValue":a[0]||(a[0]=a=>e.data.prefix_order_number_sequence=a),label:"Buyback Prefix",class:"w-52",view:e.validation.prefix_order_number_sequence.$invalid?"danger":"default"},null,8,["modelValue","view"]),[[h,"S*"]]),(s(!0),m(p,null,f(e.validation.prefix_order_number_sequence.$errors,((e,a)=>(s(),m("small",{class:"text-red-base block",key:a},y(e.$message)+". ",1)))),128))]),d("div",null,[c(_,{modelValue:e.data.preview,"onUpdate:modelValue":a[1]||(a[1]=a=>e.data.preview=a),label:"Preview",class:"w-52",disabled:"",loading:e.loading.all},null,8,["modelValue","loading"])])])])),footer:r((()=>[d("div",N,[c(g,{color:"teal",view:"smooth",onClick:e.handleUpdateBuybackPrefix,loading:e.loading.update},{default:r((()=>a[3]||(a[3]=[v("Save")]))),_:1},8,["onClick","loading"])])])),_:1})}]])},async setup(){const e=b(),{actionShow:a,actionShowCountries:i,actionShowTimezones:n,actionShowPriceLock:s,actionShowBuybackPrefix:o,data:r,actionUpdate:d,actionUpdateCountry:c,actionUpdateTimezone:u,actionUpdatePriceLock:m,loading:p,loadingCountry:f,loadingTimezone:y,loadingPriceLock:v,loadingBuybackPrefix:x,stateUpdate:g}=k(),{me:w}=j();await Promise.all([a(),i(),n(),s(),o()]);const h=r.currencies,z=r.countries,A=r.timezones,q=_(e.state.user.me.currency),S=_(z.find((e=>e.country_code===w.value.country_code))||null),T=_(A.find((e=>e.timezone===w.value.timezone))||null),L=l({is_visibled:!1,is_loading:!1,query:null}),V=l({is_visibled:!1,is_loading:!1,query:null}),B=l({is_visibled:!1,is_loading:!1,query:null}),U=t((()=>{const e=[...h].find((e=>e.currency_code===q.value)),a=[...h].filter((e=>L.query?e.currency_code.toLowerCase().includes(L.query.toLowerCase()):"USD"===e.currency_code||"GBP"===e.currency_code||"AUD"===e.currency_code||"EUR"===e.currency_code?e:void 0));return[...a].find((a=>a.id===e.id))?[...a]:[e,...a]})),P=t((()=>{let e=!!S.value&&[...z].find((e=>e.country_code===S.value.country_code))||null;const a=[...z].filter((a=>!(!!e&&e.id===a.id)&&(!V.query||a.nicename.toLowerCase().indexOf(V.query.toLowerCase())>-1)));return e&&a.unshift(e),a})),$=t((()=>{let e=!!T.value&&[...A].find((e=>e.timezone===T.value.timezone))||null;const a=[...A].filter((a=>!(!!e&&e.timezone===a.timezone)&&(!B.query||a.timezone_text.toLowerCase().indexOf(B.query.toLowerCase())>-1)));return e&&a.unshift(e),a})),O=t((()=>{const e=[...h].find((e=>{if(e.currency_code===q.value)return e.country_code}));return e?e.country_code:null}));return{data:r,timezones:A,breadcrumb:[{text:"Settings",to:{name:"setting"}},{text:"General Settings"}],currencyActive:q,countryActive:S,timezoneActive:T,currencies:h,countries:z,handleCommand:async e=>{const a=[...h].find((a=>a.id===e));q.value=a.currency_code,L.is_visibled=!1},saveActionCurrency:async()=>{const e=[...h].find((e=>e.currency_code===q.value));e&&(await d({currency:e.currency_code}),"saved"==g.value&&C({message:"General settings updated!.",type:"success"}))},saveActionCountry:async()=>{!!S.value&&await c({country_code:S.value.country_code},(()=>{C({message:"General settings updated!.",type:"success"})}))},loading:p,loadingCountry:f,loadingTimezone:y,loadingPriceLock:v,loadingBuybackPrefix:x,defaultListCurrency:U,defaultListCountry:P,defaultListTimezone:$,dropdown:L,dropdownCountry:V,dropdownTimezone:B,handleClickOutside:()=>{L.is_visibled=!1},handleClickOutsideCountry:()=>{V.is_visibled=!1},handleClickOutsideTimezone:()=>{B.is_visibled=!1},handleCountryChange:e=>{const a=[...z].find((a=>a.id===e));S.value=a,V.is_visibled=!1},handleTimezoneChange:e=>{const a=[...A].find((a=>a.timezone===e));T.value=a,B.is_visibled=!1},handleUpdatePriceLock:async()=>{await m((()=>{C({type:"success",message:"General setting updated"})}))},handleUpdateBuybackPrefix:async e=>{e.zero_padding_order_number_sequence=parseInt(String(e.zero_padding_order_number_sequence)),await d(e,(async()=>{C({type:"success",message:"Buyback number prefix updated"}),await o()}))},updateTimezone:async()=>{if(!!T.value){const e={timezone:T.value.timezone};await u(e,(()=>{C({type:"success",message:"Timezone updated"})}))}},currencyFlagActive:O}}}),K={class:"flex xl:flex-row flex-col justify-between mb-8"},M={class:"h-full inline-flex border border-grey-01 rounded-md text-center flex items-center justify-center relative"},R={key:0,class:"inline-block mr-2"},W=["src"],Z={class:"text-base"},H={class:"bg-white absolute z-50 border rounded border-grey-01 shadow py-4 left-0 top-14",style:{"min-width":"144px"}},J={class:"px-4"},Q={class:"mt-4 max-h-60 overflow-x-auto"},X=["onClick"],Y={class:"-mx-2 px-4 text-sm"},ee={class:"flex items-center"},ae={key:0,class:"w-min"},te={key:0,class:"material-icons text-sm text-teal-04"},le={class:"flex flex-row"},ie=["src"],ne={class:"flex justify-end"},se={class:"overflow-visible"},oe={class:"inline-block"},re={class:"h-full inline-flex border border-grey-01 rounded-md text-center flex items-center justify-center relative"},de={class:"text-base"},ce={class:"inline-block ml-2"},ue=["src"],me={class:"bg-white absolute z-50 border rounded border-grey-01 shadow py-4 left-0 top-14",style:{"min-width":"144px"}},pe={class:"px-4"},fe={class:"mt-4 max-h-60 overflow-x-auto"},ye=["onClick"],ve={class:"flex justify-start items-center -mx-2 text-sm"},xe={class:"flex flex-row items-center px-2"},be={key:0,class:"flex-1 mr-4"},_e={class:"flex-1"},ge={class:"flex justify-end"},we={class:"h-full inline-flex border border-grey-01 rounded-md text-center flex items-center justify-center relative"},he={class:"text-base"},Ce={class:"bg-white absolute z-50 border rounded border-grey-01 shadow py-4 left-0 top-14",style:{"min-width":"144px"}},ke={class:"px-4"},ze={class:"mt-4 max-h-60 overflow-x-auto"},Ae=["onClick"],qe={class:"-mx-2 px-4 text-sm"},Se={class:"flex items-center"},je={key:0,class:"w-min mr-2"},Te={key:0,class:"material-icons text-sm text-teal-04"},Le={class:"flex flex-row"},Ve={class:"flex justify-end"};var Be=S(E,[["render",function(e,a,t,l,x,b){const _=i("Breadcrumb"),C=i("Input"),k=i("Button"),z=i("Card"),A=i("Alert"),q=n("loading"),S=n("outside");return s(),m("div",null,[d("div",K,[c(_,{pageTitle:"General Settings",backTo:{name:"setting"},items:e.breadcrumb},null,8,["items"])]),c(z,{class:"mb-6",style:{overflow:"unset"}},{header:r((()=>a[6]||(a[6]=[d("div",{class:"flex items-center"},[d("i",{class:"material-icons mr-4"},"language"),d("h6",{class:"text-lg font-semibold"},"Country Settings")],-1)]))),footer:r((()=>[d("div",ne,[c(k,{view:"smooth",color:"teal",onClick:e.saveActionCountry,loading:e.loadingCountry.update},{default:r((()=>a[8]||(a[8]=[v("Save")]))),_:1},8,["onClick","loading"])])])),default:r((()=>[u((s(),m("div",M,[d("div",{class:"flex items-center justify-center cursor-pointer py-2 pl-4 pr-2 w-60",onClick:a[0]||(a[0]=a=>e.dropdownCountry.is_visibled=!e.dropdownCountry.is_visibled)},[e.countryActive?(s(),m("span",R,[d("img",{src:`/flag/${e.countryActive.country_code.toLowerCase()}.svg`,width:"16"},null,8,W)])):g("",!0),d("span",Z,y(e.countryActive?e.countryActive.nicename:"Choose Country"),1),a[7]||(a[7]=d("span",{class:"inline-block ml-4"},[d("span",{class:"material-icons text-lg"}," arrow_drop_down ")],-1))]),u((s(),m("div",H,[d("div",J,[c(C,{modelValue:e.dropdownCountry.query,"onUpdate:modelValue":a[1]||(a[1]=a=>e.dropdownCountry.query=a),placeholder:"Search Country",class:"w-full overflow-ellipsis text-sm",icon:""},null,8,["modelValue"])]),d("div",Q,[d("ul",null,[(s(!0),m(p,null,f(e.defaultListCountry,((a,t)=>(s(),m("li",{key:t,onClick:t=>e.handleCountryChange(a.id),class:"text-left p-2 hover:bg-grey-lighten cursor-pointer px-4"},[d("div",Y,[d("div",ee,[e.countryActive?(s(),m("div",ae,[a.country_code===e.countryActive.country_code?(s(),m("span",te," check_circle ")):g("",!0)])):g("",!0),d("div",le,[d("img",{class:"mx-4",src:`/flag/${a.country_code.toLowerCase()}.svg`,width:"16"},null,8,ie),d("span",null,y(a.nicename),1)])])])],8,X)))),128))])])])),[[w,e.dropdownCountry.is_visibled],[q,e.dropdownCountry.is_loading]])])),[[S,e.handleClickOutsideCountry]])])),_:1}),u((s(),o(z,{class:"mb-6",style:{overflow:"unset"}},{header:r((()=>a[9]||(a[9]=[d("div",{class:"flex items-center"},[d("i",{class:"material-icons mr-4"},"local_atm"),d("h6",{class:"text-lg font-semibold"},"Currency Settings")],-1)]))),footer:r((()=>[d("div",ge,[c(k,{view:"smooth",color:"teal",onClick:e.saveActionCurrency},{default:r((()=>a[15]||(a[15]=[v("Save")]))),_:1},8,["onClick"])])])),default:r((()=>[d("div",se,[d("div",oe,[c(A,{color:"orange",view:"smooth",class:"mb-5",style:{"padding-top":"0","padding-bottom":"0"},dense:""},{left:r((()=>a[10]||(a[10]=[d("span",{class:"material-icons text-2xl"},"info",-1)]))),default:r((()=>[a[11]||(a[11]=d("div",{class:"flex items-center h-full"},[d("span",{class:"font-bold"},"Warning"),v(": Price sync is currently only available for USD ")],-1))])),_:1})]),d("div",null,[a[14]||(a[14]=d("h6",{class:"text-sm font-semibold mb-1"},"Currency",-1)),u((s(),m("div",re,[d("div",{class:"flex items-center justify-center cursor-pointer py-2 pl-4 pr-2 w-40",onClick:a[2]||(a[2]=a=>e.dropdown.is_visibled=!e.dropdown.is_visibled)},[d("span",de,y(e.currencyActive?e.currencyActive:"Choose Currency"),1),d("span",ce,[d("img",{src:`/flag/${e.currencyFlagActive.toLowerCase()}.svg`,width:"16"},null,8,ue)]),a[12]||(a[12]=d("span",{class:"inline-block ml-4"},[d("span",{class:"material-icons text-lg"}," arrow_drop_down ")],-1))]),u((s(),m("div",me,[d("div",pe,[c(C,{modelValue:e.dropdown.query,"onUpdate:modelValue":a[3]||(a[3]=a=>e.dropdown.query=a),placeholder:"Search Currency",class:"w-full overflow-ellipsis text-sm",icon:""},null,8,["modelValue"])]),d("div",fe,[d("ul",null,[(s(!0),m(p,null,f(e.defaultListCurrency,((t,l)=>(s(),m("li",{key:l,class:h(["text-left p-2 hover:bg-grey-lighten cursor-pointer px-4",{"bg-grey-lighten":e.currencyActive===t.currency_code}]),onClick:a=>e.handleCommand(t.id)},[d("div",ve,[d("div",xe,[t.currency_code===e.currencyActive?(s(),m("div",be,a[13]||(a[13]=[d("span",{class:"material-icons text-sm text-teal-04"}," check_circle ",-1)]))):g("",!0),d("div",_e,y(t.currency_code),1)])])],10,ye)))),128))])])])),[[w,e.dropdown.is_visibled],[q,e.dropdown.is_loading]])])),[[S,e.handleClickOutside]])])])])),_:1})),[[q,e.loading.update||e.loading.all]]),c(z,{class:"mb-6",style:{overflow:"unset"}},{header:r((()=>a[16]||(a[16]=[d("div",{class:"flex items-center"},[d("i",{class:"material-icons mr-4"},"watch_later"),d("h6",{class:"text-lg font-semibold"},"Time Zone")],-1)]))),default:r((()=>[u((s(),m("div",we,[d("div",{class:"flex items-center justify-center cursor-pointer py-2 pl-4 pr-2 w-69",onClick:a[4]||(a[4]=a=>e.dropdownTimezone.is_visibled=!e.dropdownTimezone.is_visibled)},[d("span",he,y(e.timezoneActive?e.timezoneActive.timezone_text:"Choose Timezone"),1),a[17]||(a[17]=d("span",{class:"inline-block ml-4"},[d("span",{class:"material-icons text-lg"}," arrow_drop_down ")],-1))]),u((s(),m("div",Ce,[d("div",ke,[c(C,{modelValue:e.dropdownTimezone.query,"onUpdate:modelValue":a[5]||(a[5]=a=>e.dropdownTimezone.query=a),placeholder:"Search Timezone",class:"w-full overflow-ellipsis text-sm",icon:""},null,8,["modelValue"])]),d("div",ze,[d("ul",null,[(s(!0),m(p,null,f(e.defaultListTimezone,((a,t)=>(s(),m("li",{key:t,onClick:t=>e.handleTimezoneChange(a.timezone),class:"text-left p-2 hover:bg-grey-lighten cursor-pointer px-4"},[d("div",qe,[d("div",Se,[e.timezoneActive?(s(),m("div",je,[a.timezone===e.timezoneActive.timezone?(s(),m("span",Te," check_circle ")):g("",!0)])):g("",!0),d("div",Le,[d("span",null,y(a.timezone_text),1)])])])],8,Ae)))),128))])])])),[[w,e.dropdownTimezone.is_visibled],[q,e.dropdownTimezone.is_loading]])])),[[S,e.handleClickOutsideTimezone]])])),footer:r((()=>[d("div",Ve,[c(k,{view:"smooth",color:"teal",onClick:e.updateTimezone,loading:e.loadingTimezone.update},{default:r((()=>a[18]||(a[18]=[v("Save")]))),_:1},8,["onClick","loading"])])])),_:1})])}]]),Ue=a({setup(){const{genSuspense:a}=e();return()=>a(Be)}});export{Ue as default};
