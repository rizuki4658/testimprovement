var a=Object.defineProperty,e=Object.defineProperties,t=Object.getOwnPropertyDescriptors,s=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,n=(e,t,s)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,r=(a,e)=>{for(var t in e||(e={}))o.call(e,t)&&n(a,t,e[t]);if(s)for(var t of s(e))l.call(e,t)&&n(a,t,e[t]);return a};import{u as d}from"./components.41c6afd8.js";import{k as i,r as u,g as m,W as c,y as f,m as p,o as b,t as v,a2 as y,a3 as g,D as k,K as h,a5 as C,f as B,a0 as _,B as T,w,I as x,A as j,n as P,O as I,aw as M,a4 as U,aU as A,a6 as O,_ as V}from"./vendor.f1efedad.js";import{c as D,d as F,b as S,e as E}from"./customer.a2559fd1.js";import{f as $}from"./setting.86482221.js";import{f as q,u as G,_ as z,b as N,d as R}from"./index.e231b017.js";import{C as Z}from"./card.de1f0319.js";import{_ as K}from"./tab.9f764545.js";import{C as L}from"./Form.ede51791.js";import{A as W,E as H,P as J,S as Q,a as X,V as Y,C as aa,Z as ea,c as ta,b as sa,d as oa,G as la,F as na,e as ra,f as da,g as ia,I as ua,D as ma,B as ca,h as fa,R as pa,i as ba}from"./Custom.9820d20d.js";import{S as va}from"./select.04e4ee62.js";import{u as ya}from"./index.32689823.js";import{r as ga}from"./index.2fb3814c.js";import{B as ka}from"./Breadcrumb.e5dd1515.js";import"./LoadingCard.9892fd7a.js";import"./date.f86face7.js";import"./format.f845777a.js";import"./index.1c09f422.js";import"./InputPhone.f8d9b657.js";import"./SelectCountry.75182cc2.js";import"./buyback.362c230f.js";import"./breadcrumb.e60df23d.js";const ha=i({components:{Input:q,Select:va},props:{list:{type:Array,default:()=>[]},data:{type:Object,default:()=>({})},disabled:{type:Boolean,default:!1},attributes:{type:Array,default:()=>[]}},emits:["update:data"],setup(a,{emit:e}){const{bankTransferConfig:t,isUseIBAN:s}=G(),o=u({}),l=m((()=>{let e={};for(let t of a.attributes)e[t.attribute_name]={},!0===t.is_required&&(e[t.attribute_name].required=ga);return e})),n=ya(l,o,{$lazy:!0}),r=()=>{for(let e of a.attributes)Object.keys(a.data).includes(e.attribute_name)?o[e.attribute_name]=a.data[e.attribute_name]:o[e.attribute_name]=""};return c((()=>{r()})),f((()=>o),(()=>{e("update:data",o)}),{deep:!0}),f((()=>a.attributes),(()=>{r()}),{deep:!0}),{data:o,validation:n,validate:()=>(n.value.$validate(),!n.value.$invalid),bankTransferConfig:t,isUseIBAN:s}}}),Ca={class:"mb-4"};const Ba=i({components:{Button:N,Card:Z,Modal:R,BankTransferForm:z(ha,[["render",function(a,e,t,s,o,l){const n=p("Input");return b(),v("div",null,[(b(!0),v(y,null,g(a.attributes,(e=>(b(),v("div",Ca,[k(n,{modelValue:a.data[e.attribute_name],"onUpdate:modelValue":t=>a.data[e.attribute_name]=t,type:"text",label:e.name,class:"w-full",placeholder:e.name,disabled:a.disabled,view:a.validation[e.attribute_name].$invalid?"danger":"default"},null,8,["modelValue","onUpdate:modelValue","label","placeholder","disabled","view"]),(b(!0),v(y,null,g(a.validation[e.attribute_name].$errors,((a,e)=>(b(),v("small",{class:"text-red-base block mt-2",key:e},h(a.$message)+". ",1)))),128))])))),256))])}]])},setup(){const{bankTransferConfig:a}=G(),{state:e}=D(),{data:t,loading:s,modal:o,selected:l,openModal:n,unsetData:r,actionAll:d,actionCreate:i,actionUpdate:u,actionDelete:c}=F(),{state:f,loading:p,action:b}=$(),v=C(),y=B(null),g=B([]),k=m((()=>{const a=f.value.find((a=>"Bank Transfer"===a.name&&4===a.id));return a?a.attributes:[]})),h=m((()=>!!l.value));return{refBankTransferForm:y,data:t,modal:o,selected:l,loading:s,loadingPaymentMethods:p,openModal:n,unsetData:r,state:e,statePaymentMethods:f,selectedBankTranfserAttributes:g,bankTransferAttributes:k,isBankTransferFormUpdate:h,editBank:a=>{if(a.bank_transfer){for(let e of a.bank_transfer)t[e.attribute_name]=e.value;g.value=a.bank_transfer}l.value=a.id},bankTransferConfig:a,openModalSelected:(a,e)=>n(a,(()=>{l.value=e.id})),createBankTransfer:async()=>{var a;(null==(a=y.value)?void 0:a.validate())&&await i(v.params.customerId,(async()=>{await d(v.params.customerId)}))},updateBankTransfer:async()=>{var a;(null==(a=y.value)?void 0:a.validate())&&await u(v.params.customerId,(async()=>{await d(v.params.customerId)}))},deleteBankTransfer:async()=>{await c(v.params.customerId,(async()=>{await d(v.params.customerId)}))},handleAddBankTransferInfo:async()=>{await b(),n("form")},handleFormUpdate:a=>{Object.assign(t,a)}}}}),_a={class:"text-right"},Ta={key:0,class:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-2 xl:grid-cols-3 gap-4"},wa={class:"flex mb-4"},xa={class:"font-semibold mb-0"},ja={class:"flex ml-auto gap-2"},Pa={class:"small mb-0"},Ia={class:"mb-3"},Ma={key:1,class:"text-center text-red-base font-bold"};const Ua=i({components:{Button:N,Card:Z,Tab:K,CustomerForm:L,AmazonGiftCard:W,BankTransfer:z(Ba,[["render",function(a,e,t,s,o,l){const n=p("Button"),r=p("Card"),d=p("BankTransferForm"),i=p("Modal"),u=_("loading");return b(),v("div",null,[T("div",_a,[k(n,{view:"smooth",color:"teal",onClick:a.handleAddBankTransferInfo,loading:a.loadingPaymentMethods,dense:""},{default:w((()=>e[2]||(e[2]=[x("Add Bank")]))),_:1},8,["onClick","loading"])]),e[9]||(e[9]=T("hr",{class:"mt-5 mb-8 border-grey-01"},null,-1)),a.state.banks.length>0?j((b(),v("div",Ta,[(b(!0),v(y,null,g(a.state.banks,((t,s)=>(b(),P(r,{key:s},{default:w((()=>[T("div",wa,[T("p",xa,h(t.full_name),1),T("div",ja,[k(n,{view:"smooth",color:"blue",onClick:e=>(a.editBank(t),a.openModal("form")),dense:""},{default:w((()=>e[3]||(e[3]=[T("i",{class:"fas fa-edit"},null,-1)]))),_:2},1032,["onClick"]),k(n,{view:"smooth",color:"red",onClick:e=>a.openModalSelected("delete",t),dense:""},{default:w((()=>e[4]||(e[4]=[T("i",{class:"fas fa-trash"},null,-1)]))),_:2},1032,["onClick"])])]),(b(!0),v(y,null,g(t.bank_transfer,(a=>(b(),v("div",{key:a.attribute_name},[T("p",Pa,h(a.name)+":",1),T("p",Ia,h(a.value),1)])))),128))])),_:2},1024)))),128))])),[[u,a.loading.all]]):(b(),v("p",Ma," There's no available data to show. ")),k(i,{modelValue:a.modal.form,"onUpdate:modelValue":e[0]||(e[0]=e=>a.modal.form=e),title:null===a.selected?"Add Bank Transfer":"Edit Bank Transfer",onClose:a.unsetData},{footer:w((()=>[null===a.selected?(b(),P(n,{key:0,loading:a.loading.form,onClick:a.createBankTransfer,color:"teal",view:"smooth"},{default:w((()=>e[5]||(e[5]=[x("Add Bank Transfer")]))),_:1},8,["loading","onClick"])):(b(),P(n,{key:1,loading:a.loading.form,onClick:a.updateBankTransfer,color:"teal",view:"smooth"},{default:w((()=>e[6]||(e[6]=[x("Update Bank Transfer")]))),_:1},8,["loading","onClick"]))])),default:w((()=>[k(d,{ref:"refBankTransferForm",data:a.data,"onUpdate:data":a.handleFormUpdate,attributes:a.isBankTransferFormUpdate?a.selectedBankTranfserAttributes:a.bankTransferAttributes},null,8,["data","onUpdate:data","attributes"])])),_:1},8,["modelValue","title","onClose"]),k(i,{modelValue:a.modal.delete,"onUpdate:modelValue":e[1]||(e[1]=e=>a.modal.delete=e),size:"xs",title:"Delete Bank",onClose:a.unsetData},{footer:w((()=>[k(n,{loading:a.loading.delete,view:"smooth",color:"red",onClick:a.deleteBankTransfer},{default:w((()=>e[7]||(e[7]=[x("Delete")]))),_:1},8,["loading","onClick"])])),default:w((()=>[e[8]||(e[8]=T("p",{class:"my-5"},"Are you sure want to delete this bank data?",-1))])),_:1},8,["modelValue","onClose"])])}]]),PaperCheck:H,ExpressCheck:H,PayPal:J,Swish:Q,SquareCash:X,Venmo:Y,Coinbase:aa,Zelle:ea,CashApp:ta,Cash:sa,ApplePay:oa,GooglePay:la,FacebookPay:na,StoreCredit:ra,VirtualDebitCard:da,GiftCard:ia,InteraceTransfer:ua,Donate:ma,Bill:ca,ECheck:fa,Rebate:pa,Custom:ba,Breadcrumb:ka},async setup(){const a=B(null),s=C(),o=I(),{data:l,loading:n,action:d}=S(),{state:i,data:c,loading:p,action:b,actionUpdate:v,actionUpdateCustom:y}=D(),{state:g,action:k}=$(),{action:h,loading:_}=E();await Promise.all([d({id:s.params.customerId,is_store:1}),b(s.params.customerId),k()]);const T=u(s);f((()=>({name:s.name,query:s.query,params:s.params})),((a,e)=>{T.value=e}));const w=Object.assign({},c.value),x=B(null),j=B(null);j.value=g.value[0];const P=m((()=>{const a={};return"BankTransfer"!==j.value.component&&(a["update:data"]=a=>c.value=a),a})),U=m((()=>{const a={};if("BankTransfer"===j.value.component||j.value.is_custom||(a.data=c.value),j.value.is_custom){const e=i.value.custom&&i.value.custom.custom_payout&&[...i.value.custom.custom_payout].shift()||{};a.data={[e.attribute_name]:e.value},a.payout=j.value}return a})),A=M(l)?l:u(r({},l.value));return{data:A,dataPaymentInfo:c,loadingUpdate:_,paymentMethod:j,statePaymentInfo:i,statePaymentMethods:g,vOn:P,vBind:U,updateCustomer:async()=>{var l,n;a.value.validate()&&(!x.value.validate||x.value.validate&&x.value.validate())&&(await h(s.params.customerId,r({},A)),j.value.is_custom?await y(s.params.customerId,r({},x.value.data)):await v(s.params.customerId,(l=r({},c.value),n={payment_method:j.value.name},e(l,t(n)))),V({message:"Data has been updated!",type:"success"}),T.value&&T.value.name?o.push({name:T.value.name,params:T.value.params}):o.push({name:"layoutCustomer"}))},resetData:()=>{c.value=Object.assign({},w)},breadcrumb:[{text:"Customer",to:{name:"layoutCustomer"}},{text:"Edit Customer"}],refForm:a,refPaymentMethod:x,backTo:T}}}),Aa={class:"space-y-10"},Oa={class:"space-y-5"},Va={class:"space-y-5"},Da={class:"grid grid-cols-5 gap-4 border border-grey-01 rounded-lg ml-14"},Fa={class:"xl:col-span-1 lg:col-span-2 col-span-5 xl:border-r lg:border-r border-r-0 border-grey-01 p-5"},Sa={class:"xl:col-span-4 lg:col-span-3 col-span-5 p-5"};var Ea=z(Ua,[["render",function(a,e,t,s,o,l){const n=p("Button"),r=p("Breadcrumb"),d=p("CustomerForm"),i=p("Tab"),u=p("Card");return b(),v("div",null,[k(r,{class:"mb-8 mt-4",pageTitle:"Edit Customer",backTo:{name:"layoutCustomer"},items:a.breadcrumb},{right:w((()=>[k(n,{color:"teal",loading:a.loadingUpdate,onClick:a.updateCustomer},{default:w((()=>e[2]||(e[2]=[x("Save Changes")]))),_:1},8,["loading","onClick"])])),_:1},8,["items"]),k(u,null,{default:w((()=>[T("div",Aa,[T("div",Oa,[e[3]||(e[3]=T("div",{class:"flex"},[T("div",{class:"flex w-10 h-10 bg-teal-04 rounded-full text-white font-semibold"},[T("div",{class:"my-auto mx-auto"},"1")]),T("h6",{class:"text-lg text-teal-04 ml-5 my-auto"}," Personal Information ")],-1)),k(d,{data:a.data,"onUpdate:data":e[0]||(e[0]=e=>a.data=e),class:"mb-4 ml-14",ref:"refForm"},null,8,["data"])]),T("div",Va,[e[5]||(e[5]=T("div",{class:"flex"},[T("div",{class:"flex w-10 h-10 bg-teal-04 rounded-full text-white font-semibold"},[T("div",{class:"my-auto mx-auto"},"2")]),T("h6",{class:"text-lg text-teal-04 ml-5 my-auto"}," Payout Information ")],-1)),T("div",Da,[T("div",Fa,[e[4]||(e[4]=T("p",{class:"mb-3 font-semibold ml-3"},"Choose Payout Method",-1)),k(i,{modelValue:a.paymentMethod,"onUpdate:modelValue":e[1]||(e[1]=e=>a.paymentMethod=e),by:null,items:a.statePaymentMethods,onChange:a.resetData,"use-external-icon":!0,component:"",type:"vertical"},null,8,["modelValue","items","onChange"])]),T("div",Sa,[a.paymentMethod.is_custom?(b(),P(O(a.paymentMethod.component),U({key:0},a.vBind,A(a.vOn),{ref:"refPaymentMethod"}),null,16)):(b(),P(O(a.paymentMethod.component),U({key:1},a.vBind,A(a.vOn),{ref:"refPaymentMethod"}),null,16))])])])])])),_:1})])}]]),$a=i({setup(){const{genSuspense:a}=d();return()=>a(Ea)}});export{$a as default};
