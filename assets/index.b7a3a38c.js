var e=Object.defineProperty,a=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,l=(a,t,o)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[t]=o;import{u as s}from"./components.bc8fc588.js";import{k as d,a5 as n,W as i,m as c,a0 as r,A as m,o as u,n as p,w as b,B as f,K as v,t as y,D as g,I as k,U as C,f as I,y as j,s as h,_ as D,a2 as _,a3 as w,O as x}from"./vendor.f1efedad.js";import{d as S,F as B,e as A,G as O,H as V}from"./buyback.73ce447d.js";import{B as M}from"./Breadcrumb.5c6bcf4b.js";import{C as F}from"./card.6a96327d.js";import{b as U,_ as P,f as T,d as Q,g as R}from"./index.161fb295.js";import{_ as H}from"./badge.b78bf7eb.js";import{c as G}from"./status.6f59bf91.js";import{e as L}from"./setting.a9fe6242.js";import{S as q}from"./select.fad79672.js";import{D as E}from"./Form.c6b5ec72.js";import{I as K}from"./ItemTable.84d002ce.js";import"./LoadingCard.105ff0f2.js";import"./date.f86face7.js";import"./breadcrumb.2d36d495.js";import"./device.d49d5028.js";import"./auto-complete.23fc498e.js";import"./index.32689823.js";import"./index.05b14cb2.js";import"./Currency.009127db.js";import"./Accordion.4d003188.js";import"./BBTable.6179d6f5.js";import"./DeviceSearch.b8fd87bd.js";import"./BDropdown.3c24c256.js";import"./DeviceGolfSpec.d4c90a90.js";import"./BSelect.f2eeebf2.js";import"./fieldset.dc1b9649.js";import"./dymo.368a3deb.js";import"./PrintLabel.d3387e20.js";const N=d({components:{Button:U,Card:F,Badge:H},props:{},setup(e){const{action:s,state:d,loading:c}=S("online"),r=n();return i((async()=>{await s(((e,s)=>{for(var d in s||(s={}))t.call(s,d)&&l(e,d,s[d]);if(a)for(var d of a(s))o.call(s,d)&&l(e,d,s[d]);return e})({id:r.params.buybackId},r.params.marketerId&&"me"===r.params.marketerId&&{marketer_id:""}||r.params.marketerId&&{marketer_id:r.params.marketerId}))})),{state:d,loading:c,color:G}}}),W={key:0,class:"my-4"},z={class:"flex items-center mb-2"},J={class:"items-center"};var X=P(N,[["render",function(e,a,t,o,l,s){const d=c("Badge"),n=c("Card"),i=r("loading");return m((u(),p(n,null,{header:b((()=>{var a;return[f("h6",null,"Buyback ID #"+v(null==(a=e.state)?void 0:a.box_id),1)]})),default:b((()=>{var t,o,l,s;return[(null==(t=e.state)?void 0:t.box_id)?(u(),y("div",W,[f("div",z,[a[0]||(a[0]=f("span",{class:"material-icons text-base mr-2"},"date_range",-1)),f("p",J,v((null==(o=e.state)?void 0:o.created_at)||"-"),1)]),g(d,{color:e.color((null==(s=null==(l=e.state)?void 0:l.order_status)?void 0:s.short_name)||"-")},{default:b((()=>{var a,t;return[k(v((null==(t=null==(a=e.state)?void 0:a.order_status)?void 0:t.status_name)||"-"),1)]})),_:1},8,["color"])])):C("",!0)]})),_:1})),[[i,e.loading]])}]]);const Y=d({components:{Button:U,Card:F,Badge:H,Input:T,Select:q,Modal:Q,DeviceForm:E},props:{},setup(e){const{loading:a,state:t,filters:o,modal:l,data:s,actionShow:d,actionCreate:c,setSelectedDevice:r,unsetSelectedDevice:m}=B(),{actionAll:u}=A("online"),{actionAll:p,stateAll:b,filter:f,loading:v}=L(),y=n(),g=I(null);return j((()=>o),R((()=>{d(y.params.buybackId)}),500),{deep:!0}),i((async()=>{f.is_notpaginate=1,await Promise.all([d(y.params.buybackId),p()])})),{refDeviceForm:g,data:s,stateConditions:b,state:t,loading:a,loadingCondition:v,filters:o,modal:l,handleQuickAdd:e=>{r(e),l.create=!0},handleAddDevice:async()=>{await h((()=>g.value.validate()))&&await c(y.params.buybackId,(async()=>{D({type:"success",message:"Item added"}),l.create=!1,await u(y.params.buybackId,!0)}))},unsetSelectedDevice:m}}}),Z={class:"grid grid-cols-5 gap-4 mb-4"},$={class:"col-span-3"},ee={class:"col-span-2"},ae={class:"overflow-y-auto min-h-max",style:{maxHeight:"450px",minHeight:"60px"}},te={key:0,class:"mt-6"},oe={class:"font-semibold text-teal-04 mb-3"},le={class:"flex justify-between"},se={class:"mr-3"},de={class:"font-bold"},ne={class:"mr-3"},ie={class:"font-bold"},ce={class:"mr-3"},re={class:"font-bold"},me={key:1,class:"mt-8 mb-4"},ue={class:"flex justify-end"};var pe=P(Y,[["render",function(e,a,t,o,l,s){const d=c("Input"),n=c("Select"),i=c("Button"),p=c("Card"),C=c("DeviceForm"),I=c("Modal"),j=r("loading");return u(),y(_,null,[g(p,null,{header:b((()=>a[6]||(a[6]=[f("h6",null,"Items",-1)]))),default:b((()=>{var t;return[f("div",null,[f("div",Z,[f("div",$,[g(d,{modelValue:e.filters.search,"onUpdate:modelValue":a[0]||(a[0]=a=>e.filters.search=a),placeholder:"Search items",block:""},null,8,["modelValue"])]),f("div",ee,[g(n,{modelValue:e.filters.condition,"onUpdate:modelValue":a[1]||(a[1]=a=>e.filters.condition=a),placeholder:"Condition",class:"w-full",items:e.stateConditions,by:"condition_name",name:"condition_name",loading:e.loadingCondition.all},null,8,["modelValue","items","loading"])])]),m((u(),y("div",ae,[(null==(t=e.state.data)?void 0:t.length)?(u(),y("div",te,[(u(!0),y(_,null,w(e.state.data,((t,o)=>(u(),y("div",{key:o,class:"flex justify-between items-center mb-8"},[f("div",null,[f("p",oe,v(t.product_name),1),f("div",le,[f("p",se,[a[7]||(a[7]=k("Qty: ")),f("span",de,v(t.qty),1)]),f("p",ne,[a[8]||(a[8]=k("Price: ")),f("span",ie,v(t.price),1)]),f("p",ce,[a[9]||(a[9]=k("Condition: ")),f("span",re,v(t.condition),1)])])]),f("div",null,[g(i,{onClick:a=>e.handleQuickAdd(t),color:"teal",dense:""},{default:b((()=>a[10]||(a[10]=[k("Quick Add")]))),_:2},1032,["onClick"])])])))),128))])):(u(),y("div",me,a[11]||(a[11]=[f("p",{class:"font-semibold text-center"},"No data",-1)])))])),[[j,e.loading.all]])])]})),_:1}),g(I,{modelValue:e.modal.create,"onUpdate:modelValue":a[5]||(a[5]=a=>e.modal.create=a),title:"Quick Add Item",onClose:e.unsetSelectedDevice},{default:b((()=>[g(C,{ref:"refDeviceForm","auto-fill":"",data:e.data.selected.device.detail,"onUpdate:data":a[2]||(a[2]=a=>e.data.selected.device.detail=a),device:e.data.selected.device.specs.device,"onUpdate:device":a[3]||(a[3]=a=>e.data.selected.device.specs.device=a),dataComputer:e.data.selected.device.specs.computer,"onUpdate:dataComputer":a[4]||(a[4]=a=>e.data.selected.device.specs.computer=a),"multi-imei":""},null,8,["data","device","dataComputer"])])),footer:b((()=>[f("div",ue,[g(i,{onClick:e.handleAddDevice,loading:e.loading.create,color:"teal",view:"outlined"},{default:b((()=>a[12]||(a[12]=[k("Add")]))),_:1},8,["onClick","loading"])])])),_:1},8,["modelValue","onClose"])],64)}]]);const be=d({components:{Card:F,Button:U,Modal:Q,ItemTable:K,DeviceForm:E},async setup(){const{device:e,modal:a,unsetData:t,openModal:o,loading:l,actionCreate:s}=A("online"),d=n(),i=I(null);return{refDeviceForm:i,loading:l,device:e,modal:a,unsetData:t,openModal:o,actionCreate:s,loadingShow:O,addDevice:async()=>{await h((()=>i.value.validate()))&&await s(d.params.buybackId,(async()=>{D({type:"success",message:"Item added"})}),!0)}}}}),fe={class:"flex justify-between items-center"};const ve=d({components:{Breadcrumb:M,Card:F,Button:U,Show:X,Devices:pe,Items:P(be,[["render",function(e,a,t,o,l,s){const d=c("Button"),n=c("ItemTable"),i=c("Card"),v=c("DeviceForm"),C=c("Modal"),I=r("loading");return u(),y(_,null,[m((u(),p(i,null,{header:b((()=>[f("div",fe,[a[5]||(a[5]=f("h6",null,"Data Match Items",-1)),g(d,{color:"teal",dense:"",onClick:a[0]||(a[0]=a=>e.openModal("create"))},{default:b((()=>a[4]||(a[4]=[f("i",{class:"material-icons mr-2"},"add",-1),k("Add Item")]))),_:1})])])),default:b((()=>[g(n,{"scan-in":"","buyback-type":"mailin"})])),_:1})),[[I,e.loadingShow.items.all]]),g(C,{modelValue:e.modal.create,"onUpdate:modelValue":a[3]||(a[3]=a=>e.modal.create=a),title:"Add Item",onClose:e.unsetData},{default:b((()=>[g(v,{ref:"refDeviceForm",data:e.device.data,"onUpdate:data":a[1]||(a[1]=a=>e.device.data=a),dataComputer:e.device.computer,"onUpdate:dataComputer":a[2]||(a[2]=a=>e.device.computer=a),"multi-imei":"","buyback-type":"mailin"},null,8,["data","dataComputer"])])),footer:b((()=>[g(d,{color:"teal",loading:e.loading.create,onClick:e.addDevice},{default:b((()=>a[6]||(a[6]=[k("Add Item")]))),_:1},8,["loading","onClick"])])),_:1},8,["modelValue","onClose"])],64)}]])},props:{},async setup(){const{loading:e,actionSave:a,actionRestore:t}=V(),{actionAll:o}=A("online"),l=n(),s=x();return{breadcrumb:[{text:"Mail-In",to:{name:"buybackOnline"}},{text:"Offer Detail",to:{name:"buybackOnlineDetail",params:{buybackId:l.params.buybackId}}},{text:"Data Match"}],loading:e,route:l,handleRestore:()=>t(l.params.buybackId,(async()=>{await o(l.params.buybackId,!0),D({type:"success",message:"Data match restored"})})),handleSave:()=>a(l.params.buybackId,(async()=>{await o(l.params.buybackId,!0),D({type:"success",message:"Data match saved"}),s.push({name:"buybackOnlineDetail",params:{buybackId:l.params.buybackId}})}))}}}),ye={class:"flex justify-center justify-between"},ge={class:"grid gap-6 grid-cols-8"},ke={class:"col-span-8 xl:col-span-2 lg-col-span-2"},Ce={class:"col-span-8 xl:col-span-6 lg-col-span-6"};var Ie=P(ve,[["render",function(e,a,t,o,l,s){const d=c("Breadcrumb"),n=c("Button"),i=c("Show"),r=c("Devices"),m=c("Items");return u(),y("div",null,[f("div",ye,[g(d,{class:"mb-12","page-title":"Data Match",backTo:{name:"buybackOnlineDetail",params:{buybackId:e.route.params.buybackId}},items:e.breadcrumb},null,8,["backTo","items"]),f("div",null,[g(n,{onClick:e.handleRestore,class:"mr-4",color:"orange",view:"outlined",loading:e.loading.restore},{default:b((()=>a[0]||(a[0]=[f("i",{class:"material-icons mr-1"},"replay",-1),k(" Restore")]))),_:1},8,["onClick","loading"]),g(n,{onClick:e.handleSave,color:"teal",view:"outlined",loading:e.loading.save},{default:b((()=>a[1]||(a[1]=[f("i",{class:"material-icons mr-1"},"save",-1),k(" Save")]))),_:1},8,["onClick","loading"])])]),f("div",ge,[f("div",ke,[g(i,{class:"mb-8"}),g(r)]),f("div",Ce,[g(m)])])])}]]),je=d({setup(){const{genSuspense:e}=s();return()=>[e(Ie)]}});export{je as default};
