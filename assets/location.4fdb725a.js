var a=Object.defineProperty,e=Object.defineProperties,t=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,l=(e,t,n)=>t in e?a(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,s=(a,e)=>{for(var t in e||(e={}))i.call(e,t)&&l(a,t,e[t]);if(n)for(var t of n(e))o.call(e,t)&&l(a,t,e[t]);return a},c=(a,n)=>e(a,t(n));import{y as r,o as d,s as u,r as g,v as p}from"./index.9aa6481b.js";import{r as h,f as m,g as y,az as v}from"./vendor.f1efedad.js";const f=[{name:"Linked",value:"1"},{name:"Pending Request",value:"2"},{name:"Unlinked",value:"0"}],w={state:Symbol(),actionAll:Symbol(),loading:Symbol()},L=()=>{const a=h({old_location_id:null,name:null,street:null,city:null,zip_code:null,state:null,country:null,phone:null,lat:null,lon:null,email:null,address_text:null,suite:null}),e=m(!1),t=m(!1),n=y((()=>{const e=["name","email","address_text","phone"];return Object.entries(a).filter((([a,t])=>e.includes(a)&&null===t)).length>0}));return{data:a,modal:e,loading:t,isIncompleteForm:n,action:async(e=(()=>{}))=>{try{t.value=!0,await u.dispatch("setting/manageLocation/switchLocation",a),p(e)&&e()}finally{t.value=!1}}}},F=()=>{const a=h({page:1,limit:10,search:"",sort_by:"",order_by:"",franchisor_accept_status:{name:"",value:""}}),e=h({new_store_id:null}),t=h({all:!1,delete:!1,mailin_location:!1}),n=h({create:!1,update:!1,delete:!1}),i=m(!1),o=m(!1),l=m(null),f=y((()=>[{id:0,name:"Store Locations",route:{name:"settingManageLocationStoreLocations"}},{id:1,name:"Linked Locations",route:{name:"settingManageLocationLinkedLocations"}}].map((a=>r(a,a.route.name,{},"id","name"))))),L=y((()=>d(u.state.setting.manageLocation.all)?g(s({},u.state.setting.manageLocation.all)):{data:[]})),F=y((()=>{var a;return(null==(a=u.state.setting.manageLocation.all)?void 0:a.data)||[]})),_=()=>{l.value=null,e.new_store_id=null},b=async(e,n=(()=>{}))=>{t.all=!0;const i=s(c(s({},a),{franchisor_accept_status:a.franchisor_accept_status.value||""}),e&&{admin_id:e});await u.dispatch("setting/manageLocation/all",i),p(n)&&n(),t.all=!1};return v(w.actionAll,b),v(w.loading,t),v(w.state,L),{data:a,dataLocation:e,state:L,loading:t,modal:n,isShowSwitchLocationModal:i,isShowEnableMailinModal:o,selected:l,tab:f,locationList:F,unsetData:_,openModal:(a,e=(()=>{}))=>{n[a]=!0,p(e)&&e()},actionAll:b,actionDelete:async(a=(()=>{}))=>{try{t.delete=!0,await u.dispatch("setting/manageLocation/delete",{id:l.value,data:e}),p(a)&&a(),n.delete=!1,_(),await b(u.state.user.me.id)}finally{t.delete=!1}},actionMailLocation:async(a,e=(()=>{}))=>{try{t.mailin_location=!0,await u.dispatch("setting/manageLocation/mailLocation",a),p(e)&&e(void 0)}catch(n){p(e)&&e(n)}finally{t.mailin_location=!1}}}},_=()=>{const a=h({page:1,limit:10,search:"",sort_by:"",order_by:""}),e=h({all:!1}),t=y((()=>d(u.state.setting.manageLocation.franchisee)?g(s({},u.state.setting.manageLocation.franchisee)):{data:[]}));return{data:a,loading:e,state:t,actionAll:async(t=1,n=(()=>{}))=>{e.all=!0;const i=c(s({},a),{linked_status:t||1});await u.dispatch("setting/manageLocation/getFranchiseeStore",i),p(n)&&n(),e.all=!1}}},b=()=>{const a=m(f),e=h({requestFranchisee:new Map,approveFranchisee:new Map,rejectFranchisee:new Map,revokeFranchisee:new Map,cancelFranchisee:new Map,unlinkFranchisee:new Map});return{linkedStatuses:a,loading:e,actionRequestFranchisee:async(a,t=(()=>{}))=>{try{e.requestFranchisee.set(a.location_id,!0);const n={id:a.location_id,data:{franchisor_code:a.franchisor_code}};await u.dispatch("setting/manageLocation/requestFranchisee",n),p(t)&&t()}finally{e.requestFranchisee.delete(a.location_id)}},actionApproveFranchisee:async(a,t=(()=>{}))=>{try{e.approveFranchisee.set(a,!0);const n=await u.dispatch("setting/manageLocation/approveFranchisee",a);p(t)&&t(n)}finally{e.approveFranchisee.delete(a)}},actionRejectFranchisee:async(a,t=(()=>{}))=>{try{e.rejectFranchisee.set(a,!0);const n=await u.dispatch("setting/manageLocation/rejectFranchisee",a);p(t)&&t(n)}finally{e.rejectFranchisee.delete(a)}},actionRevokeFranchisee:async(a,t=(()=>{}))=>{try{e.revokeFranchisee.set(a,!0);const n=await u.dispatch("setting/manageLocation/revokeFranchisee",a);p(t)&&t(n)}finally{e.revokeFranchisee.delete(a)}},actionCancelFranchisee:async(a,t=(()=>{}))=>{try{e.cancelFranchisee.set(a,!0);const n=await u.dispatch("setting/manageLocation/cancelFranchisee",a);p(t)&&t(n)}finally{e.cancelFranchisee.delete(a)}},actionUnlinkFranchisee:async(a,t=(()=>{}))=>{try{e.unlinkFranchisee.set(a,!0);const n=await u.dispatch("setting/manageLocation/unlinkFranchisee",a);p(t)&&t(n)}finally{e.unlinkFranchisee.delete(a)}}}},k=()=>{const a=h({show:!1,update:!1}),e=h({id:null,widget_app_type:null});return{loading:a,data:e,resetData:()=>{Object.assign(e,{id:null,widget_app_type:null})},actionUpdate:async(t=(()=>{}))=>{try{a.update=!0;const l=e,{id:c}=l,r=((a,e)=>{var t={};for(var l in a)i.call(a,l)&&e.indexOf(l)<0&&(t[l]=a[l]);if(null!=a&&n)for(var l of n(a))e.indexOf(l)<0&&o.call(a,l)&&(t[l]=a[l]);return t})(l,["id"]),d=await u.dispatch("setting/manageLocation/widgetCodeFranchisee",{id:c,data:s({},r)});p(t)&&t(d)}finally{a.update=!1}}}},j=()=>{const a=m(!1),e=m(null),t=m(null),n=m("monthly"),i=y((()=>{var a,e;return null==(e=null==(a=n.value)?void 0:a.toLowerCase)?void 0:e.call(a)}));return{loading:a,chargedProrateAmount:e,refundedProrateAmount:t,billingCycleType:i,getChargedProrateAmount:async()=>{try{a.value=!0;const t=await u.dispatch("setting/manageLocation/getProrateAmount",{type:"add"}),{total:i,interval:o}=t||{};e.value=i,n.value=o}catch(t){console.warn("Error while getting charged prorate price amount: ",t.message)}finally{a.value=!1}},getRefundedProrateAmount:async()=>{try{a.value=!0;const e=await u.dispatch("setting/manageLocation/getProrateAmount",{type:"remove"}),{total:i,interval:o}=e||{};t.value=i,n.value=o}catch(e){console.warn("Error while getting refunded prorate price amount: ",e.message)}finally{a.value=!1}}}};export{j as a,L as b,b as c,k as d,_ as e,w as s,F as u};
