var e=Object.defineProperty,a=Object.defineProperties,n=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,i=(a,n,t)=>n in a?e(a,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[n]=t,s=(e,a)=>{for(var n in a||(a={}))l.call(a,n)&&i(e,n,a[n]);if(t)for(var n of t(a))o.call(a,n)&&i(e,n,a[n]);return e};import{u as r}from"./components.00bf6492.js";import{b as d,_ as u,j as c,e as m,d as p,f as g,B as v,u as f,r as b}from"./index.c2f66179.js";import{k as y,O as k,f as h,g as _,N as w,y as P,m as S,$ as R,o as C,t as x,B as N,A as j,aF as O,a1 as A,a2 as D,D as B,w as I,U,I as q,n as L,K as F,S as T,aO as M,aI as V,ar as G,a6 as E,T as W,_ as H,r as K,aH as $,x as Y}from"./vendor.9695fe57.js";import{u as z}from"./integration.bf33c2bd.js";import{u as J}from"./ghl.166ac7f6.js";import{C as Q}from"./card.f57f7ca5.js";import{_ as X}from"./badge.ea6fe761.js";import{p as Z}from"./packages.538e9c6e.js";import"./LoadingCard.c138fa92.js";y({components:{Button:d},setup:()=>({})});const ee=y({components:{Card:Q,Alert:c,Checkbox:m,Badge:X,Modal:p,Input:g,Button:d,BaseLoading:v},props:{route:{type:Object,default:()=>({})}},async setup(e){var t;const{state:l,actionAll:o,actionUpdate:i}=z(),{isUninstalled:r,setUninstall:d}=J(),{me:u,action:c,isProPlan:m}=f(),p=k(),g=h([]),v=h(null),y=_((()=>u.value.package_id)),S=p.getRoutes().map((e=>e.name)),R=u.value.has_using_usps,C=1==(null==(t=u.value)?void 0:t.force_datafeed),x=h(!1);w();const N=[{name:"Tremendous",componentRouteName:"integrationTremendous"},{name:"FedEx",componentRouteName:"integrationFedex"},{name:"UPS",componentRouteName:"integrationUps"},{name:"USPS",componentRouteName:"integrationUspsTab"},{name:"RepairDesk",componentRouteName:"integrationRepairDesk"},{name:"ShareASale",componentRouteName:"integrationShareASale"},{name:"BackMarket",componentRouteName:"integrationBackMarket"},{name:"Shopify",componentRouteName:"integrationShopify"},{name:"GoogleTagManager",componentRouteName:"integrationGoogleTagManager"},{name:"FacebookPixel",componentRouteName:"integrationFacebookPixel"},{name:"GoogleAnalytic",componentRouteName:"integrationGoogleAnalytic"},{name:"SellCell",componentRouteName:"integrationSellCell"},{name:"PhoneCheck",componentRouteName:"integrationPhoneCheck"},{name:"PublicApi",componentRouteName:"integrationPublicAPI"},{name:"Odoo",componentRouteName:"integrationOdoo"},{name:"DataFeed",componentRouteName:"integrationDataFeed"},{name:"WholeCell",componentRouteName:"integrationWholeCell"},{name:"Shipmondo",componentRouteName:"integrationShipmondo"},{name:"Shipengine",componentRouteName:"integrationShipengine"},{name:"Easypost",componentRouteName:"integrationEasypost"},{name:"Klaviyo",componentRouteName:"integrationKlaviyo"},{name:"UPS Direct to Mobile",componentRouteName:"integrationUpsDirectToMobile"},{name:"GHL",componentRouteName:"integrationGHLConfig"}],j=(e,a)=>{const n=g.value.findIndex((a=>a.id==e));return n>-1&&Object.assign(g.value[n],a),g.value[n]},O=async e=>{let a=s({},e);delete a.package_id,delete a.route,await i(a.id,a,(async()=>{4===a.id&&await c(),H({type:"success",message:"Integration status updated!"})}),(()=>j(a.id,{is_enable:0})))},A=_((()=>v.value?g.value.filter((e=>e.name.toLowerCase().indexOf(v.value.toLowerCase())>-1)):g.value)),D=_((()=>{var e;return 1==(null==(e=g.value.find((e=>7==e.id)))?void 0:e.is_enable)||!1})),B=_((()=>{const e=g.value.find((e=>"upsdirecttomobile"===e.name.replace(/ /g,"").toLowerCase()));return!e||0===e.is_ready})),I=h([{name:"Tremendous"},{name:"RepairDesk",package_id:{min:1},disabled:{state:_((()=>{var e;return 1==(null==(e=g.value.find((e=>"WholeCell"===e.name)))?void 0:e.is_enable)?{value:!0,message:"You can only have one inventory add-on enabled. Please disable the Wholecell.io add-on before enabling RepairDesk."}:{value:!1,message:""}}))}},{name:"Shipengine"},{name:"Shipmondo"},{name:"Easypost"},{name:"USPS",package_id:{min:R?1:4}},{name:"ShareASale",package_id:{min:4}},{name:"BackMarket",package_id:{min:1},disabled:{state:_((()=>{var e;return 0===(null==(e=g.value.find((e=>"Shopify"===e.name)))?void 0:e.is_enable)?{value:!0,message:"Requires Shopify Add-On"}:{value:!1,message:""}}))}},{name:"Shopify",package_id:{min:1}},{name:"GoogleTagManager",package_id:{min:4}},{name:"FacebookPixel",package_id:{min:4}},{name:"GoogleAnalytic",package_id:{min:4}},{name:"DataFeed",package_id:{min:4},pro_badge:!m.value},{name:"PublicApi",pro_badge:!m.value},{name:"PhoneCheck",package_id:{min:4}},{name:"WholeCell",package_id:{min:1},disabled:{state:_((()=>1===g.value.find((e=>"RepairDesk"===e.name)).is_enable?{value:!0,message:"You can only have one inventory add-on enabled. Please disable the RepairDesk add-on before enabling WholeCell.io"}:{value:!1,message:""}))}},{name:"UPS Direct to Mobile",disabled:{state:_((()=>({value:B.value,message:"Please ensure that at least one UPS shipping carrier is active"})))}},{name:"GHL"}]);return P((()=>e.route),(async e=>{if(e.query.enable){const a=e.query.enable,n=j(a,{is_enable:1});await O(n),p.push({name:"integration",query:{}})}e.query.reload&&(await o(),p.push({name:"integration",query:{}}))}),{deep:!0}),P((()=>l.value),(()=>{g.value=b(l.value),g.value=g.value.map((e=>{const t=I.value.find((a=>a.name===e.name||null)),l={package_id:{min:3,equals:[]}};t&&Object.assign(l,s(s({},l),t));const o=N.find((a=>a.name===e.name&&!!S.includes(a.componentRouteName)));return i=s(s({},e),l),a(i,n({route:o||null}));var i}))}),{deep:!0,immediate:!0}),P((()=>r.value),(async e=>{e&&await o()}),{immediate:!0,deep:!0}),await o(),{stateAll:l,filteredIntegrations:A,search:v,currentPackageId:y,switchStatus:async e=>{var a,n;if(0==e.is_enable&&0==e.is_ready)return 6==e.id&&7!==y.value?(setTimeout((()=>j(6,{is_enable:0})),400),D.value?void window.CustomerSupport.use("show"):H({type:"error",message:"Shopify must be enabled to activate BackMarket"})):14==e.id?(e.is_enable=1==e.is_enable?0:1,void(await O(e))):(p.push({name:(null==(a=null==e?void 0:e.route)?void 0:a.componentRouteName)||"",query:{id:e.id}}),void(3==e.id&&(e.is_enable=1==e.is_enable?0:1,await O(e))));0!=e.is_enable||1!=e.is_ready||"upsdirecttomobile"!==e.name.replace(/ /g,"").toLowerCase()?(e.is_enable=1==e.is_enable?0:1,await O(e),await o()):p.push({name:(null==(n=null==e?void 0:e.route)?void 0:n.componentRouteName)||"",query:{id:e.id}})},showIntercom:()=>{window.CustomerSupport.use("show")},getPackageName:(e,a)=>{if(["SellCell","FacebookPixel","GoogleTagManager","GoogleAnalytic","Odoo","USPS","DataFeed"].includes(a))return"Enterprise Plan";return`${(Z.find((a=>a.id===e))||null).name} Package`||""},router:p,showPublicApiDocs:()=>window.open("https://public.reusely.com","_blank","noreferrer noopener"),hasForceDatafeed:C,isLoadingOpenBilling:x,handleOpenBilling:async()=>{x.value||(x.value=!0,p.push({name:"settingBilling"}))},handleOpenSettings:e=>{let a="";a=e.route.componentRouteName,a&&p.push({name:a,query:{id:e.id}})}}}}),ae={class:"relative"},ne={class:"p-6"},te={class:"px-6 shadow rounded-lg bg-white mb-8"},le={class:"grid xl:grid-cols-4 lg:grid-cols-2 grid-cols-1 gap-4"},oe={class:"flex flex-col justify-between h-full py-4"},ie=["onClick"],se={class:"flex items-center flex-wrap justify-between"},re=["src","alt"],de={key:0,class:"block py-1 px-4 bg-green-04 text-white rounded-full"},ue=["innerHTML"],ce={key:0,class:"flex justify-between items-center"},me={key:1,class:"flex justify-between items-center"},pe={key:2,class:"flex justify-between items-center"},ge={key:0},ve={class:"w-full h-full flex justify-center items-center py-2 px-4"},fe={key:0},be={class:"whitespace-pre-line"},ye={key:3,class:"flex justify-between items-center"},ke={class:"w-60 flex justify-center items-center"},he={class:"whitespace-pre-line"},_e={class:"w-full h-full flex justify-center items-center"},we={key:0,class:"whitespace-pre-line"},Pe={class:"h-full w-full absolute top-0 flex items-center justify-center",style:{"background-color":"rgba(0, 0, 0, 0.2)"}};var Se=u(ee,[["render",function(e,a,n,t,l,o){const i=S("Button"),s=S("Badge"),r=S("Popover"),d=S("Checkbox"),u=S("Tooltip"),c=S("router-link"),m=S("Card"),p=S("BaseLoading"),g=S("RouterView"),v=R("loading");return C(),x("div",ae,[N("div",ne,[a[13]||(a[13]=N("h1",{class:"font-bold text-3xl mb-8"},"Add-ons",-1)),N("div",te,[j(N("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=a=>e.search=a),class:"py-5 w-full text-lg",placeholder:"Search menu...",autocomplete:"none"},null,512),[[O,e.search]])]),N("div",le,[(C(!0),x(A,null,D(e.filteredIntegrations,((n,t)=>(C(),x("div",{key:t,class:"h-full"},[B(m,{class:"h-full"},{default:I((()=>{var t,l,o,m,p,g,f,b,y,k,h;return[N("div",oe,[N("div",{class:"cursor-pointer",onClick:a=>{var t;return 1==n.is_enable&&e.router.push({name:(null==(t=null==n?void 0:n.route)?void 0:t.componentRouteName)||"",query:{id:n.id}})}},[N("div",se,[N("img",{class:"rounded-md add-on-img",src:n.image,alt:`${n.name} logo`},null,8,re),(null==n?void 0:n.pro_badge)?(C(),x("div",de,a[3]||(a[3]=[N("p",null,"Pro",-1)]))):U("",!0)]),N("p",{innerHTML:n.desc,whitelabel:"text-replace","data-label":"domain custom alert",class:"text-sm text-grey-04 my-6"},null,8,ue)],8,ie),"SellCell"==n.name?(C(),x("div",ce,["SellCell"==n.name?(C(),x(A,{key:0},[N("div",null,[B(i,{class:"ml-2",color:"teal",to:{name:(null==(t=null==n?void 0:n.route)?void 0:t.componentRouteName)||"",query:{id:n.id}},link:"",dense:""},{default:I((()=>a[4]||(a[4]=[q("Settings")]))),_:2},1032,["to"])]),1==n.is_enable?(C(),L(s,{key:0,class:"whitespace-nowrap",color:"green"},{default:I((()=>a[5]||(a[5]=[q(" Active")]))),_:1})):U("",!0)],64)):U("",!0)])):"PublicApi"==n.name?(C(),x("div",me,[N("div",null,[B(i,{color:"teal",to:{name:(null==(l=null==n?void 0:n.route)?void 0:l.componentRouteName)||"",query:{id:n.id}},link:"",dense:""},{default:I((()=>a[6]||(a[6]=[q("API Credentials")]))),_:2},1032,["to"])]),B(i,{class:"whitespace-nowrap",color:"teal",onClick:a[1]||(a[1]=a=>e.showPublicApiDocs()),dense:""},{default:I((()=>a[7]||(a[7]=[q(" Link to API Docs")]))),_:1})])):"DataFeed"==n.name?(C(),x("div",pe,[e.currentPackageId>=4||e.hasForceDatafeed?(C(),x("div",ge,[B(i,{color:"teal",to:{name:(null==(o=null==n?void 0:n.route)?void 0:o.componentRouteName)||"",query:{id:n.id}},link:"",dense:""},{default:I((()=>[q(F("DataFeed"===n.route.name?"Settings":"Preview CSV"),1)])),_:2},1032,["to"])])):(C(),L(r,{key:1,width:"400",trigger:"hover"},{reference:I((()=>[B(i,{color:"grey",loading:e.isLoadingOpenBilling,dense:""},{default:I((()=>a[9]||(a[9]=[q("Preview CSV")]))),_:1},8,["loading"])])),default:I((()=>{var t;return[N("div",ve,[(null==(t=n.package_id)?void 0:t.min)?j((C(),x("div",fe,[N("span",be,[a[8]||(a[8]=q("Available on ")),N("a",{href:"#!",onClick:a[2]||(a[2]=T(((...a)=>e.handleOpenBilling&&e.handleOpenBilling(...a)),["prevent"]))},"Enterprise Plan")])])),[[v,e.isLoadingOpenBilling]]):U("",!0)])]})),_:2},1024))])):(C(),x("div",ye,[N("div",null,[(e.currentPackageId>=(null==(m=n.package_id)?void 0:m.min)||(null==(g=null==(p=n.package_id)?void 0:p.equals)?void 0:g.includes(e.currentPackageId)))&&n.is_enable?(C(),L(i,{key:0,color:"teal",onClick:a=>e.handleOpenSettings(n),dense:""},{default:I((()=>a[10]||(a[10]=[q("Settings")]))),_:2},1032,["onClick"])):U("",!0)]),N("div",null,[e.currentPackageId>=(null==(f=n.package_id)?void 0:f.min)||(null==(y=null==(b=n.package_id)?void 0:b.equals)?void 0:y.includes(e.currentPackageId))?(C(),x(A,{key:0},[(null==(h=null==(k=null==n?void 0:n.disabled)?void 0:k.state)?void 0:h.value)?(C(),L(u,{key:0,effect:"dark",placement:"top"},M({content:I((()=>{var e;return[N("div",ke,[N("span",he,F((null==(e=n.disabled.state)?void 0:e.message)||"This action disabled"),1)])]})),_:2},["RepairDesk"===n.name||"WholeCell.io"===n.name?{name:"default",fn:I((()=>[B(d,{modelValue:n.is_enable,"onUpdate:modelValue":e=>n.is_enable=e,type:"toggle",disabled:""},null,8,["modelValue","onUpdate:modelValue"])])),key:"0"}:{name:"default",fn:I((()=>[B(d,{type:"toggle",disabled:""})])),key:"1"}]),1024)):(C(),x(A,{key:1},[n.is_comming_soon?(C(),L(u,{key:0,effect:"dark",placement:"top"},{content:I((()=>a[11]||(a[11]=[q(" Comming Soon ")]))),default:I((()=>[B(d,{modelValue:n.is_enable,value:1,"value-off":0,disabled:"",type:"toggle"},null,8,["modelValue"])])),_:2},1024)):(C(),L(d,{key:1,modelValue:n.is_enable,value:1,"value-off":0,type:"toggle",onClick:T((a=>e.switchStatus(n)),["prevent"])},null,8,["modelValue","onClick"]))],64))],64)):(C(),L(r,{key:1,width:"400",trigger:"hover"},{reference:I((()=>[B(d,{type:"toggle",disabled:""})])),default:I((()=>{var t;return[N("div",_e,[(null==(t=n.package_id)?void 0:t.min)?(C(),x("span",we,[a[12]||(a[12]=q("Available on ")),B(c,{to:{name:"settingPlan"}},{default:I((()=>[q(F(e.getPackageName(n.package_id.min,n.name)),1)])),_:2},1024)])):U("",!0)])]})),_:2},1024))])]))])]})),_:2},1024)])))),128))])]),N("div",null,[B(g,null,{default:I((({Component:a,route:n})=>[a?(C(),L(W,{key:0,name:"fade"},{default:I((()=>[(C(),L(V,null,[(C(),L(G,null,{fallback:I((()=>[N("div",Pe,[B(p)])])),default:I((()=>[(C(),L(E(a),{key:n.matched[2].name,integrations:e.filteredIntegrations},null,8,["integrations"]))])),_:2},1024))],1024))])),_:2},1024)):U("",!0)])),_:1})])])}],["__scopeId","data-v-9972e670"]]),Re=y({setup(){const{genSuspense:e}=r(),a=K({});return $((e=>{Object.assign(a,e)})),()=>[Y("div",{},[e(Y(Se,{route:a}))])]}});export{Re as default};
