{"version":3,"file":"index.e79770bf.js","sources":["../../src/views/setting/minimum-order/index.vue","../../src/views/setting/minimum-order/index.js"],"sourcesContent":["<template>\n  <div>\n    <div class=\"flex justify-between lg:items-center md:items-end md:flex-row flex-col items-start  mb-8\">\n      <Breadcrumb pageTitle=\"Minimum Offer Setting\" :backTo=\"{ name: 'setting' }\" :items=\"breadcrumb\" />\n    </div>\n    <Card>\n      <div class=\"grid grid-cols-2\">\n        <div class=\"xl:col-span-1 lg:col-span-1 col-span-2\">\n          <Checkbox v-model=\"data.is_enable_minimum_order\" :value=\"1\" :value-off=\"0\" class=\"font-medium\" color=\"teal\" view=\"smooth\" type=\"toggle\" block @change=\"updateEnable\">Minimum shipping rule</Checkbox>\n        </div>\n      </div>\n      <div v-if=\"data.is_enable_minimum_order\" class=\"visible opacity-100 h-72 transition-all ease-in-out duration-300 overflow-hidden\">\n        <p class=\"mt-8\">\n          Limit buyback offers by quantity or total price in cart\n          <Popover trigger=\"hover\" placement=\"bottom\" width=\"400px\">\n            If you are a wholesaler and want to receive a minimum of 5 items per buyback. Enable this rule and set the minimum item quantity to 5\n            <template #reference>\n              <i class=\"fas fa-info-circle cursor-pointer hover:text-green-base\"></i>\n            </template>\n          </Popover>\n        </p>\n        <div class=\"mt-6\">\n          <h5 class=\"text-lg mb-2\">Shipping Rules</h5>\n          <div class=\"flex items-center w-60\">\n            <div :class=\"data.minimum_order_type === 1 ? 'bg-teal-04 border-teal-04 text-white' : 'border-grey-03'\" class=\"flex-1 py-1.5 border border-r-0 rounded-xl rounded-r-none text-center transition-all ease-in-out duration-300 cursor-pointer px-6 py-6\" @click=\"updatingType(1)\">\n              Quantity\n            </div>\n            <div :class=\"data.minimum_order_type === 2 ? 'bg-teal-04 border-teal-04 text-white' : 'border-grey-03'\"  class=\"flex-1 py-1.5 border border-l-0 rounded-xl rounded-l-none text-center transition-all ease-in-out duration-300 cursor-pointer px-6 py-6\" @click=\"updatingType(2)\">\n              Price\n            </div>\n          </div>\n        </div>\n        <div v-if=\"data.minimum_order_type === 1\" class=\"visible opacity-100 transition-opacity ease-in-out duration-300 mt-6\">\n          <h5 class=\"text-lg mb-2\">Min. Item Qty</h5>\n          <Input v-model=\"data.minimum_order_qty\" type=\"number\" min=\"1\" class=\"border-0 text-right\" @change=\"updatingQtyPrice\" />\n        </div>\n        <div v-else class=\"visible opacity-100 transition-opacity ease-in-out duration-300 mt-6\">\n          <h5 class=\"text-lg mb-2\">Min. Total in Cart</h5>\n          <Input v-model=\"data.minimum_order_price\" type=\"number\" icon @change=\"updatingQtyPrice\">\n            <template #icon>\n              {{ me.currency_symbol }}\n            </template>\n          </Input>\n        </div>\n      </div>\n    </Card>\n  </div>\n</template>\n\n<script>\nimport { defineComponent, onMounted, watch } from 'vue'\nimport { useUser } from 'composable/user'\nimport { useMinimumOrder } from 'composable/setting'\nimport debounce from 'utils/debounce'\nimport Breadcrumb from 'components/Breadcrumb.vue'\nimport Card from 'bbUi/components/card/card.vue'\nimport Checkbox from 'bbUi/components/checkbox/checkbox.vue'\nimport Button from 'bbUi/components/button/button.vue'\nimport Input from 'bbUi/components/input/input.vue'\nimport { ElMessage } from 'element-plus'\n\nexport default defineComponent({\n  components: {\n    Breadcrumb,\n    Card,\n    Checkbox,\n    Button,\n    Input\n  },\n  setup() {\n    const { state, loading, data, getMinimumOrder, updateMinimumOrder } = useMinimumOrder()\n    const { me } = useUser()\n    const breadcrumb = [{\n      text: 'Settings',\n      to: {\n        name: 'setting'\n      }\n    }, {\n      text: 'Minimum Offer Setting'\n    }]\n    const updateEnable = async () => {\n      await updateMinimumOrder().then((res) => {\n        ElMessage({\n          type: 'success',\n          message: 'Minimum offer setting updated!'\n        })\n      })\n    }\n    const updatingQtyPrice = debounce(async () => {\n      await updateEnable()\n    }, 500)\n    const updatingType = async (type) => {\n      data.minimum_order_type = type\n      await updateEnable()\n    }\n\n    watch(\n      () => state.value,\n      (state) => {\n        if (state) {\n          Object.assign(data, {\n            is_enable_minimum_order: Number(state.is_enable_minimum_order),\n            minimum_order_type: Number(state.minimum_order_type),\n            minimum_order_qty: Number(state.minimum_order_qty),\n            minimum_order_price: Number(state.minimum_order_price),\n          })\n        }\n      },\n      { immediate: true }\n    )\n\n    onMounted(() => {\n      getMinimumOrder()\n    })\n\n    return {\n      state,\n      loading,\n      data,\n      breadcrumb,\n      me,\n      updateEnable,\n      updatingQtyPrice,\n      updatingType\n    }\n  }\n})\n</script>","import { defineComponent } from 'vue'\nimport { useSuspense } from 'composable/components'\nimport index from './index.vue'\n\nexport default defineComponent({\n  setup() {\n    const { genSuspense } = useSuspense()\n\n    return () => genSuspense(index)\n  }\n})\n"],"names":["_sfc_main","defineComponent","components","Breadcrumb","Card","Checkbox","Button","Input","[object Object]","state","loading","data","getMinimumOrder","updateMinimumOrder","useMinimumOrder","me","useUser","updateEnable","async","then","res","_u","type","message","updatingQtyPrice","debounce","watch","value","state2","Object","assign","is_enable_minimum_order","Number","minimum_order_type","minimum_order_qty","minimum_order_price","immediate","onMounted","breadcrumb","text","to","name","updatingType","_hoisted_1","class","_hoisted_2","key","_hoisted_5","_hoisted_6","_openBlock","_createElementBlock","_createVNode","_component_Breadcrumb","pageTitle","backTo","default","_withCtx","_createElementVNode","_hoisted_3","_component_Checkbox","modelValue","_ctx","onUpdate:modelValue","_cache","$event","value-off","color","view","block","_hoisted_4","_createTextVNode","_component_Popover","trigger","placement","_hoisted_7","_normalizeClass","_hoisted_8","_component_Input","min","_hoisted_9","icon","index","genSuspense","useSuspense"],"mappings":"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"}