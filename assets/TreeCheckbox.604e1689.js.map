{"version":3,"file":"TreeCheckbox.604e1689.js","sources":["../../src/components/TreeCheckbox.vue"],"sourcesContent":["<template>\n  <div\n    v-for=\"(item, itemIndex) of items\"\n    :key=\"itemIndex\"\n    class=\"w-max px-4 my-4\"\n  >\n    <template v-if=\"!item[children]\">\n      <Checkbox\n        :modelValue=\"modelValue\"\n        @update:modelValue=\"handleCheckboxUpdate\"\n        :value=\"by ? item[by] : item\"\n        ><div class=\"ml-2 font-normal\">\n          <slot v-bind=\"{item}\">{{name ? item[name] : item}}</slot>\n        </div>\n      </Checkbox>\n    </template>\n    <template v-else>\n      <Checkbox\n        v-model=\"isSelectAll\"\n        :value=\"item[by]\"\n        ><div class=\"ml-2 font-normal\">\n          <slot v-bind=\"{item}\">{{name ? item[name] : item}}</slot>\n        </div>\n      </Checkbox>\n      <TreeCheckbox\n        :modelValue=\"modelValue\"\n        @update:modelValue=\"handleCheckboxUpdate\"\n        :items=\"item[children]\"\n        :children=\"children\"\n        :by=\"by\"\n        :name=\"name\"\n        :select-all=\"isSelectAll.includes(item[by])\"\n        :is-parent=\"false\"\n      />\n    </template>\n  </div>\n</template>\n<script>\nimport { defineComponent, ref, watch } from 'vue'\nimport Checkbox from 'bbUi/components/checkbox/checkbox.vue'\n\nexport default defineComponent({\n  name: 'TreeCheckbox',\n  components: {\n    Checkbox\n  },\n  props: {\n    items: {\n      type: Array,\n      default: () => []\n    },\n    children: {\n      type: String,\n      default: 'child'\n    },\n    by: {\n      type: String,\n      default: 'value'\n    },\n    name: {\n      type: String,\n      default: 'name'\n    },\n    modelValue: {\n      type: [\n        Array,\n        Boolean,\n        String,\n        Number\n      ],\n      default: () => ([])\n    },\n    selectAll: {\n      type: Boolean,\n      default: false\n    },\n    isParent: {\n      type: Boolean,\n      default: true\n    }\n  },\n  emits: ['update:modelValue'],\n  setup(props, { emit }) {\n    const isSelectAll = ref([])\n    const handleCheckboxUpdate = (selectedValue) => {\n      // const currentData = props.modelValue\n      // const a = currentData.filter(item => !selectedValue.includes(item))\n      // const b = selectedValue.filter(item => !a.includes(item))\n      // emit('update:modelValue', [...a, ...b])\n      emit('update:modelValue', selectedValue)\n    }\n    watch(() => props.selectAll, (selectAll) => {\n      if(selectAll) {\n        setTimeout(() => {\n          isSelectAll.value = props.items.map(item => item[props.by])\n          emit('update:modelValue', [...props.modelValue, ...props.items.map(item => item[props.by])])\n        }, 10)\n      }else {\n        const items = props.items.map(item => item[props.by])\n        setTimeout(() => {\n          isSelectAll.value = []\n          emit('update:modelValue', props.modelValue.filter(item => !items.includes(item)))\n        }, 10)\n      }\n    })\n    return {\n      isSelectAll,\n      handleCheckboxUpdate\n    }\n  }\n})\n</script>\n"],"names":["_sfc_main","defineComponent","name","components","Checkbox","props","items","type","Array","default","children","String","by","modelValue","Boolean","Number","selectAll","isParent","emits","[object Object]","emit","isSelectAll","ref","watch","setTimeout","value","map","item","filter","includes","handleCheckboxUpdate","selectedValue","_hoisted_1","class","_createElementBlock","_Fragment","_renderList","_ctx","itemIndex","_openBlock","key","onUpdate:modelValue","_cache","$event","_withCtx","_createElementVNode","_hoisted_2","_renderSlot","$slots","_mergeProps","ref_for","_createVNode","select-all"],"mappings":"+LAyCA,MAAKA,EAAaC,EAAa,CAC7BC,KAAM,eACNC,WAAY,CACVC,SAAAA,GAEFC,MAAO,CACLC,MAAO,CACLC,KAAMC,MACNC,QAAS,IAAM,IAEjBC,SAAU,CACRH,KAAMI,OACNF,QAAS,SAEXG,GAAI,CACFL,KAAMI,OACNF,QAAS,SAEXP,KAAM,CACJK,KAAMI,OACNF,QAAS,QAEXI,WAAY,CACVN,KAAM,CACJC,MACAM,QACAH,OACAI,QAEFN,QAAS,IAAO,IAElBO,UAAW,CACTT,KAAMO,QACNL,SAAS,GAEXQ,SAAU,CACRV,KAAMO,QACNL,SAAS,IAGbS,MAAO,CAAC,qBACRC,MAAMd,GAAOe,KAAEA,IACb,MAAMC,EAAcC,EAAI,IAsBjB,OAdPC,GAAM,IAAMlB,EAAMW,YAAYA,IAC5B,GAAGA,EACDQ,YAAW,KACTH,EAAYI,MAAQpB,EAAMC,MAAMoB,KAAIC,GAAQA,EAAKtB,EAAMO,MAClDQ,EAAA,oBAAqB,IAAIf,EAAMQ,cAAeR,EAAMC,MAAMoB,KAAYC,GAAAA,EAAKtB,EAAMO,UACrF,QACC,CACJ,MAAMN,EAAQD,EAAMC,MAAMoB,KAAIC,GAAQA,EAAKtB,EAAMO,MACjDY,YAAW,KACTH,EAAYI,MAAQ,GACpBL,EAAK,oBAAqBf,EAAMQ,WAAWe,QAAeD,IAACrB,EAAMuB,SAASF,QACzE,QAGA,CACLN,YAAAA,EACAS,qBAvB4BC,IAK5BX,EAAK,oBAAqBW,QArElBC,EAAA,CAAAC,MAAM,sJAeZC,EAAAC,EAAA,KAAAC,EAAAC,EAAA/B,OAAA,CAAAqB,EAAAW,KAhCWC,IAAAL,EAAA,MAAA,CACfM,IAAKF,2BAEY,oBAiBJJ,EAAAC,EAAA,CAAAK,IAAA,GAAA,KALW,0BACnBC,sBAAcC,EAAA,OAAA,GAAAC,GAAAN,EAAAhB,YAAAsB,mBACdlC,QAAAmC,GAAA,KACCC,EAAA,MAAAC,EAAA,CAAwBC,EAAAV,EAAAW,OAAA,UAAAC,EAAO,CAAAC,SAAK,GAAY,CAAAvB,KAAAA,KAAA,IAAA,yCAYlD,KAAA,CAAA,aAAA,UARCwB,IAAsB,CACtBtC,WAAAwB,EAAAxB,WACA4B,sBAAoBJ,EAAAP,qBACpBxB,MAAAqB,EAAkBU,EAAA3B,UAClBA,SAAM2B,EAAA3B,SACNE,GAAIyB,EAAMzB,GACVV,KAAAmC,EAAAnC,KACAkD,aAAgBf,EAAAhB,YAAAQ,SAAAF,EAAAU,EAAAzB,8HAxBhB4B,IAAA,EACA3B,WAAAwB,EAAAxB,WACA4B,sBAAiBJ,EAAAP,4CACjBrB,QAAAmC,GAAA,KACCC,EAAA,MAAAb,EAAA,CAAwBe,EAAAV,EAAAW,OAAA,UAAAC,EAAO,CAAAC,SAAK,GAAY,CAAAvB,KAAAA,KAAA,IAAA,4DAsB3C,sBAAA"}