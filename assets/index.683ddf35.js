var e=Object.defineProperty,a=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,l=(a,t,o)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[t]=o;import{u as d}from"./components.0003aa88.js";import{k as n,f as s,g as i,_ as r,m as u,a0 as c,o as p,t as m,D as f,w as g,I as y,B as b,a2 as x,A as _,n as h,a3 as k,F as w,aF as v,U as S,ap as C,y as V,K as P,T,S as B}from"./vendor.f1efedad.js";import{b as U,d as M,e as j,f as E,_ as F,i as A,P as L,u as q,Z as O,g as D}from"./index.9aa6481b.js";import{s as I}from"./setting.2daa7691.js";import{S as R,C as $,u as N}from"./SelectLocation.1c8de914.js";import{C as z}from"./card.dfb8e6f7.js";import{S as K}from"./select.15c77568.js";import{B as Y}from"./Breadcrumb.8dffad84.js";import{C as W}from"./Currency.ae08941b.js";import{_ as Z}from"./ExpeditedIcon.db9b60c4.js";import{d as G}from"./index.05b14cb2.js";import{u as H}from"./index.32689823.js";import{_ as J}from"./badge.b59865a3.js";import{_ as Q}from"./TremendousCard.bcd69752.js";import{V as X}from"./vue-draggable-next.esm-bundler.0ebea46e.js";import"./LoadingCard.be59eb97.js";import"./index.a87b789d.js";import"./fieldset.49a14fc7.js";import"./InputFile.906aed4c.js";import"./breadcrumb.296b7b59.js";const ee=n({name:"ExpeditedPayout",components:{Button:U,Modal:M,Checkbox:j,Input:E,Currency:W,ExpeditedIcon:Z},props:{expeditedConfig:{type:Object,required:!0},loading:{type:Boolean,default:!1}},emits:["update"],setup(e,{emit:a}){const t=s(!1),o=i((()=>e.expeditedConfig)),l={expedited_payout_fee:{required:G((()=>o.value.is_enable_expedited_payout))},expedited_payout_desc:{required:G((()=>o.value.is_enable_expedited_payout))}},d=H(l,o,{$lazy:!0}),n=()=>(d.value.$validate(),!d.value.$invalid);return{modalExpedited:t,expeditedState:o,handleUpdateExpedited:async()=>{n()&&a("update",(()=>{t.value=!1,r({type:"success",message:"Expedited Payouts updated"})}))},rules:l,validation:d,validate:n}}}),ae={class:"rounded-lg border border-grey-01 p-4 mt-4"},te={class:"flex items-center justify-between"};const oe={class:"border border-solid border-grey-01 border-1 rounded-lg rounded space-y-4 p-4"},le={class:"text-lg font-semibold"},de=n({components:{Card:z,Checkbox:j,Input:E,Loading:A,Select:K,Pagination:L,Breadcrumb:Y,Button:U,SelectLocation:R,CustomPayout:$,TremendousCard:{__name:"TremendousCardPayout",setup:e=>(e,a)=>(p(),h(Q,{"is-pro-tip":""},{else:g((()=>[b("div",oe,[b("p",le,[a[1]||(a[1]=y(" Automate Your Payouts ")),f(C(J),{color:"green"},{default:g((()=>a[0]||(a[0]=[b("span",{class:"material-icons",style:{"font-size":"10px !important"}},"check_circle",-1),y(" Active ")]))),_:1})]),a[3]||(a[3]=b("p",null,"Your payout automation is currently active and running as configured.",-1)),f(C(U),{tag:"a",color:"teal",view:"outlined",href:"/add-ons/tremendous/config"},{default:g((()=>a[2]||(a[2]=[b("span",{class:"material-icons"},"settings",-1),y(" Configure ")]))),_:1})])])),_:1}))},Draggable:X,Modal:M,ExpeditedPayout:F(ee,[["render",function(e,a,t,o,l,d){const n=u("ExpeditedIcon"),s=u("Button"),i=u("Checkbox"),r=u("Currency"),C=u("Input"),V=u("Modal"),P=c("maska");return p(),m("div",null,[f(s,{view:"outlined",color:"teal",onClick:a[0]||(a[0]=a=>e.modalExpedited=!0)},{default:g((()=>[f(n,{class:"mr-1 inline-flex"}),a[6]||(a[6]=y(" Expedited Payouts "))])),_:1}),f(V,{modelValue:e.modalExpedited,"onUpdate:modelValue":a[5]||(a[5]=a=>e.modalExpedited=a),title:"Expedited Payouts",size:"sm"},{default:g((()=>[a[8]||(a[8]=b("p",null,"An option for customers seeking faster processing for their offers. The amount you set will be deducted from their offer automatically and will be visible to them.",-1)),a[9]||(a[9]=b("div",{class:"flex gap-3 p-4 bg-orange-lighten mt-4 rounded-lg"},[b("span",{class:"material-icons text-orange-03"},"info"),b("p",{class:"text-orange-03"},[b("span",{class:"font-semibold"},"Important tip:"),y(" We advise using this option carefully, as charging users an expedited service fee while still delaying their processing could lead to a poor experience. "),b("br"),b("br"),y(" The Expedited Payouts option will not be offered to your customers if the Expedited Payout Service Fee is higher than the total payout. ")])],-1)),b("div",ae,[f(i,{value:!0,"value-off":!1,type:"toggle",modelValue:e.expeditedState.is_enable_expedited_payout,"onUpdate:modelValue":a[1]||(a[1]=a=>e.expeditedState.is_enable_expedited_payout=a)},{default:g((()=>a[7]||(a[7]=[y(" Turn on Expedited Payouts ")]))),_:1},8,["modelValue"]),e.expeditedState.is_enable_expedited_payout?(p(),m(x,{key:0},[_((p(),h(C,{modelValue:e.expeditedState.expedited_payout_fee,"onUpdate:modelValue":a[2]||(a[2]=a=>e.expeditedState.expedited_payout_fee=a),label:"Expedited Payout Service Fee",icon:"","icon-block":"",block:"",class:"mt-4",view:e.validation.expedited_payout_fee.$invalid?"danger":"default"},{icon:g((()=>[f(r,{"only-symbol":"",class:"text-xl"})])),_:1},8,["modelValue","view"])),[[P,"#*.##"]]),(p(!0),m(x,null,k(e.validation.expedited_payout_fee.$errors,((e,a)=>(p(),m("small",{class:"text-red-base block my-2",key:a},"Expedited Payout Service Fee is required. ")))),128)),b("label",{class:w(["mt-6",e.validation.expedited_payout_desc.$invalid?"text-red-base":""])}," Expedited Payouts Description ",2),_(b("textarea",{"onUpdate:modelValue":a[3]||(a[3]=a=>e.expeditedState.expedited_payout_desc=a),rows:"4",class:w(["w-full border rounded-lg p-4",e.validation.expedited_payout_desc.$invalid?"border-red-04":"border-grey-01"])},null,2),[[v,e.expeditedState.expedited_payout_desc]]),(p(!0),m(x,null,k(e.validation.expedited_payout_desc.$errors,((e,a)=>(p(),m("small",{class:"text-red-base block my-2",key:a},"Expedited Payouts Description is required. ")))),128))],64)):S("",!0)])])),footer:g((()=>[b("div",te,[f(s,{onClick:a[4]||(a[4]=a=>e.modalExpedited=!1),disabled:e.loading,color:"teal",view:"smooth"},{default:g((()=>a[10]||(a[10]=[y("Cancel")]))),_:1},8,["disabled"]),f(s,{loading:e.loading,onClick:e.handleUpdateExpedited,color:"teal"},{default:g((()=>a[11]||(a[11]=[y("Save Changes")]))),_:1},8,["loading","onClick"])])])),_:1},8,["modelValue"])])}]])},async setup(e,{emit:d}){const{me:n}=q(),{data:u,state:c,loading:p,modal:m,actionAll:f,actionUpdate:g,actionUpdateSwitch:y,actionUpdateExpedited:b}=I(),{data:x,loading:_,modal:h,openModal:k,closeModal:w,unsetData:v,actionUpdate:S}=N(),C=s(null),P=s([{value:!0,label:"Required"},{value:!1,label:"Not Required"}]),T=s(!1),B=i((()=>x.bank_transfer.length<3)),U=i((()=>!Array.isArray(x.bank_transfer)||void 0!==x.bank_transfer.find((e=>""===e.name)))),M=i((()=>c.value.data.data.filter((e=>!([17].includes(e.id)&&0===e.is_enable))))),j=i((()=>!c.value.add_payout_allowed));return V((()=>((e,d)=>{for(var n in d||(d={}))t.call(d,n)&&l(e,n,d[n]);if(a)for(var n of a(d))o.call(d,n)&&l(e,n,d[n]);return e})({},u)),D((async()=>{await f()}),400),{deep:!0}),V((()=>({limit:u.limit,search:u.search})),(()=>u.page=1),{deep:!0}),await f(),{me:n,data:u,dataBankTransferSetting:x,state:c,loading:p,loadingBankTransferSetting:_,updatePaymentMethod:e=>{g({id:e.id,data:{is_enable:e.is_enable,min_amount:e.min_amount,max_amount:e.max_amount,price_increase:e.price_increase?"string"==typeof e.price_increase?parseFloat(e.price_increase):e.price_increase:0,desc:e.desc}})},updatePaymentMethodSwitch:async e=>{const a={payment_id:e.id,is_enable:e.is_enable};y(a).finally((e=>f()))},filterNumber:O,modal:m,modalBankTransferSetting:h,selectPaymentMethod:C,requirementOptions:P,isShowAddBankTransferField:B,isDisableUpdateBankTransferField:U,showSelectLocation:e=>{C.value=e,m.show=!0},closeSelectLocation:async()=>{C.value=null,m.show=!1,f()},openModalBankTransferSetting:k,closeModalBankTransferSetting:w,unsetDataModalBankTransferSetting:v,handleBankTransferRemoveField:e=>{x.bank_transfer.splice(e,1)},handleBankTransferAddField:()=>{x.bank_transfer.push({name:"",attribute_name:"",is_required:!0})},handleBankTransferUpdate:async()=>{await S((e=>{e||(h.value=!1,r({type:"success",message:"Bank transfer setting updated"}))}))},bankTransferFieldPlaceholder:e=>{switch(e){case 0:return"Account Name";case 1:return"Account Number";case 2:return"Routing Number";default:return""}},payoutMethods:M,isAvailableCustom:j,isBankTransferFieldSorting:T,handleRequestPayoutMethod:()=>window.open("https://www.reusely.com/requestpayment","_blank","noreferrer noopener"),handleCustomPayout:async()=>{await f()},handleDragging:()=>{T.value=!0},handlePlaced:()=>{T.value=!1},handleUpdateExpedited:async e=>{await b(e)}}}}),ne={class:"flex flex-wrap items-center justify-between gap-6 mb-6"},se={class:"flex items-center gap-4"},ie={class:"flex flex-wrap items-center space-x-4"},re=["src","alt"],ue={class:"my-auto whitespace-nowrap"},ce={key:0,class:"bg-teal-base text-white whitespace-nowrap flex items-center justify-center rounded-full px-4 h-8 text-sm"},pe={key:1,class:"relative p-4"},me=["onClick"],fe={class:"my-auto font-semibold text-teal-700"},ge={class:"text-lg"},ye={class:"text-lg"},be={key:0,class:"lg:opacity-0 group-hover:opacity-100 transition-opacity flex gap-x-2"},xe={class:"mt-6"},_e={class:"mt-6"},he={class:"col-span-3 mr-4 flex items-end"},ke={class:"flex items-center col-span-6"},we={class:"flex items-center justify-between"};var ve=F(de,[["render",function(e,a,t,o,l,d){const n=u("TremendousCard"),s=u("Input"),i=u("ExpeditedPayout"),r=u("CustomPayout"),w=u("Checkbox"),v=u("TableColumn"),C=u("Loading"),V=u("Button"),U=u("Table"),M=u("Pagination"),j=u("SelectLocation"),E=u("Modal"),F=u("Select"),A=u("Draggable"),L=c("maska"),q=c("loading");return p(),m(x,null,[_((p(),m("div",null,[f(n,{class:"mb-6"}),b("div",ne,[f(s,{placeholder:"Search",modelValue:e.data.search,"onUpdate:modelValue":a[0]||(a[0]=a=>e.data.search=a),block:"",icon:"",class:"w-full md:max-w-2xl"},{icon:g((()=>a[7]||(a[7]=[b("span",{class:"material-icons"},"search",-1)]))),_:1},8,["modelValue"]),b("div",se,[f(i,{expeditedConfig:e.state.expedited_payouts,loading:e.loading.updateExpedited,onUpdate:e.handleUpdateExpedited},null,8,["expeditedConfig","loading","onUpdate"]),f(r,{label:"Custom Payout",disabled:e.isAvailableCustom,onCreate:e.handleCustomPayout},null,8,["disabled","onCreate"])])]),f(U,{data:e.payoutMethods},{default:g((()=>[f(v,{prop:"is_enable",label:""},{default:g((a=>[f(w,{modelValue:a.row.is_enable,"onUpdate:modelValue":e=>a.row.is_enable=e,value:1,"value-off":0,class:"py-2",type:"toggle",onInput:t=>e.updatePaymentMethodSwitch(a.row)},null,8,["modelValue","onUpdate:modelValue","onInput"])])),_:1}),f(v,{prop:"name",label:"Payout Method",width:"240"},{default:g((a=>[b("div",ie,[b("img",{src:a.row.icon,class:"w-8 my-auto",alt:a.row.name},null,8,re),b("div",ue,P(a.row.name),1),a.row.is_custom?(p(),m("div",ce," Custom ")):S("",!0),e.loading.update.get(a.row.id)?(p(),m("div",pe,[f(T,{name:"fade"},{default:g((()=>[f(C)])),_:1})])):S("",!0)])])),_:1}),f(v,{prop:"total_location",label:"Locations",width:"200"},{default:g((t=>[b("div",{class:"text-teal flex space-x-4 text-teal-04",onClick:a=>e.showSelectLocation(t.row)},[b("div",fe,P(t.row.total_location)+" location(s) selected ",1),a[8]||(a[8]=b("div",{class:"my-auto"},[b("i",{class:"material-icons"},"settings")],-1))],8,me)])),_:1}),f(v,{prop:"min_amount",label:"Min Amount",width:"150"},{default:g((a=>[f(s,{modelValue:a.row.min_amount,"onUpdate:modelValue":e=>a.row.min_amount=e,type:"number",placeholder:"Amount",min:"0",onKeypress:e.filterNumber,onFocusOut:t=>e.updatePaymentMethod(a.row),icon:"","icon-block":"",dense:""},{icon:g((()=>[b("span",ge,P(e.me.currency_symbol),1)])),_:2},1032,["modelValue","onUpdate:modelValue","onKeypress","onFocusOut"])])),_:1}),f(v,{prop:"max_amount",label:"Max Amount",width:"150"},{default:g((a=>[f(s,{modelValue:a.row.max_amount,"onUpdate:modelValue":e=>a.row.max_amount=e,type:"number",placeholder:"Amount",min:"0",onKeypress:e.filterNumber,onFocusOut:t=>e.updatePaymentMethod(a.row),icon:"","icon-block":"",dense:""},{icon:g((()=>[b("span",ye,P(e.me.currency_symbol),1)])),_:2},1032,["modelValue","onUpdate:modelValue","onKeypress","onFocusOut"])])),_:1}),f(v,{label:"Set Bonus Percentage",width:"150"},{default:g((({row:t})=>[_((p(),h(s,{modelValue:t.price_increase,"onUpdate:modelValue":e=>t.price_increase=e,placeholder:"Amount",onFocusOut:a=>e.updatePaymentMethod(t),icon:"",right:"","icon-block":"",dense:""},{icon:g((()=>a[9]||(a[9]=[b("span",{class:"text-lg"},"%",-1)]))),_:2},1032,["modelValue","onUpdate:modelValue","onFocusOut"])),[[L,"#*.##"]])])),_:1}),f(v,{prop:"desc",label:"Description",width:"500"},{default:g((a=>[f(s,{modelValue:a.row.desc,"onUpdate:modelValue":e=>a.row.desc=e,type:"textarea",placeholder:"Your customers will see this message when they choose this payout method.",onFocusOut:t=>e.updatePaymentMethod(a.row),class:"w-full"},null,8,["modelValue","onUpdate:modelValue","onFocusOut"])])),_:1}),f(v,{prop:"action"},{default:g((t=>[t.row.is_custom?(p(),m("div",be,[f(r,{edit:"",data:t.row,onUpdate:e.handleCustomPayout},null,8,["data","onUpdate"]),f(r,{trash:"",data:t.row,onDelete:e.handleCustomPayout},null,8,["data","onDelete"])])):S("",!0),"Bank Transfer"===t.row.name&&4===t.row.id?(p(),h(V,{key:1,color:"teal",onClick:e.openModalBankTransferSetting},{default:g((()=>a[10]||(a[10]=[b("i",{class:"material-icons"},"settings",-1),y(" Settings")]))),_:1},8,["onClick"])):S("",!0)])),_:1})])),_:1},8,["data"]),b("div",xe,[f(M,{page:e.data.page,"onUpdate:page":a[1]||(a[1]=a=>e.data.page=a),limit:e.data.limit,"onUpdate:limit":a[2]||(a[2]=a=>e.data.limit=a),data:e.state.data},null,8,["page","limit","data"])])])),[[q,e.loading.all]]),_((p(),h(E,{modelValue:e.modal.show,"onUpdate:modelValue":a[3]||(a[3]=a=>e.modal.show=a),title:"Select Locations",onClose:a[4]||(a[4]=a=>e.modal.show=!1),size:"xl",id:"settingPayoutMethodsLocations","data-intercom-target":"Setting Payout Methods Locations"},{footer:g((()=>a[11]||(a[11]=[]))),default:g((()=>[f(j,{data:e.selectPaymentMethod,onCloseSelectLocation:e.closeSelectLocation},null,8,["data","onCloseSelectLocation"])])),_:1},8,["modelValue"])),[[q,e.loading.locations]]),f(E,{modelValue:e.modalBankTransferSetting,"onUpdate:modelValue":a[6]||(a[6]=a=>e.modalBankTransferSetting=a),title:"Bank Transfer Settings",size:"sm",onClose:e.unsetDataModalBankTransferSetting},{default:g((()=>[a[15]||(a[15]=b("div",{class:"flex bg-blue-lighten px-4 py-4 rounded-lg text-blue-04"},[b("div",null,[b("i",{class:"material-icons"},"info")]),b("div",{class:"flex-grow pt-1 px-4"},[y(" Customize the input fields required for customer that request Bank Transfer. "),b("i",null,"(Minimum of 1, Maximum of 3)")])],-1)),_((p(),m("div",_e,[Array.isArray(e.dataBankTransferSetting.bank_transfer)?(p(),h(A,{key:0,list:e.dataBankTransferSetting.bank_transfer,onStart:e.handleDragging,onEnd:e.handlePlaced,handle:".drag-handle"},{default:g((()=>[(p(!0),m(x,null,k(e.dataBankTransferSetting.bank_transfer,((t,o)=>(p(),m("div",{class:"grid grid-cols-10 my-4",key:t.attribute_name},[a[13]||(a[13]=b("div",{class:"flex items-center justify-center"},[b("i",{class:"material-icons mt-8 px-3 select-none drag-handle",style:{cursor:"grab"}},"drag_handle")],-1)),b("div",he,[f(F,{modelValue:t.is_required,"onUpdate:modelValue":e=>t.is_required=e,name:"label",by:"value",placeholder:"Requirement",items:e.requirementOptions,class:"w-full"},null,8,["modelValue","onUpdate:modelValue","items"])]),b("div",ke,[f(s,{modelValue:t.name,"onUpdate:modelValue":e=>t.name=e,label:"Field Label",block:"",placeholder:e.bankTransferFieldPlaceholder(o),class:"mr-4"},null,8,["modelValue","onUpdate:modelValue","placeholder"]),f(T,{name:"fade"},{default:g((()=>[0===o||e.isBankTransferFieldSorting?S("",!0):(p(),h(V,{key:0,onClick:a=>e.handleBankTransferRemoveField(o),color:"red",class:"mt-8",style:{paddingLeft:".5em",paddingRight:".5em"}},{default:g((()=>a[12]||(a[12]=[b("i",{class:"material-icons px-2"},"delete",-1)]))),_:2},1032,["onClick"]))])),_:2},1024)])])))),128))])),_:1},8,["list","onStart","onEnd"])):S("",!0),e.isShowAddBankTransferField?(p(),h(V,{key:1,disabled:e.loadingBankTransferSetting.update,onClick:e.handleBankTransferAddField,color:"teal",dense:""},{default:g((()=>a[14]||(a[14]=[y("Add Field")]))),_:1},8,["disabled","onClick"])):S("",!0)])),[[q,e.loadingBankTransferSetting.show]])])),footer:g((()=>[b("div",we,[b("a",{class:"px-4 py-3 text-red-04 hover:text-red-03",href:"#!",onClick:a[5]||(a[5]=B(((...a)=>e.closeModalBankTransferSetting&&e.closeModalBankTransferSetting(...a)),["prevent"]))},"Close"),f(V,{disabled:e.isDisableUpdateBankTransferField,onClick:e.handleBankTransferUpdate,color:"teal",loading:e.loadingBankTransferSetting.update},{default:g((()=>a[16]||(a[16]=[y("Save")]))),_:1},8,["disabled","onClick","loading"])])])),_:1},8,["modelValue","onClose"])],64)}]]),Se=n({setup(){const{genSuspense:e}=d();return()=>e(ve)}});export{Se as default};
