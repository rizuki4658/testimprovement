var e=Object.defineProperty,l=Object.defineProperties,a=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,i=(l,a,t)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[a]=t;import{u as d}from"./components.41c6afd8.js";import{H as n}from"./setting.86482221.js";import{C as c}from"./card.de1f0319.js";import{_ as o,f as u,b as v,P as m,d as p,g as f}from"./index.e231b017.js";import{_ as g}from"./breadcrumb.e60df23d.js";import{V as h}from"./vue-draggable-next.esm-bundler.0ebea46e.js";import{k as x,f as b,r as y,g as _,y as w,m as O,a0 as j,o as C,t as D,B as I,D as k,w as S,A,n as E,a2 as P,a3 as M,Q as U,K as B,F as H,U as V,I as N,_ as R}from"./vendor.f1efedad.js";import"./LoadingCard.9892fd7a.js";const T=x({components:{Card:c,Input:u,Button:v,Breadcrumb:g,Pagination:m,Modal:p,Draggable:h},async setup(e,{emit:d}){const{stateAll:c,stateCategories:o,loading:u,filters:v,actionAll:m,actionCategories:p,actionUpdate:g,modal:h}=n(),x=b([]),O=b([]),j=y({index:null,element:null,relatedElement:null,relatedContext:null}),C=y({selectedIndex:null}),D=_((()=>x.value.map((e=>null==e?void 0:e.name)))),I=_((()=>11==x.value.length)),k=_((()=>!!C.selectedIndex)),S=_((()=>{if(Array.isArray(O.value)&&Array.isArray(x.value)){const e=x.value.map((e=>e.name));return O.value.filter((l=>!e.includes(l.name)))}return[]})),A=_((()=>0===S.value.length&&!v.search&&!u.categories)),E=e=>{if(U(e))return null;x.value.push(e),h.update=!1},P=e=>{const l=C.selectedIndex;x.value[l]=e,C.selectedIndex=null,h.update=!1},M=()=>{Object.assign(j,{index:null,element:null,relatedElement:null,relatedContext:null})},U=e=>D.value.includes(e.name);return w((()=>c.value),(e=>x.value=Array.isArray(e)?e:[])),w((()=>o.value),(e=>{Array.isArray(e)&&(O.value=e)})),w((()=>v),f((async()=>await p()),200),{deep:!0}),await Promise.all([m(),p()]),{selectedDevices:x,filteredOptionDevices:S,editCategory:C,breadcrumb:[{text:"Settings",to:{name:"setting"}},{text:"Item Sort Order"}],loading:u,filters:v,modal:h,handleAddTile:E,handleOpenModalAdd:()=>{if(I.value)return null;h.update=!0},handleOpenModalEdit:e=>{C.selectedIndex=e,h.update=!0},handleDeleteTile:e=>{x.value.splice(e,1)},handleUpdate:async()=>await g(x.value,(()=>{R({type:"success",message:"Popular category/brand updated"})})),handleSelectCategory:e=>{k.value?P(e):E(e)},handleCloseModalUpdate:()=>{v.search=null,C.selectedIndex=null},handleDragEnd:e=>{const{relatedElement:l,relatedContext:a,element:t}=j;return null===l?(M(),null):"device-drop-area"===l.id?(x.value.push(t),void M()):(a.index&&null!==t&&null!==a&&a.element&&x.value.splice(a.index,1,t),void M())},handleMoveDeviceOption:e=>{var d,n;return e.from!==e.to&&Object.assign(j,(d=((e,l)=>{for(var a in l||(l={}))s.call(l,a)&&i(e,a,l[a]);if(t)for(var a of t(l))r.call(l,a)&&i(e,a,l[a]);return e})({},e.draggedContext),n={relatedElement:e.related,relatedContext:e.relatedContext},l(d,a(n)))),!1},isCurrentlySelected:U,isReachMaxSelected:I,isEditCategory:k,isHideSellOtherDevice:A}}}),$={class:"flex xl:flex-row flex-col justify-between mb-8"},z={class:"lg:flex lg:divide-x lg:divide-grey-01"},F={class:"flex items-center lg:pr-4 lg:mb-0 mb-4"},K={class:"lg:pl-4 flex items-center"},L={class:"flex"},Q={class:"w-1/2 p-2"},Y={class:"flex items-center mb-6"},q={class:"overflow-y-auto border border-grey-01 rounded-xl bg-grey-lighten p-2",style:{"min-height":"80vh","max-height":"80vh"}},G={class:"card-device"},J={class:"card-device__content"},W={class:"card-device__title"},X={class:"text-xl font-medium"},Z={key:0,id:"device-drop-area",class:"w-1/4 p-2 select-none"},ee={key:1,class:"w-1/4 p-2"},le={class:"w-1/2 p-2 flex flex-col"},ae={class:"flex flex-grow flex-col bg-grey-lighten border border-grey-01 rounded-xl p-2"},te={class:"p-2"},se={class:"relative h-96 max-h-full flex-grow overflow-y-auto"},re={key:0,class:"absolute left-1/2 top-1/2 transform -translate-y-1/2 -translate-x-1/2"},ie={class:"card-device"},de={class:"card-device__content"},ne={class:"card-device__title"},ce={class:"text-xl font-medium"},oe={class:"flex justify-end"};var ue=o(T,[["render",function(e,l,a,t,s,r){const i=O("router-link"),d=O("Breadcrumb"),n=O("Popover"),c=O("Draggable"),o=O("Input"),u=O("Button"),v=O("Card"),m=j("loading");return C(),D("div",null,[I("div",$,[I("div",z,[I("div",F,[k(i,{to:{name:"setting"},class:"text-dark mr-4"},{default:S((()=>l[1]||(l[1]=[I("span",{class:"material-icons"},"chevron_left",-1)]))),_:1}),l[2]||(l[2]=I("h5",null,"Item Sort Order",-1))]),I("div",K,[k(d,{items:e.breadcrumb},{default:S((()=>l[3]||(l[3]=[I("span",{class:"material-icons"},"chevron_right",-1)]))),_:1},8,["items"])])])]),A((C(),E(v,null,{header:S((()=>l[4]||(l[4]=[I("div",{class:"flex flex-wrap items-center"},[I("h6",{class:"text-xl mr-2"},"Item Sort Order")],-1)]))),default:S((()=>[I("div",L,[I("div",Q,[I("div",Y,[l[7]||(l[7]=I("h2",{class:"text-lg mr-2"},"Main Item",-1)),k(n,{trigger:"hover",width:"400"},{reference:S((()=>l[5]||(l[5]=[I("i",{class:"material-icons text-teal-04 cursor-pointer select-none"},"info",-1)]))),default:S((()=>[l[6]||(l[6]=I("div",{class:"break-words"}," You can set up to 11 home page tiles ",-1))])),_:1})]),I("div",q,[k(c,{list:e.selectedDevices,"swap-threshold":1,handle:".card-device__draggable",group:"devices",class:"flex flex-wrap"},{default:S((()=>[(C(!0),D(P,null,M(e.selectedDevices,((e,a)=>(C(),D("div",{class:"w-1/4 p-2",key:a},[I("div",G,[l[8]||(l[8]=I("div",{class:"card-device__draggable"},[I("i",{class:"material-icons"},"open_with")],-1)),I("div",J,[I("div",{class:"card-device__icon",style:U(`-webkit-mask-image: url('${null==e?void 0:e.icon}')`)},null,4),I("div",W,[I("h6",X,B(e.name),1)])])])])))),128)),e.isReachMaxSelected?V("",!0):(C(),D("div",Z,l[9]||(l[9]=[I("div",{class:H(["card-device","h-full","--slot"])},[I("div",{class:"flex flex-col items-center justify-center text-grey-03"},[I("i",{class:"material-icons icon-lg"},"add_circle"),I("p",{class:"text-lg text-center my-4 font-normal"}," Drop Here ")])],-1)]))),e.isHideSellOtherDevice?V("",!0):(C(),D("div",ee,l[10]||(l[10]=[I("div",{class:H(["card-device","h-full","--other"])},[I("div",{class:"flex items-center justify-center h-full"},[I("h3",{class:"text-lg text-white font-normal"}," Sell Other Item "),I("i",{class:"material-icons icon-md"},"chevron_right")])],-1)])))])),_:1},8,["list"])])]),l[15]||(l[15]=I("div",{class:"self-center mx-4"},[I("i",{class:"material-icons icon-md"},"swap_horiz")],-1)),I("div",le,[l[14]||(l[14]=I("div",{class:"mb-6"},[I("h2",{class:"text-lg mr-2"},"Other Items")],-1)),I("div",ae,[I("div",te,[k(o,{modelValue:e.filters.search,"onUpdate:modelValue":l[0]||(l[0]=l=>e.filters.search=l),placeholder:"Search Item Name",block:"",icon:""},{icon:S((()=>l[11]||(l[11]=[I("i",{class:"material-icons"},"search",-1)]))),_:1},8,["modelValue"])]),I("div",se,[e.isHideSellOtherDevice?(C(),D("div",re,l[12]||(l[12]=[I("p",{class:"text-lg"},"No device available",-1)]))):V("",!0),A((C(),E(c,{move:e.handleMoveDeviceOption,onEnd:e.handleDragEnd,list:e.filteredOptionDevices,"swap-threshold":1,handle:".card-device__draggable",group:"devices",class:"flex flex-wrap","empty-insert-threshold":30},{default:S((()=>[(C(!0),D(P,null,M(e.filteredOptionDevices,((e,a)=>(C(),D("div",{class:"w-1/4 p-2",key:a},[I("div",ie,[l[13]||(l[13]=I("div",{class:"card-device__draggable"},[I("i",{class:"material-icons"},"open_with")],-1)),I("div",de,[I("div",{class:"card-device__icon",style:U(`-webkit-mask-image: url('${null==e?void 0:e.icon}')`)},null,4),I("div",ne,[I("h6",ce,B(e.name),1)])])])])))),128))])),_:1},8,["move","onEnd","list"])),[[m,e.loading.categories]])])])])])])),footer:S((()=>[I("div",oe,[k(u,{onClick:e.handleUpdate,loading:e.loading.update,color:"teal",view:"smooth"},{default:S((()=>l[16]||(l[16]=[N("Save")]))),_:1},8,["onClick","loading"])])])),_:1})),[[m,e.loading.all]])])}],["__scopeId","data-v-5b129fc6"]]),ve=x({setup(){const{genSuspense:e}=d();return()=>e(ue)}});export{ve as default};
