var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,s=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,i=(e,a)=>{for(var t in a||(a={}))o.call(a,t)&&s(e,t,a[t]);if(l)for(var t of l(a))n.call(a,t)&&s(e,t,a[t]);return e};import{s as d,v as r,f as c,b as u,_ as m,d as p,j as f,e as b,P as g,g as y}from"./index.73ae30fa.js";import{r as v,f as h,k as w,g as x,y as k,m as _,o as C,t as S,B as P,D as L,a1 as j,a2 as O,K as $,n as F,w as I,I as V,$ as B,U as D,q as A,F as U,A as M,a4 as T,_ as E}from"./vendor.9695fe57.js";import{u as N}from"./index.f40e4a9e.js";import{r as z,a as R,m as q,f as K,c as Z}from"./index.54844a74.js";import{c as J}from"./index.6b6f6369.js";import{_ as G}from"./fieldset.1864b72f.js";import{I as H}from"./InputFile.6a36d671.js";import{s as Y}from"./setting.70ebc1f0.js";import{_ as Q}from"./badge.809b6147.js";const W=()=>{const e=v({bank_transfer:[]}),a=h(!1),t=v({show:!1,update:!1}),l=async(a=(()=>{}))=>{try{t.show=!0;const l=await d.dispatch("setting/bankTransfer/show");e.bank_transfer=l,r(a)&&a(null,null)}catch(l){r(a)&&a(l,null)}finally{t.show=!1}};return{data:e,loading:t,modal:a,actionShow:l,actionUpdate:async(a=(()=>{}))=>{try{t.update=!0,await d.dispatch("setting/bankTransfer/update",e),r(a)&&a(null,null)}catch(l){r(a)&&a(l,null)}finally{t.update=!1}},openModal:async()=>{a.value=!0,await l()},closeModal:()=>a.value=!1,unsetData:()=>{}}},X=w({name:"CustomPayoutForm",components:{Input:c,Button:u,Fieldset:G,InputFile:H},props:{data:{type:Object,default:void 0},edit:{type:Boolean,default:!1}},setup(e){const a=v({name:null,icon:null,fields:[{name:null,type:"text"}]}),t=x((()=>{var e;return null!=(e=a.fields.map((()=>({name:{required:J.withMessage("Field name is required",z)}}))))?e:{}})),l=x((()=>({name:{required:z,maxLength:R(32),minLength:q(3)},icon:{required:z,fileSize:K(256),fileType:Z("image/svg+xml")},fields:t.value}))),o=N(l,a,{$lazy:!0});return k((()=>e.data),(t=>{e.edit&&t&&Object.keys(t).length?(a.name=t.name,a.fields=[],t.attributes&&t.attributes.length&&t.attributes.forEach((e=>{a.fields.push({name:e.name,type:e.type})})),a.icon=t.icon):e.edit||(a.name=null,a.icon=null,a.fields=[{name:null,type:"text"}])}),{immediate:!0,deep:!0}),{state:a,validation:o,handleFile:e=>{a.icon=e},handleAddInput:()=>{var e;null==(e=o.value.fields)||e.$reset(),a.fields.push({name:null,type:"text"})},handleDeleteInput:e=>{var t;null==(t=o.value.fields)||t.$reset(),a.fields.splice(e,1)},handleSubmit:async()=>{if(await o.value.$validate()){let e=[];return a.fields&&a.fields.length&&(e=typeof a.fields!==String&&[...a.fields].filter((e=>e.name&&e.name.length))||[]),{name:a.name,icon:a.icon,fields:e}}}}}}),ee={class:"space-y-8"},ae={class:"flex items-center gap-x-4"},te={class:"max-w-md"};var le=m(X,[["render",function(e,a,t,l,o,n){const s=_("Input"),i=_("Button"),d=_("InputFile"),r=_("Fieldset");return C(),S("div",ee,[P("div",null,[L(s,{modelValue:e.state.name,"onUpdate:modelValue":a[0]||(a[0]=a=>e.state.name=a),label:"Payout Name",placeholder:"Custom Payout Name",class:"w-full"},null,8,["modelValue"]),(C(!0),S(j,null,O(e.validation.name.$errors,((e,a)=>(C(),S("small",{key:a,class:"mt-2 text-red-base block"},$(e.$message)+". ",1)))),128))]),P("div",null,[e.state.fields.length?(C(!0),S(j,{key:1},O(e.state.fields,((t,l)=>{var o,n,d,r;return C(),S("div",{key:l},[a[3]||(a[3]=P("label",{for:"custom_field_name"},"Field Name",-1)),P("div",ae,[L(s,{modelValue:t.name,"onUpdate:modelValue":e=>t.name=e,id:"custom_field_name",placeholder:"Custom Field Name",class:"w-full",view:(null==(n=null==(o=e.validation.fields[l])?void 0:o.name)?void 0:n.$error)?"danger":""},null,8,["modelValue","onUpdate:modelValue","view"]),L(i,{color:"red",onClick:a=>e.handleDeleteInput(l)},{default:I((()=>a[2]||(a[2]=[P("span",{class:"material-icons"},"delete",-1)]))),_:2},1032,["onClick"])]),(C(!0),S(j,null,O((null==(r=null==(d=e.validation.fields[l])?void 0:d.name)?void 0:r.$errors)||[],((e,a)=>(C(),S("small",{key:a,class:"mt-2 text-red-base block"},$(e.$message)+". ",1)))),128))])})),128)):(C(),F(i,{key:0,color:"teal",dense:"",onClick:e.handleAddInput},{default:I((()=>a[1]||(a[1]=[V(" Add Input Field ")]))),_:1},8,["onClick"]))]),P("div",null,[L(r,{class:"rounded-md"},{label:I((()=>a[4]||(a[4]=[V(" Upload Icon ")]))),default:I((()=>[P("div",te,[L(d,{file:e.state.icon,action:!1,acceptFile:"image/svg+xml",preview:"",onInput:e.handleFile},{description:I((()=>[(C(!0),S(j,null,O(e.validation.icon.$errors,((e,a)=>(C(),S("small",{key:a,class:"mt-2 text-red-base block"},$(e.$message)+". ",1)))),128)),a[5]||(a[5]=P("small",null,[P("b",null,"Suggested"),V(": 56x56px ; "),P("b",null,"File"),V(": SVG ; "),P("b",null,"Max"),V(" 250KB ")],-1))])),_:1},8,["file","onInput"])])])),_:1})])])}]]);const oe=w({name:"CustomPayoutPreview",setup:()=>({})});const ne=w({name:"CustomPayout",props:{data:{type:Object,default:void 0},label:{type:String,default:void 0},icon:{type:String,default:void 0},edit:{type:Boolean,default:!1},trash:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},components:{Modal:p,Button:u,CustomPayoutForm:le,CustomPayoutPreview:m(oe,[["render",function(e,a,t,l,o,n){return C(),S("div",null,"Preview")}]])},emits:["create","update","delete","update:modelValue"],setup(e,{emit:a}){const t=h(!1),l=x((()=>e.data||{})),o=h(),{loading:n,create:s,update:i,trash:c}=(()=>{const e=h(!1);return{loading:e,create:async(a,t=(()=>{}))=>{const l=new FormData;Object.keys(a).forEach((e=>{"fields"===e?l.append(e,JSON.stringify(a.fields)):l.append(e,a[e])}));try{e.value=!0,await d.dispatch("setting/paymentMethod/createCustom",l),r(t)&&t()}catch(o){r(t)&&t(o,null)}finally{e.value=!1}},update:async(a,t,l=(()=>{}))=>{const o=new FormData;Object.keys(t).forEach((e=>{"fields"===e?o.append(e,JSON.stringify(t.fields)):o.append(e,t[e])})),o.append("_method","PUT");try{e.value=!0,await d.dispatch("setting/paymentMethod/updateCustom",{id:a,data:o}),r(l)&&l()}catch(n){r(l)&&l(n,null)}finally{e.value=!1}},trash:async(a,t=(()=>{}))=>{try{e.value=!0,await d.dispatch("setting/paymentMethod/deleteCustom",a),r(t)&&t()}catch(l){r(t)&&t(l,null)}finally{e.value=!1}}}})();return{customPayoutForm:o,handleDelete:async()=>await c(l.value.id,(()=>{t.value=!1,a("delete")})),handleSave:async()=>{const n=await o.value.handleSubmit();if(n)return e.edit?i(l.value.id,n,(()=>{t.value=!1,a("update")})):await s(n,(()=>{t.value=!1,a("create")}))},loading:n,create:s,show:t,data:l}}}),se={key:0,class:"custom-payout-trigger--tooltip"},ie={class:"custom-payout-trigger--btn"},de={key:0,class:"flex items-center justify-center gap-x-1"},re={class:"material-icons"},ce={class:"grid md:grid-cols-1 grid-cols-1 gap-x-4"},ue={key:1,class:"flex flex-col justify-center items-center gap-y-4"},me={class:"text-xl font-bold"},pe={class:"flex items-center justify-center gap-x-4"};var fe=m(ne,[["render",function(e,a,t,l,o,n){const s=_("Button"),i=_("CustomPayoutForm"),d=_("Modal"),r=B("loading");return C(),S(j,null,[P("div",{class:U(["custom-payout-trigger",e.disabled&&"custom-payout-trigger--disabled"])},[e.disabled?(C(),S("div",se,a[3]||(a[3]=[P("div",{class:"custom-payout-trigger--tooltip__content"}," You are limited to having only one custom payout method. ",-1)]))):D("",!0),P("div",ie,[L(s,{color:e.trash?"red":"teal",disabled:e.disabled,dense:e.edit||e.trash,view:e.edit&&e.trash?"filled":"outlined",onClick:a[0]||(a[0]=a=>e.show=!0)},{default:I((()=>[e.$slots.default?A(e.$slots,"default",{key:1}):(C(),S("div",de,[P("span",re,$(e.icon||(e.edit?"mode_edit":e.trash?"delete":"add")),1),V(" "+$(e.label||""),1)]))])),_:3},8,["color","disabled","dense","view"])])],2),(C(),F(T,{to:"body"},[L(d,{modelValue:e.show,"onUpdate:modelValue":a[2]||(a[2]=a=>e.show=a),"hide-header":e.trash,size:e.trash?"xs":"sm",title:"Custom Payout"},{default:I((()=>{var t;return[P("div",ce,[e.trash?D("",!0):M((C(),F(i,{key:0,data:e.data,edit:!!(null==(t=e.data)?void 0:t.id),ref:"customPayoutForm"},null,8,["data","edit"])),[[r,e.loading]]),e.trash?M((C(),S("div",ue,[a[5]||(a[5]=P("p",{class:"text-red-04"},[P("span",{class:"material-icons",style:{fontSize:"10rem !important",lineHeight:"10rem"}}," error_outline ")],-1)),P("p",me," Delete "+$(e.data.name)+" Payout Method? ",1),a[6]||(a[6]=P("p",{class:"w-96 text-sm text-center text-grey-02"}," Removing this payout method will not delete any existing offers associated with it ",-1)),P("div",pe,[L(s,{loading:e.loading,color:"red",onClick:e.handleDelete},{default:I((()=>a[4]||(a[4]=[V(" Delete ")]))),_:1},8,["loading","onClick"]),P("div",{class:"hover:bg-grey-01 px-4 py-4 rounded-xl cursor-pointer",onClick:a[1]||(a[1]=a=>e.show=!1)}," Cancel ")])])),[[r,e.loading]]):D("",!0)])]})),footer:I((()=>[e.trash?D("",!0):(C(),F(s,{key:0,loading:e.loading,color:"teal",onClick:e.handleSave},{default:I((()=>a[7]||(a[7]=[V(" Save Changes ")]))),_:1},8,["loading","onClick"]))])),_:1},8,["modelValue","hide-header","size"])]))],64)}]]);const be=w({components:{Alert:f,Badge:Q,Button:u,Checkbox:b,Input:c,Pagination:g},props:{data:{type:Object,default:()=>({})}},emits:["closeSelectLocation"],async setup(e,{emit:l}){const{dataLocation:o,stateLocation:n,loading:s,actionAll:d,actionLocation:r,actionLocationUpdate:c}=Y(),u=v(i({},e.data)),m=h([]),p=h([]),f=h(),b=y((async()=>{await r({id:u.id})}),500);return b(),k((()=>({limit:o.limit,search:o.search})),(()=>{1==o.page?b():o.page=1}),{deep:!0}),k((()=>({page:o.page})),(()=>{b()}),{deep:!0}),k((()=>n.value),(()=>m.value=n.value.data.map((e=>{return l=i({},e),a(l,t({selected:!1}));var l}))),{deep:!0}),{data:u,dataLocation:o,table:n,loading:s,selectedLocations:p,selectableRow:e=>!0,getRowKey:e=>e.id,tableOnSelect:e=>{p.value=f.value.store.states.selection.value,f.value.toggleRowSelection(e)},enableLocation:async()=>{const e={store_id:p.value.map((e=>e.store_id.toString())).join(),payment_id:u.id,is_enable:1};await Promise.all([c(e),d()]),l("closeSelectLocation"),E({type:"success",message:`Now ${u.name} is available for ${p.value.length} locations.`})},disableLocation:async()=>{const e={store_id:p.value.map((e=>e.store_id.toString())).join(),payment_id:u.id,is_enable:0};await Promise.all([c(e),d()]),l("closeSelectLocation"),E({type:"success",message:`${p.value.length} location disabled ${u.name}.`})},tableTemp:m,tableOnSelectAll:e=>{e.length?(m.value.map((e=>{e.selected=!0})),p.value=m.value):(m.value.map((e=>{e.selected=!1})),f.value.clearSelection(),p.value=[])},refTable:f,censorLocationName:e=>{if(!e)return e;let a=e;return a=a.replace(/(?:\d[\s.-]?){5,}/g,(e=>{const a=e.replace(/\D/g,"");return a.length<=4?"*".repeat(a.length):`${a.slice(0,4)}${"*".repeat(a.length-4)}`})),a=a.replace(/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}/g,(e=>`${e[0]}${"*".repeat(e.length-1)}`)),a=a.replace(/\b(call us|contact us|email us|text us)\b/gi,(e=>"*".repeat(e.length))),a}}}}),ge={class:"mb-5"},ye={class:"info-location flex mb-5 py-2 px-4 align-items text-blue-04 rounded-lg"},ve={class:"ml-4 mt-1"},he={class:"flex flex-col md:flex-row mb-5"},we={class:"flex-grow md:mb-0 mb-3"},xe={key:0,id:"bothEnableDisableButtons","data-intercom-target":"Both enable and disable buttons",class:"flex items-center flex-row float-left mb-5"},ke={id:"buttonEnablePayoutLocation","data-intercom-target":"Button to enable locations",class:"inline-block mr-4"},_e={id:"buttonDisablePayoutLocation","data-intercom-target":"Button to disable locations",class:"inline-block mr-4"},Ce={key:1},Se={id:"checkboxEnableDisablePayoutLocation","data-intercom-target":"Checkbox to enable or disable locations"},Pe={class:"text-teal-04 font-semibold"},Le={class:"whitespace-nowrap"};var je=m(be,[["render",function(e,a,t,l,o,n){var s;const i=_("Input"),d=_("Button"),r=_("Checkbox"),c=_("TableColumn"),u=_("Badge"),m=_("Table"),p=_("Pagination"),f=B("loading");return C(),S("div",ge,[P("div",ye,[a[3]||(a[3]=P("div",null,[P("span",{class:"material-icons text-4xl"},"info")],-1)),P("div",ve,$(e.data.total_location)+" store locations use "+$(e.data.name),1)]),P("div",he,[P("div",we,[L(i,{modelValue:e.dataLocation.search,"onUpdate:modelValue":a[0]||(a[0]=a=>e.dataLocation.search=a),placeholder:"Search Everything",class:"w-full",icon:""},{icon:I((()=>a[4]||(a[4]=[P("span",{class:"material-icons"},"search",-1)]))),_:1},8,["modelValue"])])]),e.selectedLocations.length>0?(C(),S("div",xe,[P("div",ke,[L(d,{color:"teal",view:"smooth",onClick:e.enableLocation,dense:""},{default:I((()=>a[5]||(a[5]=[P("span",{class:"p-2"},"Enable",-1)]))),_:1},8,["onClick"])]),P("div",_e,[L(d,{color:"teal",view:"outlined",onClick:e.disableLocation,dense:""},{default:I((()=>a[6]||(a[6]=[P("span",{class:"p-2"},"Disable",-1)]))),_:1},8,["onClick"])])])):D("",!0),(null==(s=e.table)?void 0:s.data)?(C(),S("div",Ce,[M((C(),F(m,{ref:"refTable",class:"mb-6","row-key":e.getRowKey,data:e.tableTemp,onSelectAll:e.tableOnSelectAll,"max-height":"450"},{default:I((()=>[L(c,{type:"selection",selectable:e.selectableRow,"class-name":"check-all"},{default:I((a=>[P("div",Se,[L(r,{modelValue:a.row.selected,"onUpdate:modelValue":e=>a.row.selected=e,value:!0,"value-of":!1,onChange:t=>e.tableOnSelect(a.row)},null,8,["modelValue","onUpdate:modelValue","onChange"])])])),_:1},8,["selectable"]),L(c,{prop:"name",label:"Store Name",width:"150"},{default:I((a=>[P("span",Pe,$(e.censorLocationName(a.row.name)),1)])),_:1}),L(c,{prop:"email",label:"Email",width:"250"}),L(c,{prop:"address_text",label:"Location",width:"350"}),L(c,{prop:"phone",label:"Phone",width:"150"}),L(c,{prop:"type",label:"Type",width:"100"},{default:I((e=>[P("span",{class:U("Mail-In"==e.row.type?"inline-block py-1 px-3 bg-teal-04 text-white text-xs rounded-xl":"")},$(e.row.type),3)])),_:1}),L(c,{prop:"status",label:"Status",width:"100"},{default:I((e=>[L(u,{color:"Disable"==e.row.status?"grey":"teal"},{default:I((()=>[P("span",Le,$("Disable"==e.row.status?"Off":"On"),1)])),_:2},1032,["color"])])),_:1})])),_:1},8,["row-key","data","onSelectAll"])),[[f,e.loading.locationAll]]),L(p,{page:e.dataLocation.page,"onUpdate:page":a[1]||(a[1]=a=>e.dataLocation.page=a),limit:e.dataLocation.limit,"onUpdate:limit":a[2]||(a[2]=a=>e.dataLocation.limit=a),data:e.table},null,8,["page","limit","data"])])):D("",!0)])}],["__scopeId","data-v-745575e0"]]);export{fe as C,je as S,W as u};
