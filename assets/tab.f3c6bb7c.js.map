{"version":3,"file":"tab.f3c6bb7c.js","sources":["../../system-design/src/components/tab/tab.vue"],"sourcesContent":["<script>\r\nimport { defineComponent, resolveComponent, h, ref } from 'vue'\r\nimport { RouterLink } from 'vue-router'\r\nimport { mixinPosition, mixinType, mixinView } from '../../mixins'\r\nimport { addMixinPrefix } from '../../util/helpers'\r\n\r\nexport default defineComponent({\r\n  name: 'Tab',\r\n  mixins: [\r\n    ...addMixinPrefix([\r\n      mixinPosition,\r\n      mixinView('smooth'),\r\n      mixinType\r\n    ], 'tab')\r\n  ],\r\n  props: {\r\n    modelValue: [\r\n      String,\r\n      Array,\r\n      Object,\r\n      Number\r\n    ],\r\n    items: {\r\n      type: Array,\r\n      default: () => ([])\r\n    },\r\n    component: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    icon: {\r\n      type: String,\r\n      default: 'icon'\r\n    },\r\n    withIcon: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    by: {\r\n      type: String,\r\n      default: 'component'\r\n    },\r\n    name: {\r\n      type: String,\r\n      default: 'name'\r\n    },\r\n    url: {\r\n      type: String,\r\n      default: 'to'\r\n    },\r\n    validate: {\r\n      type: Function,\r\n      default: null\r\n    },\r\n    useExternalIcon: {\r\n      type: Boolean,\r\n      default: false,\r\n    },\r\n    align: {\r\n      type: String,\r\n      default: 'center',\r\n    },\r\n    disabledItems: {\r\n      type: Boolean,\r\n      default: false\r\n    }\r\n  },\r\n  emits: [\r\n    'update:modelValue',\r\n    'change',\r\n    'scroll-end'\r\n  ],\r\n  setup(props, { slots, emit }) {\r\n    const views = ref(['raised', 'smooth'])\r\n    const types = ref(['vertical'])\r\n    const changeValue = data => {\r\n      emit('update:modelValue', data)\r\n      emit('change')\r\n    }\r\n\r\n    const genItems = () => {\r\n      // TODO: Add responsive for overflow tab\r\n      let items = []\r\n      props.items.forEach((item, index) => {\r\n        if(props.validate === null || props.validate(item)) {\r\n          const by = props.by === null ? item : item[props.by]\r\n          const slotTitle = slots.title && slots.title({\r\n            item,\r\n            self: {\r\n              name: props.name == null ? item : item[props.name],\r\n              value: by\r\n            }\r\n          }) || item[props.name]\r\n          const itemTag = !props.component ? RouterLink : 'a'\r\n          const itemProps = !props.component ? {\r\n            tag: 'a',\r\n            class: [\r\n              'tab-item__link',\r\n              props.align === 'center' ? 'justify-center' : props.align === 'left' ? 'justify-start' : 'justify-end',\r\n              props.disabledItems && item.disabled ? 'tab-item__link--disabled' : ''\r\n            ],\r\n            to: item[props.url]\r\n          } : {\r\n            href: '#',\r\n            class: [\r\n              'tab-item__link',\r\n              props.align === 'center' ? 'justify-center' : props.align === 'left' ? 'justify-start' : 'justify-end',\r\n              props.modelValue === by ? 'active' : '',\r\n              props.disabledItems && item.disabled ? 'tab-item__link--disabled' : ''\r\n            ],\r\n            onClick: e => {\r\n              e.preventDefault()\r\n              if (item.disabled) return\r\n              changeValue(by)\r\n            }\r\n          }\r\n\r\n          const itemIcon = h('span', {\r\n            tag: 'span',\r\n            class: [\r\n              'material-icons mr-3',\r\n            ],\r\n          }, item[props.icon])\r\n\r\n          const itemIconImg = h('img', {\r\n            tag: 'img',\r\n            class: ['w-4 h-4 mr-3'],\r\n            src: item[props.icon]\r\n          })\r\n\r\n          const itemChild = h(\r\n            itemTag,\r\n            itemProps,\r\n            item[props.icon] ? {\r\n              default: () => [\r\n                props.useExternalIcon ? itemIconImg : itemIcon,\r\n                slotTitle\r\n              ]\r\n            } : {\r\n              default: () => slotTitle\r\n            }\r\n          )\r\n\r\n          items.push(h('li', {\r\n            class: 'tab-item'\r\n          }, itemChild))\r\n        }\r\n      })\r\n      return items\r\n    }\r\n    const tabListRef = ref(null)\r\n    const ticking = ref(false)\r\n\r\n    const handleScroll = (e) => {\r\n      const el = e.target\r\n\r\n      if (!ticking.value) {\r\n        window.requestAnimationFrame(() => {\r\n          const scrollRight = el.scrollLeft + el.clientWidth\r\n          const threshold = 5\r\n          if (el.scrollWidth - scrollRight <= threshold) {\r\n            emit('scroll-end')\r\n          }\r\n          ticking.value = false\r\n        })\r\n        ticking.value = true\r\n      }\r\n    }\r\n\r\n    return {\r\n      views,\r\n      genItems,\r\n      changeValue,\r\n      types,\r\n      tabListRef,\r\n      handleScroll\r\n    }\r\n    },\r\n  render() {\r\n    const children = [\r\n      this.genItems()\r\n    ]\r\n    const listClass = [\r\n      'tab',\r\n      this.classPosition,\r\n      this.classView,\r\n      this.classType,\r\n    ]\r\n\r\n    return h('ul', {\r\n      ref: 'tabListRef',\r\n      class: listClass,\r\n      style: {\r\n        scrollBehavior: 'smooth'\r\n      },\r\n      onScroll: this.handleScroll\r\n    }, children)\r\n  }\r\n})\r\n</script>"],"names":["_sfc_main","defineComponent","name","mixins","addMixinPrefix","mixinPosition","mixinView","mixinType","props","modelValue","String","Array","Object","Number","items","type","default","component","Boolean","icon","withIcon","by","url","validate","Function","useExternalIcon","align","disabledItems","emits","[object Object]","slots","emit","views","ref","types","changeValue","data","tabListRef","ticking","genItems","forEach","item","index","slotTitle","title","self","value","itemTag","RouterLink","itemProps","href","class","disabled","onClick","e","preventDefault","tag","to","itemIcon","h","itemIconImg","src","itemChild","push","handleScroll","el","target","window","requestAnimationFrame","scrollRight","scrollLeft","clientWidth","scrollWidth","children","this","listClass","classPosition","classView","classType","style","scrollBehavior","onScroll"],"mappings":"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"}