var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,i=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,s=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t,n=(e,a)=>{for(var l in a||(a={}))i.call(a,l)&&s(e,l,a[l]);if(t)for(var l of t(a))o.call(a,l)&&s(e,l,a[l]);return e},d=(e,t)=>a(e,l(t));import{u as r}from"./components.aaee2f92.js";import{k as m,y as c,m as p,$ as u,o as f,t as v,B as y,A as b,n as w,w as h,D as g,I as x,a1 as k,f as _,K as T,U as S,O as C,g as E,_ as V,v as P,a2 as j,F as U,a5 as I,r as M,L as D,S as N}from"./vendor.9695fe57.js";import{c as F,B as A,i as B}from"./setting.598aa5c3.js";import{u as O,a as $,b as G,c as R}from"./emailTemplate.12995d7d.js";import{P as q,e as L,b as Y,_ as z,j as W,d as X,f as H,a4 as K,G as J,r as Q,g as Z}from"./index.35a87af4.js";import{u as ee}from"./index.f40e4a9e.js";import{c as ae}from"./index.6b6f6369.js";import{r as le,e as te}from"./index.54844a74.js";import{C as ie}from"./card.85454cb1.js";import{_ as oe}from"./tab.8e54d1d1.js";import{B as se}from"./Breadcrumb.a04d3c7a.js";import{S as ne}from"./SVGLoader.892d7914.js";import{P as de}from"./PreviewEmailTemplate.11ff5851.js";import{C as re}from"./Colorpicker.0d951354.js";import{I as me}from"./InputVerificationCode.bc5d4323.js";import{C as ce}from"./CollapsibleCard.4278c384.js";import{_ as pe}from"./group-container.5846be88.js";import"./LoadingCard.fae900cb.js";import"./breadcrumb.f242deab.js";import"./IframeRender.46e71567.js";const ue=m({name:"StaffNotificationsList",components:{PreviewEmailTemplate:de,Pagination:q,Checkbox:L,Button:Y},props:{type:{type:String,default:"mail-in"}},async setup(e,a){const{loading:l,preview:t,query:i,data:o,handlePreview:s,handleStatus:n,handleEdit:d,handleShow:r}=O();return c((()=>e.type),(async()=>{i.value.type=e.type,await r()}),{immediate:!0}),await r(),{loading:l,preview:t,query:i,data:o,handlePreview:s,handleStatus:n,handleEdit:d,handleShow:r}}}),fe={class:"space-y-4"};const ve=m({name:"StaffNotifications",components:{Tab:oe,StaffNotificationsList:z(ue,[["render",function(e,a,l,t,i,o){const s=p("TableColumn"),n=p("Checkbox"),d=p("Button"),r=p("DropdownItem"),m=p("DropdownMenu"),c=p("Dropdown"),_=p("Table"),T=p("PreviewEmailTemplate"),S=u("loading");return f(),v(k,null,[y("div",fe,[b((f(),w(_,{data:e.data},{default:h((()=>[g(s,{prop:"name",label:"Title"}),g(s,{prop:"desc",label:"Description"}),g(s,{label:"Active",width:"100"},{default:h((a=>[g(n,{modelValue:a.row.is_enable,"onUpdate:modelValue":e=>a.row.is_enable=e,type:"toggle",value:1,"value-off":0,disabled:a.row.loading,onInput:l=>e.handleStatus(a.row)},null,8,["modelValue","onUpdate:modelValue","disabled","onInput"])])),_:1}),g(s,{label:"",align:"right"},{default:h((l=>[g(c,{trigger:"click","hide-on-click":"",placement:"bottom-end",class:"mr-8"},{dropdown:h((()=>[g(m,{class:"py-1 text-sm"},{default:h((()=>[g(r,{class:"text-base",onClick:a=>e.handlePreview(l.row)},{default:h((()=>a[2]||(a[2]=[y("span",{class:"material-icons mr-2"},"visibility",-1),x(" Preview ")]))),_:2},1032,["onClick"]),g(r,{class:"text-base",onClick:a=>e.handleEdit(l.row)},{default:h((()=>a[3]||(a[3]=[y("span",{class:"material-icons mr-2"},"edit",-1),x(" Edit ")]))),_:2},1032,["onClick"])])),_:2},1024)])),default:h((()=>[g(d,{loading:l.row.loading,color:"teal",view:"outlined",dense:"",icon:""},{default:h((()=>a[1]||(a[1]=[y("span",{class:"material-icons"},"more_horiz",-1)]))),_:2},1032,["loading"])])),_:2},1024)])),_:1})])),_:1},8,["data"])),[[S,e.loading]])]),g(T,{show:e.preview.show,"onUpdate:show":a[0]||(a[0]=a=>e.preview.show=a),body:e.preview.body,"render-type":"direct"},null,8,["show","body"])],64)}],["__scopeId","data-v-8e1a3002"]])},props:{tabs:{type:Array,default:()=>[]}},setup(e){const a=_([]),l=_();return c((()=>e.tabs),(()=>{var t;a.value=e.tabs,l.value=Array.isArray(e.tabs)?null==(t=e.tabs.find((e=>!e.disabled)))?void 0:t.value:void 0}),{deep:!0,immediate:!0}),{tabs:a,activeTab:l,handleActiveTab:e=>{l.value=e}}}}),ye={class:"flex items-center justify-center gap-4"},be={key:0,class:"px-3 py-1 -ml-2 bg-teal-04 text-white rounded-full flex items-center justify-center box-border text-xs"},we={class:"max-w-sm"},he={key:0},ge={key:1},xe={key:2};var ke=z(ve,[["render",function(e,a,l,t,i,o){const s=p("Tooltip"),n=p("Tab"),d=p("StaffNotificationsList");return f(),v("div",null,[g(n,{items:e.tabs,"model-value":e.activeTab,component:"",name:"name",by:"value","disabled-items":"","onUpdate:modelValue":e.handleActiveTab},{title:h((e=>[y("div",ye,[x(T(e.item.name)+" ",1),"easy-offer"===e.item.value?(f(),v("div",be," API ")):S("",!0),g(s,{placement:"top"},{content:h((()=>[y("div",we,[e.item.disabled?(f(),v("p",he," No active "+T("mail-in"===e.item.value?"Mail-In":"In-Store")+" locations, so these settings are disabled. They'll be available once you add one. ",1)):"mail-in"===e.item.value?(f(),v("p",ge," Get notified each time a lead comes through the widget or website. ")):(f(),v("p",xe," Get notified each time a lead comes through the widget. "))])])),default:h((()=>[a[0]||(a[0]=y("i",{class:"material-icons text-teal-04"},"info",-1))])),_:2},1024)])])),_:1},8,["items","model-value","onUpdate:modelValue"]),g(d,{type:e.activeTab},null,8,["type"])])}]]);var _e=z(m({name:"GeneralNotifications",components:{PreviewEmailTemplate:de,Checkbox:L,Button:Y},async setup(){const e=C(),{data:a,query:l,loading:t,preview:i,previewTemplate:o,handleShow:s,handleStatus:n,handlePreview:d}=$();return await s(),{data:a,query:l,loading:t,preview:i,previewTemplate:o,handleShow:s,handleStatus:n,handlePreview:d,handleEdit:a=>{null!==a.link_to?e.push(a.link_to):e.push({name:"settingEmailTemplateGeneralForm",params:{id:a.id}})}}}}),[["render",function(e,a,l,t,i,o){const s=p("TableColumn"),n=p("Button"),d=p("DropdownItem"),r=p("DropdownMenu"),m=p("Dropdown"),c=p("Table"),_=p("PreviewEmailTemplate"),T=u("loading");return f(),v(k,null,[b((f(),w(c,{data:e.data},{default:h((()=>[g(s,{prop:"name",label:"Title"}),g(s,{prop:"desc",label:"Description"}),g(s,{label:"",align:"right"},{default:h((({row:l})=>[g(m,{trigger:"click","hide-on-click":"",placement:"bottom-end",class:"mr-8"},{dropdown:h((()=>[g(r,{class:"py-1 text-sm"},{default:h((()=>[g(d,{class:"text-base",onClick:a=>e.handlePreview(l)},{default:h((()=>a[2]||(a[2]=[y("span",{class:"material-icons mr-2"},"visibility",-1),x(" Preview ")]))),_:2},1032,["onClick"]),g(d,{class:"text-base",onClick:a=>e.handleEdit(l)},{default:h((()=>a[3]||(a[3]=[y("span",{class:"material-icons mr-2"},"edit",-1),x(" Edit ")]))),_:2},1032,["onClick"])])),_:2},1024)])),default:h((()=>[g(n,{loading:l.loading,color:"teal",view:"outlined",dense:"",icon:""},{default:h((()=>a[1]||(a[1]=[y("span",{class:"material-icons"},"more_horiz",-1)]))),_:2},1032,["loading"])])),_:2},1024)])),_:1})])),_:1},8,["data"])),[[T,e.loading]]),g(_,{show:e.preview,"onUpdate:show":a[0]||(a[0]=a=>e.preview=a),body:e.previewTemplate,"render-type":"direct"},null,8,["show","body"])],64)}],["__scopeId","data-v-2eb4d3ae"]]);const Te=m({name:"DefaultEmailSender",components:{Alert:W,Modal:X,Input:H,Button:Y,GroupContainer:pe,CollapsibleCard:ce},emits:["select","show-form"],async setup(e,{emit:a}){const{data:l,validate:t,methods:i}=G(),o=E((()=>l.table)),s=E((()=>{const e=[...o.value];if(0===e.length)return!1;const a=e[0];if(!1===a.is_active||"unknown"===a.valid)return!0;return e.slice(1).some((e=>"unknown"===e.valid))})),r=E((()=>{const e=o.value;if(!(null==e?void 0:e.length))return!1;const a=e.filter((e=>"TXT"===e.record_type)),l=e.filter((e=>"MX"===e.record_type)),t=a.every((e=>"unknown"!==e.valid)),i=l.some((e=>"unknown"===e.valid&&e.cached&&e.cached.length>0));return t&&i})),m=E((()=>{const e=o.value,a=s.value;return l.options.map((t=>e.length?"domain"===t.key?d(n({},t),{active:!a,alert:a,editable:a||e.length&&l.domain}):d(n({},t),{active:a,alert:!1,editable:!1}):n({},t)))})),p=E((()=>!!(o.value.length&&m.value[1].active&&l.domain)));return c((()=>l.form.email),(e=>{if(e&&e.includes("@")){const a=e.split(""),t=a.findIndex((e=>"@"==e));t<0&&l.form.domain;const i=a.splice(t+1,e.split("").length);l.form.domain=i.join("")}})),await i.show(),{data:l,computedTable:o,computedOptions:m,computedShowTable:p,computedUnverified:s,computedTxtMxStatus:r,validate:t,handleReset:async()=>{await i.reset((async()=>{await i.show()})),l.modal.sender=!1},handleVerify:async()=>{await i.verify((async e=>{e.code&&400==e.code?l.verifying=!0:l.verifying=!1,await i.show()}))},handleCopyText:e=>{navigator.clipboard.writeText(e).then((()=>{V({type:"success",message:"Text copied to clipbord"})}))},handleShowForm:()=>{l.form.email=l.email,l.form.domain=l.domain,l.form.region=l.continent,l.modal.formCustom=!0,l.modal.sender=!1,a("show-form")},handleSaveForm:async()=>{await t.value.$validate()&&await i.add(l.form,(async()=>{l.modal.sender=!1,l.modal.formCustom=!1,await i.show()}))},handleCloseForm:()=>{if(!l.loading.all){for(let e of Object.keys(l.form))l.form[e]="";t.value.$reset(),l.modal.sender=!1,l.modal.formCustom=!1}}}}}),Se={class:"bg-white border rounded-lg p-6 border-grey-02"},Ce={class:"flex items-center"},Ee={class:"text-teal-04 text-xl font-semibold"},Ve={key:0,class:"flex ml-4 items-center space-x-2 px-4 w-max bg-orange-01 text-orange-04 rounded-full"},Pe={key:1,class:"flex ml-4 items-center rounded-full bg-green-01 px-4 w-max text-green-04"},je={key:2,class:"flex ml-4 items-center gap-x-4"},Ue={key:0,class:"border rounded-md border-grey-02 relative my-8"},Ie={class:"p-4 pt-6"},Me={class:"list-disc pl-5"},De=["innerHTML"],Ne={class:"flex items-center gap-x-2 flex-wrap"},Fe=["onClick"],Ae={class:"flex items-center gap-x-2"},Be={class:"truncate"},Oe=["onClick"],$e={key:0},Ge={key:0,class:"flex gap-4 items-center"},Re={class:"text-sm"},qe={key:1,class:"bg-green-01 text-sm rounded-full text-green-04 inline-block px-3 py-1.5"},Le={key:1},Ye={key:0,class:"flex gap-4 items-center"},ze={class:"text-sm"},We={key:0},Xe={key:1},He={key:1,class:"bg-green-01 text-sm rounded-full text-green-04 inline-block px-3 py-1.5"},Ke={key:0,class:"flex justify-center items-center gap-x-3"},Je={class:"-mx-4"},Qe={class:"mb-6"},Ze={class:"mb-6"},ea={class:"flex"},aa={class:"-mx-4 flex justify-between items-center"};const la=m({components:{Card:ie,Input:H,Button:Y,Checkbox:L,Alert:W,Modal:X,Tab:oe,Breadcrumb:se,Pagination:q,SVGLoader:ne,GeneralNotifications:_e,PreviewEmailTemplate:de,Colorpicker:re,InputVerificationCode:me,DefaultEmailSender:z(Te,[["render",function(e,a,l,t,i,o){const s=p("CollapsibleCard"),n=p("Button"),d=p("Alert"),r=p("TableColumn"),m=p("Tooltip"),c=p("Table"),_=p("Modal"),C=p("Input"),E=p("RadioButton"),V=p("RadioGroup"),I=u("loading");return f(),v(k,null,[y("div",Se,[y("div",Ce,[y("h3",Ee,T(e.data.email?e.data.email:"-"),1),e.computedUnverified&&!e.computedTxtMxStatus?(f(),v("div",Ve,a[6]||(a[6]=[y("div",null,[y("i",{class:"material-icons"},"info")],-1),y("div",null," We recommend fully verifying your domain below to ensure a high deliverability rate. ",-1)]))):S("",!0),!1===e.computedUnverified&&e.data.domain&&e.computedTable.length>0?(f(),v("div",Pe,a[7]||(a[7]=[y("i",{class:"material-icons"},"check_circle",-1),y("span",{class:"font-medium mx-2"},"Verified",-1)]))):S("",!0),e.computedTxtMxStatus?(f(),v("div",je,a[8]||(a[8]=[P('<div class="flex items-center rounded-full bg-green-01 px-4 w-max text-green-04"><i class="material-icons">check_circle</i><span class="font-medium mx-2">Verified</span></div><span>-</span><div class="flex items-center rounded-full bg-orange-01 px-4 w-max text-orange-04"><i class="material-icons text-orange-04">info</i><span class="font-medium mx-2">MX record are found but not pointing to mailgun.</span></div>',3)]))):S("",!0)]),y("div",null,[a[11]||(a[11]=y("p",{class:"my-2"}," Offer status updates and all email notifications will be sent from the email address you provide above and will appear as if they're coming from your domain. ",-1)),g(s,{class:"border border-grey-02 rounded-xl bg-off-white drop-shadow-none"},{title:h((()=>a[9]||(a[9]=[y("p",{class:"font-semibold text-teal-04"}," How We Format Your Sender Address for Better Deliverability ",-1)]))),default:h((()=>a[10]||(a[10]=[y("p",{class:"pt-2"},[x(" To ensure a high deliverability rate, we will add "),y("b",{class:"text-teal-04"},'"sell."'),x(' after the @ in your default sender address under the "From" field in outgoing emails. For example, if your default sender address is steve@apple.com, it will appear as steve@'),y("b",{class:"text-teal-04"},"sell"),x(".apple.com to your customers. We also recommend making sure you verify your default sender address by following the steps below if you haven't verified it yet. ")],-1),y("img",{src:"/images/notifications/how-we-format.png",alt:"How We Format Your Sender Address for Better Deliverability",class:"h-96 mt-4"},null,-1)]))),_:1})]),e.computedShowTable?S("",!0):(f(),w(n,{key:0,loading:e.data.loading.all,color:"teal",view:"outlined",class:"mt-6",onClick:e.handleVerify},{default:h((()=>a[12]||(a[12]=[y("span",{class:"material-symbols-outlined mr-3"},"replay",-1),x("Reverify Email ")]))),_:1},8,["loading","onClick"]))]),e.computedShowTable?(f(),v("div",Ue,[a[22]||(a[22]=y("span",{class:"absolute -top-4 left-3 bg-white p-1 px-2 font-semibold"},"Copy Your Records",-1)),y("div",Ie,[e.computedUnverified&&!e.computedTxtMxStatus?(f(),w(d,{key:0,color:"red",view:"smooth",class:"mt-2 mb-6",dense:""},{default:h((()=>a[13]||(a[13]=[y("div",{class:"flex space-x-2 -mx-4 -my-4 py-4 px-2"},[y("div",null,[y("i",{class:"material-icons"},"info")]),y("div",null," DNS record authentication failed. If you've recently added the records, please be aware that propagation could take up to 24 hours. After the 24-hour period, return to this page to check the status and click 'Verify' if one or more records are still showing 'Unverified'. ")],-1)]))),_:1})):S("",!0),a[20]||(a[20]=y("p",{class:"mb-4"},"You're going to add two TXT records and two MX records to your domain on your domain provider's website. These records will authenticate your domain, allowing us to send emails on your behalf.",-1)),y("ul",Me,[(f(!0),v(k,null,j(e.data.instructions,((e,a)=>(f(),v("li",{class:"list-decimal",key:`key_in_${a}`,innerHTML:e},null,8,De)))),128))]),a[21]||(a[21]=y("p",{class:"mt-6 mb-4"},"Now, repeat these steps above for each record type-you need to add four records in total. Once all records are added, click the Verify button.",-1)),g(d,{color:"grey",view:"smooth",class:"mb-6"},{default:h((()=>a[14]||(a[14]=[y("div",{class:"-mx-4 -my-4 py-4 px-2"},[y("div",null,[y("div",{class:"flex items-center gap-x-2"},[y("i",{class:"material-icons"},"info"),x(),y("b",null,"Note: "),x("If an existing SPF record is already on your domain provider's site, follow the example below to combine multiple SPF records: ")]),y("div",{class:"mt-2"},[y("span",null,"Example SPF Record"),x(": "),y("div",{class:"inline-block bg-grey-03 md:ml-2 px-4 py-0.5 rounded-full text-white"},[y("span",{class:"text-orange-03"},"v"),x("="),y("span",{class:"text-orange-03"},"spf1 include"),x(":_spf.google.com "),y("span",{class:"text-orange-03"},"include:"),y("span",{whitelabel:"text-replace","data-label":"email domain"},"mail.reusely.com"),x(),y("span",{class:"text-orange-04"},"~all")])])])],-1)]))),_:1}),b((f(),w(c,{class:"my-8",data:e.computedTable},{default:h((()=>[g(r,{prop:"record_type",label:"Type",width:"100"}),g(r,{label:"Name",width:"300"},{default:h((a=>[y("div",Ne,[y("span",null,T(a.row.name),1),y("i",{class:"material-icons text-lg text-teal-02",onClick:l=>e.handleCopyText(a.row.name)}," file_copy ",8,Fe)])])),_:1}),g(r,{label:"Value","min-width":"400"},{default:h((a=>[y("div",Ae,[y("p",Be,T(a.row.value),1),y("i",{class:"material-icons text-lg text-teal-02",onClick:l=>e.handleCopyText(a.row.value)}," file_copy ",8,Oe)])])),_:1}),g(r,{label:"Priority"},{default:h((e=>[y("p",null,T(e.row.priority||"-"),1)])),_:1}),g(r,{label:"Status",width:"150"},{default:h((e=>[0===e.$index?(f(),v("div",$e,[!e.row.is_active&&"valid"===e.row.valid||"unknown"===e.row.valid?(f(),v("div",Ge,[a[16]||(a[16]=y("div",{class:"bg-orange-01 text-sm rounded-full text-orange-04 inline-block px-3 py-1.5"},T("Unverified"),-1)),g(m,{placement:"top"},{content:h((()=>[y("div",Re," No "+T(e.row.record_type)+" records found. ",1)])),default:h((()=>[a[15]||(a[15]=y("i",{class:"material-icons text-teal-02"},"info",-1))])),_:2},1024)])):(f(),v("div",qe,T("Verified")))])):(f(),v("div",Le,["unknown"===e.row.valid?(f(),v("div",Ye,[a[18]||(a[18]=y("div",{class:"bg-orange-01 text-sm rounded-full text-orange-04 inline-block px-3 py-1.5"},T("Unverified"),-1)),g(m,{placement:"top"},{content:h((()=>[y("div",ze,["MX"===e.row.record_type&&"unknown"===e.row.valid&&e.row.cached.length>0?(f(),v("p",We," Your domain's MX records are currently directed to a different provider. ")):(f(),v("p",Xe," No "+T(e.row.record_type)+" records found. ",1))])])),default:h((()=>[a[17]||(a[17]=y("i",{class:"material-icons text-teal-02"},"info",-1))])),_:2},1024)])):(f(),v("div",He,T("Verified")))]))])),_:1})])),_:1},8,["data"])),[[I,e.data.loading.all]]),g(n,{color:"teal",class:"mt-4",onClick:e.handleVerify},{default:h((()=>a[19]||(a[19]=[x("Verify")]))),_:1},8,["onClick"])])])):S("",!0),g(_,{modelValue:e.data.modal.sender,"onUpdate:modelValue":a[1]||(a[1]=a=>e.data.modal.sender=a),"hide-footer":"","show-close":!1,"hide-header":"",size:"xs","close-on-click-modal":!1},{default:h((()=>[a[26]||(a[26]=y("img",{width:"95",height:"95",alt:"Warning Icon",class:"mt-6 mb-8 mx-auto",src:K},null,-1)),a[27]||(a[27]=y("h2",{class:"text-center text-base mb-4"},"Change Mail Domain?",-1)),a[28]||(a[28]=y("p",{class:"text-sm text-center mb-8"},"Switching to a different Mail Domain will require re-verifying it.",-1)),e.data.selected?(f(),v("div",Ke,["domain"==e.data.selected.key?(f(),w(n,{key:0,view:"outlined",color:"orange",onClick:e.handleShowForm},{default:h((()=>a[23]||(a[23]=[x(" Yes, Change it ")]))),_:1},8,["onClick"])):S("",!0),"temporary"==e.data.selected.key?(f(),w(n,{key:1,view:"outlined",color:"orange",onClick:e.handleReset},{default:h((()=>a[24]||(a[24]=[x(" Yes, Change it ")]))),_:1},8,["onClick"])):S("",!0),g(n,{view:"smooth",color:"teal",onClick:a[0]||(a[0]=a=>e.data.modal.sender=!1)},{default:h((()=>a[25]||(a[25]=[x("Cancel")]))),_:1})])):S("",!0)])),_:1},8,["modelValue"]),g(_,{modelValue:e.data.modal.formCustom,"onUpdate:modelValue":a[5]||(a[5]=a=>e.data.modal.formCustom=a),"show-close":!1,size:"xs","close-on-click-modal":!1,onClose:e.handleCloseForm},{header:h((()=>a[29]||(a[29]=[y("h6",{class:"-mx-4"},"Change Mail Domain",-1)]))),default:h((()=>[b((f(),v("div",Je,[y("div",Qe,[a[30]||(a[30]=y("label",{class:"block"},"Email Address",-1)),g(C,{modelValue:e.data.form.email,"onUpdate:modelValue":a[2]||(a[2]=a=>e.data.form.email=a),type:"email",placeholder:"Email address",class:"block w-full"},null,8,["modelValue"]),(f(!0),v(k,null,j(e.validate.email.$errors,((e,a)=>(f(),v("span",{key:a,class:"text-danger text-sm block my-4"},T(e.$message),1)))),128))]),y("div",Ze,[y("div",ea,[a[33]||(a[33]=y("label",{class:"block"},"Domain Region",-1)),g(m,{placement:"top"},{content:h((()=>a[31]||(a[31]=[y("div",{class:"w-48 text-xs"}," We offer two regions for sending your messages: the US and the EU ",-1)]))),default:h((()=>[a[32]||(a[32]=y("i",{class:"text-teal-04 material-icons ml-2 cursor-pointer"},"info",-1))])),_:1})]),g(V,{modelValue:e.data.form.region,"onUpdate:modelValue":a[3]||(a[3]=a=>e.data.form.region=a)},{default:h((()=>[g(E,{label:"US"},{default:h((()=>a[34]||(a[34]=[x("US")]))),_:1}),g(E,{label:"EU"},{default:h((()=>a[35]||(a[35]=[x("EU")]))),_:1})])),_:1},8,["modelValue"]),(f(!0),v(k,null,j(e.validate.region.$errors,((e,a)=>(f(),v("span",{key:a,class:"text-danger text-sm block my-4"},T(e.$message),1)))),128))])])),[[I,e.data.loading.all]])])),footer:h((()=>[y("div",aa,[y("a",{href:"javascript:void(0)",class:U(["hover:text-red-02 mr-8",e.data.loading.all?"text-grey-03":"text-red-04"]),onClick:a[4]||(a[4]=(...a)=>e.handleCloseForm&&e.handleCloseForm(...a))},"Cancel",2),g(n,{color:"teal",disabled:e.data.loading.all,onClick:e.handleSaveForm},{default:h((()=>a[36]||(a[36]=[x("Save")]))),_:1},8,["disabled","onClick"])])])),_:1},8,["modelValue","onClose"])],64)}]]),StaffNotifications:ke},async setup(){const{data:e,loading:a,actionShow:l,actionUpdate:t}=F(),{state:i,data:o,loading:s,isMailIn:d,previewedEmailTemplate:r,isPreviewEmailTemplate:m,actionAll:p,actionUpdateStatus:u,actionPreviewEmailTemplate:f,location:v,emailTemplateTypes:y}=A(),{formData:b,actionUpdate:w,actionShow:h,loading:g}=B("email-template"),{data:x,loading:k,modal:T,actionVerify:S,actionVerifyCheck:P,openModal:j,closeModal:U}=R(),D=_(null),N=_(!1),O=C(),$=I(),G=J(),q=_(""),L=_(null),Y=M({}),z={email_sender:{required:le,email:ae.withMessage("Email sender is not a valid email address",te)}},W=ee(z,e,{$lazy:!0}),X=E((()=>Q(i.value))),H=Z((async()=>{(W.value.$validate(),!W.value.$invalid)&&await t((()=>{V({type:"success",message:"Email sender updated"})}))}),500),K=E((()=>!1===N.value));c((()=>n({},o.all)),Z((async()=>{G.set("email-notification",JSON.stringify(o.all)),await p()}),400));if(!!$.query.filter)try{const e=G.get("email-notification");null!==e&&"object"==typeof e&&Object.assign(o.all,e)}catch(ie){console.warn("Error parsing notifications cache query")}return await Promise.all([p(),l(),h()]),{refStaffNotificationForm:D,state:i,data:o,dataEmailSender:x,loadingEmailSender:k,modalEmailSender:T,formDataEmailTemplateTheme:b,loading:s,loadingEmailTemplateTheme:g,breadcrumb:[{text:"Settings",to:{name:"setting"}},{text:"Notifications"}],dataCompanyProfile:e,loadingCompanyProfile:a,validation:W,emailTemplates:X,updateEmailSender:H,modal:Y,leadsName:q,leads:L,isMailIn:d,emailTemplateTypes:y,previewedEmailTemplate:r,isPreviewEmailTemplate:m,openModalEmailSender:j,closeModalEmailSender:U,isDisabledStaffNotificationForm:K,isReadyStaffNotification:N,editTemplate:e=>{null!==e.link_to?O.push(e.link_to):O.push({name:"settingEmailTemplateCustomerForm",params:{templateId:e.id},query:{type:e.type}})},handleUpdateStatus:async e=>await u(e.id,{is_enable:e.is_enable},(()=>{V({type:"success",message:"Email template status updated"})})),handlePreviewEmailTemplate:async e=>{await f(e)},handleUpdateEmailTemplateTheme:async()=>await w((()=>{V({type:"success",message:"Email template theme updated"})})),handleVerifyEmail:async(a=!1)=>{x.email=e.email_sender?e.email_sender:"",await S((e=>{e||j("verification")})),a&&V({type:"success",message:"Email confirmation was sent, please check  your email"})},handleUpdateEmailTemplateType:e=>{o.all.type=e},verifyEmail:async()=>{await P((()=>{U("verification"),V({type:"success",message:"Email sender verified"})}))},showStaffForm:e=>{q.value=e?"Mail-in":"In-Store",L.value=e},handleUpdateStaffNotification:async()=>{null!==D.value&&await D.value.updateStaffNotification()},handleShowEmailForm:()=>{console.log("Show email form triggered from child component")},location:v}}}),ta={class:"flex xl:flex-row flex-col justify-between mb-8"},ia={class:"flex justify-between"},oa={class:"flex justify-between gap-x-2 lg:gap-y-0 gap-y-2 flex-wrap"},sa={class:"flex gap-x-2 items-center"},na={class:"inline-flex items-center gap-2"},da={key:0,class:"px-3 py-1 bg-teal-04 text-white rounded-full flex items-center justify-center box-border text-xs"},ra={class:"max-w-sm"},ma={class:"material-icons text-teal-04"},ca={class:"text-center mt-4 mb-6"},pa={class:"font-semibold"},ua={class:"md:mx-4"},fa={class:"text-center text-grey-03 my-10"},va={class:"flex justify-between"};var ya=z(la,[["render",function(e,a,l,t,i,o){const s=p("Breadcrumb"),n=p("Button"),d=p("DefaultEmailSender"),r=p("Card"),m=p("Tooltip"),c=p("Tab"),_=p("TableColumn"),C=p("Checkbox"),E=p("DropdownItem"),V=p("DropdownMenu"),P=p("Dropdown"),j=p("Table"),U=p("Pagination"),I=p("GeneralNotifications"),M=p("StaffNotifications"),F=p("InputVerificationCode"),A=p("Modal"),B=p("PreviewEmailTemplate"),O=p("router-view"),$=u("loading");return f(),v(k,null,[y("div",null,[y("div",ta,[g(s,{pageTitle:"Notifications",backTo:{name:"setting"},items:e.breadcrumb},null,8,["items"])]),g(r,{class:"mb-6"},{header:h((()=>[y("div",ia,[a[9]||(a[9]=y("h2",{class:"font-bold text-xl"},"Default Sender Address",-1)),g(n,{onClick:a[0]||(a[0]=a=>e.$refs.defaultEmailSender.handleShowForm()),color:"teal",dense:""},{default:h((()=>a[8]||(a[8]=[y("div",{class:"px-2"},[y("i",{class:"material-icons"},"edit"),y("span",{class:"ml-2"},"Edit Email")],-1)]))),_:1})])])),default:h((()=>[g(d,{ref:"defaultEmailSender",onShowForm:e.handleShowEmailForm},null,8,["onShowForm"])])),_:1}),g(r,{class:"mb-6"},{header:h((()=>[y("div",oa,[a[12]||(a[12]=y("h2",{class:"font-bold text-xl"},"Customer Notifications",-1)),y("div",sa,[a[11]||(a[11]=y("span",{class:"text-sm"}," Need more advanced communications? Trigger SMS, email, and more by connecting your Klaviyo account. ",-1)),g(n,{link:"",dense:"",tag:"a",color:"teal",target:"_blank",referrerpolicy:"no-referrer",href:"https://www.klaviyo.com/"},{default:h((()=>a[10]||(a[10]=[y("div",{class:"flex items-center justify-center flex-nowrap gap-x-2 px-2 py-1"},[y("span",{class:"text-sm whitespace-nowrap"},"Klaviyo Web App"),y("i",{class:"fas fa-external-link-alt"})],-1)]))),_:1})])])])),default:h((()=>[g(c,{"model-value":e.data.all.type,"onUpdate:modelValue":e.handleUpdateEmailTemplateType,items:e.emailTemplateTypes,component:"",name:"name",by:"value","disabled-items":""},{title:h((e=>{var a;return[y("div",na,[y("span",null,T(e.item.name),1),"easy-offer"===e.item.value?(f(),v("div",da," API ")):S("",!0),g(m,{disabled:!(null==(a=e.item)?void 0:a.disabled),placement:"top"},{content:h((()=>[y("div",ra,[y("p",null," No active "+T("mail-in"===e.item.value?"Mail-In":"In-Store")+" locations, so these settings are disabled. They'll be available once you add one. ",1)])])),default:h((()=>[b(y("i",ma,"info",512),[[D,e.item.disabled]])])),_:2},1032,["disabled"])])]})),_:1},8,["model-value","onUpdate:modelValue","items"]),a[16]||(a[16]=y("div",{class:"flex items-center mb-4"},[y("div",{class:"flex-auto"})],-1)),b((f(),w(j,{data:e.emailTemplates.all.data},{default:h((()=>[g(_,{prop:"name",label:"Title"}),g(_,{prop:"desc",label:"Description"}),g(_,{label:"Active",width:"100"},{default:h((a=>[g(C,{modelValue:a.row.is_enable,"onUpdate:modelValue":e=>a.row.is_enable=e,type:"toggle",value:1,"value-off":0,onInput:l=>e.handleUpdateStatus(a.row),disabled:e.loading.updateStatus.includes(a.row.id)},null,8,["modelValue","onUpdate:modelValue","onInput","disabled"])])),_:1}),g(_,{label:"",align:"right"},{default:h((l=>[g(P,{trigger:"click","hide-on-click":"",placement:"bottom-end",class:"mr-8"},{dropdown:h((()=>[g(V,{class:"py-1 text-sm"},{default:h((()=>[g(E,{class:"text-base",onClick:a=>e.handlePreviewEmailTemplate(l.row.id)},{default:h((()=>a[14]||(a[14]=[y("span",{class:"material-icons mr-2"},"visibility",-1),x(" Preview ")]))),_:2},1032,["onClick"]),g(E,{class:"text-base",onClick:a=>e.editTemplate(l.row)},{default:h((()=>a[15]||(a[15]=[y("span",{class:"material-icons mr-2"},"edit",-1),x(" Edit ")]))),_:2},1032,["onClick"])])),_:2},1024)])),default:h((()=>[g(n,{loading:e.loading.preview_email,color:"teal",view:"outlined",dense:"",icon:""},{default:h((()=>a[13]||(a[13]=[y("span",{class:"material-icons"},"more_horiz",-1)]))),_:1},8,["loading"])])),_:2},1024)])),_:1})])),_:1},8,["data"])),[[$,e.loading.all]]),e.emailTemplates.all.total>e.data.all.limit?(f(),w(U,{key:0,class:"mt-4",page:e.data.all.page,"onUpdate:page":a[1]||(a[1]=a=>e.data.all.page=a),limit:e.data.all.limit,"onUpdate:limit":a[2]||(a[2]=a=>e.data.all.limit=a),data:e.state.all},null,8,["page","limit","data"])):S("",!0)])),_:1}),g(r,{class:"mb-6"},{header:h((()=>a[17]||(a[17]=[y("div",{class:"font-bold text-xl"},"General",-1)]))),default:h((()=>[g(I)])),_:1}),g(r,{class:"mb-6"},{header:h((()=>a[18]||(a[18]=[y("div",{class:"font-bold text-xl"},"Staff Notifications",-1)]))),default:h((()=>[g(M,{tabs:e.emailTemplateTypes},null,8,["tabs"])])),_:1})]),g(A,{modelValue:e.modalEmailSender.verification,"onUpdate:modelValue":a[6]||(a[6]=a=>e.modalEmailSender.verification=a),title:"Verify Email Address",size:"sm"},{default:h((()=>[y("div",ca,[a[20]||(a[20]=y("h3",{class:"text-2xl mb-2"},"Please check your email address",-1)),y("p",null,[a[19]||(a[19]=x(" You will receive an activation code within the next few minutes to ")),y("span",pa,T(e.dataEmailSender.email),1)])]),y("div",ua,[g(F,{modelValue:e.dataEmailSender.code,"onUpdate:modelValue":a[3]||(a[3]=a=>e.dataEmailSender.code=a)},null,8,["modelValue"])]),y("p",fa,[a[21]||(a[21]=x(" Didn't get a code?, ")),y("a",{href:"#!",onClick:a[4]||(a[4]=N((a=>e.handleVerifyEmail(!0)),["prevent"]))},"Click to resend")])])),footer:h((()=>[y("div",va,[y("a",{href:"#!",onClick:a[5]||(a[5]=N((a=>e.closeModalEmailSender("verification")),["prevent"])),class:"text-red-04 bg-none hover:text-red-02 py-4 px-6"},"Cancel"),g(n,{color:"teal",onClick:N(e.verifyEmail,["prevent"]),loading:e.loadingEmailSender.verification_check},{default:h((()=>a[22]||(a[22]=[x("Verify & Save")]))),_:1},8,["onClick","loading"])])])),_:1},8,["modelValue"]),g(B,{show:e.isPreviewEmailTemplate,"onUpdate:show":a[7]||(a[7]=a=>e.isPreviewEmailTemplate=a),body:e.previewedEmailTemplate,"render-type":"direct"},null,8,["show","body"]),g(O)],64)}],["__scopeId","data-v-93854fcc"]]),ba=m({setup(){const{genSuspense:e}=r();return()=>e(ya)}});export{ba as default};
