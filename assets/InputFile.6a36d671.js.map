{"version":3,"file":"InputFile.6a36d671.js","sources":["../../src/components/InputFile.vue"],"sourcesContent":["<template>\n  <div\n    :class=\"[\n      'input-file',\n      !action && 'relative'\n    ]\"\n    @dragenter.prevent.stop\n    @dragover.prevent.stop=\"handleDragOver\"\n    @dragleave.prevent=\"handleDragLeave\"\n    @drop.prevent.stop=\"drag\"\n    @mouseenter.prevent=\"handleHoverStart\"\n    @mouseleave.prevent=\"handleHoverEnd\"\n  >\n    <div\n      v-if=\"data.image && !action\"\n      class=\"input-file-preview--wrapper\"\n      @click=\"resetUploadFile\">\n      <span class=\"input-file-preview--wrapper__label\">Change File</span>\n    </div>\n    <input\n      ref=\"inputFileElement\"\n      :disabled=\"disabled\"\n      type=\"file\"\n      :accept=\"acceptFile\"\n      class=\"input-file-form\"\n      :id=\"`file${data.id}`\"\n      @input=\"input\"\n    />\n\n    <div\n      v-if=\"!$props.buttonAction && data.image\"\n      class=\"absolute top-0 left-0 right-0 bottom-0 opacity-0 hover:opacity-100 hover:bg-black hover:bg-opacity-30 rounded-md flex items-center justify-center text-white cursor-pointer\"\n      @click=\"handleClickUploadNew\">\n      <div class=\"text-center\">\n        <span class=\"material-symbols-outlined select-none text-4xl block\">file_upload</span>\n        <label :for=\"`file${data.id}`\">\n          <slot>\n            <strong class=\"pointer\">Choose a file</strong>\n            <span class=\"font-normal\"> or drag it here.</span>\n          </slot>\n        </label>\n      </div>\n    </div>\n    <div class=\"my-4\">\n      <div v-if=\"!data.image\">\n        <span class=\"material-symbols-outlined select-none text-4xl\">\n          file_upload\n        </span>\n      </div>\n      <div v-if=\"preview || !multiple\" class=\"input-file-preview\">\n        <img v-if=\"data.image\" alt=\"Logo\" :src=\"data.image\" class=\"w-full\" />\n      </div>\n    </div>\n    <label\n      v-if=\"!disabled && !data.image\"\n      :for=\"`file${data.id}`\"\n      :class=\"[\n        !action && !data.image && 'absolute inset-0 flex justify-center items-center pt-16'\n      ]\"\n      @click=\"resetUploadFile\"\n      >\n      <slot>\n        <strong class=\"pointer\">Choose a file</strong>\n        <span class=\"font-normal\"> or drag it here.</span>\n      </slot>\n    </label>\n    <div\n      v-if=\"!disabled\"\n      ref=\"refUploadLabel\"\n      @click=\"handleClickUploadNew\"\n      class=\"absolute w-full h-full left-0 flex flex-col items-center justify-center text-white rounded-lg opacity-0 transition duration-300 cursor-pointer\"\n      style=\"background-color: rgba(0, 0, 0, 0.6)\"\n    >\n      <span\n        class=\"material-symbols-outlined select-none block\"\n        style=\"font-size: 3rem !important\"\n      >\n        file_download\n      </span>\n      <label>\n        <strong class=\"cursor-pointer\">Choose a file</strong>\n        <span class=\"font-normal\"> or drag it here.</span>\n      </label>\n    </div>\n  </div>\n  <div v-if=\"action && $props.buttonAction\" class=\"flex items-center my-3\">\n    <slot name=\"action\"></slot>\n    <Tooltip :disabled=\"!disabled || !disabledTooltip\">\n      <template #content>\n        <div :style=\"{ maxWidth: '300px' }\" v-html=\"disabledTooltip\"></div>\n      </template>\n      <template #default>\n        <div class=\"flex w-full\">\n          <Button\n            class=\"flex-auto mr-2 cursor-pointer\"\n            view=\"outlined\"\n            color=\"teal\"\n            tag=\"label\"\n            :for=\"`file${data.id}`\"\n            block\n            :loading=\"loading\"\n            :disabled=\"disabled\"\n            >{{ uploadLabel }}</Button\n          >\n          <Button\n            class=\"flex-auto\"\n            view=\"outlined\"\n            color=\"red\"\n            @click=\"resetCurrentFile\"\n            :disabled=\"loading || disabled\"\n          >\n            <i class=\"material-icons\">delete</i>\n          </Button>\n        </div>\n      </template>\n    </Tooltip>\n  </div>\n  <template v-if=\"$slots.suggestedLabel\">\n    <slot name=\"suggestedLabel\">\n      <small>\n        <b>Suggested:</b> 200x50px ; <b>Max</b> 500KB ; <b>File</b>: PNG, JPG,\n        WEBP, GIF\n      </small>\n    </slot>\n  </template>\n  <template v-else>\n    <small v-if=\"!$slots.description\"><b>Suggested:</b> 200x50px ; <b>Max</b> 500KB ; <b>File</b>: PNG, JPG, WEBP, GIF</small>\n  </template>\n  <slot name=\"description\" />\n</template>\n\n<script>\nimport { defineComponent, ref, reactive, watch } from 'vue'\nimport Button from 'bbUi/components/button/button.vue'\n\nexport default defineComponent({\n  components: {\n    Button\n  },\n  props: {\n    file: {\n      default: null\n    },\n    preview: {\n      type: Boolean,\n      default: true\n    },\n    multiple: {\n      type: Boolean,\n      default: false\n    },\n    uploadLabel: {\n      type: String,\n      default: 'Upload Logo'\n    },\n    loading: {\n      type: Boolean,\n      default: false\n    },\n    disabled: {\n      type: Boolean,\n      default: false\n    },\n    disabledTooltip: {\n      type: String,\n      default: ''\n    },\n    buttonAction: {\n      type: Boolean,\n      default: true\n    },\n    action: {\n      type: Boolean,\n      default: true\n    },\n    acceptFile: {\n      type: String,\n      default: 'image/jpg, image/jpeg, image/png, image/webp, image/gif'\n    }\n  },\n  emits: ['input'],\n  setup(props, { emit }) {\n    const inputFileElement = ref(null)\n    const refUploadLabel = ref(null)\n    const data = reactive({\n      id: Math.floor(Math.random() * 1000000),\n      image: props.file\n    })\n    watch(\n      () => props.file,\n      () => {\n        data.image = props.file\n      }\n    )\n    const input = (e) => {\n      if (!props.multiple) {\n        const reader = new FileReader()\n\n        reader.onload = (e) => {\n          data.image = e.target.result\n        }\n        reader.readAsDataURL(e.target.files[0])\n\n        // this.image = e.target.files[0].name\n        emit('input', e.target.files[0])\n      } else emit('input', e.target.files)\n    }\n    const drag = (e) => {\n      if(refUploadLabel.value) refUploadLabel.value.style.opacity = '0'\n      if (!props.multiple) {\n        const reader = new FileReader()\n\n        reader.onload = (e) => {\n          data.image = e.target.result\n        }\n        reader.readAsDataURL(e.dataTransfer.files[0])\n\n        // this.image = e.dataTransfer.files[0].name\n        emit('input', e.dataTransfer.files[0])\n      } else emit('input', e.dataTransfer.files)\n    }\n    const resetUploadFile = () => {\n      data.image = null\n      inputFileElement.value.value = null\n    }\n    const resetCurrentFile = () => {\n      resetUploadFile()\n      emit('input', null)\n    }\n    const handleClickUploadNew = () => {\n      const input = document.getElementById(`file${data.id}`)\n      input.click()\n    }\n    const showUploadLabel = () => {\n      if(!refUploadLabel.value) return\n      refUploadLabel.value.style.opacity = '1'\n    }\n    const hideUploadLabel = () => {\n      if(!refUploadLabel.value) return\n      refUploadLabel.value.style.opacity = '0'\n    }\n    const handleDragOver = () => {\n      showUploadLabel()\n    }\n    const handleDragLeave = () => {\n      hideUploadLabel()\n    }\n    const handleHoverStart = () => {\n      showUploadLabel()\n    }\n    const handleHoverEnd = () => {\n      hideUploadLabel()\n    }\n\n    return {\n      inputFileElement,\n      refUploadLabel,\n      data,\n      input,\n      drag,\n      resetUploadFile,\n      resetCurrentFile,\n      handleClickUploadNew,\n      handleDragOver,\n      handleDragLeave,\n      handleHoverStart,\n      handleHoverEnd\n    }\n  }\n})\n</script>\n<style lang=\"scss\" scoped>\n.input-file {\n  @apply relative;\n}\n</style>\n"],"names":["_sfc_main","defineComponent","components","Button","props","file","default","preview","type","Boolean","multiple","uploadLabel","String","loading","disabled","disabledTooltip","buttonAction","action","acceptFile","emits","[object Object]","emit","inputFileElement","ref","refUploadLabel","data","reactive","id","Math","floor","random","image","watch","resetUploadFile","value","showUploadLabel","style","opacity","hideUploadLabel","input","e","target","files","reader","FileReader","onload","e2","result","readAsDataURL","drag","dataTransfer","resetCurrentFile","handleClickUploadNew","document","getElementById","click","handleDragOver","handleDragLeave","handleHoverStart","handleHoverEnd","_hoisted_1","_hoisted_3","key","_hoisted_10","_openBlock","_createElementBlock","_Fragment","onDragenter","onDragover","_ctx","args","onDragleave","onDrop","_cache","onMouseenter","class","_createCommentVNode","_createElementVNode","accept","_hoisted_2","_renderSlot","$slots","_hoisted_4","_hoisted_5","_hoisted_6","alt","src","for","_normalizeClass","onClick","font-size","$props","_hoisted_9","_component_Tooltip","_withCtx","maxWidth","_hoisted_11","_createVNode","_component_Button","view","color","tag","block","suggestedLabel","_createTextVNode","_hoisted_12"],"mappings":"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"}