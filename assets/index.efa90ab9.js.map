{"version":3,"file":"index.efa90ab9.js","sources":["../../src/views/integration/sellcell/index.vue","../../src/views/integration/sellcell/index.js"],"sourcesContent":["<template>\n  <div>\n    <div class=\"my-2\">\n      <p>\n        Copy/Paste your SellCell tracking pixel code in the input box below.\n      </p>\n      <p>Your tracking code should look like this :</p>\n      <code class=\"my-6 block p-4 bg-grey-lighten rounded-lg\">\n        &#60;<span class=\"text-red-04\">iframe </span>\n        <span class=\"text-green-04\">src</span>=<span class=\"text-blue-04\"\n          >\"https://scdcb.com/p.ashx?a=88&e=189&t=123456789&p=250.00\"\n        </span>\n        <span class=\"text-green-04\">height</span>=<span class=\"text-blue-04\"\n          >\"1\"\n        </span>\n        <span class=\"text-green-04\">width</span>=<span class=\"text-blue-04\"\n          >\"1\"\n        </span>\n        <span class=\"text-green-04\">frameborder</span>=<span\n          class=\"text-blue-04\"\n          >\"0\"</span\n        >&#62;&#60;/<span class=\"text-red-04\">iframe</span>&#62;\n      </code>\n    </div>\n    <div class=\"my-6\">\n      <Input\n        v-model=\"data.sellcell_code\"\n        :view=\"validation.sellcell_code.$invalid ? 'danger' : 'default'\"\n        label=\"SellCell Tracking Code\"\n        placeholder=\"SellCell tracking code\"\n        block\n      />\n      <small\n        class=\"text-red-base block mb-4\"\n        v-for=\"(error, errorIndex) of validation.sellcell_code.$errors\"\n        :key=\"errorIndex\"\n        >{{ error.$message }}.\n      </small>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { defineComponent, computed } from 'vue'\nimport { useShowAll } from 'composable/integration'\nimport { useVuelidate } from '@vuelidate/core'\nimport { required } from '@/validations/index'\nimport Button from 'bbUi/components/button/button.vue'\nimport Alert from 'bbUi/components/alert/alert.vue'\nimport Input from 'bbUi/components/input/input.vue'\n\nimport PopoverDark from 'components/PopoverDark.vue'\n\nimport { ElMessage } from 'element-plus'\nimport { isFunction } from '@/utils/is'\n\nexport default defineComponent({\n  components: {\n    Button,\n    Alert,\n    Input,\n    PopoverDark\n  },\n  async setup() {\n    const { state, data, actionAll, actionUpdate, loading } = useShowAll()\n\n    const formData = computed(() => ({\n      ...data\n    }))\n\n    const rules = {\n      sellcell_code: {\n        required\n      }\n    }\n    const validation = useVuelidate(rules, formData, {\n      $lazy: true\n    })\n    const validate = () => {\n      validation.value.$validate()\n      return !validation.value.$invalid\n    }\n\n    const update = async (callback = () => {}) => {\n      const isValid = validate()\n      if (!isValid) return\n      const payload = Object.assign(\n        {},\n        {\n          sellcell_code: data.sellcell_code\n        }\n      )\n      await actionUpdate(payload, (response) => {\n        if (response.toLowerCase() === 'connection failed')\n          return ElMessage({\n            type: 'warning',\n            message: 'Invalid SellCell configurations'\n          })\n        ElMessage({\n          type: 'success',\n          message: 'SellCell integration updated!'\n        })\n        isFunction(callback) && callback()\n      })\n    }\n\n    await Promise.all([actionAll()])\n\n    return {\n      state,\n      data,\n      loading,\n      validation,\n      update\n    }\n  }\n})\n</script>\n","import { defineComponent, h, ref, reactive } from 'vue'\nimport { useSuspense } from 'composable/components'\nimport { useRoute, useRouter } from 'vue-router'\nimport Modal from 'bbUi/components/modal/modal.vue'\nimport Button from 'bbUi/components/button/button.vue'\nimport Index from './index.vue'\n\nexport default defineComponent({\n  async setup() {\n    const { genSuspense } = useSuspense()\n    const refComponent = ref(null)\n    const route = useRoute()\n    const router = useRouter()\n\n    const saveChanges = () => {\n      refComponent.value.update(() => {\n        router.push({\n          name: 'integration',\n          query: {\n            enable: route.query?.id || ''\n          }\n        })\n      })\n    }\n    const genSaveButton = () =>\n      h(\n        Button,\n        {\n          color: 'teal',\n          loading: refComponent.value && refComponent.value?.loading?.update,\n          onClick: saveChanges\n        },\n        {\n          default: () => 'Save'\n        }\n      )\n    const genComponent = () =>\n      genSuspense(\n        h(Index, {\n          ref: refComponent\n        })\n      )\n    const modalProps = reactive({\n      modelValue: true,\n      closeTo: {\n        name: 'integration',\n        query: {\n          reload: 1\n        }\n      },\n      size: 'xs',\n      title: 'SellCell Settings'\n    })\n    const modalSlots = reactive({\n      default: () => genComponent(),\n      footer: () => genSaveButton()\n    })\n\n    return () => h(Modal, modalProps, modalSlots)\n  }\n})\n"],"names":["_sfc_main","defineComponent","components","Button","Alert","Input","PopoverDark","[object Object]","state","data","actionAll","actionUpdate","loading","useShowAll","formData","computed","__spreadValues","validation","useVuelidate","sellcell_code","required","$lazy","Promise","all","update","async","callback","value","$validate","$invalid","payload","Object","assign","response","toLowerCase","ElMessage","type","message","_u","isFunction","_cache","_hoisted_1","_createVNode","_component_Input","modelValue","_ctx","onUpdate:modelValue","$event","view","label","placeholder","_Fragment","_renderList","$errors","error","errorIndex","_createElementBlock","class","index","genSuspense","useSuspense","refComponent","ref","route","useRoute","router","useRouter","saveChanges","push","name","query","enable","_a","id","modalProps","reactive","closeTo","reload","size","title","modalSlots","default","h","Index","footer","genSaveButton","color","_b","onClick","Modal"],"mappings":"kvBAwDA,MAAKA,EAAaC,EAAa,CAC7BC,WAAY,CACVC,OAAAA,QACAC,QACAC,EACAC,YAAAA,GAAAC,cAGA,MAAMC,MAAEA,EAAAC,KAAOA,EAAMC,UAAAA,EAAAC,aAAWA,UAAcC,GAAYC,IAEpDC,EAAWC,GAAS,uHAAOC,CAC5B,GAAAP,KAQCQ,EAAaC,EALL,CACZC,cAAe,CACbC,SAAAA,IAGmCN,EAAU,CAC/CO,OAAO,IAgCF,aAFDC,QAAQC,IAAI,CAACb,MAEZ,CACLF,MAAAA,EACAC,KAAAA,EACAG,QAAAA,EACAK,WAAAA,EACAO,OA9BaC,MAAOC,EAAW,YAE/B,KANAT,EAAWU,MAAMC,aACTX,EAAWU,MAAME,UAKX,OACR,MAAAC,EAAUC,OAAOC,OACrB,GACA,CACEb,cAAeV,EAAKU,sBAGlBR,EAAamB,GAAUG,IAC3B,GAA+B,sBAA3BA,EAASC,cACX,OAAOC,EAAU,CACfC,KAAM,UACNC,QAAS,oCAEHC,EAAA,CACRF,KAAM,UACNC,QAAS,kCAEXE,EAAWb,IAAaA,oHA9E5Bc,EAAA,YAcM,quBAAA,MAPF,MAAAC,EAAA,CALSC,EAAAC,EAAkB,CAAlBC,WAAAC,EAAApC,KAAAU,cACR2B,sBAAiBN,EAAA,KAAsBA,EAAA,GAAAO,GAAAF,EAAApC,KAAAU,cAAA4B,GACxCC,OAA8B/B,WAAAE,cAAAU,SAAA,SAAA,UAC9BoB,MAAA,yBACAC,YAAK,wDAOC,kBAAAC,EAAA,KAAAC,EAAAP,EAAA5B,WAAAE,cAAAkC,SAAA,CAAAC,EAAAC,SAJ0BC,EAAA,QAAA,CAE/BC,MAAe,yEC5BxBC,EAAezD,EAAgB,CAAAM,cAE3B,MAAMoD,YAAEA,GAAgBC,IAClBC,EAAeC,EAAI,MACnBC,EAAQC,IACRC,EAASC,IAETC,EAAc,KACLN,EAAAlC,MAAMH,QAAO,WACxByC,EAAOG,KAAK,CACVC,KAAM,cACNC,MAAO,CACLC,QAAQ,OAAAC,EAAAT,EAAMO,YAAN,EAAAE,EAAaC,KAAM,UAuB7BC,EAAaC,EAAS,CAC1B/B,YAAY,EACZgC,QAAS,CACPP,KAAM,cACNC,MAAO,CACLO,OAAQ,IAGZC,KAAM,KACNC,MAAO,sBAEHC,EAAaL,EAAS,CAC1BM,QAAS,IAjBTtB,EACEuB,EAAEC,EAAO,CACPrB,IAAKD,KAgBTuB,OAAQ,KAAMC,OA9BdH,EACE/E,EACA,CACEmF,MAAO,OACP1E,QAASiD,EAAalC,QAAS,SAAA,WAAaA,YAAb,EAAA6C,EAAoB5D,cAAS,EAAA2E,EAAA/D,QAC5DgE,QAASrB,GAEX,CACEc,QAAS,IAAM,SATC,WAkCf,MAAA,IAAMC,EAAEO,EAAOf,EAAYM"}