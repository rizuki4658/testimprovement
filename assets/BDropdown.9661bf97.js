import{k as e,f as t,g as o,y as n,W as a,au as l,z as d,s as i,$ as r,o as s,t as u,B as p,q as f,G as g,H as v,n as m,D as c,w as h,A as w,Q as x,L as y,T as b,a4 as H,F as B}from"./vendor.9695fe57.js";import{g as C,_ as E}from"./index.dcc9fc55.js";var D=E(e({name:"BDropdown",props:{top:{type:Boolean,default:!1},bottom:{type:Boolean,default:!0},left:{type:Boolean,default:!1},right:{type:Boolean,default:!1},center:{type:Boolean,default:!0},expandOnHover:{type:Boolean,default:!1},offset:{type:Number,default:8},block:{type:Boolean,default:!1},minWidth:{type:[Number,String],default:"auto"},maxHeight:{type:[Number,String],default:"auto"},minHeight:{type:[Number,String],default:"auto"},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},preventToggle:{type:Boolean,default:!1},noDropdown:{type:Boolean,default:!1}},emits:["mounted","unmounted","collapse"],setup(e,{emit:r}){const s=t(null),u=t(null),p=t(!1),f=t([]);let g=null;const v=o((()=>"number"==typeof e.maxHeight?`${e.maxHeight}px`:e.maxHeight)),m=o((()=>"number"==typeof e.minHeight?`${e.minHeight}px`:e.minHeight)),c=()=>{if(!p.value)return;if(!s.value||!u.value)return;const{width:t,height:o,x:n,y:a}=s.value.getBoundingClientRect(),l=parseInt(`${e.minWidth}`),d=!isNaN(l);u.value.style.minWidth=d?`${l}px`:`${t}px`;const{width:i,height:r}=u.value.getBoundingClientRect();let f=n,g=a+o+e.offset;e.center&&(f+=(t-i)/2),e.right?(f=n+t+e.offset,g=a,e.top&&(g=a+o-r)):e.left?(f=n-i-e.offset,g=a,e.top&&(g=a+o-r)):e.top&&(g=a-r-e.offset);const v=window.innerWidth,m=window.innerHeight;f+i>v?f=v-i-e.offset:f<0&&(f=e.offset),g+r>m?g=m-r-e.offset:g<0&&(g=e.offset),u.value.style.left=`${f}px`,u.value.style.top=`${g}px`},h=()=>{if(e.disabled)return w();p.value=!0,i(c)},w=()=>{p.value=!1},x=()=>{g&&(clearTimeout(g),g=null)},y=e=>{if(s.value&&u.value)return!s.value.contains(e.target)&&!u.value.contains(e.target)&&0===f.value.filter((t=>t.refs.refDropdownContent.contains(e.target)||t.refs.refDropdown.contains(e.target))).length},b=e=>{y(e)&&w()},H=e=>{y(e)&&w()};return n(p,(e=>{r("collapse",!!e)})),a((()=>{window.addEventListener("scroll",C(H,100),!0),window.addEventListener("click",b),r("mounted",l())})),d((()=>{window.removeEventListener("scroll",C(H,100),!0),window.addEventListener("click",b),r("unmounted",l())})),{refDropdown:s,refDropdownContent:u,isExpanded:p,maxHeight:v,minHeight:m,toggleExpand:()=>{if(e.disabled)return w();p.value?!e.preventToggle&&w():h()},expand:h,collapse:w,triggerMouseEnter:()=>{e.expandOnHover&&(x(),h())},triggerMouseLeave:()=>{e.expandOnHover&&(g=setTimeout(w,100))},clearCollapseTimeout:x,addChild:e=>{var t,o;(null==(t=null==e?void 0:e.refs)?void 0:t.refDropdownContent)&&(null==(o=null==e?void 0:e.refs)?void 0:o.refDropdown)&&f.value.push(e)},removeChild:e=>{f.value=f.value.filter((t=>t.uid!==(null==e?void 0:e.uid)))},children:f}}}),[["render",function(e,t,o,n,a,l){const d=r("loading");return s(),u("div",{ref:"refDropdown",class:B(["b-dropdown",e.block&&"b-dropdown--block"]),tabindex:"0"},[p("div",{onClick:t[0]||(t[0]=t=>!e.expandOnHover&&e.toggleExpand()),onMouseenter:t[1]||(t[1]=(...t)=>e.triggerMouseEnter&&e.triggerMouseEnter(...t)),onMouseleave:t[2]||(t[2]=(...t)=>e.triggerMouseLeave&&e.triggerMouseLeave(...t)),onFocus:t[3]||(t[3]=t=>e.isExpanded=!0),tabindex:"0",class:"b-dropdown__trigger"},[f(e.$slots,"default",g(v({isExpanded:e.isExpanded})),void 0,!0)],32),(s(),m(H,{to:"body"},[c(b,{name:"fade"},{default:h((()=>[w((s(),u("div",{ref:"refDropdownContent",class:"b-dropdown__content",onMouseenter:t[4]||(t[4]=(...t)=>e.clearCollapseTimeout&&e.clearCollapseTimeout(...t)),onMouseleave:t[5]||(t[5]=(...t)=>e.triggerMouseLeave&&e.triggerMouseLeave(...t))},[p("div",{style:x({maxHeight:e.maxHeight,minHeight:e.minHeight})},[f(e.$slots,"dropdown",g(v({collapse:e.collapse,addChild:e.addChild,removeChild:e.removeChild})),void 0,!0)],4)],32)),[[d,e.loading],[y,e.isExpanded&&!e.noDropdown]])])),_:3})]))],2)}],["__scopeId","data-v-5eb345b8"]]);export{D as B};
