{"version":3,"file":"index.ddb6a51b.js","sources":["../../src/components/BuybackReceipt/ReceiptForm.vue","../../src/views/setting/buyback-receipt/index.vue","../../src/views/setting/buyback-receipt/index.js"],"sourcesContent":["<template>\n  <div class=\"grid grid-cols-1\">\n    <div>\n      <TextEditor ref=\"refTextEditor\" v-model=\"data.receipt_text\" :options=\"ckeditor\" />\n      <Table v-if=\"codes && Array.isArray(codes) \" :data=\"codes\" class=\"mt-6\">\n        <TableColumn prop=\"code\" label=\"Code\">\n          <template #default=\"scope\">\n            <div class=\"flex\">\n              <span class=\"mr-2\">{{scope.row.code}}</span>\n              <i class=\"material-symbols-outlined text-lg text-teal-04\" @click=\"copyText(scope.row.code)\">content_copy</i>\n            </div>\n          </template>\n        </TableColumn>\n        <TableColumn prop=\"desc\" label=\"Description\" />\n      </Table>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { defineComponent, reactive, ref } from 'vue'\nimport { useVuelidate } from '@vuelidate/core'\nimport { required } from '@/validations/index'\nimport { ElMessage } from 'element-plus'\nimport { Editor as \nClassicEditor } from '@erdeprsty/ckeditor5-custom-build'\n\nimport Input from 'bbUi/components/input/input.vue'\nimport TextEditor from 'components/TextEditor.vue'\n\nexport default defineComponent({\n  components: {\n    Input,\n    TextEditor\n  },\n  props: {\n    codes: {\n      type: Array,\n      default: () => ([])\n    },\n    data: {\n      type: Object,\n      default: () => ({\n        receipt_text: ''\n      })\n    }\n  },\n  setup(props) {\n    const refTextEditor = ref(null)\n    const data = reactive(props.data)\n    const ckeditor = reactive({\n      editor: ClassicEditor,\n      config: {\n        htmlSupport: {\n          allow: [{\n            styles: true,\n            classes: true\n          }]\n        }\n      }\n    })\n    const rules = {\n      receipt_text: {\n        required\n      }\n    }\n    const validation = useVuelidate(rules, data, {\n      $lazy: true\n    })\n    const validate = async () => {\n      const isReadyEditor = refTextEditor.value.isEditorReady\n      if(!isReadyEditor) return false\n      const isSaved = await refTextEditor.value.forceSave()\n      if(!isSaved) return false\n      validation.value.$validate()\n      return !validation.value.$invalid\n    }\n    const copyText = (text) => {\n      navigator.clipboard.writeText(text).then(() => {\n        ElMessage({\n          type: 'success',\n          message: 'Text copy to clipbord'\n        })\n      })\n    }\n\n    return {\n      refTextEditor,\n      data,\n      validation,\n      ckeditor,\n      validate,\n      copyText\n    }\n  },\n})\n</script>\n","<template>\n  <div>\n    <div class=\"flex justify-between lg:items-center md:items-end md:flex-row flex-col items-start  mb-8\">\n      <!-- <div class=\"lg:flex lg:divide-x lg:divide-grey-01\">\n        <div class=\"flex items-center lg:pr-4 lg:mb-0 mb-4\">\n          <router-link :to=\"{ name: 'setting' }\" class=\"text-dark mr-4\"><span class=\"material-icons\">chevron_left</span></router-link>\n          <h5>Buyback Receipt</h5>\n        </div>\n        <div class=\"lg:pl-4 flex items-center\">\n          <Breadcrumb :items=\"breadcrumb\">\n            <span class=\"material-icons\">chevron_right</span>\n          </Breadcrumb>\n        </div>\n      </div> -->\n      <Breadcrumb pageTitle=\"Buyback Receipt\" :backTo=\"{ name: 'setting' }\" :items=\"breadcrumb\" />\n    </div>\n    <Card>\n      <template #header>\n        <h5 class=\"text-lg\">Receipt Text</h5>\n      </template>\n      <ReceiptForm v-loading=\"loading.all\" ref=\"refReceiptForm\" v-model:data=\"data\" :codes=\"stateAll.receipt.codes\" class=\"mt-6\" />\n      <template #footer>\n        <div class=\"flex justify-end\">\n          <Button color=\"teal\" view=\"smooth\" @click=\"updateReceipt\" :loading=\"loading.update\">Save</Button>\n        </div>\n      </template>\n    </Card>\n  </div>\n</template>\n\n<script>\nimport { defineComponent, ref } from 'vue'\nimport Button from 'bbUi/components/button/button.vue'\nimport Card from 'bbUi/components/card/card.vue'\nimport Input from 'bbUi/components/input/input.vue'\nimport Select from 'bbUi/components/select/select.vue'\nimport Breadcrumb from 'components/Breadcrumb.vue'\nimport ReceiptForm from 'components/BuybackReceipt/ReceiptForm.vue'\nimport { useBuybackReceipt } from 'composable/setting'\nimport { ElMessage } from 'element-plus'\n\nexport default defineComponent({\n  components:{\n    Button,\n    Card,\n    Input,\n    Select,\n    Breadcrumb,\n    ReceiptForm\n  },\n  async setup(props, { emit }) {\n    const refReceiptForm = ref(null)\n    const breadcrumb = [{\n      text: 'Settings',\n      to: {\n        name: 'setting'\n      }\n    }, {\n      text: 'Buyback Receipt'\n    }]\n    const { state: stateAll, data, loading, actionAll, actionUpdate } = useBuybackReceipt()\n    await actionAll()\n    const updateReceipt = async () => {\n      if(refReceiptForm.value){\n        loading.update = true\n        const isValid = await refReceiptForm.value.validate()\n        if(isValid){\n          await actionUpdate(() => {\n            ElMessage({\n              type: 'success',\n              message: 'Buyback receipt changed'\n            })\n          })\n        }\n      }\n    }\n    return {\n      refReceiptForm,\n      breadcrumb,\n      stateAll,\n      data,\n      loading,\n      updateReceipt\n    }\n  }\n})\n</script>","import { defineComponent } from 'vue'\nimport { useSuspense } from 'composable/components'\nimport index from './index.vue'\n\nexport default defineComponent({\n  setup() {\n    const { genSuspense } = useSuspense()\n\n    return () => genSuspense(index)\n  }\n})"],"names":["_sfc_main","defineComponent","components","Input","TextEditor","props","codes","type","Array","default","data","Object","receipt_text","[object Object]","refTextEditor","ref","reactive","ckeditor","editor","ClassicEditor","exports","Editor","config","htmlSupport","allow","styles","classes","validation","useVuelidate","required","$lazy","validate","async","value","isEditorReady","forceSave","$validate","$invalid","copyText","text","navigator","clipboard","writeText","then","_u","message","_hoisted_1","class","_hoisted_2","Button","Card","Select","Breadcrumb","ReceiptForm","_openBlock","_createElementBlock","_createVNode","_component_TextEditor","modelValue","_ctx","onUpdate:modelValue","_cache","$event","isArray","key","_withCtx","_component_TableColumn","prop","scope","_createElementVNode","_hoisted_3","_toDisplayString","row","code","emit","refReceiptForm","state","stateAll","loading","actionAll","actionUpdate","useBuybackReceipt","breadcrumb","to","name","updateReceipt","update","_component_Breadcrumb","pageTitle","backTo","header","footer","_component_Button","color","view","onClick","_withDirectives","_component_ReceiptForm","onUpdate:data","receipt","index","genSuspense","useSuspense"],"mappings":"0nBA8BA,MAAKA,EAAaC,EAAa,CAC7BC,WAAY,OACVC,EACAC,WAAAA,GAEFC,MAAO,CACLC,MAAO,CACLC,KAAMC,MACNC,QAAS,IAAO,IAElBC,KAAM,CACJH,KAAMI,OACNF,QAAS,KAAO,CACdG,aAAc,OAIpBC,MAAMR,GACJ,MAAMS,EAAgBC,EAAI,MACpBL,EAAOM,EAASX,EAAMK,MACtBO,EAAWD,EAAS,CACxBE,OAAQC,EAAaC,QAAAC,OACrBC,OAAQ,CACNC,YAAa,CACXC,MAAO,CAAC,CACNC,QAAQ,EACRC,SAAS,QAUXC,EAAaC,EALL,CACZhB,aAAc,CACZiB,SAAAA,IAGmCnB,EAAM,CAC3CoB,OAAO,IAmBF,MAAA,CACLhB,cAAAA,EACAJ,KAAAA,EACAiB,WAAAA,EACAV,SAAAA,EACAc,SAtBeC,UAEf,IADsBlB,EAAcmB,MAAMC,cAChB,OAAA,EAE1B,eADsBpB,EAAcmB,MAAME,eAE1CR,EAAWM,MAAMG,aACTT,EAAWM,MAAMI,WAiBzBC,SAfgBC,IAChBC,UAAUC,UAAUC,UAAUH,GAAMI,MAAK,KAC7BC,EAAA,CACRrC,KAAM,UACNsC,QAAS,kCA1EFC,EAAA,CAAAC,MAAM,oBACHC,EAAA,CAAAD,MAAM,uCCiC1B,MAAK/C,EAAaC,EAAa,CAC7BC,WAAW,CACT+C,OAAAA,EACAC,KAAAA,QACA/C,EACAgD,OAAAA,EACAC,WAAAA,EACAC,yGDjCMC,OAAAA,IAAAC,EAAA,MAAAT,EAAA,GAZ8E,MAAA,KAAA,CAAtEU,EAAmBC,EAAA,CAAU1C,IAAA,gBAAA2C,WAAAC,EAAAjD,KAAAE,aAAoBgD,sBAAiBC,EAAA,KAAAA,EAAA,GAAAC,GAAAH,EAAAjD,KAAAE,aAAAkD,uBACjE,KAAA,EAAS,CAAA,aAAM,2BAUpBC,QAAAJ,EAAArD,iBAVsC0D,MAAatD,OAAYJ,6BAQvD2D,GAAA,IAAA,CAPDT,EAAWU,EAAA,CAACC,0BACL,CAChB1D,QAAAwD,GAAAG,GAAA,CACEC,EAAA,QAA4C,CAC5CA,EAA4G,OAAAC,EAAAC,EAAAH,EAAAI,IAAAC,MAAA,GAAzGJ,EAAsD,IAAA,CAAEtB,MAAK,yDAAwCe,GAAAH,EAAArB,SAAA8B,EAAAI,IAAAC,sCAIjGjB,EAAWU,EAAA,CAACC,yECqCzBtD,YAAMR,GAAOqE,KAAEA,IACnB,MAAMC,EAAiB5D,EAAI,OASnB6D,MAAOC,EAAAnE,KAAUA,EAAMoE,QAAAA,EAAAC,UAASA,eAAWC,GAAiBC,UAC9DF,IAeC,MAAA,CACLJ,eAAAA,EACAO,WA1BiB,CAAC,CAClB3C,KAAM,WACN4C,GAAI,CACFC,KAAM,YAEP,CACD7C,KAAM,oBAqBNsC,SAAAA,EACAnE,KAAAA,EACAoE,QAAAA,EACAO,cApBoBrD,UACpB,GAAG2C,EAAe1C,MAAM,CACtB6C,EAAQQ,QAAS,QACKX,EAAe1C,MAAMF,kBAEnCiD,GAAa,KACPpC,EAAA,CACRrC,KAAM,UACNsC,QAAS,qCAhDVC,EAAA,CAAAC,MAAM,uPApBfO,OAAAA,IAaMC,EAAA,MAAA,KAAA,GADwF,MAAAT,EAAA,CAAhFU,EAAU+B,EAAiB,CAAEC,UAA2B,kBAAGC,OAAiB,CAAAL,KAAA,mDAG7E5B,IAC4B,KAAA,CAArCkC,OAAAzB,GAAA,IAAIJ,EAAA,OAAM,oDAIV8B,OAAA1B,GAAA,OACmG,MAAAjB,EAAA,CAAzFQ,EAAYoC,EAAA,CAACC,MAAa,OAAEC,KAAA,SAAuBC,QAASpC,EAAO0B,wDAAaxB,EAAA,OAAA,GAAA,6DAH5F,IAA6H,CAAxFmC,EAAoBxC,EAAAyC,EAAA,CAASlF,iCAAamF,gBAAOrC,EAAS,OAAa,GAAAC,GAAAH,EAAAjD,KAAAoD,GAAExD,MAAMqD,EAAMkB,SAAAsB,QAAA7F,oBAAlG,KAAA,EAAA,CAAA,OAAA,UAAA,oCChB9B8F,EAAenG,EAAgB,CAC7BY,QACE,MAAMwF,YAAEA,GAAgBC,IAExB,MAAO,IAAMD,EAAYD"}