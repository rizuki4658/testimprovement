import{u as e}from"./components.41c6afd8.js";import{b as a,j as o,f as l,_ as t,v as s,Q as n,d as i}from"./index.e231b017.js";import{k as r,_ as d,m as c,o as u,t as f,D as p,a2 as m,a3 as b,K as v,f as x,a5 as g,O as k,r as _,x as y}from"./vendor.f1efedad.js";import{a as j}from"./integration.19f1b956.js";import{u as h}from"./index.32689823.js";import{r as w}from"./index.2fb3814c.js";import"./LoadingCard.9892fd7a.js";import"./card.de1f0319.js";import"./index.1c09f422.js";var P=t(r({components:{Button:a,Alert:o,Input:l},async setup(){const{state:e,data:a,actionAll:o,actionUpdate:l,loading:t}=j(),n=h({facebook_pixel_code:{required:w}},a,{$lazy:!0});return await Promise.all([o()]),{state:e,data:a,loading:t,validation:n,update:async(e=(()=>{}))=>{if(!(n.value.$validate(),!n.value.$invalid))return;const o=Object.assign({},{facebook_pixel_code:a.facebook_pixel_code});await l(o,(a=>{if("connection failed"===a.toLowerCase())return d({type:"warning",message:"Invalid Facebook Pixel configurations"});d({type:"success",message:"Facebook Pixel integration updated!"}),s(e)&&e()}))}}}}),[["render",function(e,a,o,l,t,s){const n=c("Input");return u(),f(m,null,[p(n,{modelValue:e.data.facebook_pixel_code,"onUpdate:modelValue":a[0]||(a[0]=a=>e.data.facebook_pixel_code=a),view:e.validation.facebook_pixel_code.$invalid?"danger":"default",class:"my-4",label:"Facebook Pixel ID (The 15 digits ID)",placeholder:"",block:""},null,8,["modelValue","view"]),(u(!0),f(m,null,b(e.validation.facebook_pixel_code.$errors,((e,a)=>(u(),f("small",{class:"text-red-base block mb-4",key:a},v(e.$message)+". ",1)))),128))],64)}]]),$=r({async setup(){const{genSuspense:o}=e(),{features:l}=n(),t=x(null),s=g(),r=k(),d=()=>{t.value.update((()=>{var e;r.push({name:"integration",query:{enable:(null==(e=s.query)?void 0:e.id)||""}})}))},c=_({modelValue:!0,closeTo:{name:"integration",query:{reload:1}},size:"xs"}),u=_({header:()=>"Facebook Pixel Config",default:()=>o(y(P,{ref:t})),footer:()=>{return y("div",{class:"flex"},[...l.value.integration.facebookPixel.learnMoreButton?[y("a",{href:"https://help.reusely.com/en/articles/5882524-facebook-pixel",target:"_blank",rel:"noreferrer noopener",class:"my-auto"},"Learn more")]:[],y(a,{color:"teal",class:"ml-auto",loading:t.value&&(null==(o=null==(e=t.value)?void 0:e.loading)?void 0:o.update),onClick:d},{default:()=>"Save"})]);var e,o}});return()=>y(i,c,u)}});export{$ as default};
