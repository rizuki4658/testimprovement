import{z as e,f as a,R as l,b as r,d as s,t as d}from"./index.9c4dcead.js";import{_ as o}from"./success.3f91e874.js";import{j as i,f as t,o as n,t as c,n as u,D as f,w as p,B as v,ap as m,U as C,I as g,K as y,a4 as h}from"./vendor.9695fe57.js";const x=i("onboarding",{state:()=>({referralCode:{modal:!1,isError:!1,isLoading:!1,result:void 0}}),getters:{},actions:{async $applyReferralCode(a={referral_code:void 0}){const l=await e({url:"/v1/pos/billing/apply-referral",method:"post",data:a});this.referralCode.result=l}}}),b={key:0},k={key:0,class:"text-red-04"},w={key:1,class:"flex flex-col justify-center items-center gap-8 py-10"},_={class:"flex justify-center items-center gap-x-4"},j={key:2,class:"flex flex-col justify-center items-center gap-8 py-10"},E={class:"space-y-2 text-center"},L={class:"text-sm text-grey-03"},V={class:"flex justify-center items-center gap-x-4"},A={class:"flex items-center justify-end gap-x-4"},R={__name:"OnboardingReferralCode",emits:["skip","applied"],setup(e,{emit:i}){const R=i,U=x(),z=t(!1),I=t(null),O=t(!1),W=()=>{U.referralCode.modal=!1,z.value=!1,I.value=null},$=()=>{R("skip"),W()},B=()=>{z.value=!0},D=()=>{z.value=!1},H=async()=>{await d(U.referralCode,(()=>U.$applyReferralCode({referral_code:I.value}).then((()=>{O.value=!0,U.referralCode.isError=!1,R("applied")})).catch((()=>{O.value=!1,z.value=!1,U.referralCode.isError=!0}))))},K=()=>{$()},S=()=>{U.referralCode.isError&&(U.referralCode.isError=!1)};return(e,d)=>(n(),c("div",null,[(n(),u(h,{to:"body"},[f(s,{modelValue:m(U).referralCode.modal,"onUpdate:modelValue":d[1]||(d[1]=e=>m(U).referralCode.modal=e),size:"xs","hide-header":z.value,"hide-footer":z.value,onClose:W},{header:p((()=>d[2]||(d[2]=[v("span",null,"Have a referral code?",-1)]))),default:p((()=>{var e,s;return[z.value?!O.value&&z.value?(n(),c("div",w,[d[6]||(d[6]=v("img",{src:l,alt:"Warning icon",height:"10",width:"10",class:"w-40"},null,-1)),d[7]||(d[7]=v("div",{class:"space-y-2 text-center"},[v("h5",{class:"font-medium text-2xl"},"Apply referral code"),v("p",{class:"text-sm text-grey-03"},"Only one referral source can be used per subscription.")],-1)),v("div",_,[f(r,{disabled:m(U).referralCode.isLoading,color:"white",view:"outlined",onClick:D},{default:p((()=>d[4]||(d[4]=[g(" Cancel ")]))),_:1},8,["disabled"]),f(r,{disabled:m(U).referralCode.isLoading,loading:m(U).referralCode.isLoading,color:"teal",onClick:H},{default:p((()=>d[5]||(d[5]=[g(" Yes, Apply ")]))),_:1},8,["disabled","loading"])])])):O.value&&z.value?(n(),c("div",j,[d[10]||(d[10]=v("img",{src:o,alt:"Warning icon",height:"10",width:"10",class:"w-40"},null,-1)),v("div",E,[d[8]||(d[8]=v("h5",{class:"font-medium text-2xl"},"Apply referral code applied succesfully!",-1)),v("p",L,y(null!=(s=null==(e=m(U).referralCode.result)?void 0:e.message)?s:"-"),1)]),v("div",V,[f(r,{disabled:m(U).referralCode.isLoading,loading:m(U).referralCode.isLoading,color:"teal",onClick:K},{default:p((()=>d[9]||(d[9]=[g(" Continue to App ")]))),_:1},8,["disabled","loading"])])])):C("",!0):(n(),c("div",b,[f(a,{modelValue:I.value,"onUpdate:modelValue":d[0]||(d[0]=e=>I.value=e),view:m(U).referralCode.isError?"danger":"default",disabled:m(U).referralCode.isLoading,placeholder:"Enter referral code",block:"",onInput:S},{label:p((()=>d[3]||(d[3]=[v("span",{class:"font-medium"}," Referral Code ",-1)]))),_:1},8,["modelValue","view","disabled"]),m(U).referralCode.isError?(n(),c("small",k," The referral code you entered is invalid ")):C("",!0)]))]})),footer:p((()=>{var e;return[v("div",A,[f(r,{disabled:m(U).referralCode.isLoading,color:"white",view:"outlined",onClick:$},{default:p((()=>d[11]||(d[11]=[g(" Skip ")]))),_:1},8,["disabled"]),f(r,{disabled:!I.value||(null==(e=I.value)?void 0:e.length)<=3,color:"teal",onClick:B},{default:p((()=>d[12]||(d[12]=[g(" Apply Code ")]))),_:1},8,["disabled"])])]})),_:1},8,["modelValue","hide-header","hide-footer"])]))]))}};export{R as _,x as u};
