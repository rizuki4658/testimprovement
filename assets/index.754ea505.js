import{u as a}from"./components.bc8fc588.js";import{k as e,_ as t,m as r,o as s,t as n,D as o,a2 as l,a3 as i,K as d,f as u,a5 as c,O as m,r as k,x as p}from"./vendor.f1efedad.js";import{b as f,j as v,f as b,_ as y,v as g,d as j}from"./index.161fb295.js";import{a as _}from"./integration.a62c8da1.js";import{u as x}from"./index.32689823.js";import{r as w}from"./index.a87b789d.js";import"./LoadingCard.105ff0f2.js";import"./card.6a96327d.js";import"./index.05b14cb2.js";var $=y(e({components:{Button:f,Alert:v,Input:b},async setup(){const{state:a,data:e,actionAll:r,actionUpdate:s,loading:n}=_(),o=x({backmarket_key:{required:w}},e,{$lazy:!0});return await Promise.all([r()]),{state:a,data:e,loading:n,validation:o,update:async(a=(()=>{}))=>{if(!(o.value.$validate(),!o.value.$invalid))return;const r=Object.assign({},{backmarket_key:e.backmarket_key});await s(r,(e=>{if("connection failed"===e.toLowerCase())return t({type:"warning",message:"Invalid BackMarket API Key"});t({type:"success",message:"BackMarket integration updated!"}),g(a)&&a()}))}}}}),[["render",function(a,e,t,u,c,m){const k=r("Input");return s(),n(l,null,[o(k,{modelValue:a.data.backmarket_key,"onUpdate:modelValue":e[0]||(e[0]=e=>a.data.backmarket_key=e),view:a.validation.backmarket_key.$invalid?"danger":"default",class:"my-4",label:"BackMarket Private API Key",placeholder:"",block:""},null,8,["modelValue","view"]),(s(!0),n(l,null,i(a.validation.backmarket_key.$errors,((a,e)=>(s(),n("small",{class:"text-red-base block mb-4",key:e},d(a.$message)+". ",1)))),128))],64)}]]),B=e({async setup(){const{genSuspense:e}=a(),t=u(null),r=c(),s=m(),n=()=>{t.value.update((()=>{var a;s.push({name:"integration",query:{enable:(null==(a=r.query)?void 0:a.id)||""}})}))},o=k({modelValue:!0,closeTo:{name:"integration",query:{reload:1}},size:"xs"}),l=k({header:()=>"BackMarket Config",default:()=>e(p($,{ref:t})),footer:()=>{return p(f,{color:"teal",loading:t.value&&(null==(e=null==(a=t.value)?void 0:a.loading)?void 0:e.update),onClick:n},{default:()=>"Save"});var a,e}});return()=>p(j,o,l)}});export{B as default};
