import{k as e,a5 as a,O as i,f as t,aJ as n,m as s,o as l,n as o,w as r,B as d,U as u,t as c,I as m,D as p,a1 as g,T as f,aI as h,ar as C,a6 as v,_ as S}from"./vendor.9695fe57.js";import{b,c as x,d as y,a as _}from"./shipengine.4190589d.js";import{_ as k,d as w,b as K,B as j}from"./index.10c203ea.js";import{_ as E}from"./tab.7ba2ad83.js";import{S as P}from"./ShippingKitForm.0bc2f870.js";import"./index.54844a74.js";import"./index.6b6f6369.js";import"./index.f40e4a9e.js";import"./TextEditor.a0db279c.js";const F=e({name:"Shipmondo",components:{Modal:w,Button:K,Tab:E,ShippingKitForm:P,BaseLoading:j},async setup(){const e=a(),s=i(),{loading:l,updateCarrier:o,resetSelectedCarrier:r,selectedCarrier:d}=b(),{loading:u,updateShippingKit:c}=x(),{loading:m}=y(),{status:p,fetchStatus:g}=_(),f=t(null),h=n((()=>e.matched.length>0&&void 0===e.matched.find((e=>"integrationShipengineConfig"===e.name)))),C=n((()=>"integrationShipengineConfigShippingKit"===e.name)),v=n((()=>!h.value)),k=n((()=>null===d.value.carrier_uuid));return await Promise.all([g()]),{route:e,refComponent:f,loading:l,loadingShippingKit:u,loadingConfig:m,isHideFooter:h,isShowEditCredential:v,isNotSelectedCarrier:k,status:p,handleCloseForm:()=>{s.push({name:"integration",query:{reload:1}})},handleSave:async()=>{var e,a,i,t;if(C.value){if(!(await(null==(t=null==(i=null==(a=null==(e=f.value)?void 0:e.componentElement)?void 0:a.shippingKitFormElement)?void 0:i.validate)?void 0:t.call(i))))return}let n={carrier:!1,shippingKit:!1};await Promise.all([o((e=>n.carrier=e)),c((e=>n.shippingKit=e))]),n.carrier||n.shippingKit?r():(S({type:"success",message:"Changes saved"}),s.push({name:"integration",query:{reload:1}}))},handleEditCredential:()=>{s.push({name:"integrationShipengineConnect"})}}}}),B={class:"flex justify-between"},M={class:"flex items-center bg-orange-lighten text-orange-04 p-4 rounded-lg w-full mx-auto my-4"},I={class:"flex items-center bg-blue-lighten text-blue-04 p-4 rounded-lg w-full mx-auto my-4"},L={class:"w-full flex items-center justify-center"},T={class:"w-max ml-auto"};var N=k(F,[["render",function(e,a,i,t,n,S){const b=s("Button"),x=s("router-link"),y=s("BaseLoading"),_=s("RouterView"),k=s("Tooltip"),w=s("Modal");return l(),o(w,{size:"md",modelValue:!0,"hide-footer":e.isHideFooter,onClickClose:e.handleCloseForm,"without-transition":""},{header:r((()=>[d("div",B,[a[1]||(a[1]=d("span",null,"Shipengine Settings",-1)),e.isShowEditCredential?(l(),o(b,{key:0,onClick:e.handleEditCredential,color:"teal",dense:""},{default:r((()=>a[0]||(a[0]=[d("div",{class:"flex flex-auto items-center"},[d("i",{class:"material-icons icon-xxs"},"edit"),d("span",{class:"ml-1"}," Edit API Key")],-1)]))),_:1},8,["onClick"])):u("",!0)])])),default:r((()=>[0==e.status.is_ready?(l(),c(g,{key:0},[d("div",M,[a[5]||(a[5]=d("i",{class:"material-icons mr-4 self-start"},"info",-1)),d("span",null,[a[3]||(a[3]=m("Please activate Mail-in location and complete all forms. ")),p(x,{class:"font-semibold text-orange-04",to:{name:"settingManageLocation"}},{default:r((()=>a[2]||(a[2]=[m(" Mail-In Settings ")]))),_:1}),a[4]||(a[4]=m(" ."))])]),d("div",I,[a[9]||(a[9]=d("i",{class:"material-icons mr-4 self-start"},"info",-1)),d("span",null,[a[7]||(a[7]=m("Please make sure your ShipEngine account is in the same country as the country setting in Reusely. ")),p(x,{class:"font-semibold text-blue-04",to:{name:"settingManageLocation"}},{default:r((()=>a[6]||(a[6]=[m(" Country Settings ")]))),_:1}),a[8]||(a[8]=m(" ."))])])],64)):u("",!0),p(_,null,{default:r((({Component:e,route:a})=>[e?(l(),o(f,{name:"slide-fade",key:a.matched[a.matched.length-2].name},{default:r((()=>[(l(),o(h,null,[(l(),o(C,null,{default:r((()=>[(l(),o(v(e),{ref:"refComponent"},null,512))])),fallback:r((()=>[d("div",L,[p(y)])])),_:2},1024))],1024))])),_:2},1024)):u("",!0)])),_:1})])),footer:r((()=>[p(k,{placement:"top",content:"Please choose a shipping courier first",disabled:!e.isNotSelectedCarrier},{default:r((()=>[d("div",T,[p(b,{onClick:e.handleSave,color:"teal",disabled:e.loading.shippingProvider.fetchCarriers||e.loading.shippingKit.fetch||e.loadingConfig.integrationChecks||0==e.status.is_ready||e.isNotSelectedCarrier,loading:e.loading.shippingProvider.updateCarrier||e.loadingShippingKit.update},{default:r((()=>a[10]||(a[10]=[m("Save")]))),_:1},8,["onClick","disabled","loading"])])])),_:1},8,["disabled"])])),_:1},8,["hide-footer","onClickClose"])}],["__scopeId","data-v-53370bc0"]]);export{N as default};
