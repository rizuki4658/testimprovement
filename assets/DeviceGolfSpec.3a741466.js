import{k as e,f as l,y as a,m as t,o,t as s,D as c,w as n,B as d,S as r,I as p,a1 as u,K as i,a2 as m,g as y,n as v,U as h}from"./vendor.9695fe57.js";import{f as S,_ as f}from"./index.73ae30fa.js";import{B as g}from"./BDropdown.85a0a8cb.js";import{d as b}from"./device.cc6073a7.js";import{B as C}from"./BSelect.a6409611.js";const k=e({name:"ColorSearch",components:{Input:S,BDropdown:g},props:{modelValue:{type:String,default:""},loading:{type:Boolean,default:!1},items:{type:Array,default:()=>[]},error:{type:Boolean,default:!1},label:{type:String,default:"Color"},placeholder:{type:String,default:"Search Color"},productId:{type:[String,Number],default:null},isCustomItem:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","search","select","customColor"],setup(e,{emit:t}){const o=l(null),s=l(!1),c=l(e.modelValue),n=l(!1);a((()=>e.productId),(()=>{c.value="",n.value=!1}));const d=()=>{s.value=!1};return{elSearchInput:o,isCollapse:s,searchQuery:c,isSearching:n,handleSearch:e=>{c.value=e,t("search",e)},handleSelectItem:e=>{t("select",e),t("update:modelValue",e.name),c.value=e.name,d()},handleCustomColor:()=>{t("customColor"),d()},handleFocusIn:()=>{s.value=!0,n.value=!0}}}}),_=["onClick"],x={class:"overflow-y-auto",style:{maxHeight:"200px"}},I={class:"text-left ml-4 my-4 text-black text-sm font-semibold"},B={class:"auto-complete-color auto-complete-color__group"},w=["onClick"],V={class:"flex items-center w-full"},O={key:1,class:"my-8"},U={key:2,class:"my-8"},j={class:"text-center text-grey-04"};var D=f(k,[["render",function(e,l,a,y,v,h){const S=t("Input"),f=t("BDropdown");return o(),s("div",null,[c(f,{"prevent-toggle":"",block:""},{default:n((()=>[c(S,{ref:"elSearchInput","model-value":e.isSearching?e.searchQuery:e.modelValue,"onUpdate:modelValue":e.handleSearch,onFocusIn:e.handleFocusIn,view:e.error?"danger":"default",label:e.label,placeholder:e.placeholder,disabled:e.disabled,block:"",icon:""},{icon:n((()=>l[0]||(l[0]=[d("span",{class:"material-icons"},"search",-1)]))),_:1},8,["model-value","onUpdate:modelValue","onFocusIn","view","label","placeholder","disabled"])])),dropdown:n((({collapse:a})=>{var t;return[d("div",null,[d("a",{onClick:r((()=>{e.handleCustomColor(),a()}),["prevent"]),tabindex:"1",class:"auto-complete-color auto-complete-color__group-item border-b border-grey-01"},l[1]||(l[1]=[d("span",{class:"flex items-center flex-wrap"},[d("i",{class:"material-icons mr-2"},"add"),p("Add Custom Color ")],-1)]),8,_),d("div",x,[e.items.length>0?(o(),s(u,{key:0},[d("p",I,i(e.items.length>1?"Colors":"Color"),1),d("div",B,[(o(!0),s(u,null,m(e.items,(l=>(o(),s("a",{key:l.id,onClick:r((()=>{e.handleSelectItem(l),a()}),["prevent"]),tabindex:"1",class:"auto-complete-color auto-complete-color__group-item"},[d("div",V,[d("span",null,i(l.name),1)])],8,w)))),128))])],64)):(!e.searchQuery||(null==(t=e.searchQuery)?void 0:t.length)<2)&&e.isCustomItem?(o(),s("div",O,l[2]||(l[2]=[d("p",{class:"text-center text-grey-04"}," minimal 2 characters to search for colors ",-1)]))):(o(),s("div",U,[d("p",j,i(e.loading?"Please wait...":"No colors found"),1)]))])])]})),_:1})])}]]);const A=e({name:"DeviceGolfSpec",components:{BSelect:C,Input:S},props:{item:{type:Object,default:()=>({product_id:void 0})},steps:{type:Array,default:()=>[]},specs:{type:Object},loading:{type:Boolean,default:!1}},emits:["updateSpecs"],setup(e,{emit:l}){const{step:t,steps:o,specsOptions:s,specs:c,loading:n,getSpecOptions:d,setItem:r,setSteps:p,setSpec:u,unsetSpecs:i,createSelectedSpecOption:m,setCustomSpec:v}=b(),h=y((()=>Object.fromEntries(Object.entries(c).map((([e,l])=>[e,{selected:l.selected.value,is_custom:l.is_custom}])).filter((([e,l])=>null!==l.selected)))));return a((()=>e.item),(async(e,l)=>{if((null==e?void 0:e.product_id)===(null==l?void 0:l.product_id))return;!(null==e?void 0:e.product_id)||(i(),r({productId:e.product_id}),await d())}),{immediate:!0}),a((()=>e.steps),(e=>{p(e||[])}),{immediate:!0}),a((()=>e.specs),(async()=>{for(const[l,a]of Object.entries(e.specs))a.selected&&u(l,m(a.selected),{is_custom:a.is_custom})}),{deep:!0,immediate:!0}),{loadingSpec:n,step:t,steps:o,specsOptions:s,specs:c,handleUpdateSpec:async(e,a)=>{e&&(u(e,a),l("updateSpecs",h.value))},handleSetCustomSpec:async e=>{e&&v(e,!0)},handleSetSpecCustomValue:async(e,a,t)=>{e&&a&&(u(e,{name:a,value:t}),l("updateSpecs",h.value))},handleUnsetCustomSpec:e=>{e&&v(e,!1)}}}}),F={class:"grid grid-cols-1 gap-4"},Q={class:"p-4"},N=["onClick"];var $=f(A,[["render",function(e,l,a,c,r,y){const S=t("Input"),f=t("BSelect");return o(),s("div",F,[(o(!0),s(u,null,m(e.specsOptions,((a,t)=>(o(),s("div",{key:a.key},[d("label",null,i(a.name),1),a.is_custom?(o(),v(S,{key:0,"onUpdate:modelValue":l=>e.handleSetSpecCustomValue(a.key,a.name,l),"model-value":a.selected.value,placeholder:`Input your custom ${a.name}`,clearable:!0,"clearable-fixed":!0,disabled:e.loadingSpec||e.loading,onClear:l=>e.handleUnsetCustomSpec(a.key),block:""},null,8,["onUpdate:modelValue","model-value","placeholder","disabled","onClear"])):(o(),v(f,{key:1,"onUpdate:modelValue":l=>e.handleUpdateSpec(a.key,l),"model-value":a.selected,items:a.options,"item-key":"value","item-name":"name",loading:e.loadingSpec||e.loading,placeholder:`Select ${a.name}`,block:""},{prepend:n((()=>[d("label",Q," Select "+i(a.name),1)])),append:n((()=>[d("div",null,[l[1]||(l[1]=d("label",{class:"px-5 pt-4 pb-2"},"Alternative Options",-1)),a.is_custom?h("",!0):(o(),s("button",{key:0,onClick:l=>e.handleSetCustomSpec(a.key),class:"flex items-center gap-2 pt-2 pb-4 px-4 hover:bg-grey-lighten w-full"},[l[0]||(l[0]=d("i",{class:"material-icons"},"add",-1)),p(" Add Custom "+i(a.name),1)],8,N))])])),_:2},1032,["onUpdate:modelValue","model-value","items","loading","placeholder"]))])))),128))])}]]);export{D as C,$ as D};
