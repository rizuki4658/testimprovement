{"version":3,"file":"MultipleInputFile.3ba154e2.js","sources":["../../src/components/MultipleInputFile.vue"],"sourcesContent":["<template>\n  <div\n    :class=\"disabled ? 'opacity-30' : ''\"\n    class=\"input-file\"\n    @dragenter.prevent.stop\n    @dragover.prevent.stop\n    @dragleave.prevent.stop\n    @drop.prevent.stop=\"drag\"\n  >\n    <input\n      ref=\"fileInput\"\n      type=\"file\"\n      accept=\"image/jpg, image/jpeg, image/png\"\n      class=\"input-file-form\"\n      :id=\"`file${data.id}`\"\n      @input=\"input\"\n      multiple\n      :disabled=\"disabled\"\n    />\n    <div v-if=\"preview\" class=\"input-file-preview\">\n      <slot name=\"preview\">\n        <div class=\"w-full flex flex-wrap col\">\n          <div\n            v-for=\"(image, imageIndex) of data.images\"\n            :key=\"imageIndex\"\n            class=\"mx-4 my-4\"\n          >\n            <img :src=\"image\" :alt=\"`image-${imageIndex}`\" />\n          </div>\n        </div>\n      </slot>\n    </div>\n    <div class=\"my-12\">\n      <label :for=\"`file${data.id}`\">\n        <slot>\n          <strong class=\"pointer\">Choose a file</strong>\n          <span class=\"font-normal\"> or drag it here.</span>\n        </slot>\n      </label>\n    </div>\n  </div>\n  <small\n    :class=\"disabled ? 'opacity-30' : ''\"><b>Max</b> {{ rules.maxFileSize }} ; <b>File</b>:\n    {{\n      rules.allowedFiles.map((allowedFile) => allowedFile.name).join(', ')\n    }}</small\n  >\n</template>\n\n<script>\nimport { defineComponent, reactive, ref } from 'vue'\nimport Button from 'bbUi/components/button/button.vue'\n\nexport default defineComponent({\n  components: {\n    Button\n  },\n  props: {\n    preview: {\n      type: Boolean,\n      default: true\n    },\n    rules: {\n      type: Object,\n      default: () => ({\n        maxFileSize: '50MB',\n        allowedFiles: [\n          {\n            name: 'PNG',\n            mime: ''\n          },\n          {\n            name: 'JPG',\n            mime: ''\n          },\n          {\n            name: 'HEIC',\n            mime: ''\n          }\n        ]\n      })\n    },\n    disabled: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: ['input'],\n  setup(props, { emit, expose }) {\n    const fileInput = ref(null)\n    \n    const data = reactive({\n      id: Math.floor(Math.random() * 1000000),\n      images: []\n    })\n    const input = (e) => {\n      for (let file of e.target.files) {\n        const reader = new FileReader()\n        reader.onload = (e) => {\n          data.images.push(e.target.result)\n        }\n        reader.readAsDataURL(file)\n      }\n\n      emit('input', e.target.files)\n    }\n    const drag = (e) => {\n      if (props.disabled) return\n      for (let file of e.dataTransfer.files) {\n        const reader = new FileReader()\n        reader.onload = (e) => {\n          data.images.push(e.target.result)\n        }\n        reader.readAsDataURL(file)\n      }\n\n      emit('input', e.dataTransfer.files)\n    }\n    const remove = () => {\n      data.images = []\n      emit('input', null)\n    }\n    const triggerFileInput = () => {\n      fileInput.value.click()\n    }\n    \n    expose({\n      triggerFileInput\n    })\n\n    return {\n      fileInput,\n      data,\n      input,\n      drag,\n      remove,\n      disabled: props.disabled\n    }\n  }\n})\n</script>\n"],"names":["_sfc_main","defineComponent","components","Button","props","preview","type","Boolean","default","rules","Object","maxFileSize","allowedFiles","name","mime","disabled","emits","[object Object]","emit","expose","fileInput","ref","data","reactive","id","Math","floor","random","images","triggerFileInput","value","click","input","e","file","target","files","reader","FileReader","onload","e2","push","result","readAsDataURL","drag","dataTransfer","remove","key","_hoisted_4","_openBlock","_createElementBlock","_Fragment","class","_normalizeClass","onDragenter","onDragover","onDragleave","_createElementVNode","accept","onInput","_cache","args","_ctx","multiple","_hoisted_1","_hoisted_2","_renderSlot","$slots","_hoisted_3","_renderList","image","imageIndex","src","_createCommentVNode","_hoisted_5","_createTextVNode","_toDisplayString"],"mappings":"qLAqDA,MAAKA,EAAaC,EAAa,CAC7BC,WAAY,QACVC,GAEFC,MAAO,CACLC,QAAS,CACPC,KAAMC,QACNC,SAAS,GAEXC,MAAO,CACLH,KAAMI,OACNF,QAAS,KAAO,CACdG,YAAa,OACbC,aAAc,CACZ,CACEC,KAAM,MACNC,KAAM,IAER,CACED,KAAM,MACNC,KAAM,IAER,CACED,KAAM,OACNC,KAAM,QAKdC,SAAU,CACRT,KAAMC,QACNC,SAAS,IAGbQ,MAAO,CAAC,SACRC,MAAMb,GAAOc,KAAEA,EAAAC,OAAMA,IACnB,MAAMC,EAAYC,EAAI,MAEhBC,EAAOC,EAAS,CACpBC,GAAIC,KAAKC,MAAsB,IAAhBD,KAAKE,UACpBC,OAAQ,KAqCH,OAJAT,EAAA,CACLU,iBALuB,KACvBT,EAAUU,MAAMC,WAOX,CACLX,UAAAA,EACAE,KAAAA,EACAU,MAtCaC,IACJ,IAAA,IAAAC,KAAQD,EAAEE,OAAOC,MAAO,CAC/B,MAAMC,EAAS,IAAIC,WACZD,EAAAE,OAAUC,IACVlB,EAAAM,OAAOa,KAAKD,EAAEL,OAAOO,SAE5BL,EAAOM,cAAcT,GAGlBhB,EAAA,QAASe,EAAEE,OAAOC,QA8BvBQ,KA5BYX,IACZ,IAAI7B,EAAMW,SAAV,CACS,IAAA,IAAAmB,KAAQD,EAAEY,aAAaT,MAAO,CACrC,MAAMC,EAAS,IAAIC,WACZD,EAAAE,OAAUC,IACVlB,EAAAM,OAAOa,KAAKD,EAAEL,OAAOO,SAE5BL,EAAOM,cAAcT,GAGlBhB,EAAA,QAASe,EAAEY,aAAaT,SAmB7BU,OAjBa,KACbxB,EAAKM,OAAS,GACdV,EAAK,QAAS,OAgBdH,SAAUX,EAAMW,oCArHEgC,IAAK,oEAapBC,EAAA,CAAA,oFAQDC,OAAAA,IAAAC,EAAAC,EAAA,KAAA,GAtCE,MAAU,CAEfC,MAAAC,2BAAsB,GAAA,eACtBC,2BAAqB,QAAA,CAAA,UAAA,UACrBC,kCAAsB,CAAA,UAAA,UACtBC,mCAAuB,CAAA,UAAA,oFAWtB,CARAC,EAAe,QAAA,CACfpC,gBACAf,KAAM,OACNoD,OAAuB,mCACtBN,MAAE,kBACF5B,GAAA,mBACDmC,UAAQ,KAAAC,EAAA,GAAA,IAAAC,IAAAC,EAAA9B,OAAA8B,EAAA9B,SAAA6B,IACPE,SAAU,wBAEK,KAAA,GAAAC,GAAlBF,EAAAzD,qBACE4D,EAUO,CATLC,EAAAJ,EAAAK,iBAQM,IAAA,IAAA,CAPJV,EAAA,MAAAW,EAAA,UAMMjB,EAAA,KAAAkB,EAAAP,EAAAxC,KAAAM,QAAA,CAAA0C,EAAAC,KAJYtB,IAAAC,EAAA,MAAA,CAChBH,IAAKwB,qBAE4C,CAA3Cd,EAAU,MAAA,CAAGe,qDAK3BC,MAOM,KADI,MAAAC,EAAA,GALgB,QAAG,yBACzB,CACER,EAAAJ,EAAAK,OAAA,UAAA,IAAA,IAAA,CACAP,EAAA,KAAAA,EAAA,GAAAH,EAAkD,SAA5C,CAAAL,MAAM,4BAA+B,oFAUlD,IAJEK,UAAe,sCAAsB,CAAUG,EAAA,KAAAA,EAAI,GAAAH,EAAA,IAAM,KAAA,WAAiBkB,EAAA,IAAAC,EAAAd,EAAArD,mBAAO,MAAA,GAAImD,EAAA,KAAAA,EACtF,GACEH,EAAA,IAAK,KAAC,QAAa"}