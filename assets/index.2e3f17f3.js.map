{"version":3,"file":"index.2e3f17f3.js","sources":["../../src/views/setting/manage-location/switch/index.vue"],"sourcesContent":["<template>\n  <div>\n    <Modal\n      v-model=\"isShow\"\n      title=\"Switch Location\"\n      @close=\"handleCloseLocation\"\n    >\n      <div class=\"grid grid-cols-1\">\n        <ManageLocationForm ref=\"refComponent\" :data=\"data\" />\n      </div>\n      <template #footer>\n        <div class=\"text-right\">\n          <Button\n            :disabled=\"isIncompleteForm\"\n            view=\"smooth\"\n            color=\"teal\"\n            :loading=\"loading\"\n            @click=\"switchLocation\"\n            >Save</Button\n          >\n        </div>\n      </template>\n    </Modal>\n  </div>\n</template>\n\n<script>\nimport { defineComponent, inject, ref, onMounted } from 'vue'\nimport { useRoute, useRouter } from 'vue-router'\nimport { useSwitchLocationType } from 'composable/location'\nimport { useLocations } from 'composable/dashboard'\nimport { useUser } from 'composable/user'\nimport { storeLocationSymbols } from 'composable/location'\nimport Button from 'bbUi/components/button/button.vue'\nimport Modal from 'bbUi/components/modal/modal.vue'\nimport Breadcrumb from 'components/Breadcrumb.vue'\nimport ManageLocationForm from 'components/ManageLocation/Form.vue'\n\nexport default defineComponent({\n  components: {\n    Button,\n    Modal,\n    ManageLocationForm,\n    Breadcrumb\n  },\n  async setup() {\n    const route = useRoute()\n    const router = useRouter()\n    const { data, loading, action, isIncompleteForm } = useSwitchLocationType()\n    const { action: actionMe } = useUser()\n    const { locations } = useLocations()\n    const refComponent = ref(null)\n    const isShow = ref(false)\n\n    const actionLocation = inject(storeLocationSymbols.actionAll)\n\n    const switchLocation = async () => {\n      if (refComponent.value.validate()) {\n        await action(async () => {\n          await Promise.all([actionLocation(), locations(), actionMe()])\n          router.push({ name: 'settingManageLocation' })\n        })\n      }\n    }\n    const handleCloseLocation = async () =>\n      router.push({ name: 'settingManageLocation' })\n\n    onMounted(() => {\n      data.old_location_id = route.params.locationId\n      isShow.value = true\n    })\n\n    return {\n      data,\n      loading,\n      refComponent,\n      isShow,\n      isIncompleteForm,\n      switchLocation,\n      handleCloseLocation\n    }\n  }\n})\n</script>\n"],"names":["_sfc_main","defineComponent","components","Button","Modal","ManageLocationForm","Breadcrumb","[object Object]","route","useRoute","router","useRouter","data","loading","action","isIncompleteForm","useSwitchLocationType","actionMe","useUser","locations","useLocations","refComponent","ref","isShow","actionLocation","inject","storeLocationSymbols","actionAll","onMounted","old_location_id","params","locationId","value","switchLocation","async","validate","Promise","all","push","name","handleCloseLocation","_hoisted_1","class","_openBlock","_createElementBlock","onUpdate:modelValue","_cache","$event","_ctx","title","footer","_withCtx","_hoisted_2","_createVNode","_component_Button","disabled","view","color","default","_component_ManageLocationForm"],"mappings":"ioBAsCA,MAAKA,EAAaC,EAAa,CAC7BC,WAAY,CACVC,OAAAA,QACAC,EACAC,mBAAAA,EACAC,WAAAA,GAAAC,cAGA,MAAMC,EAAQC,IACRC,EAASC,KACTC,KAAEA,EAAAC,QAAMA,EAASC,OAAAA,EAAAC,iBAAQA,GAAqBC,KAC5CF,OAAQG,GAAaC,KACvBC,UAAEA,GAAcC,IAChBC,EAAeC,EAAI,MACnBC,EAASD,GAAI,GAEbE,EAAiBC,EAAOC,EAAqBC,WAkB5C,OALPC,GAAU,KACHhB,EAAAiB,gBAAkBrB,EAAMsB,OAAOC,WACpCR,EAAOS,OAAQ,KAGV,CACLpB,KAAAA,EACAC,QAAAA,EACAQ,aAAAA,EACAE,OAAAA,EACAR,iBAAAA,EACAkB,eAtBqBC,UACjBb,EAAaW,MAAMG,kBACfrB,GAAOoB,gBACLE,QAAQC,IAAI,CAACb,IAAkBL,IAAaF,MAC3CP,EAAA4B,KAAK,CAAEC,KAAM,8BAmBxBC,oBAf0BN,SAC1BxB,EAAO4B,KAAK,CAAEC,KAAM,8BAtDbE,EAAA,CAAAC,MAAM,iJAWPC,OAAAA,IAAAC,EAAA,MAAA,KAAA,KAnBS,qBACfC,sBAAuBC,EAAA,OAAA,GAAAC,GAAAC,EAAAzB,OAAAwB,GACtBE,MAAK,iDAKK,CACTC,OAAAC,GAAA,OAQG,MAAAC,EAAA,CANEC,EAA0BC,EAAA,CAC3BC,SAAaP,EAAAjC,iBACbyC,cACCC,MAAO,OACP5C,QAAOmC,EAAcnC,kDACjBiC,EAAA,OAAA,GAAA,6DAXXY,QAAAP,GAAA,OACwD,MAAAV,EAAA,CAAlCY,EAAkBM,EAAA,CAAErC"}