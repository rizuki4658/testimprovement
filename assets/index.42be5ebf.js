var a=Object.defineProperty,e=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,r=(e,l,s)=>l in e?a(e,l,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[l]=s;import{u as t}from"./components.4d38f2db.js";import{k as n,y as o,_ as i,m as d,o as c,t as u,D as m,a1 as _,a2 as p,K as h,f as v,a5 as f,O as b,r as y,x as g}from"./vendor.9695fe57.js";import{b as k,j,f as S,_ as w,v as $,d as x}from"./index.73ae30fa.js";import{a as A}from"./integration.549dcf93.js";import{u as V}from"./index.f40e4a9e.js";import{r as O}from"./index.54844a74.js";import"./LoadingCard.d1cef10f.js";import"./card.0f43ecfb.js";import"./index.6b6f6369.js";var I=w(n({components:{Button:k,Alert:j,Input:S},emits:["ready"],async setup(a,{emit:t}){const{state:n,data:d,actionAll:c,actionUpdate:u,loading:m}=A(),_=V({shareasale_merchant_account_id:{required:O},shareasale_token:{required:O},shareasale_api_secret:{required:O}},d,{$lazy:!0});return o((()=>((a,t)=>{for(var n in t||(t={}))l.call(t,n)&&r(a,n,t[n]);if(e)for(var n of e(t))s.call(t,n)&&r(a,n,t[n]);return a})({},d)),(()=>{const a=!!d.shareasale_merchant_account_id&&!!d.shareasale_token&&!!d.shareasale_api_secret;t("ready",a)})),await Promise.all([c()]),{state:n,data:d,loading:m,validation:_,update:async(a=(()=>{}))=>{if(!(_.value.$validate(),!_.value.$invalid))return;const e=Object.assign({},{shareasale_merchant_account_id:d.shareasale_merchant_account_id,shareasale_token:d.shareasale_token,shareasale_api_secret:d.shareasale_api_secret});await u(e,(e=>{if("connection failed"===e.toLowerCase())return i({type:"warning",message:"Invalid Share A Sale merchant ID"});i({type:"success",message:"Share A Sale integration updated!"}),$(a)&&a()}))}}}}),[["render",function(a,e,l,s,r,t){const n=d("Input");return c(),u("div",null,[m(n,{modelValue:a.data.shareasale_merchant_account_id,"onUpdate:modelValue":e[0]||(e[0]=e=>a.data.shareasale_merchant_account_id=e),view:a.validation.shareasale_merchant_account_id.$invalid?"danger":"default",class:"my-4",label:"Share A Sale Merchant ID",placeholder:"",block:""},null,8,["modelValue","view"]),(c(!0),u(_,null,p(a.validation.shareasale_merchant_account_id.$errors,((a,e)=>(c(),u("small",{class:"text-red-base block mb-4",key:e},h(a.$message)+". ",1)))),128)),m(n,{modelValue:a.data.shareasale_api_secret,"onUpdate:modelValue":e[1]||(e[1]=e=>a.data.shareasale_api_secret=e),view:a.validation.shareasale_api_secret.$invalid?"danger":"default",class:"my-4",label:"Share A Sale Private API Key",placeholder:"",block:""},null,8,["modelValue","view"]),(c(!0),u(_,null,p(a.validation.shareasale_api_secret.$errors,((a,e)=>(c(),u("small",{class:"text-red-base block mb-4",key:e},h(a.$message)+". ",1)))),128)),m(n,{modelValue:a.data.shareasale_token,"onUpdate:modelValue":e[2]||(e[2]=e=>a.data.shareasale_token=e),view:a.validation.shareasale_token.$invalid?"danger":"default",class:"my-4",label:"Share A Sale Token",placeholder:"",block:""},null,8,["modelValue","view"]),(c(!0),u(_,null,p(a.validation.shareasale_token.$errors,((a,e)=>(c(),u("small",{class:"text-red-base block mb-4",key:e},h(a.$message)+". ",1)))),128))])}]]),q=n({async setup(){const{genSuspense:a}=t(),e=v(null),l=f(),s=b(),r=()=>{e.value.update((()=>{var a;s.push({name:"integration",query:{enable:(null==(a=l.query)?void 0:a.id)||""}})}))},n=y({modelValue:!0,closeTo:{name:"integration",query:{reload:1}},size:"xs"}),o=y({header:()=>"Connect your ShareASale Account",default:()=>a(g(I,{ref:e})),footer:()=>{return g(k,{color:"teal",loading:e.value&&(null==(l=null==(a=e.value)?void 0:a.loading)?void 0:l.update),onClick:r},{default:()=>"Save"});var a,l}});return()=>g(x,n,o)}});export{q as default};
