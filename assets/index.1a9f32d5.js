import{u as e}from"./components.41c6afd8.js";import{u as a}from"./report.8d37f0ec.js";import{o as t}from"./buyback.362c230f.js";import{C as l}from"./card.de1f0319.js";import{_ as o,e as i,f as s,j as r,b as n,P as d,a9 as c,g as u}from"./index.e231b017.js";import{_ as p}from"./badge.3a8a2c41.js";import{B as m}from"./Breadcrumb.e5dd1515.js";import{_ as f}from"./group-container.4951adfc.js";import{a as b}from"./date.f86face7.js";import{k as g,f as h,y as w,m as y,a0 as k,o as _,t as x,B as v,D as C,w as P,a4 as S,I as B,a2 as D,a3 as j,n as F,K as U,U as A,A as V,_ as L}from"./vendor.f1efedad.js";import{C as R}from"./Currency.3768e3b3.js";import"./LoadingCard.9892fd7a.js";import"./dymo.5603a15d.js";import"./breadcrumb.e60df23d.js";const I=g({components:{Card:l,Checkbox:i,Input:s,Alert:r,Button:n,Badge:p,Breadcrumb:m,Pagination:d,GroupContainer:f,Currency:R},async setup(e,{emit:l}){const{data:o,actionAll:i,actionBatchStatusPrintUpdate:s,actionBatchPrintShippingKit:r,actionBatchPrintAddressLabel:n,loading:d,state:p,filterList:m,clearFilter:f,clearAllFilter:g,isFiltered:y,filterDateRef:k,filterDateOptions:_,filterDateFocus:x}=a(),{state:v,action:C,loading:P}=t("online"),S=h(null),B=h([]);await Promise.all([i(),C()]),w((()=>({page:o.page,limit:o.limit,search:o.search,payment_method:o.payment_method,date:o.date,shipping_courier:o.shipping_courier})),u((async()=>{await i()}),500),{deep:!0});return{refBuybackTable:S,breadcrumb:[{text:"Reports",to:{name:"report"}},{text:"Shipping Label Request"}],couriers:[{id:"usps",name:"USPS"},{id:"fedex",name:"FedEx"},{id:"ups",name:"UPS"}],state:p,statePaymentMethods:v,loading:d,loadingPaymentMethods:P,data:o,selectedItems:B,filterList:m,clearFilter:f,clearAllFilter:g,isFiltered:y,filterDateRef:k,filterDateOptions:_,filterDateFocus:x,format:b,tableConfig:{isShowSelectionAll:!0},getRowKey:e=>e.box_id,selectableRow:e=>(B.value,!0),tableOnSelect:e=>{B.value=e},batchUpdatePrintStatus:async()=>{const e=B.value;await s(e,(async()=>{L({message:"Buybacks updated!",type:"success"}),await i()}))},batchPrintShippingKit:async()=>{const e=B.value;await r(e)},batchPrintAddressLabel:async()=>{const e=B.value;await n(e)},phoneNumber:c}}}),M={class:"flex xl:flex-row flex-col justify-between mb-8"},T={class:"flex flex-col mt-4"},K={class:"flex flex-row 2xl:flex-nowrap xl:flex-nowrap lg:flex-nowrap flex-wrap"},O={class:"flex-grow md:mr-3 md:mb-0 mb-3"},q={class:"flew-grow-0"},N={class:"flex items-center gap-x-1 mt-5"},Q=["onClick"],z={key:0,class:"inline-block ml-3"},E={key:0,class:"flex flex-row mt-4"},G={class:"flex flex-col mt-6"},H={class:"grid grid-cols-8 px-20 gap-6"},J={class:"col-start-1"},W={key:0},X={key:1},Y={key:2},Z={key:3},$={class:"col-span-2"},ee={key:0,class:"block mt-1 text-green-04"},ae={key:1,class:"block mt-1 text-red-03"},te={class:"block"},le={class:"block"},oe={class:"block"},ie={class:"block"};var se=o(I,[["render",function(e,a,t,l,o,i){const s=y("Breadcrumb"),r=y("Input"),n=y("DatePicker"),d=y("Button"),c=y("Checkbox"),u=y("DropdownItem"),p=y("DropdownMenu"),m=y("Dropdown"),f=y("GroupContainer"),b=y("TableColumn"),g=y("router-link"),h=y("Currency"),w=y("Table"),L=y("Pagination"),R=y("Card"),I=k("table"),se=k("loading");return _(),x(D,null,[v("div",M,[C(s,{pageTitle:"Shipping Label Request",backTo:{name:"report"},items:e.breadcrumb},null,8,["items"])]),C(R,null,{default:P((()=>[v("div",T,[v("div",K,[v("div",O,[C(r,{placeholder:"Search everything",class:"w-full",icon:"",modelValue:e.data.search,"onUpdate:modelValue":a[0]||(a[0]=a=>e.data.search=a)},{icon:P((()=>a[7]||(a[7]=[v("span",{class:"material-icons"},"search",-1)]))),_:1},8,["modelValue"])]),v("div",q,[C(f,null,{default:P((()=>[C(d,{color:"white",view:"outlined",class:"flex-auto",onClick:e.filterDateFocus,onBlur:e.filterDateFocus},{default:P((()=>[C(n,S({modelValue:e.data.date,"onUpdate:modelValue":a[1]||(a[1]=a=>e.data.date=a)},e.filterDateOptions,{type:"daterange",ref:"filterDateRef",class:"hide-picker"}),null,16,["modelValue"]),a[8]||(a[8]=B(" Select Date "))])),_:1},8,["onClick","onBlur"]),C(m,{trigger:"click",size:"medium","hide-on-click":!1,disabled:e.loadingPaymentMethods},{dropdown:P((()=>[C(p,null,{default:P((()=>[(_(!0),x(D,null,j(e.statePaymentMethods,((t,l)=>(_(),F(u,{key:l},{default:P((()=>[C(c,{color:"teal",modelValue:e.data.payment_method,"onUpdate:modelValue":a[2]||(a[2]=a=>e.data.payment_method=a),value:t.name},{default:P((()=>[B(U(t.name),1)])),_:2},1032,["modelValue","value"])])),_:2},1024)))),128))])),_:1})])),default:P((()=>[C(d,{color:"white",view:"outlined",class:"flex-auto dropdown dropdown-arrow",loading:e.loadingPaymentMethods},{default:P((()=>a[9]||(a[9]=[B("Payout Method")]))),_:1},8,["loading"])])),_:1},8,["disabled"]),C(m,{trigger:"click",size:"medium","hide-on-click":!1},{dropdown:P((()=>[C(p,null,{default:P((()=>[(_(!0),x(D,null,j(e.couriers,((t,l)=>(_(),F(u,{key:l},{default:P((()=>[C(c,{color:"teal",modelValue:e.data.shipping_courier,"onUpdate:modelValue":a[3]||(a[3]=a=>e.data.shipping_courier=a),value:t.name},{default:P((()=>[B(U(t.name),1)])),_:2},1032,["modelValue","value"])])),_:2},1024)))),128))])),_:1})])),default:P((()=>[C(d,{color:"white",view:"outlined",class:"flex-auto dropdown dropdown-arrow"},{default:P((()=>a[10]||(a[10]=[B("Courier")]))),_:1})])),_:1})])),_:1})])]),v("div",N,[(_(!0),x(D,null,j(e.filterList,((a,t)=>(_(),x("div",{class:"inline-block",key:t},[a.value?(_(),F(d,{key:0,color:"grey",view:"smooth",dense:"",class:"mx-1"},{default:P((()=>[v("b",null,U(a.name)+":",1),B(" "+U(a.value),1),v("i",{class:"material-icons text-sm ml-2",onClick:t=>e.clearFilter(a)},"close",8,Q)])),_:2},1024)):A("",!0)])))),128)),e.isFiltered?(_(),x("div",z,[C(d,{onClick:e.clearAllFilter,color:"teal",view:"smooth",dense:""},{default:P((()=>a[11]||(a[11]=[v("i",{class:"material-icons text-sm mr-1"},"close",-1),B("Clear all ")]))),_:1},8,["onClick"])])):A("",!0)])]),e.selectedItems.length>0?(_(),x("div",E,[C(d,{class:"mr-3",view:"smooth",color:"teal",onClick:e.batchUpdatePrintStatus,loading:e.loading.update,dense:""},{default:P((()=>a[12]||(a[12]=[B("Change Status Print Batch")]))),_:1},8,["onClick","loading"]),C(d,{class:"mr-3",view:"smooth",color:"teal",loading:e.loading.print.shipping_kit,dense:"",onClick:e.batchPrintShippingKit},{default:P((()=>a[13]||(a[13]=[v("i",{class:"material-icons text-lg mx-1"},"print",-1),B(" Print Batch Shipping Kit")]))),_:1},8,["loading","onClick"]),C(d,{class:"mr-3",view:"smooth",color:"teal",loading:e.loading.print.address_label,dense:"",onClick:e.batchPrintAddressLabel},{default:P((()=>a[14]||(a[14]=[v("i",{class:"material-icons text-lg mx-1"},"print",-1),B(" Print Batch Address Label")]))),_:1},8,["loading","onClick"])])):A("",!0),v("div",G,[V((_(),F(w,{ref:"refBuybackTable",class:"mb-6",data:e.state.data,"onUpdate:data":a[4]||(a[4]=a=>e.state.data=a),"row-key":e.getRowKey,onSelectionChange:e.tableOnSelect},{default:P((()=>[C(b,{type:"expand"},{default:P((e=>[v("div",H,[v("div",J,[a[15]||(a[15]=v("span",{class:"font-semibold block mb-3"},"Type",-1)),null!=e.row.affiliate_id?(_(),x("span",W,"Affiliate Buyback")):"4"===e.row.type?(_(),x("span",X,"Custom Quote")):"3"===e.row.type?(_(),x("span",Y,"Easy Quote")):(_(),x("span",Z,"Mail-In Buyback"))]),v("div",$,[a[16]||(a[16]=v("p",{class:"font-semibold mb-2"},"Devices",-1)),(_(!0),x(D,null,j(e.row.details,((e,a)=>(_(),x("p",{class:"my-2",key:a},U(e.product_name)+", "+U(e.qty),1)))),128))])])])),_:1}),C(b,{type:"selection","reserve-selection":!0,selectable:e.selectableRow},null,8,["selectable"]),C(b,{prop:"box_id",label:"Buyback ID",width:"250"},{default:P((e=>[C(g,{tag:"a",class:"font-bold",to:{name:"buybackOnlineDetail",params:{buybackId:e.row.box_id}}},{default:P((()=>[B(U(e.row.box_id),1)])),_:2},1032,["to"]),e.row.is_print?(_(),x("small",ee,"Printed on "+U(e.row.printed_at||""),1)):(_(),x("small",ae,"Not Printed"))])),_:1}),C(b,{label:"Name"},{default:P((e=>[v("span",te,U(e.row.ship_to),1),v("span",le,U(e.row.customer.email),1)])),_:1}),C(b,{prop:"payment_method",label:"Payout Method",width:"150"}),C(b,{prop:"order_date",label:"Status Date"}),C(b,{label:"Ship To"},{default:P((a=>[v("span",oe,U(a.row.ship_to),1),v("span",ie,U(e.phoneNumber(a.row.phone)),1)])),_:1}),C(b,{prop:"shipping_courier",label:"Courier"}),C(b,{prop:"qty",label:"Qty",width:"50",align:"right"}),C(b,{prop:"sub_total",label:"Total",align:"right"},{default:P((e=>[C(h,{value:e.row.sub_total},null,8,["value"])])),_:1})])),_:1},8,["data","row-key","onSelectionChange"])),[[I,e.tableConfig],[se,e.loading.show]]),C(L,{page:e.data.page,"onUpdate:page":a[5]||(a[5]=a=>e.data.page=a),limit:e.data.limit,"onUpdate:limit":a[6]||(a[6]=a=>e.data.limit=a),data:e.state},null,8,["page","limit","data"])])])),_:1})],64)}]]),re=g({setup(){const{genSuspense:a}=e();return()=>a(se)}});export{re as default};
