import{k as a,N as i,a5 as o,O as t,f as e,g as n,ay as s,W as l,m as d,o as r,t as c,D as m,w as u,B as p,I as g}from"./vendor.9695fe57.js";import{o as f}from"./setting.10b5d883.js";import{u as h}from"./dashboard.b5a7a3a4.js";import{s as v}from"./location.7390c176.js";import{_ as b,b as L,d as j}from"./index.c2f66179.js";import{B as M}from"./Breadcrumb.9ae3c470.js";import{M as w}from"./Form.93311065.js";import"./date.f86face7.js";import"./breadcrumb.4b2ddf0a.js";import"./InputPhone.9a75428a.js";import"./SelectCountry.7b805536.js";import"./countries.62f07ce8.js";import"./index.54844a74.js";import"./index.6b6f6369.js";import"./index.f40e4a9e.js";const C=a({components:{Button:L,Modal:j,ManageLocationForm:w,Breadcrumb:M},async setup(){const a=i(),d=o(),r=t(),{data:c,loading:m,actionShow:u,actionUpdate:p}=f(),{locations:g}=h(),b=e(null),L=e(!1),j=e([{text:"Settings",to:{name:"setting"}},{text:"Manage Locations",to:{name:"settingManageLocation"}},{text:d.query["switch-mailin"]?"Edit Mail-in Location":"Edit Location"}]),M=n((()=>!!d.query["switch-mailin"])),w=n((()=>M.value?"Edit Mail-in Location":"Edit Location")),C=n((()=>{var i,o;return 1==(null==(o=null==(i=a.state.setting.manageLocation.all)?void 0:i.mailin_location)?void 0:o.is_enable_mailin)})),y=n((()=>{var a;return null==(a=b.value)?void 0:a.hasEmptyRequiredField})),x=s(v.actionAll),_=s(v.loading);return l((()=>{L.value=!0,M.value&&Object.assign(c,{name:"Mail-in",is_mailin:1})})),await u({id:d.params.locationId,is_store:1}),{data:c,loading:m,loadingLocation:_,breadcrumb:j,refComponent:b,isShow:L,modalTitle:w,isSwitchMailinLocation:M,hasActiveMailinLocation:C,hasEmptyRequiredField:y,updateLocation:async()=>{b.value.validate()&&await p(d.params.locationId,(async()=>{await Promise.all([x(a.state.user.me.id),g((()=>{}),a.state.user.me.id)]),M.value?r.push({name:"settingManageLocation",query:{"switch-mailin":1}}):r.push({name:"settingManageLocation"})}))},handleCloseLocation:async()=>r.push({name:"settingManageLocation"})}}}),y={class:"grid grid-cols-1"},x={class:"flex justify-between"};var _=b(C,[["render",function(a,i,o,t,e,n){const s=d("ManageLocationForm"),l=d("Button"),f=d("Modal");return r(),c("div",null,[m(f,{modelValue:a.isShow,"onUpdate:modelValue":i[0]||(i[0]=i=>a.isShow=i),title:a.modalTitle,onClose:a.handleCloseLocation},{footer:u((()=>{var o;return[p("div",x,[m(l,{onClick:a.handleCloseLocation,color:"white",class:"btn-white--borderless"},{default:u((()=>i[1]||(i[1]=[g(" Cancel ")]))),_:1},8,["onClick"]),m(l,{color:"teal",loading:a.loading.form||(null==(o=a.loadingLocation)?void 0:o.all),disabled:a.hasEmptyRequiredField,onClick:a.updateLocation},{default:u((()=>i[2]||(i[2]=[g(" Save Changes ")]))),_:1},8,["loading","disabled","onClick"])])]})),default:u((()=>[p("div",y,[m(s,{ref:"refComponent",data:a.data,"is-mailin-available":a.hasActiveMailinLocation,edit:""},null,8,["data","is-mailin-available"])])])),_:1},8,["modelValue","title","onClose"])])}]]);export{_ as default};
