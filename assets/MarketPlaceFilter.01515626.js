var e=Object.defineProperty,a=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,s=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,i=(e,i)=>{for(var n in i||(i={}))t.call(i,n)&&s(e,n,i[n]);if(a)for(var n of a(i))l.call(i,n)&&s(e,n,i[n]);return e};import{r as n,b as o,N as d,y as c,m as r,a0 as p,A as u,o as m,t as g,B as v,K as k,aF as y,D as b,w as f,a2 as w,a3 as h,F as x,n as _,U as O,L as V}from"./vendor.f1efedad.js";import{s as T,v as j,_ as F,f as P,P as E,g as I}from"./index.9aa6481b.js";const M={whitelabel:"remove",class:"marketplace-filter"},C={class:"font-semibold whitespace-nowrap"},S={class:"relative"},U={key:1,type:"text",readonly:"",placeholder:"My Offer"},L={class:"material-icons text-grey-base"},A={class:"dropdown"},K={class:"dropdown-container"},R={class:"px-4 mb-4"},B={class:"dropdown-menu"},D=["onClick"],N={class:"w-full flex items-center justify-between gap-x-2"},Y={class:"flex items-center gap-x-2"},q={class:"text-base max-w-xs overflow-hidden whitespace-nowrap overflow-ellipsis"},z={class:"flex items-center gap-x-1"},G={key:1,class:"material-icons text-xs w-5"},H={key:0,class:"material-icons text-xs"},J={class:"bg-teal-04 h-6 px-2.5 overflow-hidden text-xs flex items-center justify-center rounded-full text-white"},Q={key:0};var W=F({name:"MarketPlaceFilter",components:{Input:P,Pagination:E},props:{modelValue:{type:Object,default:void 0},label:{type:String,default:"View Marketplace"},type:{type:String,default:"online"}},emits:["update:modelValue","input"],async setup(e,{emit:a}){const t=d(),{data:l,getFilter:s}=((e="online")=>{const a=n({selected:null,options:[],loading:!1,visible:!1,page:1,limit:10,state:void 0,search:"",cancelToken:void 0});return{data:a,getFilter:async(t=(()=>{}))=>{a.loading=!0;try{a.cancelToken&&a.cancelToken.cancel(),a.cancelToken=o.CancelToken.source();const l=await T.dispatch("setting/marketplace/getFilterMarketers",i(i({type:"online"===e?"order":"local-order",page:a.page},a.search&&{search:a.search}),a.cancelToken&&{cancelToken:a.cancelToken.token}));a.state=l,a.options=l.data,a.limit=l.per_page,a.page=l.current_page,j(t)&&t(l)}catch(l){return j(t)&&t(l),a.options=[],a.visible=!1,a.page=1,a.limit=10,a.state=void 0,a.loading=!1,l}finally{a.loading=!1}}}})(e.type),r=(e,s={})=>{const{emitEvent:i}=s,n=!1!==i;l.selected=e,l.visible=!1,t.commit("setting/marketplace/SET_MARKETPLACE_FILTER",l.selected),n&&(a("update:modelValue",l.selected),a("input",l.selected))},p=I((async()=>{await s()}),300);return c((()=>e.modelValue),(()=>{l.selected=e.modelValue})),await s().then((()=>{const e=[...l.options].find((e=>e.selected));r(e,{emitEvent:!1})})),{data:l,getFilter:s,searching:p,clickOutside:()=>{l.visible=!1},selectOption:r,toggleVisible:()=>{l.visible=!l.visible}}}},[["render",function(e,a,t,l,s,i){const n=r("Input"),o=r("Tooltip"),d=r("Pagination"),c=p("loading"),T=p("outside");return u((m(),g("div",M,[v("span",C,k(t.label)+": ",1),v("div",S,[v("div",{class:"trigger",onClick:a[1]||(a[1]=(...e)=>l.toggleVisible&&l.toggleVisible(...e))},[l.data.selected?u((m(),g("input",{key:0,"onUpdate:modelValue":a[0]||(a[0]=e=>l.data.selected.name=e),type:"text",readonly:"",placeholder:"My Offer"},null,512)),[[y,l.data.selected.name]]):(m(),g("input",U)),v("button",null,[v("span",L,k(l.data.visible?"arrow_drop_up":"arrow_drop_down"),1)])]),u(v("div",A,[v("div",K,[v("div",R,[b(n,{modelValue:l.data.search,"onUpdate:modelValue":a[2]||(a[2]=e=>l.data.search=e),placeholder:"Search Locations",class:"w-full",tabindex:"0",icon:"",onInput:l.searching},{icon:f((()=>a[5]||(a[5]=[v("span",{class:"material-icons icon-sm text-grey-02"}," search ",-1)]))),_:1},8,["modelValue","onInput"])]),u((m(),g("ul",B,[(m(!0),g(w,null,h(l.data.options,((e,t)=>(m(),g("li",{key:t,class:x(["dropdown-item",l.data.selected&&l.data.selected.id===e.id&&"dropdown-item--active","unlink"==e.linking_status||"deleted"===e.linking_status?"opacity-50 cursor-not-allowed":""]),onClick:a=>l.selectOption(e)},[v("div",N,[v("div",Y,[v("div",q,k(e.name),1),v("div",z,["unlink"!=e.linking_status&&"deleted"!==e.linking_status||l.data.selected.id!==e.id?"unlink"==e.linking_status||"deleted"===e.linking_status?(m(),g("span",G,"locked")):O("",!0):(m(),_(o,{key:0,placement:"top"},{content:f((()=>a[6]||(a[6]=[v("div",{class:"w-72 text-sm"}," Your account with this marketplace has been removed, but you can still view the offer's details in read-only mode ",-1)]))),default:f((()=>[a[7]||(a[7]=v("span",{class:"material-icons text-xs w-5"},"locked",-1))])),_:1})),l.data.selected?(m(),g(w,{key:2},[l.data.selected.id===e.id?(m(),g("span",H," check_circle ")):O("",!0)],64)):O("",!0)])]),v("div",J,k(e.total_buybacks),1)])],10,D)))),128))])),[[c,l.data.loading]]),l.data.state&&l.data.state.last_page>1?(m(),g("div",Q,[b(d,{page:l.data.page,"onUpdate:page":a[3]||(a[3]=e=>l.data.page=e),limit:l.data.limit,"onUpdate:limit":a[4]||(a[4]=e=>l.data.limit=e),data:l.data.state,"hide-show-entries":"",small:""},null,8,["page","limit","data"])])):O("",!0)])],512),[[V,l.data.visible]])])])),[[T,l.clickOutside]])}],["__scopeId","data-v-5c598958"]]);export{W as M};
