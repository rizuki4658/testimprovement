var a=Object.defineProperty,t=Object.defineProperties,e=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,s=(t,e,i)=>e in t?a(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i,o=(a,t)=>{for(var e in t||(t={}))n.call(t,e)&&s(a,e,t[e]);if(i)for(var e of i(t))l.call(t,e)&&s(a,e,t[e]);return a},c=(a,i)=>t(a,e(i));import{r as d,f as r,g as u,h as p,b as g}from"./vendor.9695fe57.js";import{s as y,x as _,y as m,r as h,u as w,v,o as f}from"./index.10c203ea.js";const b=d({invite:{menu_list:{menus:[],setting:[],pii:[]},total_invited:null,data:{email:[],role_id:1,default_location_id:null,permission:[],menus:[],is_view_confidential:0,locations:null,location_permission_all:null},loading:{create:!1,update:!1,menus:!1,resend:[],revoke:[],copyLink:[]},modal:{create:!1,update:!1}}}),k=d({data:null,filters:{search:"",page:1,limit:10},loading:{all:!1,update:{status:new Map,buyback_type:new Map}},modal:!1}),S=d({loading:{all:!1,show:!0,show_theme:!1,updateStatus:[],update:!1,update_theme:!1,location:!1,subscription:!1,storeSubscription:!1,preview_email:!1,reset_template:!1}}),T=d({company_profile:{show:!1,update:!1,open_hours:{show:!1,update:!1},closeCompany:!1,unlinkAccount:!1}}),C=d({company_profile:{date_format:null,time_format:null}}),A=a=>{const t=r(!1);return{state:u((()=>y.state.setting.paymentMethods)),loading:t,action:async(a,e=(()=>{}))=>{t.value=!0,await y.dispatch("setting/paymentMethods").then((a=>a.data)),v(e)&&e(),t.value=!1}}},U=()=>{const a=d({logo:null,company_email:null,name:null,legal_business_name:null,email_sender:null,address:null,address_text:null,phone:null,city:null,state:null,zip:null,country:null,country_name:null,country_code:null,suite:null,lon:null,lat:null,package_name:null,package_status:null,total_user:null,created_at:null,unlinkable:null,is_selected:!1,tag:null}),t=d({data:[],individual_hours:0}),e=(t={})=>{a.logo=t.logo||t.company_logo||null,a.company_email=t.company_email||null,a.name=t.name||null,a.legal_business_name=t.legal_business_name||null,a.email_sender=t.email_sender||null,a.address=t.address||null,a.address_text=t.address_text||null,a.phone=t.phone||null,a.city=t.city||null,a.state=t.state||null,a.zip=t.zip||null,a.country=t.country||null,a.country_name=t.country_name||null,a.country_code=t.country_code||null,a.suite=t.suite||"",a.lon=t.lon||null,a.lat=t.lat||null,a.package_name=t.package_name||null,a.package_status=t.package_status||null,a.total_user=t.total_user||null,a.created_at=t.created_at||null,a.unlinkable=t.unlinkable||null,a.is_selected=t.is_selected||!1,a.tag=t.tag||null},i=a=>{C.company_profile.time_format=a.time_format,C.company_profile.date_format=a.date_format},n=async(a,t=(()=>{}))=>{T.company_profile.show=!0;const n=await y.dispatch("setting/companyProfile/show",o({},a&&a.is_store&&{is_store:a.is_store}));e(n),i(n),v(t)&&t(),T.company_profile.show=!1},l=u((()=>y.state.setting.companyProfile));return{data:a,dataStoreOpenHours:t,loading:T.company_profile,actionShow:n,showCompanyByToken:async(a,t=(()=>{}))=>{T.company_profile.show=!0;const n=await y.dispatch("setting/companyProfile/showByToken",o({},a));e(n),i(n),v(t)&&t(),T.company_profile.show=!1},actionUpdate:async(t=(()=>{}))=>{try{T.company_profile.update=!0;let e=new FormData;Object.entries(a).forEach((a=>{"logo"!==a[0]||null!==a[1]?null!==a[1]&&("logo"!==a[0]||"logo"===a[0]&&"object"==typeof a[1])&&e.append(a[0],a[1]):e.append(a[0],0)})),e.append("_method","PUT"),await y.dispatch("setting/companyProfile/showUpdate",e),await n({is_store:1}),v(t)&&t(null,null)}catch(e){v(t)&&t(e,null)}finally{T.company_profile.update=!1}},companyProfile:l,actionCloseCompany:async(a=(()=>{}))=>{try{T.company_profile.closeCompany=!0;const t=await y.dispatch("setting/companyProfile/closeCompany");v(a)&&a(t)}finally{T.company_profile.closeCompany=!1}},actionShowStoreOpenHours:async(a=(()=>{}))=>{try{T.company_profile.open_hours.show=!0;const e=await y.dispatch("setting/companyProfile/showStoreOpenHours");Object.assign(t,e),v(a)&&a(e)}finally{T.company_profile.open_hours.show=!1}},actionUpdateStoreOpenHours:async(a=(()=>{}))=>{try{T.company_profile.open_hours.update=!0;const{data:e,individual_hours:i}=t;await Promise.all([y.dispatch("setting/companyProfile/updateStoreOpenHours",e),y.dispatch("setting/companyProfile/updateStoreOpenHoursIndividual",{individual_hours:i})]),v(a)&&a()}finally{T.company_profile.open_hours.update=!1}},actionUnlinkAccount:async(a,t=(()=>{}))=>{try{T.company_profile.unlinkAccount=!0;const e=await y.dispatch("setting/companyProfile/unlinkAccount",o({},a));v(t)&&t(e)}finally{T.company_profile.unlinkAccount=!1}}}},O=()=>{const a=d({page:1,limit:10,search:"",sort_by:"",order_by:"",invited:0,type:0}),t=d({all:!1,delete:!1}),e=d({delete:!1}),i=r(null),n=()=>{i.value=null},l=async(e=(()=>{}))=>{t.all=!0,await y.dispatch("setting/manageUser/all",a),v(e)&&e(),t.all=!1},s=u((()=>[{name:"Member List",value:0,total_invited:null},{name:"Invite Sent",value:1,total_invited:b.invite.total_invited||0},{name:"My Permissions",value:2,total_invited:null}])),o=u((()=>y.state.setting.manageUser.all));return{data:a,state:o,loading:t,modal:e,selected:i,tabs:s,unsetData:n,openModal:(a,t=(()=>{}))=>{e[a]=!0,v(t)&&t()},actionAll:l,actionDelete:async(a=(()=>{}))=>{try{t.delete=!0,await y.dispatch("setting/manageUser/delete",i.value),v(a)&&a(),e.delete=!1,n(),await l()}finally{t.delete=!1}}}},P=()=>{const a=d({email:null,first_name:null,last_name:null,job_title:null,status:1,role_id:1,password:null,default_location_id:null,default_location_name:null,locations:[],location_permission_all:null,permission:{create:!1,read:!1,update:!1,delete:!1},menu_list:null,menus:[]}),t=d({show:!1,form:!1,permission:!1}),e=(a=[],t=[])=>{for(let i of a){i.id&&t.push({id:i.id,order:i.order?i.order:0,status:!0===i.checked?1:0});i.child.length>0&&e(i.child,t)}return t};return{data:a,loading:t,actionShow:async(e,i=(()=>{}))=>{t.show=!0;((t={})=>{a.email=t.email,a.first_name=t.first_name,a.last_name=t.last_name,a.job_title=t.job_title,a.status=t.status,a.default_location_id=t.default_location_id,a.default_location_name=t.default_location_name,a.permission=t.permission})(await y.dispatch("setting/manageUser/show",e)),v(i)&&i(),t.show=!1},actionCreate:async(e=(()=>{}))=>{const s=a,{menu_list:o}=s,c=((a,t)=>{var e={};for(var s in a)n.call(a,s)&&t.indexOf(s)<0&&(e[s]=a[s]);if(null!=a&&i)for(var s of i(a))t.indexOf(s)<0&&l.call(a,s)&&(e[s]=a[s]);return e})(s,["menu_list"]);try{t.form=!0,await y.dispatch("setting/manageUser/create",c),v(e)&&e(),a.email=null,a.first_name=null,a.last_name=null,a.job_title=null,a.status=null,a.password=null,a.default_location_id=null}finally{t.form=!1}},actionUpdate:async(i,n=(()=>{}))=>{try{t.form=!0;const l=e(a.menus);await Promise.all([y.dispatch("setting/manageUser/update",{id:i,data:a}),y.dispatch("setting/manageUser/permissionUpdate",{id:i,data:{menus:l}})]),v(n)&&n()}finally{t.form=!1}},getMenu:async(t,e=(()=>{}))=>{a.menu_list=await y.dispatch("setting/manageUser/getMenu",t||""),v(e)&&e()}}},x=()=>{const a=()=>{b.invite.data={email:[],role_id:1,default_location_id:null,permission:[],menus:[],is_view_confidential:0,locations:null,location_permission_all:null}},t=(a=[],e=[])=>{for(let i of a){i.id&&e.push({id:i.id,order:i.order?i.order:0,status:!0===i.checked?1:0});i.child.length>0&&t(i.child,e)}return e},e=async(a,t=(()=>{}))=>{b.invite.loading.menus=!0;const e=await y.dispatch("setting/manageUser/getMenu",a||"");b.invite.menu_list=c(o({},e),{pii:[{id:1,name:"View Account and Routing Information",status:0}]}),v(t)&&t(),b.invite.loading.menus=!1},i=async(a,t=(()=>{}))=>{try{b.invite.loading.resend.push(a),await y.dispatch("setting/manageUser/inviteAccountResend",a),v(t)&&t()}finally{const t=b.invite.loading.resend.findIndex((t=>t===a));-1!==t&&b.invite.loading.resend.splice(t,1)}};return{action:async(e=(()=>{}))=>{try{b.invite.loading.create=!0;const i=o({},b.invite.data),n=t(i.menus);i.menus=JSON.stringify(n);const l=await y.dispatch("setting/manageUser/inviteAccount",i);v(e)&&e(l),a()}finally{b.invite.loading.create=!1}},actionMenus:e,actionResend:i,actionRevoke:async(a,t=(()=>{}))=>{try{b.invite.loading.revoke.push(a),await y.dispatch("setting/manageUser/inviteAccountRevoke",a),v(t)&&t()}finally{const t=b.invite.loading.revoke.findIndex((t=>t===a));-1!==t&&b.invite.loading.revoke.splice(t,1)}},actionTotalInvited:async(a=(()=>{}))=>{try{b.invite.loading.total_invited=!0,b.invite.total_invited=await y.dispatch("setting/manageUser/inviteTotalInvited"),v(a)&&a()}finally{b.invite.loading.total_invited=!1}},actionGetData:async(a,t=(()=>{}))=>{try{b.invite.loading.data=!0;const[i,n]=await Promise.all([y.dispatch("setting/manageUser/show",a),y.dispatch("setting/manageUser/getLocations",{params:{admin_id:a}})]);b.invite.data=o({},i),b.invite.data.locations=n.selected,await e(a),v(t)&&t()}catch(i){console.error(i)}finally{b.invite.loading.data=!1}},actionUpdateInvite:async(e=(()=>{}))=>{const n=o({},b.invite.data);try{b.invite.loading.update=!0;const[l,s]=await Promise.all([y.dispatch("setting/manageUser/update",{id:b.invite.selectedId,data:n}),y.dispatch("setting/manageUser/permissionUpdate",{id:b.invite.selectedId,data:{menus:t(b.invite.data.menus)}})]);"success"===s&&await i(b.invite.selectedId),v(e)&&e([l,s]),a()}catch(l){console.error("Error updating invite:",l)}finally{b.invite.loading.update=!1}}}},D=()=>{const a=d({address:null,address_text:null,name:null,email:null,suite:"",street:null,phone:null,city:null,state:null,zip_code:null,country:null,lon:0,lat:0,is_on:1,is_mailin:1}),t=d({form:!1}),e=d({show:!1,form:!1}),i=u((()=>{var a,t;return(null==(t=null==(a=y.state.setting.manageLocation.all)?void 0:a.mailin_location)?void 0:t.id)||void 0})),n=(t={})=>{a.name=t.name||null,a.address_text=t.address_text||null,a.address=t.address_text||null,a.email=t.email||null,a.suite=t.suite||null,a.street=t.street||null,a.phone=t.phone||null,a.city=t.city||null,a.state=t.state||null,a.zip_code=t.zip_code||null,a.country=t.country||null,a.lon=t.lon||0,a.lat=t.lat||0,a.is_on=t.is_on||0,a.is_mailin=t.is_mailin||0};return{data:a,loading:e,modal:t,currentMailinLocationId:i,setData:n,actionShow:async(a,t=(()=>{}))=>{e.show=!0;const i=await y.dispatch("setting/manageLocation/show",a);n(i),v(t)&&t(),e.show=!1},actionCreate:async(i=(()=>{}),n={})=>{const{closeOnSuccess:l=!0}=n||{};try{e.form=!0,await y.dispatch("setting/manageLocation/create",a),v(i)&&i(null),l&&(t.form=!1)}catch(s){v(i)&&i(s)}finally{e.form=!1}},actionUpdate:async(t,i=(()=>{}))=>{try{e.form=!0,await y.dispatch("setting/manageLocation/update",{id:t,data:a}),v(i)&&i(null)}catch(n){v(i)&&i(n)}finally{e.form=!1}}}},E=()=>{const a=_(),t=d({all:!1,update:!1,carriers:!1}),e=d({page:1,limit:10,search:"",sort_by:"",order_by:""}),i=d({format:"csv",show:!1,loading:!1}),n=r(null),l=u((()=>y.state.setting.buybackDevice.devices)),s=u((()=>y.state.setting.buybackDevice.all)),p=u((()=>Array.isArray(y.state.setting.buybackDevice.categories)?y.state.setting.buybackDevice.categories.map((a=>{var t,e;return c(o({},a),{is_book:"books"===(null==(e=null==(t=a.name)?void 0:t.toLowerCase)?void 0:e.call(t))})})):[])),h=u((()=>y.state.setting.buybackDevice.brands)),w=r([]),f=u((()=>p.value.map((a=>c(o({},a),{id:a.name?a.name.toLowerCase():""}))).map((a=>o(o({},m(a,"settingBuybackDeviceTab",{category:a.id},"id","name")),a))))),b=r(!1),k=r(null),S=r(0);return{state:l,stateAll:s,categoriesTab:f,brandsTab:u((()=>{const a=h.value.filter((a=>a.length));let t=S.value,e=a.slice(t,t+20);0===e.length&&t>0&&(t=Math.max(0,a.length-20),e=a.slice(t,t+20));return["All"].concat(e).map((a=>({name:a,id:null==a?void 0:a.toLowerCase()}))).map((a=>o({},m(a,"settingBuybackDeviceBrand",{brand:a.id},"id","name"))))})),data:e,exportData:i,loading:t,isComputer:a=>{const t=p.value.length>0?p.value.map((a=>a.name.toLowerCase())).findIndex((t=>t===a.toLowerCase())):-1;return-1!==t?p.value[t].is_computer:0},actionAll:async(a,i,n=(()=>{}),l={})=>{try{void 0!==l.loading&&!0!==l.loading||(t.all=!0);const s=Object.assign({},c(o({},e),{categories:a,manufacturer:i}));await y.dispatch("setting/buybackDevice/all",s),v(n)&&n(),t.all=!1}catch(s){t.all=!1}},actionGetChildren:async(a,t=(()=>{}))=>{var e;try{const i=await y.dispatch("setting/buybackDevice/getChildren",a);return v(t)&&t(null!=(e=null==i?void 0:i.children)?e:[])}catch(i){return v(t)&&t([])}},actionUpdate:async(e,i=(()=>{}),n=!1)=>{try{t.update=!0;const l=await y.dispatch("setting/buybackDevice/update",e);return await y.dispatch("user/me"),a.setMenu(y.state.user.me.menu_v2),v(i)&&i(n?l:null),t.update=!1,l}catch(l){t.update=!1,v(i)&&i(l)}},actionUpdateBuybackType:async(a,t=(()=>{}))=>{try{await y.dispatch("setting/buybackDevice/updateBuybackType",a),v(t)&&t()}catch(e){console.log(e)}},actionCategories:async(a=(()=>{}))=>{try{await y.dispatch("setting/buybackDevice/categories"),v(a)&&a()}catch(t){console.log(t)}},actionCarriers:async()=>{try{t.carriers=!0;const a=await y.dispatch("setting/buybackDevice/getCarriers");w.value=a}finally{t.carriers=!1}},actionUpdateCarriers:async(a,e=(()=>{}))=>{n.value&&n.value.cancel(),n.value=g.CancelToken.source(),t.carriers=!0;try{const i=await y.dispatch("setting/buybackDevice/updateCarriers",{data:JSON.stringify({arr_networks:[...a]}),cancelToken:n.value&&n.value.token});return v(e)&&e(null),i}catch(i){v(e)&&e(i)}finally{t.carriers=!1}},actionExportActiveCatalog:async()=>{try{i.loading=!0,await y.dispatch("setting/buybackDevice/exportActiveProductCatalog",{data:{extension:i.format}})}catch(a){console.error("Error exporting active items catalog: ".err)}finally{i.loading=!1}},cancelToken:n,carriers:w,tabBatchSize:20,currentTabOffset:S,onLoadMoreTabs:()=>{clearTimeout(k.value),b.value=!0,setTimeout((()=>{const a=h.value.length,t=S.value+20;t<a&&(S.value=t),b.value=!1}),300)},loadingTabBrand:b}},j=()=>({action:async(a=!0,t=(()=>{}))=>{try{a&&(k.loading.all=!0);const e=await y.dispatch("setting/buybackDevice/allCategoryBuybackType",k.filters);a&&(k.data=e),v(t)&&t(e)}finally{k.loading.all=!1}},actionUpdateBuybackType:async(a,t=(()=>{}))=>{try{k.loading.update.buyback_type.set(a.category,!0),await y.dispatch("setting/buybackDevice/updateBuybackType",a),v(t)&&t(null,null)}catch(e){v(t)&&t(e,null)}finally{k.loading.update.buyback_type.delete(a.category)}},actionUpdateStatus:async(a,t=(()=>{}))=>{try{k.loading.update.status.set(a.category,!0),await y.dispatch("setting/buybackDevice/update",a),v(t)&&t(null,null)}catch(e){v(t&&t(e,null))}finally{k.loading.update.status.delete(a.category)}}}),M=()=>{const a=d({all:!1,upgrade:!1,checkout:!1}),t=r(null),e=u((()=>y.state.setting.plan.checkout)),i=u((()=>y.state.setting.plan.upgrade));return{packages:t,loading:a,actionAll:async(e=(()=>{}))=>{a.all=!0,t.value=await y.dispatch("setting/plan/all"),v(e)&&e(),a.all=!1},actionUpgrade:async(t,e=(()=>{}))=>{try{a.upgrade=!0,await y.dispatch("setting/plan/upgrade",t),v(e)&&e()}finally{a.upgrade=!1}},actionCheckout:async(t,e=(()=>{}))=>{try{a.checkout=!0,await y.dispatch("setting/plan/checkout",t),v(e)&&e()}finally{a.checkout=!1}},stateUpgrade:i,stateCheckout:e}},L=r(void 0),F=()=>{const a=d({widget_color_selected:null,widget_color_secondary_selected:null,floating_button_name:"",is_widget_logo_show:0,widget_term_condition:null,widget_link:null,is_online_widget_available:1,logo:null,widget_confirm_msg:{instore:{message:void 0,preview_message:void 0},mailin:{message:void 0,preview_message:void 0}},widget_app_type:null,widget_width:null,widget_width_type:null,widget_width_unit:null,widget_position:null,is_enable_collectleads:0,is_enable_mailin_selling_type:!1,is_widget_enable_brand_step:0,is_enable_google_analytic:0,google_analytic_code:null,widget_is_remove_brand_available:!1,widget_color_btn_list:[],languages:[],widget_background_color:"#FFFFFF",search_bar_text:null,widget_is_remove_brand:0,widget_real_product_icon:0,purchasing_method:{value:"1",custom:!0},prefix_order_number_sequence:"",exp_days_pricelock:0,widget_is_enable_imei_input:0,widget_is_enable_imei_ins_msg:0,widget_imei_ins_msg:"",widget_imei_icon_selected:"",widget_auto_disabled_imei:!1,widget_terms_custom_text:null,widget_terms_custom_text_shortcode:null,widget_submit_custom_text:"",widget_is_enable_get_up_to:null,widget_is_enable_price_trend_graph:"0",widget_price_trend_graph_current:null,widget_price_trend_graph_next_week:null,widget_price_trend_graph_title:null,widget_limit_qty_items:null,widget_is_enable_search_bar:"1",widget_auto_accept_expiry_days:"",widget_is_enable_auto_accept:"",purchasing_method_rules:{mailin_has_locations:!0,mailin_has_payout:!0,instore_has_locations:!0,instore_has_payout:!0},is_courier_active:0,is_manual_shipping_warning:0,manual_shipping_warning:{title:"",message:""}}),t=d({search:""}),e=r(0),i=r(0),n=r(0),l=d({widget_confirm_msg_shortcode:null}),s=d({data:[],categories:[],faq_template:[]}),p=d({all:!1,update:!1,remove_branding:!1,custom_starting_point:!1,sort_order:!1,message:!1}),g=d({buyback_branding:!1,custom_starting_point:!1}),_=r(),m=async(a={})=>{s.faq_template=[],await a.data.map((a=>{s.faq_template.push(o({},a))}))},h=async(t=null,s=(()=>{}))=>{p.all=!0;const o={includedKeys:null};if(null!==t&&f(t))for(let[a,e]of Object.entries(t))Object.keys(o).includes(a)&&(o[a]=e);((t={},s=null)=>{const o=Object.keys(a);if(f(t)){for(let[e,i]of Object.entries(t))if(o.includes(e)){if(Array.isArray(s)){s.includes(e)&&(a[e]=i);continue}"purchasing_method"==e?(a.purchasing_method.value=t[e].value,a.purchasing_method.custom=t[e].custom):"widget_confirm_msg"==e?(a.widget_confirm_msg.instore=t[e].instore,a.widget_confirm_msg.mailin=t[e].mailin):a[e]=i}l.widget_confirm_msg_shortcode=t.widget_confirm_msg.shortcode,e.value=t.widget_is_remove_brand||0,i.value=t.widget_real_product_icon||0,n.value=t.is_widget_enable_brand_step||0}})(await y.dispatch("setting/widget/show"),o.includedKeys),v(s)&&s(),p.all=!1},w=async(a=(()=>{}))=>{p.all=!0,_.value=await y.dispatch("setting/widget/showFAQ"),await m(_.value),v(a)&&a(),p.all=!1},b=u((()=>y.state.setting.widget.show.data)),k=u((()=>y.state.setting.widget.showCustomStartingPoint)),S=u((()=>y.state.setting.widget.show.update));return{data:a,dataCustomStartingPoint:t,isRemoveBranding:e,isProductIconReal:i,widgetStartingPoint:n,staticData:l,loading:p,modal:g,actionShow:h,actionUpdate:async(a,t=(()=>{}))=>{const e=Object.assign({},c(o({},a),{manual_shipping_warning:JSON.stringify(a.manual_shipping_warning)}));e.languages&&delete e.languages,e.widget_confirm_msg.shortcode&&delete e.widget_confirm_msg.shortcode,delete e.widget_color_btn_list;try{p.update=!0,await y.dispatch("setting/widget/update",e),v(t)&&t()}catch(i){throw await h(),i}finally{p.update=!1}},state:b,stateCustomStartingPoint:k,stateFAQ:_,updateResponse:S,dataFAQ:s,openModal:a=>{Object.keys(g).includes(a)&&(g[a]=!0)},closeModal:a=>{Object.keys(g).includes(a)&&(g[a]=!1)},actionShowFAQ:w,actionAddFAQ:async(a,t=(()=>{}))=>{try{p.update=!0,await y.dispatch("setting/widget/addFAQ",a),await w(),v(t)&&t()}finally{p.update=!1}},actionDeleteFAQ:async(a,t=(()=>{}))=>{try{p.all=!0,await y.dispatch("setting/widget/deleteFAQ",a),await w(),v(t)&&t()}finally{p.all=!1}},actionUpdateFAQ:async(a,t=(()=>{}))=>{try{p.all=!0,await y.dispatch("setting/widget/updateFAQ",a),await w(),v(t)&&t()}finally{p.all=!1}},actionSortFAQ:async(a,t=(()=>{}))=>{m(a),await y.dispatch("setting/widget/sortFAQ",a.id)},actionRemoveBranding:async(a,t=(()=>{}))=>{try{p.remove_branding=!0,await y.dispatch("setting/widget/removeBranding",a),v(t)&&t(null)}catch(e){v(t)&&t(e)}finally{p.remove_branding=!1}},actionCustomStartingPoint:async(a,e=(()=>{}))=>{let i=!1;try{p.custom_starting_point=!0,await y.dispatch("setting/widget/customStartingPoint",a||t),v(e)&&e(null,null)}catch(n){"Cancelled"===n.message&&(i=!0),v(e)&&e(n,null)}finally{i||(p.custom_starting_point=!1)}},actionShowSortOrder:async(t=null,e=(()=>{}))=>{try{if(!t){p.sort_order=!0;let t="";0==a.is_widget_enable_brand_step&&(t="product"),1==a.is_widget_enable_brand_step&&(t="brand"),2==a.is_widget_enable_brand_step&&(t="category");const e=await y.dispatch("setting/widget/showSortOrder",t);L.value={data:e.data.map(((a,t)=>o(o({id:t+1,name:a.name},a.slug&&{slug:a.slug}),"products"!==e.key&&{list:[]}))),key:e.key}}}finally{p.sort_order=!1}},dataSortOrder:L,actionShowSortOrderChild:async a=>{try{p.sort_order=!0;const t=await y.dispatch("setting/widget/showSortOrderChild",{key:L.value.key,slug:a.slug}),e=o(o(o({key:t.key},t.products&&{data:t.products}),t.brands&&{data:t.brands}),t.categories&&{data:t.categories}),i=L.value.data.findIndex((t=>t.slug===a.slug||t.name===a.name));L.value.data[i]&&(L.value.data[i].key=t.key,L.value.data[i].list=e.data.map(((a,t)=>o({id:t+1},a))))}finally{p.sort_order=!1}},updateSortLevelOne:async(a,t=(()=>{}))=>{try{p.sort_order=!0,await y.dispatch("setting/widget/updateSortOrder",a),v(t)&&t()}finally{p.sort_order=!1}},updateSortLevelTwo:async(a,t=(()=>{}))=>{try{p.sort_order=!0,await y.dispatch("setting/widget/updateSortOrder",a),v(t)&&t()}finally{p.sort_order=!1}},actionShowLanguage:async(t=(()=>{}))=>{p.all=!0;try{a.languages=await y.dispatch("setting/widget/showLanguages"),v(t)&&t()}catch(e){a.languages=[]}finally{p.all=!1}},updateLanguage:async(a,t=(()=>{}))=>{p.all=!0;try{await y.dispatch("setting/widget/updateLanguage",{lang_name:a.name,lang_code:a.code}),v(t)&&t()}finally{p.all=!1}}}},I=()=>{const a=r({}),t=r(!1);return{data:a,loading:t,show:async(e=(()=>{}))=>{t.value=!0;try{a.value=await y.dispatch("setting/widget/showCustomPurchasing"),v(e)&&e()}catch(i){a.value={}}finally{t.value=!1}},update:async(e=(()=>{}))=>{t.value=!0;try{let i=new FormData;const n=o({},a.value);"string"==typeof a.value.icon&&delete n.icon,Object.keys(n).forEach((a=>{i.append(a,n[a])})),i.append("_method","PUT"),await y.dispatch("setting/widget/updateCustomPurchasing",i),v(e)&&e()}catch(i){a.value={}}finally{t.value=!1}}}},R=()=>{const a=r(null),t=r({isSwitch:!1,locations:{},selected:void 0}),e=r(!1),i=r({page:1,limit:10,search:"",sort_by:"",order_by:"",is_addtional_info:1,is_switch:!1,location_type:null});return{currentLocation:u((()=>{const a=h(o({},y.state.dashboard.locationFiltered));return a.current_location_id?{id:a.current_location_id||null,name:a.current_location_name||""}:null})),cancelToken:a,loading:e,state:t,query:i,show:async(n,l=(()=>{}))=>{a.value&&a.value.cancel(),a.value=g.CancelToken.source();try{e.value=!0;const l=await y.dispatch("setting/widget/locations",c(o(o(o(o({},i.value),n&&n.custom_starting_value&&{custom_starting_value:n.custom_starting_value}),n&&n.type&&{type:n.type}),n&&!!n.is_mac&&{is_mac:n.is_mac}),{cancelToken:a.value&&a.value.token}));t.value.locations=l||{}}finally{e.value=!1}}}},B=()=>{const a=r(null),t=r({all:!1,relaseYear:!1,screenSize:!1}),e=r({}),i=r({relaseYear:[],screenSize:[]});return{cancelToken:a,showToken:async(e,i=(()=>{}))=>{t.value={all:!1,relaseYear:!1,screenSize:!1},a.value&&a.value.cancel(),a.value=g.CancelToken.source();try{t.value.all=!0;const n=await y.dispatch("setting/widget/combinationToken",c(o({},e),{cancelToken:a.value&&a.value.token}));v(i)&&i(n)}finally{t.value.all=!1}},loading:t,query:e,state:i,show:async(n=e.value,l=(()=>{}))=>{t.value={all:!1,relaseYear:!1,screenSize:!1},a.value&&a.value.cancel(),a.value=g.CancelToken.source();try{t.value[n.option_attribute]=!0;const e=await y.dispatch("setting/widget/combinations",c(o(o({},n&&n.custom_starting_value&&{custom_starting_value:n.custom_starting_value}),n&&n.option_attribute&&c(o({},n),{option_attribute:"screenSize"===n.option_attribute?"screen_size":"release_year"})),{cancelToken:a.value&&a.value.token}));i.value[n.option_attribute]=e,v(l)&&l(e)}finally{t.value[n.option_attribute]=!1}}}},q=()=>{const{me:a}=w(),t=d({page:1,limit:10,search:"",sort_by:"",order_by:"",table:void 0,availabilityCondition:!0,cancelTokenAll:void 0,cancelTokenAvailability:void 0,cancelTokenWidgetAvailability:void 0}),e=d({all:!1,more_device:new Map,delete:!1,availability:!1}),i=d({more_device:!1,delete:!1}),n=r(null),l=u((()=>y.state.setting.condition.price_sync_company_source)),s=u((()=>null!==l.value)),_=async(a=(()=>{}))=>{t.cancelTokenAll&&t.cancelTokenAll.cancel(),t.cancelTokenAll=g.CancelToken.source();try{e.all=!0;const i=await y.dispatch("setting/condition/all",{page:t.page,limit:t.limit,search:t.search,cancelToken:t.cancelTokenAll.token});t.page=i.current_page||1,t.limit=Number(i.per_page)||10,t.table=i,v(a)&&a()}catch(i){console.log(i)}finally{e.all=!1}},m=u((()=>y.state.setting.condition.all)),h=u((()=>m.value.map((t=>{var e;return c(o({},t),{updated_at:t.updated_at?p(t.updated_at,"YYYY-MM-DD HH:mm:ss").format(null==(e=a.value)?void 0:e.date_format):"-"})})))),f=u((()=>y.state.setting.condition.selected_more_device)),b=u((()=>y.state.setting.condition.is_available_device));return{data:t,state:h,stateSelectedMoreDevice:f,loading:e,modal:i,selected:n,isAvailableDevice:b,hasPriceSyncCompanySource:s,priceSyncCompanySource:l,openModal:(a,t=(()=>{}))=>{i[a]=!0,v(t)&&t()},actionAll:_,actionDelete:async(a=(()=>{}))=>{try{e.delete=!0,await y.dispatch("setting/condition/delete",n.value),v(a)&&a(),n.value=null,i.delete=!1,await _()}catch(t){console.log(t)}finally{e.delete=!1}},actionMoreDevice:async(a,t={},i=(()=>{}))=>{try{e.more_device.set(a,!0),await y.dispatch("setting/condition/moreDevice",{id:a,params:t}),v(i)&&i()}catch(n){console.log(n)}finally{e.more_device.delete(a)}},actionConditionDeviceAvailability:async(a=(()=>{}))=>{t.cancelTokenAvailability&&t.cancelTokenAvailability.cancel(),t.cancelTokenAvailability=g.CancelToken.source();try{e.device_availability=!0,await y.dispatch("setting/condition/availabilityCheck",{cancelToken:t.cancelTokenAvailability.token}),v(a)&&a()}catch(i){console.log(i)}finally{e.device_availability=!1}},actionConditionDeviceWidgetAvailability:async(a=(()=>{}))=>{t.cancelTokenWidgetAvailability&&t.cancelTokenWidgetAvailability.cancel(),t.cancelTokenWidgetAvailability=g.CancelToken.source();try{e.device_availability=!0,await y.dispatch("setting/condition/availabilityCheckWidget",{cancelToken:t.cancelTokenWidgetAvailability.token}),v(a)&&a()}catch(i){console.log(i)}finally{e.device_availability=!1}},actionConditionDeviceConditionAvailability:async(a=(()=>{}))=>{try{e.device_availability=!0;const i=await y.dispatch("setting/condition/availabilityCheckDeviceCondition");t.availabilityCondition=i.is_device_available,v(a)&&a()}catch(i){console.log(i)}finally{e.device_availability=!1}}}},z=()=>{r(null);const a=d({page:1,limit:10,sort_by:"",order_by:"",search:""}),t=d({page:1,limit:50,search:"",sort_by:"",order_by:""}),e=d({all:!1,update:new Map,locationAll:!1,locationUpdate:!1,updateExpedited:!1}),i=d({show:!1,loading:!1,update:new Map}),n=r({add_payout_allowed:!0,data:[],expedited_payouts:{is_enable_expedited_payout:!1,expedited_payout_fee:0,expedited_payout_desc:""}}),l=r(null);return{data:a,dataLocation:t,state:n,loading:e,modal:i,stateLocation:l,actionAll:async(t=(()=>{}))=>{try{e.all=!0,n.value=await y.dispatch("setting/paymentMethod/all",a),v(t)&&t()}catch{n.value.add_payout_allowed=!0,n.value.data=[]}finally{e.all=!1}},actionUpdate:async(a,t=(()=>{}))=>{try{a.id&&e.update.set(a.id,!0),await y.dispatch("setting/paymentMethod/update",a),v(t)&&t()}finally{a.id&&e.update.delete(a.id)}},actionUpdateSwitch:async(a,t=(()=>{}))=>{a.payment_id&&e.update.set(a.payment_id,!0);const i=await y.dispatch("setting/paymentMethod/updateSwitch",a);return v(t)&&t(),a.payment_id&&e.update.delete(a.payment_id),i},actionLocation:async(a,i=(()=>{}))=>{e.locationAll=!0,l.value=await y.dispatch("setting/paymentMethod/location",{id:a.id,data:t}),v(i)&&i(),e.locationAll=!1},actionLocationUpdate:async(a,t=(()=>{}))=>{e.locationUpdate=!0;const i=await y.dispatch("setting/paymentMethod/locationUpdate",a);return v(t)&&t(),e.locationUpdate=!1,i},actionUpdateExpedited:async(a=(()=>{}))=>{const t=n.value.expedited_payouts;e.updateExpedited=!0;const i=await y.dispatch("setting/paymentMethod/updateExpedited",t);return v(a)&&a(),e.updateExpedited=!1,i}}},W=()=>{const a=u((()=>y.state.setting.manageShipping.show)),t=d({show:!1,update:{shipping_insurance:!1,shipping_rules:!1,shipping_error_label:!1,additional_settings:!1}}),e=d({shipping_insurance:{},shipping_rules:{},shipping_error_label:{},product_models:[],additional_settings:{is_printer_access_show:0}});return{state:a,loading:t,data:e,actionAll:async(a=!1,e=(()=>{}))=>{var i,n,l,s,o,c;if(a||!(null==(o=null==(s=null==(l=null==(n=null==(i=y)?void 0:i.state)?void 0:n.setting)?void 0:l.manageShipping)?void 0:s.show)?void 0:o.loaded))try{t.show=!0;const a=await Promise.all([y.dispatch("setting/manageShipping/showShippingInsurance"),y.dispatch("setting/manageShipping/showShippingRules",{params:{return_all_attributes:!0}}),y.dispatch("setting/manageShipping/showShippingErrorLabel"),y.dispatch("setting/manageShipping/showProductModels"),y.dispatch("setting/manageShipping/showPrinterAccess")]);v(e)&&e(null!=(c=a[1])?c:{})}finally{t.show=!1}},actionUpdateShippingInsurance:async(a=(()=>{}))=>{try{t.update.shipping_insurance=!0;const i=await y.dispatch("setting/manageShipping/showShippingInsuranceUpdate",e.shipping_insurance);v(a)&&a(i)}finally{t.update.shipping_insurance=!1}},actionUpdateShippingRules:async(a=(()=>{}))=>{var i,n,l,s;try{t.update.shipping_rules=!0;const d=await y.dispatch("setting/manageShipping/showShippingRulesUpdate",c(o({},e.shipping_rules.update_data),{contidion_enable:(null==(n=null==(i=e.shipping_rules)?void 0:i.update_data)?void 0:n.contidion_enable)||0,model_enable:(null==(s=null==(l=e.shipping_rules)?void 0:l.update_data)?void 0:s.model_enable)||0}));v(a)&&a(d)}finally{t.update.shipping_rules=!1}},actionUpdateEnableAdvancedShippingRules:async(a,e=(()=>{}))=>{try{t.update.shipping_rules=!0;const i=await y.dispatch("setting/manageShipping/showEnableAdvancedShippingRulesUpdate",a);v(e)&&e(i)}finally{t.update.shipping_rules=!1}},actionUpdateShippingErrorLabel:async(a=(()=>{}))=>{try{t.update.shipping_error_label=!0;const i=await y.dispatch("setting/manageShipping/showShippingErrorLabelUpdate",e.shipping_error_label);v(a)&&a(i)}finally{t.update.shipping_error_label=!1}},actionUpdateAdditionalSetting:async(a=(()=>{}))=>{try{t.update.additional_settings=!0,await Promise.all([y.dispatch("setting/manageShipping/showPrinterAccessUpdate",{is_printer_access_show:e.additional_settings.is_printer_access_show})]),v(a)&&a()}finally{t.update.additional_settings=!1}}}},H=()=>{const a=u((()=>y.state.setting.buybackReceipt.show)),t=d({receipt_text:""}),e=d({all:!1,update:!1});return{state:a,loading:e,data:t,actionAll:async(a=(()=>{}))=>{try{e.all=!0;const i=await y.dispatch("setting/buybackReceipt/showReceipt");Object.assign(t,i.data),v(a)&&a(i)}finally{e.all=!1}},actionUpdate:async(a=(()=>{}))=>{try{e.update=!0;const i=await y.dispatch("setting/buybackReceipt/showReceiptUpdate",t);v(a)&&a(i)}finally{e.update=!1}}}},Q=()=>{var a;const t=u((()=>1==y.state.user.me.is_location_mail_in)),e=u((()=>({all:y.state.setting.emailTemplate.all,show:y.state.setting.emailTemplate.show,location:y.state.setting.emailTemplate.location,subscription:y.state.setting.emailTemplate.subscription}))),i=u((()=>{var a,t,e;if(y.state.dashboard.locationFiltered){const i=(null==(a=y.state.dashboard.locationFiltered)?void 0:a.mailin_location_id)>-1,n=i?(null==(t=y.state.dashboard.locationFiltered)?void 0:t.total)>1:(null==(e=y.state.dashboard.locationFiltered)?void 0:e.total)>0;if(i&&n)return"both";if(i)return"mail-in";if(n)return"in-store"}})),n=u((()=>[{name:"Mail-In",value:"mail-in",disabled:"both"!==i.value&&"in-store"===i.value},{name:"In-Store",value:"in-store",disabled:"both"!==i.value&&"mail-in"===i.value},{name:"Easy Offer",value:"easy-offer",disabled:!1}])),l=d({email_template:{id:null,name:null,subject:null,body:null,type:0,sort_code:[],delay_per_days:0,sending_times:0,sending_times_json:[],bcc:[]},email_template_theme:{is_mail_logo_show:1,color_mail_template:"#000000"},all:{page:1,limit:10,search:"",type:(null==(a=n.value.find((a=>!(null==a?void 0:a.disabled))))?void 0:a.value)||void 0}}),s=d({reset_template:!1}),p=r(!1),g=r(""),_=a=>{if(!a.includes("<pre")||!a.includes("<code"))return a;const t=(new DOMParser).parseFromString(a,"text/html");return t.querySelectorAll("pre code").forEach((a=>{const t=a.closest("pre");if(t){const e=a.innerHTML,i=document.createElement("div");i.innerHTML=e,t.replaceWith(...i.childNodes)}})),t.body.innerHTML},m=async(a=(()=>{}))=>{try{S.loading.all=!0;const t=await y.dispatch("setting/emailTemplate/all",l.all);v(a)&&a(t)}finally{S.loading.all=!1}};return{state:e,data:l,loading:S.loading,modal:s,isPreviewEmailTemplate:p,previewedEmailTemplate:g,openModal:a=>{Object.keys(s).includes(a)&&(s[a]=!0)},closeModal:a=>{Object.keys(s).includes(a)&&(s[a]=!1)},actionAll:m,actionUpdate:async(a,t=(()=>{}))=>{try{S.loading.update=!0;const i=Object.assign({},{id:a.id,data:l.email_template,params:{type:a.id}}),n=await y.dispatch("setting/emailTemplate/update",i).then((async a=>(e.value.all.data||await m(),a)));e.value.all.data.find((a=>a.id===e.value.show.id));v(t)&&t(n)}finally{S.loading.update=!1}},actionShow:async(a,t=(()=>{}))=>{var e;try{S.loading.show=!0;const i={id:a.id,params:{type:a.type}},n=await y.dispatch("setting/emailTemplate/show",i);Object.assign(l.email_template,c(o({},n),{body:_(null!=(e=null==n?void 0:n.body)?e:"")})),v(t)&&t(n)}finally{S.loading.show=!1}},actionShowEmailTemplateTheme:async(a=(()=>{}))=>{try{S.loading.show_theme=!0;const t=await y.dispatch("setting/mail");Object.assign(l.email_template_theme,{color_mail_template:t.color_mail_template,is_mail_logo_show:t.is_mail_logo_show}),v(a)&&a()}finally{S.loading.show_theme=!1}},actionUpdateStatus:async(a,t,e=(()=>{}))=>{try{i=a,S.loading.updateStatus.push(i),await y.dispatch("setting/emailTemplate/update",{id:a,data:t}),v(e)&&e()}finally{(a=>{const t=S.loading.updateStatus.indexOf(a);t>-1&&S.loading.updateStatus.splice(t,1)})(a)}var i},actionLocation:async(a,t=(()=>{}))=>{try{S.loading.location=!0,await y.dispatch("setting/emailTemplate/location",a),v(t)&&t()}finally{S.loading.location=!1}},actionSubscription:async(a,t=(()=>{}))=>{try{S.loading.subscription=!0,await y.dispatch("setting/emailTemplate/getSubscription",{id:a.id,params:{is_mailin:a.is_mailin?a.is_mailin:0}}),v(t)&&t()}finally{S.loading.subscription=!1}},actionStoreSubscription:async(a,t=(()=>{}))=>{try{S.loading.storeSubscription=!0,await y.dispatch("setting/emailTemplate/storeSubscription",a),v(t)&&t()}finally{S.loading.storeSubscription=!1}},actionPreviewEmailTemplate:async(a,t=(()=>{}))=>{let e="";try{S.loading.preview_email=!0,p.value=!1,e=a?await y.dispatch("setting/emailTemplate/previewEmailTemplateById",a):await y.dispatch("setting/emailTemplate/previewEmailTemplate",{body:l.email_template.body||""}),p.value=!0,g.value=e,v(t)&&t(e)}finally{S.loading.preview_email=!1}},actionPreviewEmailTemplateOnly:async(a,t=(()=>{}))=>{let e="";try{S.loading.preview_email=!0,p.value=!1,e=await y.dispatch("setting/emailTemplate/previewEmailTemplate",{id:a,body:l.email_template.body||""}),p.value=!0,g.value=e,v(t)&&t(e)}finally{S.loading.preview_email=!1}},actionUpdateEmailTemplateTheme:async(a=(()=>{}))=>{try{S.loading.update_theme=!0,await y.dispatch("setting/update",l.email_template_theme),v(a)&&a()}finally{S.loading.update_theme=!1}},actionResetTemplate:async(a=(()=>{}))=>{var t;const e=null==(t=l.email_template)?void 0:t.id;if(e)try{S.loading.reset_template=!0,await y.dispatch("setting/emailTemplate/resetEmailTemplate",e),v(a)&&a()}finally{S.loading.reset_template=!1}},location:i,isMailIn:t,emailTemplateTypes:n}},N=(a={type:"in-store"})=>{const t=r(void 0),e=r(null),i=u((()=>1==y.state.user.me.is_location_mail_in)),n=u((()=>{var a,t,e;if(y.state.dashboard.locationFiltered){const i=(null==(a=y.state.dashboard.locationFiltered)?void 0:a.mailin_location_id)>-1,n=i?(null==(t=y.state.dashboard.locationFiltered)?void 0:t.total)>1:(null==(e=y.state.dashboard.locationFiltered)?void 0:e.total)>0;if(i&&n)return"both";if(i)return"mail-in";if(n)return"in-store"}})),l=d({page:1,limit:10,search:"",sort_by:"",order_by:""}),s=r({modal:!1,form:{}}),p=u((()=>[{id:"mail-in",short_name:"Mail-in"},{id:"in-store",short_name:"In-Store"},{id:"easy-offer",short_name:"Easy Offer"}].map((a=>m(o({},a),"settingWorkflowTab",{buyback:a.id},"id","short_name"))).map((a=>{const t="both"!==n.value&&"in-store"===n.value,e="both"!==n.value&&"mail-in"===n.value,i="mail-in"===a.id&&t||"in-store"===a.id&&e;return c(o({},a),{disabled:i})})))),g=r([1,2,3,5,6,7,8,9,10,11,15,12,13,1e3,1001,2002,1e4]),_=d({all:!1,delete:!1,reset_template:!1}),h=d({delete:!1,reset_template:!1}),w=r(null),f=u((()=>y.state.setting.workflow.all)),b=async(a,e=(()=>{}))=>{const i="in-store"==a?"local":a;_.all=!0;try{t.value&&t.value.abort();const a=new AbortController;t.value=a,await y.dispatch("setting/workflow/all",c(o({buyback:i},l),{signal:a.signal})),v(e)&&e()}catch(n){console.log("Failed to fetch workflow list",n)}finally{_.all=!1}};return{locations:n,data:l,state:f,tab:p,loading:_,modal:h,selected:w,specialWorkflowIds:g,openModal:(a,t=(()=>{}))=>{h[a]=!0,v(t)&&t()},closeModal:(a,t=(()=>{}))=>{Object.keys(h).includes(a)&&(h[a]=!1,v(t)&&t())},actionAll:b,actionDelete:async(a,t=(()=>{}))=>{_.delete=!0,await y.dispatch("setting/workflow/delete",w.value),v(t)&&t(),h.delete=!1,_.delete=!1,w.value=null,await b(a)},actionSort:async a=>{e.value&&e.value.abort();const t=new AbortController;e.value=t,await y.dispatch("setting/workflow/sort",{sorted_id:a.join(","),signal:t.signal})},actionUpdateSendEmail:async(a,t)=>{try{await y.dispatch("setting/workflow/updateSendEmail",a),v(t)&&t()}catch(e){console.log("Failed to update",e)}finally{console.log("Succeed to update")}},actionResetEmailTemplate:async({id:t},e)=>{try{_.reset_template=!0,await y.dispatch("setting/workflow/resetEmailTemplate",{id:t,data:{buyback:J(a.type)}}),v(e)&&e()}finally{_.reset_template=!1}},isMailIn:i,dataDashboard:s}},J=(a="in-store")=>{switch(a){case"mail-in":return"mailin";case"in-store":return"instore";default:return"easy-offer"}},Y=(a={type:"in-store"})=>{const t=d({id:null,description:null,email_subject:null,email_template:"",reminded_days:0,sending_times_json:[],is_send_email:1,short_name:null,status_name:null,sort_code:[],bcc:[],parent_id:null,havechild:null,color_mail_template:"#000000",is_mail_logo_show:0}),e=r(!1),i=r(!1),n=r(!1);return{data:t,loading:e,loadingEmailTheme:i,loadingInit:n,actionShow:async(i,n=(()=>{}))=>{e.value=!0;((a={})=>{t.description=a.description||null,t.email_subject=a.email_subject||null,t.email_template=a.email_template||null,t.reminded_days=a.reminded_days||0,t.sending_times_json=a.sending_times_json||[],t.is_send_email=a.is_send_email||0,t.short_name=a.short_name||null,t.status_name=a.status_name||null,t.sort_code=a.sort_code||[],t.bcc=a.bcc||[],t.parent_id=a.parent_id||null,t.havechild=a.havechild||0,t.color_mail_template=a.color_mail_template||"#000000",t.is_mail_logo_show=a.is_mail_logo_show||0,t.id=a.id||null})(await y.dispatch("setting/workflow/show",{id:i,params:{buyback:J(a.type)}})),v(n)&&n(),e.value=!1},actionShowInitData:async(a=(()=>{}))=>{try{n.value=!0;const e=await y.dispatch("setting/workflow/showInitData");if(f(e))for(const[a,i]of Object.entries(e))Object.keys(t).includes(a)&&(t[a]=i);v(a)&&a()}finally{n.value=!1}},actionCreate:async(a,i=(()=>{}))=>{try{e.value=!0,await y.dispatch("setting/workflow/create",c(o({},t),{buyback:a})),v(i)&&i({status:200})}catch{v(i)&&i({status:500})}finally{e.value=!1}},actionUpdate:async(i,n=(()=>{}))=>{try{e.value=!0,await y.dispatch("setting/workflow/update",{id:i,data:c(o({},t),{buyback:J(a.type)})}),v(n)&&n({status:200})}catch{v(n)&&n({status:500})}finally{e.value=!1}},actionUpdateEmailTheme:async(e,n=(()=>{}))=>{try{i.value=!0,await y.dispatch("setting/workflow/updateEmailTheme",{id:e,data:{is_mail_logo_show:t.is_mail_logo_show,color_mail_template:t.color_mail_template,buyback:J(a.type)}}),v(n)&&n()}finally{i.value=!1}}}},V=(a={type:"in-store"})=>{const t=r(""),e=r(!1),i=r(!1),n=r("");return{emailBody:t,isPreview:e,loading:i,previewedTemplate:n,actionReviewEmail:async(a=(()=>{}))=>{try{e.value=!1,i.value=!0;const l=await y.dispatch("setting/emailTemplate/previewEmailReview",{body:t.value});v(a)&&a(),n.value=l,e.value=!0}finally{i.value=!1}},actionEmailTemplate:async(a=(()=>{}))=>{try{e.value=!1,i.value=!0;const l=await y.dispatch("setting/emailTemplate/previewEmailTemplate",{body:t.value});v(a)&&a(),n.value=l,e.value=!0}finally{i.value=!1}},actionWorkflowEmail:async(l,s=(()=>{}))=>{try{e.value=!1,i.value=!0;const o=await y.dispatch("setting/workflow/previewEmailTemplate",{status_id:l,body:t.value,buyback:J(a.type)});v(s)&&s(),n.value=o,e.value=!0}finally{i.value=!1}},actionWorkflowEmailCreate:async(a,l,s,o=(()=>{}))=>{try{e.value=!1,i.value=!0;const c=await y.dispatch("setting/workflow/previewEmailTemplateCreate",{status_name:a,color_mail_template:l,is_mail_logo_show:s,body:t.value});v(o)&&o(),n.value=c,e.value=!0}finally{i.value=!1}},actionWorkflowEmailById:async(a={id:null,type:"in-store"},t=(()=>{}))=>{try{e.value=!1,i.value=!0;const l=await y.dispatch("setting/workflow/previewEmailTemplateById",{id:a.id,params:{buyback:J(a.type)}});v(t)&&t(),n.value=l,e.value=!0}finally{i.value=!1}}}},G=(a="email-template")=>{const t=d({color_mail_template:"#000000",color_review_mail_template:"#000000",is_mail_logo_show:0,is_review_mail_logo_show:0}),e=d({show:!1,update:!1});return{formData:t,loading:e,actionShow:async(a=(()=>{}))=>{try{e.show=!0;const i=await y.dispatch("setting/mail");Object.assign(t,{color_mail_template:i.color_mail_template,color_review_mail_template:i.color_review_mail_template,is_mail_logo_show:i.is_mail_logo_show,is_review_mail_logo_show:i.is_review_mail_logo_show}),v(a)&&a()}finally{e.show=!1}},actionUpdate:async(i=(()=>{}))=>{try{e.update=!0,"review-email"===a?await y.dispatch("setting/update",{color_review_mail_template:t.color_review_mail_template,is_review_mail_logo_show:t.is_review_mail_logo_show}):await y.dispatch("setting/update",{color_mail_template:t.color_mail_template,is_mail_logo_show:t.is_mail_logo_show}),v(i)&&i()}finally{e.update=!1}}}},K=()=>{const a=d({show:!1,update:!1}),t=u((()=>y.state.setting.reviewEmail.show)),e=u((()=>y.state.setting.reviewEmail.update)),i=u((()=>y.state.setting.reviewEmail.updateStatus));return{loading:a,actionShow:async(t=(()=>{}))=>{try{a.show=!0,await y.dispatch("setting/reviewEmail/show"),v(t)&&t()}finally{a.show=!1}},actionUpdate:async(t,e=(()=>{}))=>{try{a.update=!0,await y.dispatch("setting/reviewEmail/update",t),v(e)&&e()}finally{a.update=!1}},actionUpdateStatus:async(t,e=(()=>{}))=>{try{a.update=!0,await y.dispatch("setting/reviewEmail/updateStatus",t),v(e)&&e()}finally{a.update=!1}},state:t,stateUpdate:e,stateUpdateStatus:i}},X=()=>{const a=u((()=>[...y.state.setting.countries])),t=d({all:!1});return{state:a,loading:t,action:async(a=(()=>{}))=>{try{t.all=!0,await y.dispatch("setting/countries"),v(a)&&a()}finally{t.all=!1}}}},Z=()=>{const a=d({currencies:null,countries:null,timezones:null,exp_days_pricelock:0,buyback_number:{prefix_order_number_sequence:"AS",zero_padding_order_number_sequence:5,preview:"AS00001"}}),t=d({all:!1,update:!1}),e=d({all:!1,update:!1}),i=d({all:!1,update:!1}),n=d({all:!1,update:!1}),l=d({all:!1,update:!1}),s=async()=>{await y.dispatch("user/me")},o=u((()=>y.state.setting.generalSettings.currenciesUpdate));return{data:a,loading:t,loadingCountry:e,loadingTimezone:i,loadingPriceLock:n,loadingBuybackPrefix:l,stateUpdate:o,actionShow:async(e=(()=>{}))=>{t.all=!0,await s();((t={})=>{a.currencies=t})(await y.dispatch("setting/generalSettings/currencies")),v(e)&&e(),t.all=!1},actionShowCountries:async(t=(()=>{}))=>{e.all=!0;((t={})=>{a.countries=t})(await y.dispatch("setting/generalSettings/countries")),v(t)&&t(),e.all=!1},actionShowTimezones:async(t=(()=>{}))=>{i.all=!0;((t={})=>{a.timezones=t})(await y.dispatch("setting/generalSettings/timezones")),v(t)&&t(),i.all=!1},actionUpdate:async(a,e=(()=>{}))=>{try{t.update=!0,l.update=!0,await y.dispatch("setting/generalSettings/update",a),await s(),v(e)&&e()}finally{t.update=!1,l.update=!1}},actionUpdateCountry:async(a,t=(()=>{}))=>{try{e.update=!0,await y.dispatch("setting/generalSettings/update",a),await s(),v(t)&&t()}finally{e.update=!1}},actionUpdateTimezone:async(a,t=(()=>{}))=>{try{i.update=!0,await y.dispatch("setting/generalSettings/update",a),await s(),v(t)&&t()}finally{i.update=!1}},actionShowPriceLock:async(t=(()=>{}))=>{try{n.all=!0;((t=0)=>{a.exp_days_pricelock=t})((await y.dispatch("setting/generalSettings/priceLock")).exp_days_pricelock),v(t)&&t()}finally{n.all=!1}},actionUpdatePriceLock:async(t=(()=>{}))=>{const e={exp_days_pricelock:a.exp_days_pricelock};try{n.update=!0,await y.dispatch("setting/generalSettings/update",e),v(t)&&t()}finally{n.update=!1}},actionShowBuybackPrefix:async(t=(()=>{}))=>{try{l.all=!0;(t=>{if(f(t))for(const[e,i]of Object.entries(t))Object.keys(a.buyback_number).includes(e)&&(a.buyback_number[e]=i)})(await y.dispatch("setting/generalSettings/buybackPrefix")),v(t)&&t()}finally{l.all=!1}}}},$=()=>{const a=u((()=>y.state.setting.seo.all)),t=u((()=>y.state.setting.seo.v2.all)),e=d({all:!1,allv2:!1,show:!1,update:!1,delete:{}}),i=d({search:"",page:1,limit:10});return{data:i,state:a,stateV2:t,loading:e,actionAll:async(a=(()=>{}))=>{try{e.all=!0,await y.dispatch("setting/seo/all",i),v(a)&&a()}finally{e.all=!1}},actionAllV2:async(a=(()=>{}))=>{try{e.allV2=!0,await y.dispatch("setting/seo/allV2",i),v(a)&&a()}finally{e.allV2=!1}},actionUpdate:async(a,t=(()=>{}))=>{try{e.update=!0,await y.dispatch("setting/seo/updateMeta",a),v(t)&&t()}finally{e.update=!1}},actionDelete:async(a,t=(()=>{}))=>{try{e.delete[a]=!0,await y.dispatch("setting/seo/delete",a),v(t)&&t()}finally{e.delete[a]=!1}}}},aa=()=>{const a=u((()=>y.state.setting.seo.show)),t=d({show:!1,update:!1,create:!1}),e=d({description:"",keyword:[],title:"",url:""});return{state:a,data:e,loading:t,actionShow:async(i,n=(()=>{}))=>{try{t.show=!0,await y.dispatch("setting/seo/show",i),Object.assign(e,o({},h(a.value))),Object.assign(e,{keyword:a.value.keyword?JSON.parse(a.value.keyword):[]}),v(n)&&n()}finally{t.show=!1}},actionUpdate:async(a,i=(()=>{}))=>{try{t.update=!0;const n={id:a,data:c(o({},e),{keyword:JSON.stringify(e.keyword)})};await y.dispatch("setting/seo/update",n),v(i)&&i()}finally{t.update=!1}},actionCreate:async(a=(()=>{}))=>{try{t.create=!0;const i=c(o({},e),{keyword:JSON.stringify(e.keyword)});await y.dispatch("setting/seo/create",i),v(a)&&a()}finally{t.create=!1}}}},ta=u((()=>h(y.state.setting.inventoryCondition.conditions))),ea=()=>{const a=d({search:null,page:1,limit:10,is_notpaginate:0}),t=d({all:!1,show:!1,update:!1,create:!1,get:!1,delete:{}}),e=d({condition_name:""}),i=u((()=>h(y.state.setting.inventoryCondition.all))),n=u((()=>h(y.state.setting.inventoryCondition.show))),l=u((()=>h(y.state.setting.inventoryCondition.conditions)));return{filter:a,loading:t,stateAll:i,stateShow:n,stateConditions:l,formData:e,actionAll:async(e=(()=>{}))=>{const i=Object.assign({},o({},a));try{t.all=!0,await y.dispatch("setting/inventoryCondition/all",i),v(e)&&e()}finally{t.all=!1}},actionShow:async(a,e=(()=>{}))=>{try{t.show=!0,await y.dispatch("setting/inventoryCondition/show",a),v(e)&&e()}finally{t.show=!1}},actionUpdate:async(a,i=(()=>{}))=>{const n=Object.assign({id:a,data:c(o({},e),{condition_term:JSON.stringify(e.condition_term)})});try{t.update=!0,await y.dispatch("setting/inventoryCondition/update",n),v(i)&&i()}finally{t.update=!1}},actionDelete:async(a,e=(()=>{}))=>{try{t.delete[a]=!0,await y.dispatch("setting/inventoryCondition/delete",a),v(e)&&e()}finally{t.delete[a]=!1}},actionCreate:async(a=(()=>{}))=>{const i=c(o({},e),{condition_term:JSON.stringify(e.condition_term)});try{t.create=!0,await y.dispatch("setting/inventoryCondition/create",i),v(a)&&a()}finally{t.create=!1}},actionGet:async(a,e=(()=>{}))=>{try{t.get=!0,await y.dispatch("setting/inventoryCondition/get",c(o({},a),{buyback_type:"inventory"})),v(e)&&e()}finally{t.get=!1}},getConditions:async a=>{try{return t.get=!0,await y.dispatch("setting/inventoryCondition/getConditions",a)}catch(e){v(callback)&&callback(e)}finally{t.get=!1}},createCustomCondition:async(a,e=(()=>{}))=>{try{t.create=!0,await y.dispatch("setting/inventoryCondition/create",a),v(e)&&e()}finally{t.create=!1}}}},ia=()=>{const a=d({all:!1,show:!1,create:!1,update:!1,delete:!1}),t=d({page:1,limit:10}),e=u((()=>h(y.state.setting.couponCode.all))),i=u((()=>h(y.state.setting.couponCode.show))),n=d({amount:null,code:null,type:null}),l=d({delete:!1});return{filters:t,stateAll:e,stateShow:i,formData:n,loading:a,modal:l,actionAll:async(e=(()=>{}))=>{try{a.all=!0,await y.dispatch("setting/couponCode/all",t),v(e)&&e()}finally{a.all=!1}},actionShow:async(t,e=(()=>{}))=>{try{a.show=!0,await y.dispatch("setting/couponCode/show",t),v(e)}finally{a.show=!1}},actionCreate:async(t=(()=>{}))=>{try{a.create=!0,await y.dispatch("setting/couponCode/create",n),v(t)&&t()}finally{a.create=!1}},actionUpdate:async(t,e=(()=>{}))=>{try{a.update=!0,await y.dispatch("setting/couponCode/update",{id:t,data:n}),v(e)&&e()}finally{a.update=!1}},actionDelete:async(t,e=(()=>{}))=>{try{a.delete=!0,await y.dispatch("setting/couponCode/delete",t),v(e)&&e()}finally{a.delete=!1}},actionStatus:async(t,e=(()=>{}))=>{try{a.all=!0,await y.dispatch("setting/couponCode/status",{id:t.id,is_enable:t.is_enable}),v(e)&&e()}finally{a.all=!1}}}},na=()=>{const a=d({all:!1,show:!1,create:!1,update:!1,delete:!1}),t=d({page:1,limit:10}),e=u((()=>h(y.state.setting.faq.all))),i=u((()=>h(y.state.setting.faq.show))),n=d({question:null,answer:null,faq_category_id:null}),l=d({delete:!1});return{filters:t,stateAll:e,stateShow:i,formData:n,loading:a,modal:l,actionAll:async(e=(()=>{}))=>{try{a.all=!0,await y.dispatch("setting/faq/all",t),v(e)&&e()}finally{a.all=!1}},actionShow:async(t,e=(()=>{}))=>{try{a.show=!0,await y.dispatch("setting/faq/show",t),v(e)}finally{a.show=!1}},actionCreate:async(t=(()=>{}))=>{try{a.create=!0,await y.dispatch("setting/faq/create",n),v(t)&&t()}finally{a.create=!1}},actionUpdate:async(t,e=(()=>{}))=>{try{a.update=!0,await y.dispatch("setting/faq/update",{id:t,data:n}),v(e)&&e()}finally{a.update=!1}},actionDelete:async(t,e=(()=>{}))=>{try{a.delete=!0,await y.dispatch("setting/faq/delete",t),v(e)&&e()}finally{a.delete=!1}}}},la=()=>{const a=u((()=>({privacy:h(y.state.setting.legalTerms.show.privacy),terms:h(y.state.setting.legalTerms.show.terms)}))),t=d({all:!1,update:{privacy:!1,terms:!1}}),e=d({privacy:{textinfo:null},terms:{textinfo:null}});return{stateShow:a,loading:t,formData:e,actionAll:async(a=(()=>{}))=>{try{t.all=!0,await Promise.all([y.dispatch("setting/legalTerms/showPrivacy"),y.dispatch("setting/legalTerms/showTerms")]),v(a)&&a()}finally{t.all=!1}},actionUpdatePrivacy:async(a=(()=>{}))=>{try{t.update.privacy=!0,await y.dispatch("setting/legalTerms/updatePrivacy",e.privacy),v(a)&&a()}finally{t.update.privacy=!1}},actionUpdateTerms:async(a=(()=>{}))=>{try{t.update.terms=!0,await y.dispatch("setting/legalTerms/updateTerms",e.terms),v(a)&&a()}finally{t.update.terms=!1}}}},sa=()=>{const a=d({update:!1}),t=d({all:!1,update:!1,delete:!1,categories:!1}),e=d({search:null});return{stateAll:u((()=>h(y.state.setting.websitePages.popular.current))),stateCategories:u((()=>h(y.state.setting.websitePages.popular.categories))),loading:t,modal:a,filters:e,actionAll:async(a=(()=>{}))=>{try{t.all=!0,await y.dispatch("setting/websitePages/allCurrentPopularCategories"),v(a)&&a()}finally{t.all=!1}},actionCategories:async(a=(()=>{}))=>{try{t.categories=!0,await y.dispatch("setting/websitePages/allPopularCategories",e),v(a)&&a()}finally{t.categories=!1}},actionUpdate:async(a,e=(()=>{}))=>{try{t.update=!0,await y.dispatch("setting/websitePages/updateCurrentPopularCategories",a),v(e)&&e()}finally{t.update=!1}}}},oa=()=>{const a=u((()=>y.state.setting.minimumOrder.show)),t=d({show:!0}),e=d({is_enable_minimum_order:0,minimum_order_price:0,minimum_order_qty:0,minimum_order_type:1});return{state:a,loading:t,data:e,getMinimumOrder:async()=>{try{t.show=!0,await Promise.all([y.dispatch("setting/minimumOrder/showMinimumOrder")])}finally{t.show=!1}},updateMinimumOrder:async()=>{try{t.show=!0;return await y.dispatch("setting/minimumOrder/updateMinimumOrder",e)}finally{t.show=!1}}}};export{H as A,Q as B,N as C,Y as D,Z as E,$ as F,aa as G,sa as H,na as I,la as J,X as a,M as b,U as c,W as d,ea as e,A as f,ta as g,K as h,G as i,V as j,O as k,P as l,b as m,x as n,D as o,E as p,k as q,j as r,z as s,ia as t,q as u,F as v,R as w,B as x,I as y,oa as z};
