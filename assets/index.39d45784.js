import{k as e,a5 as a,O as i,f as t,aJ as n,m as o,o as l,n as s,w as r,B as d,U as c,t as p,I as u,D as m,T as g,aI as f,ar as h,a6 as C,_ as v}from"./vendor.9695fe57.js";import{b as S,c as x,d as _,a as b}from"./shipmondo.3ea912f5.js";import{_ as k,d as y,b as j,B as w}from"./index.dcc9fc55.js";import{_ as K}from"./tab.10f696d6.js";import{S as E}from"./ShippingKitForm.5a057977.js";import"./index.54844a74.js";import"./index.6b6f6369.js";import"./index.f40e4a9e.js";import"./TextEditor.472081d3.js";const F=e({name:"Shipmondo",components:{Modal:y,Button:j,Tab:K,ShippingKitForm:E,BaseLoading:w},async setup(){const e=a(),o=i(),{loading:l,updateCarrier:s,resetSelectedCarrier:r,selectedCarrier:d}=S(),{loading:c,updateShippingKit:p}=x(),{loading:u}=_(),{loading:m,status:g}=b(),f=t(null),h=n((()=>e.matched.length>0&&void 0===e.matched.find((e=>"integrationShipmondoConfig"===e.name)))),C=n((()=>!h.value)),k=n((()=>"integrationShipmondoConfigShippingKit"===e.name)),y=n((()=>null===d.value.carrier_uuid));return{route:e,refComponent:f,loading:l,loadingShippingKit:c,loadingConfig:u,isHideFooter:h,isShowEditCredential:C,isNotSelectedCarrier:y,loadingStatus:m,status:g,handleCloseForm:()=>{o.push({name:"integration",query:{reload:1}})},handleSave:async()=>{var e,a,i,t;if(k.value){if(!(await(null==(t=null==(i=null==(a=null==(e=f.value)?void 0:e.componentElement)?void 0:a.shippingKitFormElement)?void 0:i.validate)?void 0:t.call(i))))return}let n={carrier:!1,shippingKit:!1};await Promise.all([s((e=>n.carrier=e)),p((e=>n.shippingKit=e))]),n.carrier||n.shippingKit?r():(v({type:"success",message:"Changes saved"}),o.push({name:"integration",query:{reload:1}}))},handleEditCredential:()=>{o.push({name:"integrationShipmondoConnect"})}}}}),B={class:"flex justify-between"},M={key:0,class:"flex items-center bg-orange-lighten text-orange-04 p-4 rounded-lg w-full mx-auto my-4"},P={class:"w-full flex items-center justify-center"},I={class:"w-max ml-auto"};var T=k(F,[["render",function(e,a,i,t,n,v){const S=o("Button"),x=o("router-link"),_=o("BaseLoading"),b=o("RouterView"),k=o("Tooltip"),y=o("Modal");return l(),s(y,{size:"md",modelValue:!0,"hide-footer":e.isHideFooter,onClickClose:e.handleCloseForm,"without-transition":""},{header:r((()=>[d("div",B,[a[1]||(a[1]=d("span",null,"Shipmondo Settings",-1)),e.isShowEditCredential?(l(),s(S,{key:0,onClick:e.handleEditCredential,color:"teal",dense:""},{default:r((()=>a[0]||(a[0]=[d("div",{class:"flex flex-auto items-center"},[d("i",{class:"material-icons icon-xxs"},"edit"),d("span",{class:"ml-1"}," Edit Account")],-1)]))),_:1},8,["onClick"])):c("",!0)])])),default:r((()=>[0==e.status.is_ready?(l(),p("div",M,[a[5]||(a[5]=d("i",{class:"material-icons mr-4 self-start"},"info",-1)),d("span",null,[a[3]||(a[3]=u("Please activate Mail-in location and complete all forms. ")),m(x,{class:"font-semibold text-orange-04",to:{name:"settingManageLocation"}},{default:r((()=>a[2]||(a[2]=[u(" Mail-In Settings ")]))),_:1}),a[4]||(a[4]=u(" ."))])])):c("",!0),m(b,null,{default:r((({Component:e,route:a})=>[e?(l(),s(g,{name:"slide-fade",key:a.matched[a.matched.length-2].name},{default:r((()=>[(l(),s(f,null,[(l(),s(h,null,{default:r((()=>[(l(),s(C(e),{ref:"refComponent"},null,512))])),fallback:r((()=>[d("div",P,[m(_)])])),_:2},1024))],1024))])),_:2},1024)):c("",!0)])),_:1})])),footer:r((()=>[m(k,{placement:"top",content:"Please choose a shipping courier first",disabled:!e.isNotSelectedCarrier},{default:r((()=>[d("div",I,[m(S,{onClick:e.handleSave,color:"teal",disabled:e.loading.shippingProvider.fetchAll||e.loading.shippingKit.fetch||e.loadingConfig.integrationChecks||0==e.status.is_ready||e.isNotSelectedCarrier,loading:e.loading.shippingProvider.updateCarrier||e.loadingShippingKit.update||e.loadingStatus},{default:r((()=>a[6]||(a[6]=[u("Save")]))),_:1},8,["onClick","disabled","loading"])])])),_:1},8,["disabled"])])),_:1},8,["hide-footer","onClickClose"])}],["__scopeId","data-v-f1af0a90"]]);export{T as default};
