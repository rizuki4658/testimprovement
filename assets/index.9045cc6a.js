var e=Object.defineProperty,a=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,o=(a,t,s)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):a[t]=s;import{u as l}from"./components.cc5a127d.js";import{k as d,a5 as i,W as n,m as r,$ as c,A as m,o as u,n as p,w as b,B as f,K as v,t as y,D as g,I as k,U as C,f as I,y as j,s as h,_ as D,a1 as _,a2 as w,O as x}from"./vendor.9695fe57.js";import{d as S,G as B,e as A,H as O,I as V}from"./buyback.c5a2404e.js";import{B as M}from"./Breadcrumb.b2d95db7.js";import{C as U}from"./card.ecf283cd.js";import{b as F,_ as P,f as T,d as Q,g as R}from"./index.67cab78b.js";import{_ as H}from"./badge.15fdcd82.js";import{c as E}from"./status.6f59bf91.js";import{e as G}from"./setting.dd3979cd.js";import{S as L}from"./select.2449bf30.js";import{D as q}from"./Form.e23d7e87.js";import{I as K}from"./ItemTable.5c9a2d7c.js";import"./LoadingCard.1ce55cf0.js";import"./date.f86face7.js";import"./breadcrumb.ebb004a0.js";import"./device.97e18cc4.js";import"./auto-complete.ed3347bf.js";import"./index.f40e4a9e.js";import"./index.6b6f6369.js";import"./Currency.4530032a.js";import"./Accordion.91dafea7.js";import"./BBTable.0d52f0bf.js";import"./DeviceSearch.6d34e2de.js";import"./BDropdown.a42e07ae.js";import"./DeviceGolfSpec.f26e14c1.js";import"./BSelect.62c2e96b.js";import"./fieldset.684cbbdd.js";import"./dymo.ee3e0c83.js";import"./PrintLabel.2bde55aa.js";const N=d({components:{Button:F,Card:U,Badge:H},props:{},setup(e){const{action:l,state:d,loading:r}=S("online"),c=i();return n((async()=>{await l(((e,l)=>{for(var d in l||(l={}))t.call(l,d)&&o(e,d,l[d]);if(a)for(var d of a(l))s.call(l,d)&&o(e,d,l[d]);return e})({id:c.params.buybackId},c.params.marketerId&&"me"===c.params.marketerId&&{marketer_id:""}||c.params.marketerId&&{marketer_id:c.params.marketerId}))})),{state:d,loading:r,color:E}}}),W={key:0,class:"my-4"},$={class:"flex items-center mb-2"},z={class:"items-center"};var J=P(N,[["render",function(e,a,t,s,o,l){const d=r("Badge"),i=r("Card"),n=c("loading");return m((u(),p(i,null,{header:b((()=>{var a;return[f("h6",null,"Buyback ID #"+v(null==(a=e.state)?void 0:a.box_id),1)]})),default:b((()=>{var t,s,o,l;return[(null==(t=e.state)?void 0:t.box_id)?(u(),y("div",W,[f("div",$,[a[0]||(a[0]=f("span",{class:"material-icons text-base mr-2"},"date_range",-1)),f("p",z,v((null==(s=e.state)?void 0:s.created_at)||"-"),1)]),g(d,{color:e.color((null==(l=null==(o=e.state)?void 0:o.order_status)?void 0:l.short_name)||"-")},{default:b((()=>{var a,t;return[k(v((null==(t=null==(a=e.state)?void 0:a.order_status)?void 0:t.status_name)||"-"),1)]})),_:1},8,["color"])])):C("",!0)]})),_:1})),[[n,e.loading]])}]]);const X=d({components:{Button:F,Card:U,Badge:H,Input:T,Select:L,Modal:Q,DeviceForm:q},props:{},setup(e){const{loading:a,state:t,filters:s,modal:o,data:l,actionShow:d,actionCreate:r,setSelectedDevice:c,unsetSelectedDevice:m}=B(),{actionAll:u}=A("online"),{actionAll:p,stateAll:b,filter:f,loading:v}=G(),y=i(),g=I(null);return j((()=>s),R((()=>{d(y.params.buybackId)}),500),{deep:!0}),n((async()=>{f.is_notpaginate=1,await Promise.all([d(y.params.buybackId),p()])})),{refDeviceForm:g,data:l,stateConditions:b,state:t,loading:a,loadingCondition:v,filters:s,modal:o,handleQuickAdd:e=>{c(e),o.create=!0},handleAddDevice:async()=>{await h((()=>g.value.validate()))&&await r(y.params.buybackId,(async()=>{D({type:"success",message:"Item added"}),o.create=!1,await u(y.params.buybackId,!0)}))},unsetSelectedDevice:m}}}),Y={class:"grid grid-cols-5 gap-4 mb-4"},Z={class:"col-span-3"},ee={class:"col-span-2"},ae={class:"overflow-y-auto min-h-max",style:{maxHeight:"450px",minHeight:"60px"}},te={key:0,class:"mt-6"},se={class:"font-semibold text-teal-04 mb-3"},oe={class:"flex justify-between"},le={class:"mr-3"},de={class:"font-bold"},ie={class:"mr-3"},ne={class:"font-bold"},re={class:"mr-3"},ce={class:"font-bold"},me={key:1,class:"mt-8 mb-4"},ue={class:"flex justify-end"};var pe=P(X,[["render",function(e,a,t,s,o,l){const d=r("Input"),i=r("Select"),n=r("Button"),p=r("Card"),C=r("DeviceForm"),I=r("Modal"),j=c("loading");return u(),y(_,null,[g(p,null,{header:b((()=>a[6]||(a[6]=[f("h6",null,"Items",-1)]))),default:b((()=>{var t,s;return[f("div",null,[f("div",Y,[f("div",Z,[g(d,{modelValue:e.filters.search,"onUpdate:modelValue":a[0]||(a[0]=a=>e.filters.search=a),placeholder:"Search items",block:""},null,8,["modelValue"])]),f("div",ee,[g(i,{modelValue:e.filters.condition,"onUpdate:modelValue":a[1]||(a[1]=a=>e.filters.condition=a),placeholder:"Condition",class:"w-full",items:e.stateConditions,by:"condition_name",name:"condition_name",loading:e.loadingCondition.all},null,8,["modelValue","items","loading"])])]),m((u(),y("div",ae,[(null==(s=null==(t=e.state)?void 0:t.data)?void 0:s.length)?(u(),y("div",te,[(u(!0),y(_,null,w(e.state.data,((t,s)=>(u(),y("div",{key:s,class:"flex justify-between items-center mb-8"},[f("div",null,[f("p",se,v(t.product_name),1),f("div",oe,[f("p",le,[a[7]||(a[7]=k("Qty: ")),f("span",de,v(t.qty),1)]),f("p",ie,[a[8]||(a[8]=k("Price: ")),f("span",ne,v(t.price),1)]),f("p",re,[a[9]||(a[9]=k("Condition: ")),f("span",ce,v(t.condition),1)])])]),f("div",null,[g(n,{onClick:a=>e.handleQuickAdd(t),color:"teal",dense:""},{default:b((()=>a[10]||(a[10]=[k("Quick Add")]))),_:2},1032,["onClick"])])])))),128))])):(u(),y("div",me,a[11]||(a[11]=[f("p",{class:"font-semibold text-center"},"No data",-1)])))])),[[j,e.loading.all]])])]})),_:1}),g(I,{modelValue:e.modal.create,"onUpdate:modelValue":a[5]||(a[5]=a=>e.modal.create=a),title:"Quick Add Item",onClose:e.unsetSelectedDevice},{default:b((()=>[g(C,{ref:"refDeviceForm","auto-fill":"",data:e.data.selected.device.detail,"onUpdate:data":a[2]||(a[2]=a=>e.data.selected.device.detail=a),device:e.data.selected.device.specs.device,"onUpdate:device":a[3]||(a[3]=a=>e.data.selected.device.specs.device=a),dataComputer:e.data.selected.device.specs.computer,"onUpdate:dataComputer":a[4]||(a[4]=a=>e.data.selected.device.specs.computer=a),"multi-imei":""},null,8,["data","device","dataComputer"])])),footer:b((()=>[f("div",ue,[g(n,{onClick:e.handleAddDevice,loading:e.loading.create,color:"teal",view:"outlined"},{default:b((()=>a[12]||(a[12]=[k("Add")]))),_:1},8,["onClick","loading"])])])),_:1},8,["modelValue","onClose"])],64)}]]);const be=d({components:{Card:U,Button:F,Modal:Q,ItemTable:K,DeviceForm:q},async setup(){const{device:e,modal:a,unsetData:t,openModal:s,loading:o,actionCreate:l}=A("online"),d=i(),n=I(null);return{refDeviceForm:n,loading:o,device:e,modal:a,unsetData:t,openModal:s,actionCreate:l,loadingShow:O,addDevice:async()=>{await h((()=>n.value.validate()))&&await l(d.params.buybackId,(async()=>{D({type:"success",message:"Item added"})}),!0)}}}}),fe={class:"flex justify-between items-center"};const ve=d({components:{Breadcrumb:M,Card:U,Button:F,Show:J,Devices:pe,Items:P(be,[["render",function(e,a,t,s,o,l){const d=r("Button"),i=r("ItemTable"),n=r("Card"),v=r("DeviceForm"),C=r("Modal"),I=c("loading");return u(),y(_,null,[m((u(),p(n,null,{header:b((()=>[f("div",fe,[a[5]||(a[5]=f("h6",null,"Data Match Items",-1)),g(d,{color:"teal",dense:"",onClick:a[0]||(a[0]=a=>e.openModal("create"))},{default:b((()=>a[4]||(a[4]=[f("i",{class:"material-icons mr-2"},"add",-1),k("Add Item")]))),_:1})])])),default:b((()=>[g(i,{"scan-in":"","buyback-type":"mailin"})])),_:1})),[[I,e.loadingShow.items.all]]),g(C,{modelValue:e.modal.create,"onUpdate:modelValue":a[3]||(a[3]=a=>e.modal.create=a),title:"Add Item",onClose:e.unsetData},{default:b((()=>[g(v,{ref:"refDeviceForm",data:e.device.data,"onUpdate:data":a[1]||(a[1]=a=>e.device.data=a),dataComputer:e.device.computer,"onUpdate:dataComputer":a[2]||(a[2]=a=>e.device.computer=a),"multi-imei":"","buyback-type":"mailin"},null,8,["data","dataComputer"])])),footer:b((()=>[g(d,{color:"teal",loading:e.loading.create,onClick:e.addDevice},{default:b((()=>a[6]||(a[6]=[k("Add Item")]))),_:1},8,["loading","onClick"])])),_:1},8,["modelValue","onClose"])],64)}]])},props:{},async setup(){const{loading:e,actionSave:a,actionRestore:t}=V(),{actionAll:s}=A("online"),o=i(),l=x();return{breadcrumb:[{text:"Ease Offer",to:{name:"easyOffer"}},{text:"Offer Detail",to:{name:"easyOfferDetail",params:{buybackId:o.params.buybackId}}},{text:"Data Match"}],loading:e,route:o,handleRestore:()=>t(o.params.buybackId,(async()=>{await s(o.params.buybackId,!0),D({type:"success",message:"Data match restored"})})),handleSave:()=>a(o.params.buybackId,(async()=>{await s(o.params.buybackId,!0),D({type:"success",message:"Data match saved"}),l.push({name:"easyOfferDetail",params:{buybackId:o.params.buybackId}})}))}}}),ye={class:"flex justify-center justify-between"},ge={class:"grid gap-6 grid-cols-8"},ke={class:"col-span-8 xl:col-span-2 lg-col-span-2"},Ce={class:"col-span-8 xl:col-span-6 lg-col-span-6"};var Ie=P(ve,[["render",function(e,a,t,s,o,l){const d=r("Breadcrumb"),i=r("Button"),n=r("Show"),c=r("Devices"),m=r("Items");return u(),y("div",null,[f("div",ye,[g(d,{class:"mb-12","page-title":"Data Match",backTo:{name:"easyOfferDetail",params:{buybackId:e.route.params.buybackId}},items:e.breadcrumb},null,8,["backTo","items"]),f("div",null,[g(i,{onClick:e.handleRestore,class:"mr-4",color:"orange",view:"outlined",loading:e.loading.restore},{default:b((()=>a[0]||(a[0]=[f("i",{class:"material-icons mr-1"},"replay",-1),k(" Restore")]))),_:1},8,["onClick","loading"]),g(i,{onClick:e.handleSave,color:"teal",view:"outlined",loading:e.loading.save},{default:b((()=>a[1]||(a[1]=[f("i",{class:"material-icons mr-1"},"save",-1),k(" Save")]))),_:1},8,["onClick","loading"])])]),f("div",ge,[f("div",ke,[g(n,{class:"mb-8"}),g(c)]),f("div",Ce,[g(m)])])])}]]),je=d({setup(){const{genSuspense:e}=l();return()=>[e(Ie)]}});export{je as default};
