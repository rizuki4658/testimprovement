var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,o=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t,i=(e,a)=>{for(var l in a||(a={}))n.call(a,l)&&o(e,l,a[l]);if(t)for(var l of t(a))s.call(a,l)&&o(e,l,a[l]);return e},r=(e,t)=>a(e,l(t));import{u as d}from"./components.9eb2d515.js";import{j as u,_ as m,r as c,f as p,y as f,m as g,$ as y,o as v,t as b,D as _,w as h,I as x,B as w,ap as S,a1 as V,a2 as $,K as C,A as k,n as j,g as L,W as P,ar as z,k as D}from"./vendor.9695fe57.js";import{x as U,z as O,f as q,t as B,S as A,b as G,B as M}from"./index.10c203ea.js";import{u as T}from"./multiple-company.c8abfb4d.js";import{B as I}from"./Breadcrumb.3a067992.js";import{C as E}from"./card.6034dd30.js";import{u as F}from"./index.f40e4a9e.js";import{v as N,r as R,e as H}from"./index.54844a74.js";import{c as K}from"./index.6b6f6369.js";import{_ as W}from"./SettingCompanyLogo.e6ea4867.js";import{_ as Y}from"./fieldset.b522b194.js";import{I as Z}from"./InputPhone.ff167384.js";import{S as J}from"./SelectCountry.e96a458a.js";import{S as Q}from"./SelectCurrency.795fc5bd.js";import{_ as X}from"./radio.8634435d.js";import"./LoadingCard.202e648c.js";import"./breadcrumb.56f06fd8.js";import"./InputFile.60d1a471.js";import"./setting.694f0663.js";const ee=u("settingGeneral",{state:()=>({general:{isLoading:!1,result:{country:null,country_code:null,country_name:null,currency:null,currency_prefix:null,currency_symbol:null,timezone:null,time_format:null,date_format:null}}}),getters:{},actions:{async $getSettingGeneral(){var e,a;const l=U(),t=Object.keys(this.general.result);(null==(e=null==l?void 0:l.company)?void 0:e.form)&&!(null==(a=null==l?void 0:l.company)?void 0:a.refresh)?t.forEach((e=>{this.general.result[e]=l.company.form[e]})):(l.company.refresh=!0,await l.$getSettingCompanyProfile())},$updateSettingGeneral:async e=>await O({url:"/v1/pos/settings/update",method:"post",data:r(i({},e),{_method:"PUT"})})}}),ae=u("settingDistance",{state:()=>({distance:{isLoading:!1,result:null}}),getters:{},actions:{async $getSettingDistance(){var e;const a=U();(null==(e=null==a?void 0:a.distance)?void 0:e.result)?this.distance.result=a.distance.result:await a.$getSettingDistance()},$updateSettingDistance:async e=>await O({url:"/v1/pos/settings/distance-units",method:"put",data:i({},e)})}}),le=u("settingCompanyProfile",{state:()=>({breadcrumbs:[{text:"Settings",to:{name:"setting"}},{text:"Company Profile"}],isLoading:!1,profile:{logo:null,legal_business_name:null,name:null,company_email:null,address_text:null,suite:null,phone:null,address:null,city:null,state:null,zip:null,country:null,lon:null,lat:null,valid:!1,country_name:null,country_code:null}}),getters:{},actions:{async $getSettingCompanyProfile(){var e,a;const l=U(),t=Object.keys(this.profile);(null==(e=null==l?void 0:l.company)?void 0:e.form)&&!(null==(a=null==l?void 0:l.company)?void 0:a.refresh)?t.forEach((e=>{this.profile[e]=l.company.form[e]})):(l.company.refresh=!0,await l.$getSettingCompanyProfile()),this.profile.valid=""!==this.profile.address_text&&null!==this.profile.address_text},async $updateSettingBulk(e){var a,l;const t=U(),n=ee(),s=ae();(null==(a=e.form)?void 0:a.logo)&&(null==(l=e.form)||delete l.logo),await t.$updateSettingCompanyProfile(r(i({},e.form),{_method:"PUT"}),!1,!1),await n.$updateSettingGeneral(e.general),await s.$updateSettingDistance(e.distance),this.profile=e.form,n.general.result=e.general,s.distance.result.current=e.distance.distance_unit,t.company.name=this.profile.name,t.company.email=this.profile.company_email,t.company.address=this.profile.address_text,t.company.phone=this.profile.phone,t.company.logo=this.profile.logo,t.company.form=i(i(i(i({},t.company.form),this.profile),n.general.result),s.distance.result.current),m({type:"success",message:"Data has been saved!"})}}}),te={class:"space-y-5 text-teal-04 lg:w-3/4 pb-5"},ne={class:"max-w-sm"},se={class:"font-medium text-sm"},oe={__name:"SettingCompanyProfileForm",setup(e,{expose:a}){const l=le(),t=c(i({},l.profile)),n=p(!1),s=p(),o=c({valid:"valid",route:"address",locality:"city",administrative_area_level_1:"state",postal_code:"zip",country:"country",formatted_address:"address_text",subpremise:"suite",bypassValidation:!0,restrictCountries:[],geo:{lat:"lat",lng:"lon"}}),r={valid:{validAddress:N},legal_business_name:{required:K.withMessage("Legal business name is required",R)},name:{required:K.withMessage("Doing business as (DBA) is required",R)},company_email:{required:R,email:H},phone:{required:R,invalidNumber:K.withMessage("Phone number is invalid",(()=>{var e;return null==(e=s.value)?void 0:e.isValid}))},address_text:{required:K.withMessage("Address is required",R)}},d=F(r,t,{$lazy:!0});f((()=>l.profile),(()=>{Object.assign(t,l.profile)}),{immediate:!0,deep:!0});return a({data:t,isValid:n,refCompanyPhone:s,onSubmit:async()=>(n.value=await d.value.$validate(),n.value)}),(e,a)=>{const l=g("Tooltip"),n=y("gmap");return v(),b("div",null,[_(Y,{class:"rounded-lg"},{label:h((()=>a[6]||(a[6]=[x("Company Profile")]))),default:h((()=>[w("div",te,[w("div",ne,[a[7]||(a[7]=w("label",{class:"font-medium text-sm"},"Company Logo",-1)),_(W,{"current-logo":t.logo},null,8,["current-logo"])]),w("div",null,[_(q,{modelValue:t.legal_business_name,"onUpdate:modelValue":a[0]||(a[0]=e=>t.legal_business_name=e),class:"w-full",placeholder:"e.g. Example Corporation",view:S(d).legal_business_name.$invalid?"danger":"default"},{label:h((()=>a[8]||(a[8]=[w("span",{class:"font-medium text-sm"}," Legal Business Name ",-1)]))),_:1},8,["modelValue","view"]),(v(!0),b(V,null,$(S(d).legal_business_name.$errors,(e=>(v(),b("span",{key:e,error:"",class:"text-red-base mt-2 block text-sm"},C(e.$message)+". ",1)))),128))]),w("div",null,[_(q,{modelValue:t.name,"onUpdate:modelValue":a[1]||(a[1]=e=>t.name=e),class:"w-full",placeholder:"e.g. Example Solutions",view:S(d).name.$invalid?"danger":"default"},{label:h((()=>[w("span",se,[a[11]||(a[11]=x(" Doing Business as (DBA) ")),_(l,{placement:"top"},{content:h((()=>a[9]||(a[9]=[w("p",{class:"max-w-xs"}," Your DBA (Doing Business As) is the name that will appear on your shipping labels for Mail-In shipments when Mail-In is enabled. ",-1)]))),default:h((()=>[a[10]||(a[10]=w("span",{class:"material-icons",style:{"line-height":"1"}},"info",-1))])),_:1})])])),_:1},8,["modelValue","view"]),(v(!0),b(V,null,$(S(d).name.$errors,(e=>(v(),b("span",{key:e,error:"",class:"text-red-base mt-2 block text-sm"},C(e.$message)+". ",1)))),128))]),w("div",null,[_(q,{modelValue:t.company_email,"onUpdate:modelValue":a[2]||(a[2]=e=>t.company_email=e),class:"w-full",placeholder:"e.g. contact@yourcompany.com",view:S(d).company_email.$invalid?"danger":"default"},{label:h((()=>a[12]||(a[12]=[w("span",{class:"font-medium text-sm"}," Company Email ",-1)]))),_:1},8,["modelValue","view"]),(v(!0),b(V,null,$(S(d).company_email.$errors,(e=>(v(),b("span",{key:e,error:"",class:"text-red-base mt-2 block text-sm"},C(e.$message)+". ",1)))),128))]),w("div",null,[k((v(),j(q,{modelValue:t.address_text,"onUpdate:modelValue":a[3]||(a[3]=e=>t.address_text=e),class:"w-full",type:"text",placeholder:"e.g. 1234 Market Street, San Francisco, CA 94103",view:S(d).valid.$invalid||S(d).address_text.$invalid?"danger":"default"},{label:h((()=>a[13]||(a[13]=[w("span",{class:"font-medium text-sm"}," Company Address ",-1)]))),_:1},8,["modelValue","view"])),[[n,o]]),(v(!0),b(V,null,$([...S(d).valid.$errors,...S(d).address_text.$errors],(e=>(v(),b("span",{key:e,class:"text-red-base my-2 block text-sm"},C(e.$message)+". ",1)))),128)),a[14]||(a[14]=w("small",null,"Street address, P.O box, company name, c/o.",-1))]),w("div",null,[_(q,{modelValue:t.suite,"onUpdate:modelValue":a[4]||(a[4]=e=>t.suite=e),placeholder:"e.g. Suite 500, Building A",class:"w-full"},null,8,["modelValue"]),a[15]||(a[15]=w("small",null,"Apartment, suite, unit, building, floor, etc.",-1))]),w("div",null,[_(Z,{modelValue:t.phone,"onUpdate:modelValue":a[5]||(a[5]=e=>t.phone=e),ref_key:"refCompanyPhone",ref:s,value:t.phone,name:"companyPhone",block:"","country-autofill-setting":""},{label:h((()=>a[16]||(a[16]=[w("span",{class:"font-medium text-sm"}," Company Phone Number ",-1)]))),_:1},8,["modelValue","value"]),(v(!0),b(V,null,$(S(d).phone.$errors,(e=>(v(),b("span",{key:e,class:"text-red-base mt-2 block text-sm"},C(e.$message)+". ",1)))),128))])])])),_:1})])}}},ie={class:"space-y-5 text-teal-04 pb-4"},re={class:"px-4 py-4 w-full"},de={class:"space-y-2"},ue={class:"space-y-2"},me={__name:"SettingCompanyProfileGeneral",setup(e,{expose:a}){const l=U(),t=ee(),n=c(i({},t.general.result)),s=p(""),o=p(!1),r=L((()=>{var e,a;return(null==(a=null==(e=null==l?void 0:l.timezone)?void 0:e.result)?void 0:a.filter((e=>!!e.timezone_text&&e.timezone_text.toLowerCase().indexOf(s.value.toLowerCase())>-1)))||[]})),d=F({country_code:{required:R},currency:{required:R},timezone:{required:R},time_format:{required:R},date_format:{required:R}},n,{$lazy:!0}),u=e=>{n.country_code=e.country_code,n.country_name=e.nicename,n.country=e.country},m=e=>{n.currency=e.currency_code};return P((async()=>{await B(l.timezone,(()=>l.$getSettingTimeZone())),await B(t.general,(()=>t.$getSettingGeneral())),Object.assign(n,t.general.result)})),a({data:n,isValid:o,onSubmit:async()=>(o.value=await d.value.$validate(),o.value)}),(e,a)=>{const o=y("loading");return v(),j(Y,{class:"rounded-lg"},{label:h((()=>a[7]||(a[7]=[x("General")]))),default:h((()=>{var e,i,d,c,p;return[w("div",ie,[w("div",null,[k((v(),j(J,{"init-load":!1,countries:S(l).countries.result,selected:n.country_code,disabled:null==(e=S(t).general)?void 0:e.isLoading,rounded:"",onSelect:u},{label:h((()=>a[8]||(a[8]=[w("span",{class:"font-medium text-sm"},"Region or Country",-1)]))),_:1},8,["countries","selected","disabled"])),[[o,S(l).countries.isLoading]])]),w("div",null,[k((v(),j(Q,{selected:n.currency,disabled:null==(i=S(t).general)?void 0:i.isLoading,currencies:S(l).currencies.result,onChange:m},{label:h((()=>a[9]||(a[9]=[w("span",{class:"font-medium text-sm"},"Currency",-1)]))),_:1},8,["selected","disabled","currencies"])),[[o,S(l).currencies.isLoading]])]),w("div",null,[a[11]||(a[11]=w("label",{class:"font-medium text-sm"},"Timezone",-1)),k((v(),j(A,{modelValue:n.timezone,"onUpdate:modelValue":a[1]||(a[1]=e=>n.timezone=e),items:r.value,name:"timezone_text",by:"timezone",block:"",placeholder:"Please select a timezone","max-height":"200px","no-border":"",disabled:null==(d=S(t).general)?void 0:d.isLoading},{prepend:h((()=>[w("div",re,[_(q,{modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=e=>s.value=e),placeholder:"Search Location",class:"w-full",block:"",icon:""},{icon:h((()=>a[10]||(a[10]=[w("span",{class:"material-icons"},"search",-1)]))),_:1},8,["modelValue"])])])),item:h((({item:e})=>[x(C(e.timezone_text),1)])),_:1},8,["modelValue","items","disabled"])),[[o,S(l).timezone.isLoading]])]),w("div",null,[a[14]||(a[14]=w("label",{class:"font-medium text-sm"},"Time Format",-1)),k((v(),b("div",de,[_(X,{modelValue:n.time_format,"onUpdate:modelValue":a[2]||(a[2]=e=>n.time_format=e),color:"teal",disabled:null==(c=S(t).general)?void 0:c.isLoading,class:"font-normal block",value:"HH:mm"},{default:h((()=>a[12]||(a[12]=[x(" 24 hour ")]))),_:1},8,["modelValue","disabled"]),_(X,{modelValue:n.time_format,"onUpdate:modelValue":a[3]||(a[3]=e=>n.time_format=e),color:"teal",disabled:null==(p=S(t).general)?void 0:p.isLoading,class:"font-normal block",value:"hh:mm"},{default:h((()=>a[13]||(a[13]=[x(" 12 hour ")]))),_:1},8,["modelValue","disabled"])])),[[o,S(t).general.isLoading]])]),w("div",null,[a[18]||(a[18]=w("label",{class:"font-medium text-sm"},"Date Format",-1)),k((v(),b("div",ue,[_(X,{modelValue:n.date_format,"onUpdate:modelValue":a[4]||(a[4]=e=>n.date_format=e),color:"teal",disabled:S(t).general.isLoading,class:"font-normal block my-2",value:"mm/dd/yyyy"},{default:h((()=>a[15]||(a[15]=[x(" mm/dd/yyyy ")]))),_:1},8,["modelValue","disabled"]),_(X,{modelValue:n.date_format,"onUpdate:modelValue":a[5]||(a[5]=e=>n.date_format=e),color:"teal",disabled:S(t).general.isLoading,class:"font-normal block my-2",value:"dd/mm/yyyy"},{default:h((()=>a[16]||(a[16]=[x(" dd/mm/yyyy ")]))),_:1},8,["modelValue","disabled"]),_(X,{modelValue:n.date_format,"onUpdate:modelValue":a[6]||(a[6]=e=>n.date_format=e),color:"teal",disabled:S(t).general.isLoading,class:"font-normal block my-2",value:"yyyy/mm/dd"},{default:h((()=>a[17]||(a[17]=[x(" yyyy/mm/dd ")]))),_:1},8,["modelValue","disabled"])])),[[o,S(t).general.isLoading]])])])]})),_:1})}}},ce={class:"md:w-3/4"},pe={__name:"SettingCompanyProfileDistance",setup(e,{expose:a}){const l=U(),t=ae(),n=p(!1),s=c({units:[],distance_unit:null}),o=F({distance_unit:{required:R}},s,{$lazy:!0});return P((async()=>{var e,a,n,o;await B(l.distance,(()=>l.$getSettingDistance())),await B(t.distance,(()=>t.$getSettingDistance())),s.distance_unit=null==(a=null==(e=t.distance)?void 0:e.result)?void 0:a.current,s.units=null==(o=null==(n=t.distance)?void 0:n.result)?void 0:o.units})),a({data:s,onSubmit:async()=>(n.value=await o.value.$validate(),n.value)}),(e,a)=>{const l=g("RadioButton"),n=g("RadioGroup"),o=y("loading");return v(),j(Y,{class:"rounded-lg"},{label:h((()=>a[1]||(a[1]=[x("Distance Unit")]))),default:h((()=>[w("div",ce,[k((v(),j(n,{modelValue:s.distance_unit,"onUpdate:modelValue":a[0]||(a[0]=e=>s.distance_unit=e),class:"radio--full"},{default:h((()=>[(v(!0),b(V,null,$(s.units,((e,a)=>(v(),j(l,{key:a,label:e.value},{default:h((()=>[x(C(e.label),1)])),_:2},1032,["label"])))),128))])),_:1},8,["modelValue"])),[[o,S(t).distance.isLoading]])])])),_:1})}}},fe={class:"space-y-8"},ge={class:"grid md:grid-cols-3 grid-cols-1 gap-6"},ye={class:"col-span-2"},ve={class:"w-full flex items-center justify-center"},be={class:"col-span-1 space-y-5"},_e={class:"w-full flex items-center justify-center"},he={class:"w-full flex items-center justify-center"};var xe={__name:"index",setup(e){const a=le(),l=T(),t=p(),n=p(),s=p(),o=async()=>{const e=await t.value.onSubmit(),o=await n.value.onSubmit(),i=await s.value.onSubmit();if(e&&o&&i){const e={form:t.value.data,general:n.value.data,distance:s.value.data};await B(a,(async()=>await a.$updateSettingBulk(e))),await B(a,(async()=>await l.$updateMultipleCompany(e.form)))}};return P((async()=>{await a.$getSettingCompanyProfile()})),(e,l)=>{const i=y("loading");return v(),b("div",fe,[_(I,{pageTitle:"Company Profile",backTo:{name:"setting"},items:S(a).breadcrumbs,disabled:S(a).isLoading},{right:h((()=>[k((v(),j(G,{color:"teal",onClick:o},{default:h((()=>l[0]||(l[0]=[x(" Save Changes ")]))),_:1})),[[i,S(a).isLoading]])])),_:1},8,["items","disabled"]),_(E,{"hide-header":""},{default:h((()=>[w("div",ge,[w("div",ye,[(v(),j(z,null,{fallback:h((()=>[w("div",ve,[_(M)])])),default:h((()=>[k(_(oe,{ref_key:"refSettingCompanyProfileForm",ref:t},null,512),[[i,S(a).isLoading]])])),_:1}))]),w("div",be,[(v(),j(z,null,{fallback:h((()=>[w("div",_e,[_(M)])])),default:h((()=>[k(_(me,{ref_key:"refSettingCompanyProfileGeneral",ref:n},null,512),[[i,S(a).isLoading]])])),_:1})),(v(),j(z,null,{fallback:h((()=>[w("div",he,[_(M)])])),default:h((()=>[k(_(pe,{ref_key:"refSettingCompanyProfileDistance",ref:s},null,512),[[i,S(a).isLoading]])])),_:1}))])])])),_:1})])}}},we=D({setup(){const{genSuspense:e}=d();return()=>e(xe)}});export{we as default};
