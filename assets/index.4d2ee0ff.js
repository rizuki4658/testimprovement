var e=Object.defineProperty,a=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,o=(a,t,r)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):a[t]=r,s=(e,s)=>{for(var l in s||(s={}))t.call(s,l)&&o(e,l,s[l]);if(a)for(var l of a(s))r.call(s,l)&&o(e,l,s[l]);return e};import{u as l}from"./components.2c51ae72.js";import{J as i}from"./setting.bd993b06.js";import{C as n}from"./card.198a6be1.js";import{f as d,b as c,_ as m,d as u}from"./index.ec266ec1.js";import{_ as f}from"./breadcrumb.624a01cc.js";import{u as p}from"./index.32689823.js";import{r as v}from"./index.a87b789d.js";import{T as x,c as y}from"./TextEditor.7498b5b6.js";import{S as b}from"./select.5f1e68e6.js";import{k as g,f as T,r as j,y as w,m as h,o as k,t as E,D as P,a2 as S,a3 as _,K as F,B as $,w as O,I as C,_ as B}from"./vendor.f1efedad.js";import"./LoadingCard.93d3634e.js";import"./index.05b14cb2.js";const D=g({name:"PrivacyForm",components:{Input:d,Button:c,Select:b,TextEditor:x},props:{data:{type:Object,default:()=>({textinfo:""})}},emits:["change"],setup(e,{emit:a}){const t=T(null),r=j(e.data),o={textinfo:v},l=j({editor:y.exports.Editor,config:{htmlSupport:{allow:[{styles:!0,classes:!0}]}}}),i=p(o,r,{$lazy:!0});return w((()=>s({},r)),(e=>{a("change",e)}),{deep:!0}),{refTextEditor:t,data:r,validation:i,ckeditor:l,validate:async()=>{if(!t.value.isEditorReady)return!1;return!!(await t.value.forceSave())&&(i.value.$validate(),!i.value.$invalid)}}}}),U={class:"w-full"};var V=m(D,[["render",function(e,a,t,r,o,s){const l=h("TextEditor");return k(),E("div",U,[P(l,{ref:"refTextEditor",modelValue:e.data.textinfo,"onUpdate:modelValue":a[0]||(a[0]=a=>e.data.textinfo=a),options:e.ckeditor},null,8,["modelValue","options"]),(k(!0),E(S,null,_(e.validation.textinfo.$errors,((e,a)=>(k(),E("small",{class:"text-red-base mt-2 block",key:a},F(e.$message)+". ",1)))),128))])}]]);const I=g({name:"TermsForm",components:{Input:d,Button:c,Select:b,TextEditor:x},props:{data:{type:Object,default:{textinfo:""}}},emits:["change"],setup(e,{emit:a}){const t=T(null),r=j(e.data),o={textinfo:v},l=j({editor:y.exports.Editor,config:{htmlSupport:{allow:[{styles:!0,classes:!0}]}}}),i=p(o,r,{$lazy:!0});return w((()=>s({},r)),(e=>{a("change",e)}),{deep:!0}),{refTextEditor:t,data:r,validation:i,ckeditor:l,validate:async()=>{if(!t.value.isEditorReady)return!1;return!!(await t.value.forceSave())&&(i.value.$validate(),!i.value.$invalid)}}}}),L={class:"w-full"};const z=g({components:{Card:n,Input:d,Button:c,Breadcrumb:f,Modal:u,PrivacyForm:V,TermsForm:m(I,[["render",function(e,a,t,r,o,s){const l=h("TextEditor");return k(),E("div",L,[P(l,{ref:"refTextEditor",modelValue:e.data.textinfo,"onUpdate:modelValue":a[0]||(a[0]=a=>e.data.textinfo=a),options:e.ckeditor},null,8,["modelValue","options"]),(k(!0),E(S,null,_(e.validation.textinfo.$errors,((e,a)=>(k(),E("small",{class:"text-red-base mt-2 block",key:a},F(e.$message)+". ",1)))),128))])}]])},async setup(e,{emit:a}){var t,r;const o=T(null),s=T(null),{stateShow:l,loading:n,formData:d,actionAll:c,actionUpdatePrivacy:m,actionUpdateTerms:u}=i();return await c(),Object.assign(d,{privacy:{textinfo:(null==(t=l.value)?void 0:t.privacy.textinfo)||""},terms:{textinfo:(null==(r=l.value)?void 0:r.terms.textinfo)||""}}),{breadcrumb:[{text:"Settings",to:{name:"setting"}},{text:"Legal Terms"}],refPrivacyForm:o,refTermsForm:s,loading:n,formData:d,updatePrivacy:async()=>{var e;n.update.privacy=!0;(null==(e=o.value)?void 0:e.validate)&&await o.value.validate()||!1?await m((()=>{B({type:"success",message:"Privacy Term updated"})})):n.update.privacy=!1},updateTerms:async()=>{var e;n.update.terms=!0;(null==(e=s.value)?void 0:e.validate)&&await s.value.validate()||!1?await u((()=>{B({type:"success",message:"Terms updated"})})):n.update.terms=!1}}}}),R={class:"flex xl:flex-row flex-col justify-between mb-8"},A={class:"lg:flex lg:divide-x lg:divide-grey-01"},J={class:"flex items-center lg:pr-4 lg:mb-0 mb-4"},K={class:"lg:pl-4 flex items-center"},M={class:"flex justify-end"},q={class:"flex justify-end"};var G=m(z,[["render",function(e,a,t,r,o,s){const l=h("router-link"),i=h("Breadcrumb"),n=h("PrivacyForm"),d=h("Button"),c=h("Card"),m=h("TermsForm");return k(),E(S,null,[$("div",R,[$("div",A,[$("div",J,[P(l,{to:{name:"setting"},class:"text-dark mr-4"},{default:O((()=>a[2]||(a[2]=[$("span",{class:"material-icons"},"chevron_left",-1)]))),_:1}),a[3]||(a[3]=$("h5",null,"Legal Terms",-1))]),$("div",K,[P(i,{items:e.breadcrumb},{default:O((()=>a[4]||(a[4]=[$("span",{class:"material-icons"},"chevron_right",-1)]))),_:1},8,["items"])])])]),P(c,{class:"mb-6"},{header:O((()=>a[5]||(a[5]=[$("h2",{class:"font-semibold text-lg"},"Privacy",-1)]))),footer:O((()=>[$("div",M,[P(d,{color:"teal",view:"smooth",onClick:e.updatePrivacy,loading:e.loading.update.privacy},{default:O((()=>a[6]||(a[6]=[C("Save")]))),_:1},8,["onClick","loading"])])])),default:O((()=>[P(n,{data:e.formData.privacy,"onUpdate:data":a[0]||(a[0]=a=>e.formData.privacy=a),ref:"refPrivacyForm"},null,8,["data"])])),_:1}),P(c,{class:"my-6"},{header:O((()=>a[7]||(a[7]=[$("h2",{class:"font-semibold text-lg"},"Terms",-1)]))),footer:O((()=>[$("div",q,[P(d,{color:"teal",view:"smooth",onClick:e.updateTerms,loading:e.loading.update.terms},{default:O((()=>a[8]||(a[8]=[C("Save")]))),_:1},8,["onClick","loading"])])])),default:O((()=>[P(m,{data:e.formData.terms,"onUpdate:data":a[1]||(a[1]=a=>e.formData.terms=a),ref:"refTermsForm"},null,8,["data"])])),_:1})],64)}]]),H=g({setup(){const{genSuspense:e}=l();return()=>e(G)}});export{H as default};
