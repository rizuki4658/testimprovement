var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,s=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,n=(e,a)=>{for(var t in a||(a={}))r.call(a,t)&&s(e,t,a[t]);if(l)for(var t of l(a))o.call(a,t)&&s(e,t,a[t]);return e},i=(e,l)=>a(e,t(l));import{u as d}from"./components.2c51ae72.js";import{k as c,a5 as u,g as p,W as m,y as g,_ as y,m as b,a0 as v,o as f,t as h,B as k,D as w,w as C,A as _,n as S,T,L as x,U as B,S as U,I as V,O as j,f as I,az as P,Q as D,K as A,a2 as L,a3 as O}from"./vendor.f1efedad.js";import{p as M,q as N,r as F}from"./setting.bd993b06.js";import{f as E,e as $,P as q,i as G,_ as z,g as H,b as W,d as K,aq as Q}from"./index.ec266ec1.js";import{D as R}from"./DeviceTable.63876ae3.js";import{C as J}from"./card.198a6be1.js";import{E as X}from"./expandable-panel.6a176a50.js";import{_ as Y}from"./breadcrumb.624a01cc.js";import{_ as Z}from"./tab.3f85415b.js";import{S as ee}from"./SVGLoader.6f990f08.js";import{_ as ae}from"./fieldset.93cf49f0.js";import{T as te}from"./TreeCheckbox.92f48522.js";import"./LoadingCard.93d3634e.js";import"./catalog-not-found.379a4c88.js";const le=c({components:{Input:E,Checkbox:$,Pagination:q,Loading:G},props:{priceUploadProcess:{type:Boolean,default:!1}},emits:["update-all"],setup(){const{action:e,actionUpdateBuybackType:a,actionUpdateStatus:t}=F(),{actionAll:l}=M(),r=u(),o=p((()=>N.data?N.data.data:[]));m((async()=>{await e()})),g((()=>({search:N.filters.search})),(()=>{N.filters.page=1}),{deep:!0}),g((()=>N.filters),H((async()=>await e()),500),{deep:!0});return{stateCategoryBuybackType:N,data:o,handleUpdateCategoryBuybackType:async(t,o,s=null)=>{const i=!["mailin","instore"].includes(s);if(!s||i)return;const d=n({},t);t[s]=o;const{name:c}=t,u={category:c,value:o,type:s};await a(u,(async a=>{a?Object.assign(t,d):(await Promise.all([e(!1,(e=>{N.is_enable=e.is_enable})),l(r.params.category,"all"==r.params.brand?null:r.params.brand)]),0===t.mailin&&0===t.instore&&(t.is_enable=0))}))},handleUpdateCategoryStatus:async(a,o)=>{const s={is_mac:null!==a?a.is_computer:0,is_enable:o,category:null!==a?a.name:"ALL"};a?a.is_enable=o:N.data.is_enable=o,["Golf Clubs"].includes(null==a?void 0:a.name)&&y({message:"Feel free to navigate away or close this window",type:"info"}),await t(s,(async t=>{t?setTimeout((()=>{a?a.is_enable=1==a.is_enable?0:1:N.data.is_enable=1==N.data.is_enable?0:1}),1e3):(a&&(a.instore=o,a.mailin=o),await e("ALL"===s.category,(e=>{N.data.is_enable=e.is_enable})),await l(r.params.category,"all"==r.params.brand?null:r.params.brand),y({type:"success",message:"Item status updated"}))}))}}}}),re={class:"grid grid-cols-1 gap-6"},oe={class:"flex items-center justify-center"},se={class:"mr-4"},ne={class:"mr-6"},ie={class:"relative"};var de=z(le,[["render",function(e,a,t,l,r,o){const s=b("Input"),n=b("Checkbox"),i=b("TableColumn"),d=b("Loading"),c=b("Table"),u=b("Pagination"),p=v("loading");return f(),h("div",re,[k("div",null,[w(s,{modelValue:e.stateCategoryBuybackType.filters.search,"onUpdate:modelValue":a[0]||(a[0]=a=>e.stateCategoryBuybackType.filters.search=a),placeholder:"Search Category",icon:"",block:""},{icon:C((()=>a[4]||(a[4]=[k("i",{class:"text-grey-04 material-icons"},"search",-1)]))),_:1},8,["modelValue"])]),k("div",null,[_((f(),S(c,{data:e.data,"max-height":680,"row-class-name":e.priceUploadProcess&&"global-disabled-row-table"},{default:C((()=>[w(i,{width:"100"},{header:C((()=>{var t;return[w(n,{modelValue:null==(t=e.stateCategoryBuybackType.data)?void 0:t.is_enable,onInput:a[1]||(a[1]=a=>e.handleUpdateCategoryStatus(null,a)),value:1,"value-off":0,disabled:e.priceUploadProcess,type:"toggle"},null,8,["modelValue","disabled"])]})),default:C((({row:a})=>[w(n,{modelValue:a.is_enable,onInput:t=>e.handleUpdateCategoryStatus(a,t),value:1,"value-off":0,loading:e.stateCategoryBuybackType.loading.update.status.get(a.name),disabled:e.priceUploadProcess,type:"toggle"},null,8,["modelValue","onInput","loading","disabled"])])),_:1}),w(i,{label:"Category",prop:"name"}),w(i,{label:""},{default:C((({row:t})=>[k("div",oe,[k("div",se,[w(n,{onInput:a=>e.handleUpdateCategoryBuybackType(t,a,"instore"),modelValue:2===t.instore?0:t.instore,indeterminate:2===t.instore,value:1,"value-off":0,disabled:0===t.is_enable||e.priceUploadProcess},{default:C((()=>a[5]||(a[5]=[k("span",{class:"font-normal"},"In-Store",-1)]))),_:2},1032,["onInput","modelValue","indeterminate","disabled"])]),k("div",ne,[w(n,{onInput:a=>e.handleUpdateCategoryBuybackType(t,a,"mailin"),modelValue:2===t.mailin?0:t.mailin,indeterminate:2===t.mailin,value:1,"value-off":0,disabled:0===t.is_enable||e.priceUploadProcess},{default:C((()=>a[6]||(a[6]=[k("span",{class:"font-normal"},"Mail-In",-1)]))),_:2},1032,["onInput","modelValue","indeterminate","disabled"])]),k("div",ie,[w(T,{name:"fade"},{default:C((()=>[_(w(d,null,null,512),[[x,e.stateCategoryBuybackType.loading.update.buyback_type.get(t.name)]])])),_:2},1024)])])])),_:1})])),_:1},8,["data","row-class-name"])),[[p,e.stateCategoryBuybackType.loading.all||e.stateCategoryBuybackType.loading.update.status.get("ALL")]]),e.stateCategoryBuybackType.data?(f(),S(u,{key:0,page:e.stateCategoryBuybackType.filters.page,"onUpdate:page":a[2]||(a[2]=a=>e.stateCategoryBuybackType.filters.page=a),limit:e.stateCategoryBuybackType.filters.limit,"onUpdate:limit":a[3]||(a[3]=a=>e.stateCategoryBuybackType.filters.limit=a),data:e.stateCategoryBuybackType.data,class:"mt-6"},null,8,["page","limit","data"])):B("",!0)])])}]]);const ce=c({name:"DeviceNetworkSetting",components:{Fieldset:ae,Checkbox:$,TreeCheckbox:te},props:{modelValue:{type:Array,default:()=>[]},carriers:{type:Array,default:()=>[]},by:{type:String,default:"network_name"},name:{type:String,default:"network_name"}},emits:["update:carriers","update:modelValue"],setup(e,{emit:a}){const t=p({get:()=>e.modelValue.filter((e=>e.network_name)).map((e=>e.network_name)),set:t=>{const l=e.carriers.filter((e=>!!(null==e?void 0:e.network_name)&&t.includes(e.network_name))).map((e=>n({},e)));a("update:modelValue",l)}}),l=p((()=>e.carriers)),r=p((()=>e.carriers.length===t.value.length)),o=p((()=>t.value.length>0)),s=p((()=>o.value&&!r.value));return{selectedCarriers:t,carriers:l,isSelectedAll:r,isSelectedPartial:o,isIndeterminate:s,handleToggleSelectAll:()=>{s.value||0===t.value.length?t.value=e.carriers.map((e=>e.network_name)):t.value=[]}}}}),ue={class:"grid gap-4"};const pe=c({components:{Card:J,Checkbox:$,ExpandablePanel:X,Breadcrumb:Y,Input:E,Button:W,Pagination:q,DeviceCategorySetting:de,DeviceTable:R,Tab:Z,Modal:K,SVGLoader:ee,DeviceNetworkSetting:z(ce,[["render",function(e,a,t,l,r,o){const s=b("Checkbox"),n=b("TreeCheckbox"),i=b("Fieldset");return f(),h("div",ue,[a[4]||(a[4]=k("div",{class:"flex bg-blue-lighten text-blue-04 p-4 gap-4 rounded-lg"},[k("i",{class:"material-icons"},"info"),k("span",null,"Check the boxes next to the carriers you want to buy and leave the boxes unchecked for those you do not wish to purchase")],-1)),w(i,{class:"rounded-lg"},{label:C((()=>a[1]||(a[1]=[k("span",null,"Carriers",-1)]))),default:C((()=>[w(s,{"model-value":e.isSelectedPartial,indeterminate:e.isIndeterminate,onClick:U(e.handleToggleSelectAll,["prevent"]),class:"font-normal ml-5"},{default:C((()=>a[2]||(a[2]=[V("Select All")]))),_:1},8,["model-value","indeterminate","onClick"]),a[3]||(a[3]=k("hr",{class:"border border-grey-lighten"},null,-1)),w(n,{modelValue:e.selectedCarriers,"onUpdate:modelValue":a[0]||(a[0]=a=>e.selectedCarriers=a),items:e.carriers,by:e.by,name:e.name},null,8,["modelValue","items","by","name"])])),_:1})])}]])},async setup(e,{emit:a}){const{categoriesTab:t,actionCategories:l,actionCarriers:r,actionUpdateCarriers:o,carriers:s,loading:d}=M(),c=j(),m=u(),g=I(!1),y=I(!1),b=I([]),v=I(null),f=I(!1),h=p((()=>{let e=0,a=0;if(!v.value)return 0;for(let[t,l]of Object.entries(Array.from(v.value.$el.children))){const r=window.getComputedStyle(l);if(e>v.value.$el.offsetWidth)break;e+=parseFloat(r.width)+parseFloat(r.marginRight)+parseFloat(r.marginLeft),a=t}return a})),k=p((()=>window.location.origin)),w=p((()=>h.value<t.value.length-1)),C=p((()=>B(0,w.value?h.value:0))),_=p((()=>B(h.value,t.value.length))),S=p((()=>_.value.map((e=>e.to.params.category)).includes(m.params.category))),T=p((()=>t.value.find((e=>e.to.params.category===m.params.category))||null)),x=I(!1),B=(e,a)=>0===a?t.value:e<t.value.length?t.value.slice(e,a):t.value,U=()=>x.value=!1,V=p((()=>{const e=[...b.value].filter((e=>e.checked)).length;return e>=b.value.length||e<=1})),D=p((()=>[...b.value].filter((e=>e.checked)).length<=1)),A=p((()=>b.value.filter((e=>e.network_name)).map((e=>e.network_name)))),L=p((()=>Q.value.uploadProgress>0&&Q.value.uploadProgress<100)),O=async()=>{await r(),b.value=[...s.value].filter((e=>1==e.is_enable)).map((e=>i(n({},e),{checked:!!e.is_enable})));[...b.value].filter((e=>e.checked)).length===s.value.length?(g.value=!0,y.value=!1):(g.value=!1,y.value=!0)},F=H((()=>{const e=s.value.map((e=>A.value.includes(e.network_name)?{network_name:e.network_name,is_enable:1}:{network_name:e.network_name,is_enable:0}));o(e).then((()=>{f.value=!1}))}),300);return P("openNetworkSetting",(async()=>{f.value=!0,await O()})),await l(),await O(),{tabElement:v,isShowDeviceNetworkSetting:f,url:k,limitItemNumber:h,categoriesTab:t,breadcrumb:[{text:"Settings",to:{name:"setting"}},{text:"Catalog"}],isLimit:w,isShowCategoryDropdown:x,categoryList:C,moreCategoryList:_,isActiveItemOnMoreCategory:S,currentActiveCategory:T,stateCategoryBuybackType:N,limitCategories:B,handleSelectSubCategoryDropdownItem:e=>{e&&c.push(e),x.value=!1},handleClickOutsideDropdown:U,handleOpenModalBuybackType:()=>{N.modal=!0,U()},selectedAllCarries:g,indeterminateCarriers:y,handleChangeAll:e=>{const a=[...b.value].filter((e=>e.checked)).length;b.value=b.value.map(((t,l,r)=>(a>0&&a<r.length&&(g.value=!0),i(n({},t),{checked:a>0&&a<r.length||e})))),y.value=!1},handleCheckedCarriersChange:()=>{const e=[...b.value].filter((e=>e.checked)).length;g.value=e===b.value.length,y.value=e>0&&e<b.value.length},handleUpdate:F,handleOpenISBNModal:()=>{c.push({name:"settingBuybackDeviceTab",params:{category:"books"},query:{isbn:"update"}})},handleUpdateCarrier:(e=[])=>{b.value=e},carriers:s,carriersModel:b,loading:d,isDisabledAll:V,isDisabledCheckBoxCarriers:D,priceUploadProcess:L}}}),me={class:"inline-block"},ge={class:"flex items-stretch mb-2"},ye=["innerHTML"],be={key:1},ve={style:{"max-height":"500px","overflow-y":"auto","overflow-x":"hidden"}},fe=["onClick"],he={class:"w-full"},ke={class:"flex"},we={class:"whitespace-nowrap mr-2"},Ce={key:1,class:"flex items-center justify-center w-full max-w-max px-4 bg-grey-01 overflow-hidden cursor-pointer"};var _e=z(pe,[["render",function(e,a,t,l,r,o){const s=b("DeviceCategorySetting"),n=b("Modal"),i=b("DeviceNetworkSetting"),d=b("Button"),c=b("Tooltip"),u=b("Tab"),p=b("Popover"),m=b("router-view"),g=v("loading"),y=v("outside");return f(),h(L,null,[w(n,{modelValue:e.stateCategoryBuybackType.modal,"onUpdate:modelValue":a[0]||(a[0]=a=>e.stateCategoryBuybackType.modal=a),title:"Category Settings","hide-footer":"",size:"md"},{default:C((()=>[w(s,{"price-upload-process":e.priceUploadProcess},null,8,["price-upload-process"])])),_:1},8,["modelValue"]),w(n,{title:"Cell Carriers Settings",modelValue:e.isShowDeviceNetworkSetting,"onUpdate:modelValue":a[1]||(a[1]=a=>e.isShowDeviceNetworkSetting=a)},{default:C((()=>[_((f(),h("div",null,[w(i,{"model-value":e.carriersModel,"onUpdate:modelValue":e.handleUpdateCarrier,carriers:e.carriers},null,8,["model-value","onUpdate:modelValue","carriers"])])),[[g,e.loading.carriers]])])),footer:C((()=>[w(c,{disabled:e.carriersModel.length>0,placement:"top",content:"At least one option must be selected"},{default:C((()=>[k("div",me,[w(d,{onClick:e.handleUpdate,loading:e.loading.carriers,disabled:e.carriersModel.length<1,color:"teal"},{default:C((()=>a[4]||(a[4]=[V(" Save Changes ")]))),_:1},8,["onClick","loading","disabled"])])])),_:1},8,["disabled"])])),_:1},8,["modelValue"]),k("div",ge,[w(u,{ref:"tabElement",class:"categories-tab w-full",items:e.categoryList},{title:C((t=>{var l,r;return[(null==(l=t.item)?void 0:l.image)?(f(),h("div",{key:0,class:"svg-load h-8 w-8 mr-4 bg-teal-04",style:D(`-webkit-mask-image: url('${null==(r=t.item)?void 0:r.image}')`)},null,4)):B("",!0),V(" "+A(t.item.name)+" ",1),w(c,{placement:"top"},{content:C((()=>{var e,a,l,r;return[(null==(a=null==(e=t.item)?void 0:e.set_pricing_status)?void 0:a.tooltip)?(f(),h("p",{key:0,class:"w-96",innerHTML:null==(r=null==(l=t.item)?void 0:l.set_pricing_status)?void 0:r.tooltip},null,8,ye)):(f(),h("p",be,"Upload ISBN"))]})),default:C((()=>{var l,r;return[k("div",null,["books"===t.item.id?(f(),S(d,{key:0,disabled:!(null==(r=null==(l=t.item)?void 0:l.set_pricing_status)?void 0:r.is_available),view:"smooth",dense:"",color:"teal",class:"hover:bg-teal-01 ml-4",onClick:U(e.handleOpenISBNModal,["prevent"])},{default:C((()=>a[5]||(a[5]=[k("i",{class:"material-icons"},"upload",-1)]))),_:2},1032,["disabled","onClick"])):B("",!0)])]})),_:2},1024)]})),_:1},8,["items"]),e.isLimit?(f(),S(p,{key:0,visible:e.isShowCategoryDropdown,width:180},{default:C((()=>[k("div",ve,[(f(!0),h(L,null,O(e.moreCategoryList,((a,t)=>(f(),h("div",{onClick:t=>e.handleSelectSubCategoryDropdownItem(a.to),key:t,class:"flex items-center px-3 py-4 cursor-pointer hover:bg-grey-lighten text-left",style:{"word-break":"break-word"}},[k("div",{class:"svg-load h-10 w-10 mr-4 bg-teal-04",style:D(`-webkit-mask-image: url('${null==a?void 0:a.image}')`)},null,4),k("span",he,A(a.name),1)],8,fe)))),128))])])),reference:C((()=>{var t;return[k("div",ke,[e.priceUploadProcess?(f(),h("div",Ce,a[7]||(a[7]=[k("span",{class:"whitespace-nowrap mr-2"},"More Categories",-1),k("i",{class:"material-icons"},"arrow_drop_down",-1)]))):_((f(),h("div",{key:0,onClick:a[2]||(a[2]=a=>e.isShowCategoryDropdown=!e.isShowCategoryDropdown),class:"flex items-center justify-center w-full max-w-max px-4 bg-grey-01 overflow-hidden cursor-pointer"},[k("span",we,A(e.isActiveItemOnMoreCategory&&e.currentActiveCategory?null==(t=e.currentActiveCategory)?void 0:t.name:"More Categories"),1),a[6]||(a[6]=k("i",{class:"material-icons"},"arrow_drop_down",-1))])),[[y,e.handleClickOutsideDropdown]]),k("div",{onClick:a[3]||(a[3]=(...a)=>e.handleOpenModalBuybackType&&e.handleOpenModalBuybackType(...a)),class:"select-none transition duration-200 cursor-pointer bg-teal-01 hover:bg-teal-04 hover:text-teal-01 text-teal-04 px-4 flex items-center justify-center"},a[8]||(a[8]=[k("i",{class:"material-icons"},"settings",-1)]))])]})),_:1},8,["visible"])):B("",!0)]),w(m)],64)}],["__scopeId","data-v-0c0be175"]]),Se=c({setup(){const{genSuspense:e}=d();return()=>e(_e)}});export{Se as default};
