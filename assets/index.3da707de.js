var e=Object.defineProperty,l=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,t=(l,a,s)=>a in l?e(l,a,{enumerable:!0,configurable:!0,writable:!0,value:s}):l[a]=s,i=(e,i)=>{for(var n in i||(i={}))a.call(i,n)&&t(e,n,i[n]);if(l)for(var n of l(i))s.call(i,n)&&t(e,n,i[n]);return e};import{S as n}from"./select.15c77568.js";import{f as o,_ as u}from"./index.9aa6481b.js";import{_ as r}from"./fieldset.49a14fc7.js";import{k as d,g as m,f as p,y as c,m as g,o as v,t as y,D as f,w as T,I as b,B as h,a2 as _,a3 as x,K as J,U as w}from"./vendor.f1efedad.js";const V=d({name:"EmailTemplateTimeDelay",components:{Fieldset:r,Select:n,Input:o},props:{sendingTimes:{type:Number,default:0,validator:e=>e>=0&&e<=3},sendingTimesJson:{type:Array,default:()=>[]},isWorkflow:{type:Boolean,default:!1}},emits:["update:sendingTimes","update:sendingTimesJson"],setup(e,{emit:l}){const a=m((()=>e.isWorkflow?[{name:"Immediately",value:"immediately"},{name:"Day",value:"day"},{name:"Hour",value:"hour"}]:[{name:"Day",value:"day"},{name:"Hour",value:"hour"}])),s=p([{times_value:1,type:"day"},{times_value:1,type:"day"},{times_value:1,type:"day"}]),t=p([]);c((()=>e.sendingTimesJson),(l=>{if(l.length>0){!u(l,s.value)&&(l.forEach(((e,l)=>{s.value[l]=i({},e)})),o(e.sendingTimes))}}),{deep:!0}),c((()=>e.sendingTimes),(e=>{o(e)}));const n=m({get:()=>e.sendingTimes,set:a=>{const s=Number(a);s!==e.sendingTimes&&(l("update:sendingTimes",s),o(s))}});function o(e){const a=s.value.slice(0,e);u(a,t.value)||(t.value=a,l("update:sendingTimesJson",a))}function u(e,l){if(e.length!==l.length)return!1;for(let a=0;a<e.length;a++)if(JSON.stringify(e[a])!==JSON.stringify(l[a]))return!1;return!0}return e.sendingTimesJson.forEach(((e,l)=>{s.value[l]=i({},e)})),o(e.sendingTimes),{localSendingTimes:n,localTimesJson:t,timeDelayOptions:a,getTriggerLabel:function(e){return`${e}${["st","nd","rd"][e-1]||"th"} Trigger Time Delay`},updateTriggerValue:function(e){const a=i({},t.value[e]);a.times_value=Number(a.times_value),a.times_value!==s.value[e].times_value&&(s.value[e]=a,l("update:sendingTimesJson",[...t.value]))},updateTriggerType:function(e){"immediately"===t.value[e].type?t.value[e].times_value=null:t.value[e].times_value||(t.value[e].times_value=1),t.value[e].type!==s.value[e].type&&(s.value[e]=i({},t.value[e]),l("update:sendingTimesJson",[...t.value]))}}}}),S={class:"space-y-8"},O={class:"flex items-center gap-x-2"},j={class:"w-56"},D={key:0},k={class:"p-4 border border-grey-01 rounded-lg mb-2"},N={class:"flex items-center gap-x-2 mb-4"},U={class:"grid sm:grid-cols-3 md:grid-cols-2 xl:grid-cols-3 gap-4"},E={class:"flex gap-x-2"};var I=u(V,[["render",function(e,l,a,s,t,i){const n=g("Tooltip"),o=g("RadioButton"),u=g("RadioGroup"),r=g("Input"),d=g("Select"),m=g("Fieldset");return v(),y("div",null,[f(m,{class:"rounded-lg"},{label:T((()=>l[1]||(l[1]=[b("Trigger Settings")]))),default:T((()=>[h("div",S,[h("div",null,[h("div",O,[l[4]||(l[4]=h("label",null,"How many triggers do you want to set?",-1)),f(n,{placement:"top"},{content:T((()=>l[2]||(l[2]=[h("div",null,[h("p",null," Choose how many notifications you want to send. "),h("ul",{class:"list-disc pl-5 mt-2 space-y-1"},[h("li",null,"1 trigger sends a single notification."),h("li",null,"2 or 3 triggers send follow-up notifications at the intervals you set.")])],-1)]))),default:T((()=>[l[3]||(l[3]=h("i",{class:"text-teal-04 material-icons cursor-pointer"},"info",-1))])),_:1})]),h("div",j,[f(u,{modelValue:e.localSendingTimes,"onUpdate:modelValue":l[0]||(l[0]=l=>e.localSendingTimes=l),class:"radio--full"},{default:T((()=>[(v(),y(_,null,x(["1","2","3"],(e=>f(o,{key:e,label:e},{default:T((()=>[b(J(e),1)])),_:2},1032,["label"]))),64))])),_:1},8,["modelValue"])])]),e.localSendingTimes>0?(v(),y("div",D,[h("div",k,[h("div",N,[l[7]||(l[7]=h("label",{class:"font-semibold"},"Time Delay",-1)),f(n,{placement:"top"},{content:T((()=>l[5]||(l[5]=[h("div",{style:{width:"400px"}},[h("p",null," Notifications are sent based on the intervals you specify (e.g., X days or X hours), starting from the moment the offer status is met. ")],-1)]))),default:T((()=>[l[6]||(l[6]=h("i",{class:"text-teal-04 material-icons cursor-pointer"},"info",-1))])),_:1})]),h("div",U,[(v(!0),y(_,null,x(e.localSendingTimes,(l=>(v(),y("div",{key:l},[h("label",null,J(e.getTriggerLabel(l)),1),h("div",E,[f(r,{modelValue:e.localTimesJson[l-1].times_value,"onUpdate:modelValue":[a=>e.localTimesJson[l-1].times_value=a,a=>e.updateTriggerValue(l-1)],modelModifiers:{number:!0},type:"number",min:"1",disabled:"immediately"===e.localTimesJson[l-1].type,style:{"max-width":"60px"}},null,8,["modelValue","onUpdate:modelValue","disabled"]),f(d,{modelValue:e.localTimesJson[l-1].type,"onUpdate:modelValue":[a=>e.localTimesJson[l-1].type=a,a=>e.updateTriggerType(l-1)],items:e.timeDelayOptions,by:"value",name:"name","no-border":"",class:"flex-1"},null,8,["modelValue","onUpdate:modelValue","items"])])])))),128))])])])):w("",!0)])])),_:1})])}]]);export{I as E};
