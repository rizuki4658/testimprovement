{"version":3,"file":"index.d909f1d9.js","sources":["../../src/views/setting/coupon-codes/index.vue","../../src/views/setting/coupon-codes/index.js"],"sourcesContent":["<template>\n  <div class=\"flex xl:flex-row flex-col justify-between mb-8\">\n    <div class=\"lg:flex lg:divide-x lg:divide-grey-01\">\n        <div class=\"flex items-center lg:pr-4 lg:mb-0 mb-4\">\n          <router-link :to=\"{ name: 'setting' }\" class=\"text-dark mr-4\"><span class=\"material-icons\">chevron_left</span></router-link>\n          <h5>Coupon Codes</h5>\n        </div>\n        <div class=\"lg:pl-4 flex items-center\">\n          <Breadcrumb :items=\"breadcrumb\">\n            <span class=\"material-icons\">chevron_right</span>\n          </Breadcrumb>\n        </div>\n      </div>\n      <Button view=\"outlined\" color=\"teal\" class=\"lg:mt-0 mt-4 ml-auto\" :to=\"{ name: 'settingCouponCodesCreate' }\" link><span class=\"material-icons\">add</span> Add New Coupon Code</Button>\n  </div>\n  <Card v-loading=\"loading.all\">\n    <div class=\"flex flex-col mt-2\">\n      <Table :data=\"stateAll.data\">\n        <TableColumn prop=\"owner\" label=\"Owner\" />\n        <TableColumn label=\"Amount\">\n          <template #default=\"scope\">\n            {{scope.row.type === 'Percentage' ?  `${scope.row.amount}%` : `$${scope.row.amount}`}}\n          </template>\n        </TableColumn>\n        <TableColumn prop=\"code\" label=\"Code\" />\n        <TableColumn prop=\"created_at\" label=\"Created Date\" />\n        <TableColumn label=\"\">\n          <template #default=\"scope\">\n            <div class=\"flex items-center justify-center lg:opacity-0 group-hover:opacity-100 transition-opacity\">\n              <Button view=\"smooth\" color=\"blue\" class=\"mr-4\" dense @click=\"editCoupon(scope.row.id)\">\n                <span class=\"material-icons text-xl\">edit</span>\n              </Button>\n               <Button view=\"smooth\" color=\"red\" dense @click=\"openDeleteModal(scope.row)\">\n                <span class=\"material-icons text-xl\">delete</span>\n              </Button>\n            </div>\n          </template>\n        </TableColumn>\n      </Table>\n      <Pagination v-model:page=\"filters.page\" v-model:limit=\"filters.limit\" :data=\"stateAll\" />\n    </div>\n  </Card>\n  <Modal v-model=\"modal.delete\" hide-footer hide-header>\n    <div class=\"flex flex-col items-center justify-center my-10\">\n      <div class=\"flex flex-col items-center justify-center mb-6\">\n        <img class=\"mb-6\" src=\"@/assets/icon/attention.svg\" alt=\"Success Icon\">\n        <h2 class=\"text-2xl mb-2\">Delete this Coupon Code</h2>\n        <p>Are you sure want to delete this coupon code?</p>\n      </div>\n      <div class=\"flex flex-wrap\">\n        <Button color=\"teal\" view=\"smooth\" class=\"mr-4\" @click=\"modal.delete = false\">Cancel</Button>\n        <Button color=\"red\" view=\"smooth\" @click=\"deleteCoupon\" :loading=\"loading.delete\">Yes</Button>\n      </div>\n    </div>\n  </Modal>\n</template>\n\n<script>\nimport { defineComponent, watch, ref } from 'vue'\nimport { useCouponCodes } from 'composable/setting'\nimport { useRouter } from 'vue-router'\nimport Card from 'bbUi/components/card/card.vue'\nimport Input from 'bbUi/components/input/input.vue'\nimport Button from 'bbUi/components/button/button.vue'\nimport Pagination from 'components/Pagination.vue'\nimport Breadcrumb from 'bbUi/components/breadcrumb/breadcrumb.vue'\nimport Modal from 'bbUi/components/modal/modal.vue'\nimport debounce from 'utils/debounce'\nimport { ElMessage } from 'element-plus'\n\nexport default defineComponent({\n  components: {\n    Card,\n    Input,\n    Button,\n    Breadcrumb,\n    Pagination,\n    Modal\n  },\n  async setup(props, { emit }) {\n    const { stateAll, loading, filters, actionAll, actionDelete, modal } = useCouponCodes()\n    const router = useRouter()\n    const selectedItem = ref(null)\n    const breadcrumb = [{\n      text: 'Settings',\n      to: {\n        name: 'setting'\n      }\n    }, {\n      text: 'Coupon Codes'\n    }]\n    const openDeleteModal = (item) => {\n      selectedItem.value = item\n      modal.delete = true\n    }\n    const deleteCoupon = async () => {\n      await actionDelete(selectedItem.value.id, async() => {\n        ElMessage({\n          type: 'success',\n          message: 'Coupon Code deleted'\n        })\n        await actionAll()\n      })\n      selectedItem.value = null\n      modal.delete = false\n    }\n    const editCoupon = (id) => router.push({\n      name: 'settingCouponCodesEdit',\n      params: {\n        id\n      }\n    })\n    watch(() => ({...filters}), debounce(async () => {\n      await actionAll()\n    }, 400), {\n      deep: true\n    })\n    \n    watch(() => ({limit: filters.limit}), () => filters.page = 1, {\n      deep: true\n    })\n\n    await actionAll()\n    return {\n      stateAll,\n      loading,\n      filters,\n      modal,\n      breadcrumb,\n      openDeleteModal,\n      deleteCoupon,\n      editCoupon\n    }\n  }\n})\n</script>","import { defineComponent } from 'vue'\nimport { useSuspense } from 'composable/components'\nimport index from './index.vue'\n\nexport default defineComponent({\n  setup() {\n    const { genSuspense } = useSuspense()\n\n    return () => genSuspense(index)\n  }\n})"],"names":["_sfc_main","defineComponent","components","Card","Input","Button","Breadcrumb","Pagination","Modal","[object Object]","props","emit","stateAll","loading","filters","actionAll","actionDelete","modal","useCouponCodes","router","useRouter","selectedItem","ref","watch","__spreadValues","debounce","async","deep","limit","page","breadcrumb","text","to","name","openDeleteModal","item","value","delete","deleteCoupon","id","_u","type","message","editCoupon","push","params","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_openBlock","_createElementBlock","_Fragment","_createElementVNode","_createVNode","_component_router_link","default","_withCtx","_cache","items","_ctx","_component_Button","view","color","_createBlock","_component_Card","_component_Table","_component_TableColumn","prop","label","scope","dense","_component_Pagination","onUpdate:page","$event","onUpdate:limit","_component_Modal","modelValue","onUpdate:modelValue","hide-footer","src","_imports_0","_hoisted_8","onClick","index","genSuspense","useSuspense"],"mappings":"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"}