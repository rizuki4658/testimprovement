import{u as e}from"./components.aaee2f92.js";import{f as t,_ as a,b as s}from"./index.35a87af4.js";import{C as o}from"./card.85454cb1.js";import{S as r}from"./select.5dc6bc5e.js";import{B as i}from"./Breadcrumb.a04d3c7a.js";import{u as d}from"./index.f40e4a9e.js";import{r as l}from"./index.54844a74.js";import{k as c,f as n,r as p,_ as u,m,o as f,t as x,B as b,D as g,n as y,w as v,K as j,U as T,$ as k,I as w,A as _}from"./vendor.9695fe57.js";import{T as B,c as C}from"./TextEditor.17462d6a.js";import{A as R}from"./setting.598aa5c3.js";import"./LoadingCard.fae900cb.js";import"./breadcrumb.f242deab.js";import"./index.6b6f6369.js";const A=c({components:{Input:t,TextEditor:B},props:{codes:{type:Array,default:()=>[]},data:{type:Object,default:()=>({receipt_text:""})}},setup(e){const t=n(null),a=p(e.data),s=p({editor:C.exports.Editor,config:{htmlSupport:{allow:[{styles:!0,classes:!0}]}}}),o=d({receipt_text:{required:l}},a,{$lazy:!0});return{refTextEditor:t,data:a,validation:o,ckeditor:s,validate:async()=>{if(!t.value.isEditorReady)return!1;return!!(await t.value.forceSave())&&(o.value.$validate(),!o.value.$invalid)},copyText:e=>{navigator.clipboard.writeText(e).then((()=>{u({type:"success",message:"Text copy to clipbord"})}))}}}}),E={class:"grid grid-cols-1"},S={class:"flex"},h={class:"mr-2"},F=["onClick"];const U=c({components:{Button:s,Card:o,Input:t,Select:r,Breadcrumb:i,ReceiptForm:a(A,[["render",function(e,t,a,s,o,r){const i=m("TextEditor"),d=m("TableColumn"),l=m("Table");return f(),x("div",E,[b("div",null,[g(i,{ref:"refTextEditor",modelValue:e.data.receipt_text,"onUpdate:modelValue":t[0]||(t[0]=t=>e.data.receipt_text=t),options:e.ckeditor},null,8,["modelValue","options"]),e.codes&&Array.isArray(e.codes)?(f(),y(l,{key:0,data:e.codes,class:"mt-6"},{default:v((()=>[g(d,{prop:"code",label:"Code"},{default:v((t=>[b("div",S,[b("span",h,j(t.row.code),1),b("i",{class:"material-symbols-outlined text-lg text-teal-04",onClick:a=>e.copyText(t.row.code)},"content_copy",8,F)])])),_:1}),g(d,{prop:"desc",label:"Description"})])),_:1},8,["data"])):T("",!0)])])}]])},async setup(e,{emit:t}){const a=n(null),{state:s,data:o,loading:r,actionAll:i,actionUpdate:d}=R();await i();return{refReceiptForm:a,breadcrumb:[{text:"Settings",to:{name:"setting"}},{text:"Buyback Receipt"}],stateAll:s,data:o,loading:r,updateReceipt:async()=>{if(a.value){r.update=!0;await a.value.validate()&&await d((()=>{u({type:"success",message:"Buyback receipt changed"})}))}}}}}),$={class:"flex justify-between lg:items-center md:items-end md:flex-row flex-col items-start mb-8"},I={class:"flex justify-end"};var V=a(U,[["render",function(e,t,a,s,o,r){const i=m("Breadcrumb"),d=m("ReceiptForm"),l=m("Button"),c=m("Card"),n=k("loading");return f(),x("div",null,[b("div",$,[g(i,{pageTitle:"Buyback Receipt",backTo:{name:"setting"},items:e.breadcrumb},null,8,["items"])]),g(c,null,{header:v((()=>t[1]||(t[1]=[b("h5",{class:"text-lg"},"Receipt Text",-1)]))),footer:v((()=>[b("div",I,[g(l,{color:"teal",view:"smooth",onClick:e.updateReceipt,loading:e.loading.update},{default:v((()=>t[2]||(t[2]=[w("Save")]))),_:1},8,["onClick","loading"])])])),default:v((()=>[_(g(d,{ref:"refReceiptForm",data:e.data,"onUpdate:data":t[0]||(t[0]=t=>e.data=t),codes:e.stateAll.receipt.codes,class:"mt-6"},null,8,["data","codes"]),[[n,e.loading.all]])])),_:1})])}]]),D=c({setup(){const{genSuspense:t}=e();return()=>t(V)}});export{D as default};
