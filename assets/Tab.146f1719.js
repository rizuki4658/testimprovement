var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,i=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,s=(e,a)=>{for(var t in a||(a={}))n.call(a,t)&&i(e,t,a[t]);if(l)for(var t of l(a))o.call(a,t)&&i(e,t,a[t]);return e},d=(e,l)=>a(e,t(l));import{j as r,r as u,$ as c,o as v,t as m,n as p,w as y,B as h,U as f,ap as g,A as _,I as b,D as k,a1 as w,f as x,g as C,m as I,q as S,S as D,K as P,aQ as V,a4 as $,_ as A,W as M,s as L,y as j,a3 as U,a2 as T,F as O,aR as R,T as N,G as E,H as z,k as F,a6 as B,O as q,L as J,a5 as G,z as Z}from"./vendor.9695fe57.js";import{z as Y,s as H,X as K,j as Q,b as W,f as X,d as ee,t as ae,g as te,_ as le,u as ne,P as oe,e as ie,r as se,i as de,S as re,W as ue,T as ce}from"./index.67cab78b.js";import{f as ve}from"./format.f845777a.js";import{f as me,a as pe}from"./date.f86face7.js";import{C as ye}from"./card.ecf283cd.js";import{_ as he}from"./tab.0e26a59e.js";import{C as fe}from"./Currency.4530032a.js";import{F as ge}from"./FilterDropdown.b6183eb4.js";import{B as _e}from"./BDropdown.a42e07ae.js";import{B as be}from"./BTable.07463b10.js";import{_ as ke}from"./badge.15fdcd82.js";import{_ as we}from"./attention.c511405b.js";import{P as xe}from"./Info.dd745b76.js";import{i as Ce}from"./inventory.a027d528.js";import{_ as Ie}from"./fieldset.684cbbdd.js";import{S as Se}from"./select.2449bf30.js";import{A as De,E as Pe,P as Ve,S as $e,a as Ae,V as Me,C as Le,b as je,Z as Ue,c as Te,d as Oe,G as Re,F as Ne,e as Ee,f as ze,g as Fe,I as Be,D as qe,B as Je,h as Ge,R as Ze,i as Ye}from"./Custom.c72650e6.js";import{B as He,C as Ke,R as Qe,P as We}from"./payment.c40fe2f6.js";import{I as Xe}from"./InputPhone.bc7f0d85.js";import{u as ea}from"./index.f40e4a9e.js";import{r as aa}from"./index.54844a74.js";import{c as ta,e as la}from"./index.6b6f6369.js";import{C as na,a as oa}from"./CustomTableExport.a23fa9d2.js";import"./auto-complete.ed3347bf.js";import"./Accordion.91dafea7.js";import"./BBTable.0d52f0bf.js";import"./setting.dd3979cd.js";import"./buyback.c5a2404e.js";import"./SelectCountry.497c5276.js";import"./vue-draggable-next.esm-bundler.4467bcb1.js";const ia=[{id:"all",description:null,short_name:"All",status_name:"All",total:0},{id:0,description:null,short_name:"Available",status_name:"Available",total:0},{id:1,description:null,short_name:"Pending",status_name:"Pending",total:0},{id:2,description:null,short_name:"Sold",status_name:"Sold",total:0},{id:-1,description:null,short_name:"Deleted",status_name:"Deleted",total:0},{id:4,description:null,short_name:"Moved",status_name:"Moved",total:0},{id:5,description:null,short_name:"Not Available",statis_name:"Not Available",total:0}],sa=r("imei",{state:()=>({imeiCheck:{isLoading:!1,result:null,tempPayload:null},imeiCheckPrint:{isLoading:!1,result:null,tempPayload:null}}),actions:{async $getImeiCheck(e){if(JSON.stringify(this.imeiCheck.tempPayload)===JSON.stringify(e)&&this.imeiCheck.result)return;this.imeiCheck.tempPayload=e;const a=await Y({url:"/v1/pos/order/product-check-imei",method:"post",data:d(s({},e),{_method:"POST"})});this.imeiCheck.result=a},async $getImeiCheckPrint(e,a){if(JSON.stringify(this.imeiCheckPrint.tempPayload)===JSON.stringify(e)&&this.imeiCheckPrint.result)return;this.imeiCheckPrint.tempPayload=e;const t=await Y({url:"/v1/pos/order/product-check-imei/"+(a?"print-"+a:"print"),method:"post",data:d(s({},e),{_method:"POST"}),responseType:"arraybuffer"});this.imeiCheckPrint.result=t}}}),da=r("inventory",{state:()=>({_tabs:ia,cost:{isLoading:!1},inventory:{isLoading:!1,statusId:null,search:null,result:null,page:1,limit:10,controller:null},inventoryExport:{params:void 0,isLoading:!1},filter:{all:{isLoading:!1},location:{isLoading:!1,result:null,controller:null,tempParam:null},manufacturer:{isLoading:!1,result:null,controller:null,tempParam:null},model:{isLoading:!1,result:null,controller:null},size:{isLoading:!1,result:null},network:{isLoading:!1,result:null},condition:{isLoading:!1,result:null}},filterTags:{},status:{isLoading:!1},_timeZone:null,_user:null}),getters:{user:e=>e._user,enablePhoneCheck(e){var a;return 1===(null==(a=e._user)?void 0:a.is_integration_phonecheck_enable)},tabs:e=>e._tabs.map((e=>({id:e.id,name:e.short_name,to:{name:"inventoryTab",params:{statusId:`${e.id}`}}}))),dateOptions:e=>({disabledDate:a=>a.getTime()>e._timeZone.getTime()})},actions:{getPaginateArray(e,a){const t=e,l=[];for(let n=0;n<t.length;n+=a)l.push(t.slice(n,n+a));return l},getStatusId(e){this.inventory.statusId="all"!==e?Number(e):"all"},getTimeZone(e){this._timeZone=e},async $getDataUser(){this._user=H.state.user.me},async $getInventory(e){var a,t,l,n,o,i,r,u,c,v,m,p,y,h,f,g,_,b,k,w,x,C,I,S,D,P;this.cost.isLoading=!0;try{const[e,V]=null!=(n=null!=(l=null==(a=this.filterTags)?void 0:a.added)?l:null==(t=this.filterTags)?void 0:t.date)?n:[],[$,A]=null!=(i=null==(o=this.filterTags)?void 0:o.sold)?i:[],M={status:this.inventory.statusId,search:this.inventory.search,page:this.inventory.page,limit:this.inventory.limit,store_location_id:null!=(c=null==(u=null==(r=this.filterTags)?void 0:r.location)?void 0:u.id)?c:null,brand:null!=(p=null==(m=null==(v=this.filterTags)?void 0:v.manufacturer)?void 0:m.join(","))?p:null,model:null!=(f=null==(h=null==(y=this.filterTags)?void 0:y.model)?void 0:h.join(","))?f:null,network:null!=(b=null==(_=null==(g=this.filterTags)?void 0:g.network)?void 0:_.join(","))?b:null,size:null!=(x=null==(w=null==(k=this.filterTags)?void 0:k.size)?void 0:w.join(","))?x:null,condition:null!=(S=null==(I=null==(C=this.filterTags)?void 0:C.condition)?void 0:I.join(","))?S:null,from:e,to:V,sold_at_from:$,sold_at_to:A};this.inventoryExport.params=M;const L=await Y({url:"/v2/pos/inventory/all",params:M,method:"get",signal:null==(P=null==(D=this.inventory)?void 0:D.controller)?void 0:P.signal});this.inventory.result=d(s({},L),{header_table:[...L.header_table,{column_name:"",key:"deeplink"}],data:L.data.map((e=>d(s({},e),{loading:!1,deeplink:{}})))})}catch(V){console.error("Failed to fetch inventory",V)}finally{this.cost.isLoading=!1}},async $getExport(e,a){const t=await Y({url:"/v1/pos/inventory/csv",params:s({status:this.inventory.statusId,search:this.inventory.search},e),method:"get",responseType:"arraybuffer"});K(t,a||"inventory-csv",ve(e.extension))},async $getFilterLocation(e){var a,t,l;if(this.filter.location.tempParam===JSON.stringify(e))return;const n=await Y({url:"/v1/pos/settings/store-location/filter",params:e,signal:null==(l=null==(t=null==(a=this.filter)?void 0:a.location)?void 0:t.controller)?void 0:l.signal});this.filter.location.tempParam=JSON.stringify({search:e.search,page:e.page}),this.filter.location.result=n},async $getFilterManufacturer(e,a=!1){var t,l,n,o,i,s;if(this.filter.manufacturer.tempParam===JSON.stringify(e))return;const d=await Y({url:"/v1/pos/inventory/filter?manufacturer",params:e,signal:a?null==(n=null==(l=null==(t=this.filter)?void 0:t.model)?void 0:l.controller)?void 0:n.signal:null==(s=null==(i=null==(o=this.filter)?void 0:o.manufacturer)?void 0:i.controller)?void 0:s.signal});if(this.filter.manufacturer.tempParam=JSON.stringify(e),a)d.model=this.getPaginateArray(d.model,10),this.filter.model.result=d.model;else{Object.keys(d).forEach((e=>{d[e]&&"location"!==e&&(d[e]=this.getPaginateArray(d[e],10),this.filter[e].result=d[e])}))}},$updateSoldStatus:async e=>await Y({url:`/v1/pos/inventory/sold-price/${e.id}`,method:"post",data:d(s({},e.data),{_method:"PUT"})}),$updateChangeStatus:async e=>await Y({url:`/v1/pos/inventory/status/${e.id}`,method:"post",data:d(s({},e.data),{_method:"PUT"})}),$getInventoryDeepLink:async e=>await Y({url:"/v1/pos/inventory/deeplink",method:"get",params:e})}}),ra=r("inventoryCrud",{state:()=>({delete:{isLoading:!1},reset:{isLoading:!1},restore:{isLoading:!1}}),actions:{$updateNotes:async e=>await Y({url:`/v1/pos/inventory/notes/${e.id}`,method:"post",data:d(s({},e),{_method:"PUT"})}),$onDelete:async e=>await Y({url:`/v1/pos/inventory/${e}`,method:"post",data:{_method:"DELETE"}}),$onReset:async e=>await Y({url:`/v1/pos/inventory/reset/${e}`,method:"post",data:{_method:"PUT"}}),$onRestore:async e=>await Y({url:`/v1/pos/inventory/restore/${e}`,method:"post"})}}),ua=r("inventoryReconcile",{state:()=>({reconcile:{isLoading:!1,result:null}}),actions:{async $onReconcile(e){const a=await Y({url:"/v1/pos/inventory/data-match",method:"post",data:e});this.reconcile.result=a}}}),ca=r("inventoryOthers",{state:()=>({move:{locations:{isLoading:!1,result:null},isloading:!1,result:null},instantly:{isloading:!1,result:null},phoneCheck:{isloading:!1,result:null},phoneCheckPrint:{isloading:!1,result:null}}),getters:{locations(e){var a,t;return null!=(t=null==(a=e.move.locations)?void 0:a.result)?t:[]}},actions:{async $getMoveLocations(){const e=await Y({url:"/v1/pos/inventory/move-location",method:"get"});this.move.locations.result=e},async $setMoveInventory(e){var a;const t=null!=(a=null==e?void 0:e.id)?a:"bulk";await Y({url:`/v1/pos/inventory/move-location/${t}`,method:"post",data:e.data})},async $getPhoneCheck(e){const a=sa();await a.$getImeiCheck(e),this.phoneCheck.result=a.imeiCheck.result},async $getPhoneCheckPrint(e,a){const t=sa();await t.$getImeiCheckPrint(e,a),this.phoneCheckPrint.result=t.imeiCheckPrint.result}}});const va={key:0},ma={key:1},pa={key:2},ya={key:0,class:"flex items-center h-full"},ha={class:"text-lg text-grey-04"},fa={class:"font-semibold"},ga={__name:"InventoryAlerts",props:{alertType:{type:String,default:"default"}},setup(e){const a={default:"closedInventoryAlertDefault",pending:"closedInventoryAlertPending"},t=da(),l=e,n=u({default:1!=localStorage.getItem(a[l.alertType]),pending:1!=localStorage.getItem(a[l.alertType])}),o=()=>{n[l.alertType]=!1,localStorage.setItem(a[l.alertType],"1")};return(e,a)=>{const i=c("loading");return v(),m(w,null,["default"===l.alertType?(v(),m("div",va,[n.default?(v(),p(Q,{key:0,color:"orange",view:"smooth",class:"mb-5",dense:""},{left:y((()=>a[0]||(a[0]=[h("span",{class:"material-icons text-4xl"},"info",-1)]))),right:y((()=>[h("span",{class:"material-icons my-auto ml-auto cursor-pointer",onClick:o}," close ")])),default:y((()=>[a[1]||(a[1]=h("div",{class:"flex items-center h-full"}," After a buyback offer is marked completed, items will automatically be added to your available inventory. ",-1))])),_:1})):f("",!0)])):f("",!0),"pending"===l.alertType?(v(),m("div",ma,["1"==g(t).inventory.statusId&&n.pending?(v(),p(Q,{key:0,color:"orange",view:"smooth",dense:""},{left:y((()=>a[2]||(a[2]=[h("span",{class:"material-icons text-4xl"},"info",-1)]))),right:y((()=>[h("span",{class:"material-icons my-auto ml-auto cursor-pointer",onClick:o}," close ")])),default:y((()=>[a[3]||(a[3]=h("div",{class:"flex items-center h-full"},[h("p",{class:"text-md"},"Pending inventory is inventory that is currently on an invoice waiting to be paid.")],-1))])),_:1})):f("",!0)])):f("",!0),"cost"===l.alertType?(v(),m("div",pa,["0"==g(t).inventory.statusId?_((v(),p(Q,{key:0,color:"teal",view:"smooth",dense:"",class:"mb-5"},{left:y((()=>a[5]||(a[5]=[h("img",{src:"/assets/calculator.b6f1a97b.svg",alt:"Icon - calculator",class:"mr-5"},null,-1)]))),default:y((()=>{var e,l,n,o;return[(null==(n=null==(l=null==(e=g(t))?void 0:e.inventory)?void 0:l.result)?void 0:n.total_cost)?(v(),m("div",ya,[h("p",ha,[a[4]||(a[4]=b(" Total available inventory cost ")),h("span",fa,[k(fe,{value:null!=(o=g(t).inventory.result.total_cost)?o:0},null,8,["value"])])])])):f("",!0)]})),_:1})),[[i,g(t).cost.isLoading]]):f("",!0)])):f("",!0)],64)}}},_a={key:0},ba={key:1},ka={class:"font-bold"},wa={key:2},xa={class:"flex flex-wrap items-center justify-between"},Ca={__name:"InventoryReconcile",setup(e){const a=da(),t=ua(),l=x(!1),n=x(),o=x(0),i=x({}),s=x(0),d=C((()=>{var e,a,l;return!(null==(l=null==(a=null==(e=t.reconcile)?void 0:e.result)?void 0:a.imei)?void 0:l.length)})),r=()=>{l.value=!0,t.reconcile.result&&(o.value=1,s.value=1,i.value=t.reconcile.result)},u=()=>{l.value=!1},f=async()=>{switch(o.value){case 0:await ae(t.reconcile,(()=>t.$onReconcile({confim:s.value,imei_sn:JSON.stringify(n.value.split("\n"))}).then((()=>{s.value=1,i.value=t.reconcile.result})))),o.value++;break;case 1:await ae(t.reconcile,(()=>t.$onReconcile({confim:s.value,imei_sn:JSON.stringify(n.value.split("\n"))}).then((()=>{i.value={},s.value=0,n.value="",l.value=!1,t.reconcile.result=null,o.value=0,A({type:"success",message:"Changes saved"})})))),await ae(a.inventory,(()=>t.$getIventory()))}};return(e,a)=>{const s=I("TableColumn"),w=I("Table"),x=c("loading");return v(),m("div",null,[h("div",{onClick:r},[S(e.$slots,"default")]),(v(),p($,{to:"body"},[k(ee,{modelValue:l.value,"onUpdate:modelValue":a[1]||(a[1]=e=>l.value=e)},{header:y((()=>a[2]||(a[2]=[h("h6",{class:"font-medium"},"Reconcile Inventory",-1)]))),footer:y((()=>[h("div",xa,[h("a",{class:"text-red-04 py-4 px-4 hover:text-red-02",onClick:D(u,["prevent"])}," Cancel "),k(W,{color:"teal",disabled:d.value,loading:g(t).reconcile.isLoading,onClick:f},{default:y((()=>[b(P(1===o.value?"Proceed":"Continue"),1)])),_:1},8,["disabled","loading"])])])),default:y((()=>[_((v(),m("div",null,[k(V,{name:"fade"},{default:y((()=>[0===o.value?(v(),m("div",_a,[k(X,{modelValue:n.value,"onUpdate:modelValue":a[0]||(a[0]=e=>n.value=e),type:"textarea",block:"",rows:"6"},{label:y((()=>a[3]||(a[3]=[h("p",{class:"font-medium"},"Scan IMEI or Serial Numbers into it's own row",-1)]))),_:1},8,["modelValue"])])):1===o.value?(v(),m("div",ba,[k(Q,{class:"mb-6",color:"red",view:"smooth"},{default:y((()=>{var e;return[h("span",ka,P(null!=(e=i.value.total)?e:0)+" Item(s) will be deleted from your inventory ",1),a[4]||(a[4]=b(". You can restore these items if needed within the deleted tab. "))]})),_:1}),k(w,{data:i.value.imei},{default:y((()=>[k(s,{label:"",width:"50"},{default:y((({$index:e})=>[b(P(e+1),1)])),_:1}),k(s,{prop:"imei",label:"IMEI/SN"}),k(s,{prop:"name",label:"Item"})])),_:1},8,["data"])])):(v(),m("div",wa,a[5]||(a[5]=[h("p",{class:"text-center text-red-04"},"Something went wrong",-1)])))])),_:1})])),[[x,g(t).reconcile.isLoading]])])),_:1},8,["modelValue"])]))])}}},Ia={class:"space-y-8"},Sa={class:"flex xl:flex-row flex-col justify-between items-center"},Da={class:"space-x-4 flex"},Pa={__name:"InventoryHeader",setup:e=>(e,a)=>{const t=I("DropdownItem"),l=I("DropdownMenu"),n=I("Dropdown");return v(),m("div",Ia,[h("div",Sa,[a[3]||(a[3]=h("div",{class:"lg:flex lg:divide-x lg:divide-grey-01 xl:mb-0 mb-4"},[h("div",{class:"flex lg:pr-4 lg:mb-0 mb-4"},[h("h5",{class:"font-medium"},"Inventory")])],-1)),h("div",Da,[h("div",null,[k(W,{color:"teal",class:"lg:inline-block block",to:{name:"inventoryCreate"},link:""},{default:y((()=>a[0]||(a[0]=[h("span",{class:"material-icons"},"add",-1),b(" Add New Inventory ")]))),_:1})]),k(n,{placement:"bottom","hide-on-click":!0},{default:y((()=>[k(W,{style:{padding:".8rem"},color:"teal"},{default:y((()=>a[1]||(a[1]=[h("i",{class:"material-icons"},"more_vert",-1)]))),_:1})])),dropdown:y((()=>[k(l,null,{default:y((()=>[k(t,null,{default:y((()=>[k(Ca,null,{default:y((()=>a[2]||(a[2]=[h("i",{class:"material-icons mr-2 text-xl"},"note_add",-1),b(" Reconcile Inventory ")]))),_:1})])),_:1})])),_:1})])),_:1})])]),k(ga,{"alert-type":"default"})])}},Va={__name:"InventoryFiltersSearch",setup(e){const a=da(),t=te((async()=>{await ae(a.inventory,(()=>a.$getInventory()))}),300);return(e,l)=>(v(),p(X,{modelValue:g(a).inventory.search,"onUpdate:modelValue":l[0]||(l[0]=e=>g(a).inventory.search=e),placeholder:"Search Everything",class:"w-full",icon:"",onInput:g(t)},{icon:y((()=>l[1]||(l[1]=[h("span",{class:"material-icons"},"search",-1)]))),_:1},8,["modelValue","onInput"]))}};const $a={ref:"container"};var Aa=le({name:"DatePickerPanelDirect",props:{modelValue:{type:Array,default:()=>[]},options:{type:Object,default:()=>({})}},emits:["update:modelValue"],setup(e,a){const t=C({get:()=>e.modelValue,set:e=>a.emit("update:modelValue",e)}),l=x(),n=x();return M((async()=>{await L(),setTimeout((()=>{var e;const a=null==(e=n.value)?void 0:e.querySelector(".date-picker-panel-clone");if(!a)return;const t=a.getAttribute("aria-describedby"),l=document.getElementById(t);l&&(l.style.display="inline-block",l.style.position="static",a.style.display="none")}),100)})),j(t,(()=>{L((()=>{var e;const a=null==(e=n.value)?void 0:e.querySelector(".date-picker-panel-clone");if(!a)return;const t=a.getAttribute("aria-describedby"),l=document.getElementById(t);l&&(l.style.display="inline-block",l.style.position="static")}))})),{date:t,datePickerRef:l,container:n}}},[["render",function(e,a,t,l,n,o){const i=I("DatePicker");return v(),m("div",$a,[k(i,U({modelValue:l.date,"onUpdate:modelValue":a[0]||(a[0]=e=>l.date=e)},t.options,{type:"daterange","append-to-body":!1,class:"date-picker-panel-clone","popper-class":"custom-datepicker",ref:"datePickerRef"}),null,16,["modelValue"])],512)}]]);const Ma={class:"text-grey-04 flex items-center gap-x-1 max-w-xs"},La={key:0},ja={key:1,class:"material-icons"},Ua={class:"flex flex-col p-3"},Ta={key:0},Oa={key:1,class:"px-2 py-2 w-full max-w-xs overflow-x-hidden"},Ra={key:0,class:"text-teal-04"},Na=["onClick"],Ea={key:2,class:"px-2 py-2 w-full max-w-md overflow-x-hidden"},za={key:0,class:"text-teal-04 space-y-2"},Fa={class:"space-y-2 max-h-96 overflow-y-auto"},Ba={key:1,class:"h-16 flex items-center justify-center"},qa={__name:"InventoryFiltersColumn",setup(e,{expose:a}){const t=da(),{dateByTimezone:l}=ne(),n=x({date:[],startDate:null,endDate:null,dateAdded:[],dateSold:[],startDateAdded:null,endDateAdded:null,startDateSold:null,endDateSold:null,searchLocation:null,pageLocation:1,selectedLocation:null,manufacturPage:{manufacturer:1,model:1,size:1,network:1,condition:1},selectedManufactur:{manufacturer:[],model:[],size:[],network:[],condition:[]}}),o=x(!1);x();const i=x([{name:"Select Date",key:"date",filter_key:"date",count_selected:0},{name:"Location",key:"location",filter_key:"location",count_selected:0},{name:"Brand",key:"manufacturer",filter_key:"manufacturer",count_selected:0},{name:"Model",key:"model",count_selected:0,filter_key:"manufacturer"},{name:"Size",key:"size",filter_key:"manufacturer",count_selected:0},{name:"Network",key:"network",filter_key:"manufacturer",count_selected:0},{name:"Condition",key:"condition",filter_key:"manufacturer",count_selected:0}]),r=C((()=>{var e,a,t,l;return!((null==(e=n.value.selectedLocation)?void 0:e.id)||n.value.selectedManufactur.manufacturer.length||n.value.selectedManufactur.model.length||n.value.selectedManufactur.size.length||n.value.selectedManufactur.network.length||n.value.selectedManufactur.condition.length||(null==(a=n.value.date)?void 0:a.length)||(null==(t=n.value.dateAdded)?void 0:t.length)||(null==(l=n.value.dateSold)?void 0:l.length))})),u=async e=>{e&&e.key},I=async()=>{var e,a,l,o;await ae(t.filter.location,(()=>t.$getFilterLocation({search:n.value.searchLocation,page:n.value.pageLocation}))),n.value.selectedLocation||(n.value.selectedLocation=null!=(o=null==(l=null==(a=null==(e=t.filter)?void 0:e.location)?void 0:a.result)?void 0:l.data[0])?o:null)},S=async(e,a=!1)=>{await ae(a?t.filter.model:t.filter[e],(()=>t.$getFilterManufacturer({manufacturer:n.value.selectedManufactur.manufacturer.join(","),model:n.value.selectedManufactur.model.join(","),size:n.value.selectedManufactur.size.join(","),network:n.value.selectedManufactur.network.join(","),condition:n.value.selectedManufactur.condition.join(",")},a)))},D=te((async()=>{n.value.pageLocation=1,await I()}),300),V=async e=>{n.value.pageLocation=e,await I()},$=(e,a,t=(()=>{}))=>{"added"===a?(n.value.startDateAdded=me(new Date(n.value.dateAdded[0])),n.value.endDateAdded=me(new Date(n.value.dateAdded[1]))):"sold"===a?(n.value.startDateSold=me(new Date(n.value.dateSold[0])),n.value.endDateSold=me(new Date(n.value.dateSold[1]))):(n.value.startDate=me(new Date(n.value.date[0])),n.value.endDate=me(new Date(n.value.date[1]))),t()},A=async e=>{o.value=!1,e&&await(async()=>{await Promise.all([I(),S("all")])})()},M=()=>{t.filterTags=se(s(s(s(d(s({},se(n.value.selectedManufactur)),{location:se(n.value.selectedLocation)}),n.value.startDateSold&&!!n.value.endDateSold&&{sold:[n.value.startDateSold,n.value.endDateSold]}),n.value.startDateAdded&&n.value.endDateAdded&&{added:[n.value.startDateAdded,n.value.endDateAdded]}),n.value.startDate&&n.value.endDate&&{date:[n.value.startDate,n.value.endDate]}))},L=e=>e.charAt(0).toUpperCase()+e.slice(1),j=e=>{n.value[`${e}`]=null,n.value[`start${L(e)}`]=null,n.value[`end${L(e)}`]=null},R=e=>{var a,l,o,r,u,c,v,m;if("string"==typeof e){if("location"===e)n.value.selectedLocation=null!=(r=null==(o=null==(l=null==(a=t.filter)?void 0:a.location)?void 0:l.result)?void 0:o.data[0])?r:null;else{if(["date","added","sold"].includes(e)){j({date:"date",added:"dateAdded",sold:"dateSold"}[e])}n.value.selectedManufactur[e]=[]}i.value=i.value.map((a=>d(s({},a),{count_selected:a.key===e?0:a.count_selected}))),M()}else n.value.selectedManufactur={manufacturer:[],model:[],size:[],network:[],condition:[]},n.value.selectedLocation=null!=(m=null==(v=null==(c=null==(u=t.filter)?void 0:u.location)?void 0:c.result)?void 0:v.data[0])?m:null,["date","dateAdded","dateSold"].forEach((e=>j(e))),i.value=i.value.map((e=>d(s({},e),{count_selected:0}))),t.filterTags=se({})};return t.getTimeZone(l.value),a({data:n,onResetFilter:R}),(e,a)=>{const l=c("loading");return v(),m("div",null,[k(ge,{loading:g(t).inventory.isLoading,"expand-on-hover":!1,filters:i.value,"reset-disabled":r.value,onItemClick:u,onCollapse:A,onApplyFilter:M,onResetFilter:R},{label:y((({item:e})=>{var a,o,i,s,d,r,u,c;return[_((v(),m("div",null,[h("p",Ma,[b(P(e.name)+" ",1),e.meta.count_selected>0?(v(),m("span",La," ("+P(e.meta.count_selected)+") ",1)):f("",!0),"date"===e.meta.key&&((null==(a=n.value.date)?void 0:a.length)||(null==(o=n.value.dateSold)?void 0:o.length)||(null==(i=n.value.dateAdded)?void 0:i.length))?(v(),m("span",ja," check ")):f("",!0)])])),[[l,(null==(d=null==(s=g(t))?void 0:s.filter[e.meta.key])?void 0:d.isLoading)||(null==(c=null==(u=null==(r=g(t))?void 0:r.filter)?void 0:u.all)?void 0:c.isLoading)]])]})),dropdown:y((({filter:e,collapse:o})=>{var s,d,r,u,c,x,C,I,A,M,L,j,R,N,E,z,F,B;return[h("div",Ua,["date"===e.key?(v(),m("div",Ta,[2==g(t).inventory.statusId?(v(),m(w,{key:0},[k(_e,{bottom:"",block:"","min-width":200,offset:10,"max-height":540},{dropdown:y((({collapse:e})=>[k(Aa,{modelValue:n.value.dateAdded,"onUpdate:modelValue":[a[0]||(a[0]=e=>n.value.dateAdded=e),a=>$(0,"added",e)],options:g(t).dateOptions},null,8,["modelValue","options","onUpdate:modelValue"])])),default:y((()=>[a[4]||(a[4]=h("div",{class:"bg-grey-01 hover:bg-opacity-50 bg-opacity-0 rounded-md"},[h("div",{class:"px-6 py-4 cursor-pointer"}," Date Added ")],-1))])),_:1}),k(_e,{bottom:"",block:"","min-width":200,offset:10,"max-height":540},{dropdown:y((({collapse:e})=>[k(Aa,{modelValue:n.value.dateSold,"onUpdate:modelValue":[a[1]||(a[1]=e=>n.value.dateSold=e),a=>$(0,"sold",e)],options:g(t).dateOptions},null,8,["modelValue","options","onUpdate:modelValue"])])),default:y((()=>[a[5]||(a[5]=h("div",{class:"bg-grey-01 hover:bg-opacity-50 bg-opacity-0 rounded-md"},[h("div",{class:"px-6 py-4 cursor-pointer"}," Date Sold ")],-1))])),_:1})],64)):(v(),p(Aa,{key:1,modelValue:n.value.date,"onUpdate:modelValue":[a[2]||(a[2]=e=>n.value.date=e),e=>$(0,"date",o)],options:g(t).dateOptions},null,8,["modelValue","options","onUpdate:modelValue"]))])):f("",!0),"location"===e.key?(v(),m("div",Oa,[k(X,{modelValue:n.value.searchLocation,"onUpdate:modelValue":a[3]||(a[3]=e=>n.value.searchLocation=e),block:"",icon:"",placeholder:"Search location",onInput:g(D)},{icon:y((()=>a[6]||(a[6]=[h("span",{class:"material-icons"},"search",-1)]))),_:1},8,["modelValue","onInput"]),_((v(),m("div",null,[(null==(u=null==(r=null==(d=null==(s=g(t).filter)?void 0:s.location)?void 0:d.result)?void 0:r.data)?void 0:u.length)?(v(),m("div",Ra,[(v(!0),m(w,null,T(null==(I=null==(C=null==(x=null==(c=g(t))?void 0:c.filter)?void 0:x.location)?void 0:C.result)?void 0:I.data,(e=>{var a,t;return v(),m("div",{key:e.id,class:"flex items-center py-3 px-4 my-2 hover:bg-teal-lighten cursor-pointer select-none focus:text-teal-04 focus:font-semibold rounded-lg gap-x-1",tabindex:"0",onClick:a=>((e,a=(()=>{}))=>{n.value.selectedLocation=e;const t=i.value.findIndex((e=>"location"===e.key));i.value[t]&&(i.value[t].count_selected=n.value.selectedLocation.id?1:0),"function"==typeof a&&a()})(e,o)},[h("span",{class:O(e.id===(null==(a=n.value.selectedLocation)?void 0:a.id)&&"font-medium")},P(e.name),3),h("span",{class:O(["material-icons","text-lg","text-teal-04","transition-opacity","ease-in-out duration-300",e.id===(null==(t=n.value.selectedLocation)?void 0:t.id)?"opacity-100":"opacity-0"])}," check_circle ",2)],8,Na)})),128)),k(oe,{page:n.value.pageLocation,"onUpdate:page":V,data:g(t).filter.location.result,small:"","hide-show-entries":""},null,8,["page","data"])])):f("",!0)])),[[l,g(t).filter.location.isLoading]])])):"date"!==e.key&&(null==(A=g(t).filter[e.key])?void 0:A.result)?(v(),m("div",Ea,[_((v(),m("div",null,[(null==(L=null==(M=g(t).filter[e.key])?void 0:M.result)?void 0:L.length)?(v(),m("div",za,[h("div",Fa,[(v(!0),m(w,null,T(null==(j=g(t).filter[e.key])?void 0:j.result[n.value.manufacturPage[e.key]-1],((a,t)=>(v(),m("div",{key:t},[k(ie,{modelValue:n.value.selectedManufactur[e.key],"onUpdate:modelValue":a=>n.value.selectedManufactur[e.key]=a,color:"teal",value:a,onChange:a=>(async e=>{const a=i.value.findIndex((a=>a.key===e));i.value[a]&&(i.value[a].count_selected=n.value.selectedManufactur[e].length),"model"!==e&&await S("model",!0)})(e.key)},{default:y((()=>{var t;return[h("span",{class:O((null==(t=n.value.selectedManufactur[e.key])?void 0:t.includes(a))?"font-medium":"font-normal")},P("model"===e.key?a.name:a),3)]})),_:2},1032,["modelValue","onUpdate:modelValue","value","onChange"])])))),128))]),k(oe,U({page:n.value.manufacturPage[e.key]},{data:{last_page:null==(N=null==(R=g(t).filter[e.key])?void 0:R.result)?void 0:N.length,current_page:n.value.manufacturPage[e.key]}},{small:"","hide-show-entries":"","hide-detail-page":"","onUpdate:page":a=>{return t=a,l=e.key,void(n.value.manufacturPage[l]=t);var t,l}}),null,16,["page","onUpdate:page"])])):(v(),m("div",Ba,["model"!==e.key||(null==(F=null==(z=null==(E=n.value)?void 0:E.selectedManufactur)?void 0:z.manufacturer)?void 0:F.length)?(v(),m(w,{key:1},[b(P("Nothing to show"))],64)):(v(),m(w,{key:0},[b(P("Check brand first"))],64))]))])),[[l,null==(B=g(t).filter[e.key])?void 0:B.isLoading]])])):f("",!0)])]})),_:1},8,["loading","filters","reset-disabled"])])}}},Ja={class:"flex gap-x-2"},Ga={class:"flex-1"},Za={__name:"InventoryFilters",setup(e,{expose:a}){const t=x();return a({inventoryFiltersColumn:t}),(e,a)=>(v(),m("div",Ja,[h("div",Ga,[k(Va)]),h("div",null,[k(qa,{ref_key:"inventoryFiltersColumn",ref:t},null,512)])]))}};const Ya=["tabindex","value"],Ha={class:"flex items-center justify-between gap-x-4"};var Ka=le({__name:"InventoryStatusSelect",props:{item:{type:Object,default:void 0}},emits:["change"],setup(e,{emit:a}){var t;const l={Available:"teal",Sold:"grey",Deleted:"red",Pending:"orange","Not Available":"red"},n=e,o=a,i=da(),s=x(n.item.status),d=C((()=>M(s.value||"Not Available"))),r=u([{name:"Available",id:"available"},{name:"Sold",id:"sold"},{name:"Not Available",id:"not available"}]),I=x(0),S=x(!1),D=async e=>{"Sold"!=s.value?"Not Available"===s.value&&await ae(i.status,(()=>i.$updateChangeStatus({id:n.item.id,data:{status_id:5}}).then((()=>{o("change",s.value)})).catch((()=>{s.value=n.item.status})))):S.value=!0},V=()=>{S.value=!1,s.value=n.item.status},$=async()=>{await ae(i.status,(()=>i.$updateSoldStatus({id:n.item.id,data:{sold:I.value}}).then((()=>{A({message:"Inventory status updated.",type:"success"}),S.value=!1,o("change",s.value)}))))},M=e=>l[e]||"";return s.value=(null==(t=null==n?void 0:n.item)?void 0:t.status)||void 0,(e,a)=>{const t=c("loading");return v(),m(w,null,[_((v(),m("div",null,["Available"!=s.value?(v(),p(ke,{key:0,class:"whitespace-nowrap",color:d.value},{default:y((()=>[b(P(s.value),1)])),_:1},8,["color"])):_((v(),m("select",{key:1,"onUpdate:modelValue":a[0]||(a[0]=e=>s.value=e),class:"py-1 px-4 rounded-lg select-status",onChange:D},[(v(!0),m(w,null,T(r,((e,a)=>(v(),m("option",{key:e,tabindex:`${a+1}`,value:e.name,class:"bg-white hover:bg-white text-base focus:bg-white cursor-pointer"},P(e.name),9,Ya)))),128))],544)),[[R,s.value]])])),[[t,g(i).status.isLoading]]),k(N,{name:"fade"},{default:y((()=>[g(i).status.isLoading?(v(),p(de,{key:0})):f("",!0)])),_:1}),k(ee,{modelValue:S.value,"onUpdate:modelValue":a[2]||(a[2]=e=>S.value=e),size:"xs",onClose:V},{header:y((()=>a[3]||(a[3]=[h("div",null,[h("h6",null,"Set Sold Price")],-1)]))),default:y((()=>[h("div",null,[k(X,{modelValue:I.value,"onUpdate:modelValue":a[1]||(a[1]=e=>I.value=e),type:"number",placeholder:"00.00",class:"w-full",label:"Sold Price",icon:""},{icon:y((()=>[b(P(g(i).user.currency_symbol),1)])),_:1},8,["modelValue"])])])),footer:y((()=>[h("div",Ha,[k(W,{color:"red",view:"outlined",onClick:V},{default:y((()=>a[4]||(a[4]=[b(" Cancel ")]))),_:1}),k(W,{class:"rounded-xl",color:"teal",view:"outlined",loading:g(i).status.isLoading,onClick:$},{default:y((()=>a[5]||(a[5]=[b(" Save ")]))),_:1},8,["loading"])])])),_:1},8,["modelValue"])],64)}}},[["__scopeId","data-v-3327fe5c"]]);const Qa={key:0,class:"py-10"},Wa={class:"mt-8 mb-10"},Xa={class:"flex items-center justify-end w-full gap-x-3"},et={key:1,class:"text-center py-10"},at={key:2,class:"text-center py-10"},tt={__name:"InventoryActions",props:{modelValue:{type:Boolean,default:!1},actionType:{type:String,default:"delete"},data:{type:Object,default:void 0}},emits:["deleted","reset","restore","canceled","update:modelValue"],setup(e,{emit:a}){const t=ra(),l=e,n=a,o=C({get:()=>l.modelValue,set:e=>n("update:modelValue",e)}),i=x(""),s=()=>{o.value=!1,i.value=""},d=async()=>{await ae(t.delete,(()=>t.$updateNotes({id:l.data.id,data:{notes:i.value}}))),await ae(t.delete,(()=>t.$onDelete(l.data.id).then((()=>{s(),n("deleted")}))))},r=async()=>{await ae(t.delete,(()=>t.$onRestore(l.data.id).then((()=>{s(),n("restore")}))))},u=async()=>{await ae(t.delete,(()=>t.$onReset(l.data.id).then((()=>{s(),n("reset")}))))};return(a,l)=>(v(),p($,{to:"body"},[k(ee,{size:"xs",modelValue:o.value,"onUpdate:modelValue":l[1]||(l[1]=e=>o.value=e),title:"Delete Inventory","hide-header":"","hide-footer":"",onClose:s},{default:y((()=>{var a;return["delete"===e.actionType?(v(),m("div",Qa,[l[7]||(l[7]=h("img",{class:"mb-10 mx-auto",src:we,alt:"Success Icon"},null,-1)),h("div",Wa,[l[2]||(l[2]=h("h5",{class:"mb-4 text-center font-medium"}," Delete this inventory? ",-1)),l[3]||(l[3]=h("p",{class:"text-center mb-6"}," Once you confirm, this inventory will be move to delete menu ",-1)),l[4]||(l[4]=h("label",{class:"font-medium"},"Additional Notes",-1)),k(X,{modelValue:i.value,"onUpdate:modelValue":l[0]||(l[0]=e=>i.value=e),type:"textarea",block:""},null,8,["modelValue"])]),h("div",Xa,[k(W,{view:"outlined",color:"teal",class:"bg-white",disabled:g(t).delete.isLoading,onClick:s},{default:y((()=>l[5]||(l[5]=[b(" Cancel ")]))),_:1},8,["disabled"]),k(W,{view:"smooth",color:"red",disabled:!(null==(a=i.value)?void 0:a.length),loading:g(t).delete.isLoading,onClick:d},{default:y((()=>l[6]||(l[6]=[b(" Yes, Delete ")]))),_:1},8,["disabled","loading"])])])):f("",!0),"reset"===e.actionType?(v(),m("div",et,[l[10]||(l[10]=h("img",{class:"mb-10 mx-auto",src:we,alt:"Success Icon"},null,-1)),l[11]||(l[11]=h("div",{class:"mt-8 mb-10"},[h("h5",{class:"mb-4 font-medium"},"Warning?"),h("p",null," Resetting inventory will move it back into the available status and reset any integrations. ")],-1)),k(W,{view:"smooth",color:"teal",class:"mr-3",loading:g(t).reset.isLoading,onClick:u},{default:y((()=>l[8]||(l[8]=[b(" Yes, Reset ")]))),_:1},8,["loading"]),k(W,{view:"outlined",color:"teal",class:"bg-white",disabled:g(t).reset.isLoading,onClick:s},{default:y((()=>l[9]||(l[9]=[b(" Cancel ")]))),_:1},8,["disabled"])])):f("",!0),"restore"===e.actionType?(v(),m("div",at,[l[14]||(l[14]=h("img",{class:"mb-10 mx-auto",src:we,alt:"Success Icon"},null,-1)),l[15]||(l[15]=h("div",{class:"mt-8 mb-10"},[h("h5",{class:"mb-4 font-medium"},"Attention?"),h("p",null,"Are you sure want to restore this inventory?")],-1)),k(W,{view:"smooth",color:"teal",class:"mr-3",loading:g(t).restore.isLoading,onClick:r},{default:y((()=>l[12]||(l[12]=[b(" Yes, Restore ")]))),_:1},8,["loading"]),k(W,{view:"outlined",color:"teal",class:"bg-white",disabled:g(t).restore.isLoading,onClick:s},{default:y((()=>l[13]||(l[13]=[b(" Cancel ")]))),_:1},8,["disabled"])])):f("",!0)]})),_:1},8,["modelValue"])]))}},lt={class:"inline-block"},nt={class:"space-y-2"},ot={class:"flex items-center h-full"},it={class:"text-lg"},st={class:"w-full p-5 border border-grey-01 rounded-md"},dt={__name:"InventoryMoveInventory",props:{inventories:{type:Array,default:()=>[]}},emits:["submit"],setup(e,{emit:a}){const t=ca(),l=e,n=a,o=x(!1),i=x({}),s=()=>{o.value=!1,i.value={}},d=async()=>{var e;o.value=!0,(null==(e=t.locations)?void 0:e.length)||await ae(t.move.locations,(()=>t.$getMoveLocations()))},r=e=>{i.value=t.locations.find((a=>a.id===e))},u=async()=>{await ae(t.move.locations,(()=>t.$setMoveInventory({selected_inventory_id:l.inventories.map((e=>e.id)).toString(),location_id:i.value.id}).then((()=>{ElMessage({message:`${l.inventories.length} Inventory moved.`,type:"success"}),s(),n("submit")}))))};return(e,a)=>{const n=I("TableColumn"),f=I("router-link"),w=I("Table"),x=c("loading");return v(),m("div",lt,[S(e.$slots,"default",E(z({onShow:d}))),(v(),p($,{to:"body"},[k(ee,{modelValue:o.value,"onUpdate:modelValue":a[1]||(a[1]=e=>o.value=e),onClose:s},{header:y((()=>a[2]||(a[2]=[h("div",{class:"w-full"},[h("h5",{class:"modal__content-header-title font-medium"}," Move Inventory ")],-1)]))),default:y((()=>[_((v(),m("div",null,[h("div",nt,[a[3]||(a[3]=h("p",{class:"font-medium"}," Choose a location to move the selected inventory to ",-1)),k(re,{modelValue:i.value,items:g(t).locations,by:"id",name:"name","no-border":"",maxHeight:"200px",style:{width:"100%",boxShadow:"unset"},placeholder:"Choose Location","onUpdate:modelValue":r},{item:y((({item:e})=>[h("div",{class:O([i.value.id===e.id&&"font-medium text-teal-04","text-teal-03","flex items-center gap-x-2"])},[b(P(e.name)+" ",1),h("span",{class:O([e.id===i.value.id?"opacity-100":"opacity-0","material-icons duration-300 transition-opacity ease-in-out"])}," check_circle ",2)],2)])),_:1},8,["modelValue","items"])]),k(Q,{color:"orange",view:"smooth",class:"my-6 custom-p-1",dense:""},{default:y((()=>{var e;return[h("div",ot,[h("p",it,[h("strong",null,[a[4]||(a[4]=h("span",{class:"material-icons"},"info",-1)),b(" "+P(null==(e=null==l?void 0:l.inventories)?void 0:e.length)+" inventory lists selected. ",1)]),a[5]||(a[5]=b(" Before proccessing, please double-check the list. "))])])]})),_:1}),h("div",st,[k(w,{data:l.inventories,"onUpdate:data":a[0]||(a[0]=e=>l.inventories=e)},{default:y((()=>[k(n,{prop:"id",label:"ID",width:"80"}),k(n,{prop:"item_name",label:"Item"},{default:y((e=>[k(f,{to:{name:"inventoryEdit",params:{inventoryId:e.row.id}},class:"font-semibold inline-block word-break"},{default:y((()=>[b(P(e.row.item_name),1)])),_:2},1032,["to"])])),_:1}),k(n,{prop:"imeisn",label:"IMEI/SN"})])),_:1},8,["data"])])])),[[x,g(t).move.locations.isLoading]])])),footer:y((()=>{var e,n;return[k(W,{loading:g(t).move.isLoading,disabled:!(null==(e=null==l?void 0:l.inventories)?void 0:e.length)||void 0===typeof(null==(n=i.value)?void 0:n.id),color:"orange",onClick:u},{default:y((()=>a[6]||(a[6]=[b(" Proceed ")]))),_:1},8,["loading","disabled"])]})),_:1},8,["modelValue"])]))])}}},rt={class:"w-full flex items-center"},ut={class:"modal__content-header-title font-medium"},ct={__name:"InventoryImeiPhoneCheck",props:{data:{type:[Object,Array],default:void 0}},setup(e){const a=ca(),t=e,l=x(!1),n=u({infoData:void 0,device:void 0,error:!1}),o=C((()=>{var e,l,n;return Array.isArray(t.data)?null==(n=null==a?void 0:a.phoneCheck)?void 0:n.isLoading:(null==(e=null==a?void 0:a.phoneCheck)?void 0:e.isLoading)&&(null==(l=null==t?void 0:t.data)?void 0:l.loading)})),i=async()=>Array.isArray(t.data)?await(async()=>{var e,l,n;return await ae(a.phoneCheck,(()=>a.$getPhoneCheck({imei:t.data.map((e=>({id:e.id,imei_sn:e.imeisn}))),origin:"inventory"}))),null==(n=null==(l=null==(e=null==a?void 0:a.phoneCheck)?void 0:e.result)?void 0:l.data)?void 0:n.length})():await(async()=>{var e,o,i,s,d,r,u,c,v,m,p,y,h,f,g,_,b;if(await ae(a.phoneCheck,(()=>a.$getPhoneCheck({imei:[{id:t.data.id,imei_sn:t.data.imeisn}],origin:"inventory"}))),0==(null==(i=null==(o=null==(e=null==a?void 0:a.phoneCheck)?void 0:e.result)?void 0:o.data)?void 0:i.length)&&1!==(null==(d=null==(s=null==a?void 0:a.phoneCheck)?void 0:s.result)?void 0:d.is_phonecheck_error))return ElMessage({message:"IMEI/SN not found",type:"warning"});n.infoData=JSON.stringify(null==(c=null==(u=null==(r=null==a?void 0:a.phoneCheck)?void 0:r.result)?void 0:u.data[0])?void 0:c.info),n.device=t.data,(null==(p=null==(m=null==(v=null==a?void 0:a.phoneCheck)?void 0:v.result)?void 0:m.data)?void 0:p.length)&&!(null==(h=null==(y=null==a?void 0:a.phoneCheck)?void 0:y.result)?void 0:h.is_phonecheck_error)?n.error=!1:n.error=!(null==(g=null==(f=null==a?void 0:a.phoneCheck)?void 0:f.result)?void 0:g.is_phonecheck_error)||1==(null==(b=null==(_=null==a?void 0:a.phoneCheck)?void 0:_.result)?void 0:b.is_phonecheck_error),l.value=!0})(),s=()=>{l.value=!1,n.error=!1};return(e,t)=>{const d=c("loading");return v(),m("div",null,[_((v(),m("div",null,[S(e.$slots,"default",E(z({onCheck:i})))])),[[d,o.value]]),(v(),p($,{to:"body"},[k(ee,{modelValue:l.value,"onUpdate:modelValue":t[2]||(t[2]=e=>l.value=e),"hide-footer":"",onClose:s},{header:y((()=>{var e,l,o;return[h("div",rt,[h("h5",ut,P(null!=(o=null==(e=null==n?void 0:n.device)?void 0:e.name)?o:null==(l=n.device)?void 0:l.item_name),1),k(W,{view:"smooth",color:"teal",dense:"",onClick:t[0]||(t[0]=e=>(async()=>{await ae(a.phoneCheckPrint,(()=>a.$getPhoneCheckPrint({id:n.device.id,imei:n.device.imeisn,origin:"inventory"}).then((()=>{ue(a.phoneCheckPrint.result),s()}))))})())},{default:y((()=>t[3]||(t[3]=[h("i",{class:"material-icons text-lg"},"print",-1)]))),_:1})])]})),default:y((()=>[k(xe,{data:n.infoData,"onUpdate:data":t[1]||(t[1]=e=>n.infoData=e),"is-error":n.error},null,8,["data","is-error"])])),_:1},8,["modelValue"])]))])}}},vt=F({components:{Select:Se,AmazonGiftCard:De,BankTransfer:He,PaperCheck:Pe,ExpressCheck:Pe,PayPal:Ve,Swish:$e,SquareCash:Ae,Venmo:Me,Coinbase:Le,Cash:je,Zelle:Ue,CashApp:Te,ApplePay:Oe,GooglePay:Re,FacebookPay:Ne,StoreCredit:Ee,ChooseLater:Ke,VirtualDebitCard:ze,GiftCard:Fe,InteraceTransfer:Be,Donate:qe,Bill:Je,ECheck:Ge,Rebate:Ze,Revolut:Qe,Custom:Ye,Button:W},props:{data:{type:Object,default:()=>({})},items:{type:Array,default:()=>[]}},emits:["update:data"],setup(e,{emit:a}){const t=x(null),l=x(null),n=x(!1),o=C((()=>l.value===We.BANK_TRANSFER)),i=C((()=>e.items.find((e=>e.id===l.value))||{id:null,name:null,component:null})),r=C({set:e=>{a("update:data",s({payment_method:i.value.name},e))},get:()=>o.value?d(s({},e.data),{is_new_bank:!0}):s({},e.data)}),u=C((()=>{var e,a,t;const l={};return o.value&&(l.defaultAttributes=(null==(e=i.value)?void 0:e.attributes)||[],l.list=Array.isArray(null==(a=i.value)?void 0:a.default_value)?null==(t=i.value)?void 0:t.default_value:[]),l}));return j((()=>e.data),(a=>{if(a&&a.payment_method&&!l.value){const t=e.items.find((e=>e.name===a.payment_method));l.value=t&&t.id?t.id:null}}),{immediate:!0}),j((()=>l.value),(()=>{var e,t,l;n.value=!1;const o={};(null==(e=i.value)?void 0:e.default_value)&&(null==(l=null==(t=i.value)?void 0:t.attributes)?void 0:l.length)&&i.value.attributes.forEach((e=>{"billing_address1"===e?(o.billing_address_text=i.value.default_value.billing_address_text,o.billing_address1=i.value.default_value.billing_address1):o[e]=i.value.default_value[e]})),a("update:data",d(s({},o),{payment_method:i.value.name}))})),{refComponent:t,isInvalid:n,selectedPaymentId:l,selectedPaymentData:i,data:r,bind:u,validate:()=>{var e;return l.value?!!(null==(e=t.value)?void 0:e.validate)&&t.value.validate():(n.value=!0,!1)}}}}),mt={key:2,class:"bg-green-01 px-6 py-4 rounded-lg font-normal text-green-04 mb-2"};const pt=F({components:{Fieldset:Ie,Button:W,Input:X,Modal:ee,Checkbox:ie,PaymentMethod:le(vt,[["render",function(e,a,t,l,n,o){const i=I("Select");return v(),m("div",null,[k(i,{modelValue:e.selectedPaymentId,"onUpdate:modelValue":a[0]||(a[0]=a=>e.selectedPaymentId=a),items:e.items,name:"name",by:"id",label:"Choose Payout Method",placeholder:"Choose Payout Method",class:"w-full mb-4",view:e.isInvalid?"danger":"default"},null,8,["modelValue","items","view"]),e.selectedPaymentData.is_custom?(v(),p(B(e.selectedPaymentData.component),{key:0,ref:"refComponent",data:e.data,"onUpdate:data":a[1]||(a[1]=a=>e.data=a),payout:e.selectedPaymentData},null,40,["data","payout"])):(v(),p(B(e.selectedPaymentData.component),U({key:1,ref:"refComponent"},e.bind,{data:e.data,"onUpdate:data":a[2]||(a[2]=a=>e.data=a)}),null,16,["data"])),e.selectedPaymentData.desc?(v(),m("div",mt,P(e.selectedPaymentData.desc),1)):f("",!0)])}]]),InputPhone:Xe,Currency:fe},props:{open:{type:Boolean,default:!1},inventories:{type:Array,default:()=>[]}},emits:["update:open","complete","close"],setup(e,{emit:a}){const{loading:t,modal:l,state:n,stateShow:o,formData:i,formDataPaymentMethod:r,isShowDetails:u,actionGet:c,actionShow:v,actionCreate:m,resetData:p}=Ce(),y=q(),h=x(null),f=x(!1),g=x(!0),_={customer_email:{required:aa,email:ta.withMessage("Customer email is not a valid email address",la)},shipping_firstname:{required:ta.withMessage("First name is required",aa)},shipping_lastname:{required:ta.withMessage("Last name is required",aa)},shipping_address1:{required:ta.withMessage("Street address is required",aa)},shipping_city:{required:ta.withMessage("City is required",aa)},shipping_state:{required:ta.withMessage("State is required",aa)},shipping_zip:{required:ta.withMessage("Postal code is required",aa)},shipping_phone:{required:ta.withMessage("Phone number is required",aa),invalid:ta.withMessage("Invalid phone number",(()=>f.value))},shipping_country:{required:ta.withMessage("Country is required",aa)}},b=C((()=>s(s({},i),r.value))),k=C((()=>{const e=i.order_detail.reduce(((e,a)=>e+=parseFloat(a.price_who_seller.replace(/,/g,""))),0);return ce(e||0)})),w=C((()=>!!Array.isArray(i.order_detail)&&i.order_detail.length>1)),I=C((()=>i.order_detail.map((e=>d(s({},e),{price_who_seller:ce(e.price_who_seller||0)}))))),S=C((()=>d(s({},o),{sub_total:ce(o.sub_total||0),payment_extra_amount:ce(o.payment_extra_amount||0),total:ce(o.total||0),order_detail:o.order_detail.map((e=>d(s({},e),{price:ce(e.price||0)})))})));let D=ea(_,b,{$lazy:!0});const P=()=>{var e;const a=null==(e=h.value)?void 0:e.validate();return D.value.$validate(),!D.value.$invalid&&a},V=()=>{g.value=!g.value||g.value,p(),D.value.$reset(),a("update:open",!1),a("close",!0)};return j((()=>g.value),(e=>{e&&Object.assign(i,{shipping_address1:n.company.address,shipping_city:n.company.city,shipping_state:n.company.state,shipping_zip:n.company.zip,shipping_phone:n.company.phone,shipping_country:n.company.country,shipping_suite:n.company.suite})})),j((()=>e.open),(async a=>{a&&await(async()=>{await c({ids:e.inventories.map((e=>e.id)).join(","),sources:e.inventories.filter((e=>!!e.price_sharing)).map((e=>e.price_sharing)).join(",")},(e=>{e&&V()}))})()})),j((()=>o.is_fetched),(e=>{e&&a("complete",!0)})),{refPaymentMethod:h,loading:t,modal:l,state:n,stateShow:o,data:i,formDataPaymentMethod:r,isShowDetails:u,isUseCompanyAddress:g,isShowRemoveInventoryItem:w,actionGet:c,payloadData:b,totalInventoryPrice:k,tableData:I,showOrderDetail:S,address:{route:"shipping_address1",locality:"shipping_city",administrative_area_level_1:"shipping_state",country:"shipping_country",postal_code:"shipping_zip",noComponentRestriction:!0},validation:D,validate:P,handleBulkSellInstantly:async()=>{["DK"].includes(i.shipping_country)&&(delete _.shipping_state,D=ea(_,b,{$lazy:!0}));P()&&await m((async(e,a)=>{if(e)return V();await v(a,(e=>{e&&V()}))}))},handleUpdateModal:e=>{a("update:open",e)},handleCloseModal:V,handleIsValidPhone:e=>f.value=e,handlePrintShippingLabel:()=>window.open(o.shipping_label||"#","_blank"),handleDownloadPdf:()=>window.open(o.pdf||"#","_blank"),handleRedirectToInvoice:()=>{if(!o.invoice_id)return A({type:"error",message:"Invoice ID not found"});y.push({name:"invoiceDetail",params:{buybackId:o.invoice_id}})},handleRemoveInventoryItem:e=>{const{inventory_id:a}=e;if(!a)return null;i.order_detail=i.order_detail.filter((e=>e.inventory_id!==a))},handleUpdateAddress:()=>{i.shipping_address1===n.company.address&&i.shipping_city===n.company.city&&i.shipping_state===n.company.state&&i.shipping_zip===n.company.zip&&i.shipping_phone===n.company.phone&&i.shipping_country===n.company.country&&i.shipping_suite===n.company.suite?g.value=!0:g.value&&(g.value=!1)}}}}),yt={key:0},ht={class:"text-xl"},ft={class:"text-teal-04"},gt={key:1},_t={key:0},bt={class:"mb-6"},kt={class:"font-semibold"},wt={class:"my-2"},xt={class:"text-sm text-grey-03"},Ct={class:"text-sm text-grey-03"},It={class:"text-sm text-grey-03"},St={class:"grid grid-cols-2 gap-4"},Dt={class:"col-span-2"},Pt={class:"col-span-2"},Vt={class:"col-span-2"},$t={key:0},At={key:1,class:"grid grid-cols-6 gap-3"},Mt={class:"flex items-center md:justify-end md:col-span-2 md:col-start-5 col-span-6 justify-start md:my-0 my-4"},Lt={class:"md:col-span-3 col-span-6"},jt={class:"font-normal text-grey-04 my-3"},Ut={class:"text-black"},Tt={class:"font-normal text-grey-04 my-3"},Ot={class:"text-black"},Rt={class:"font-normal text-grey-04 my-3"},Nt={class:"text-black"},Et={class:"font-normal text-grey-04 my-3"},zt={class:"text-black"},Ft={class:"md:col-span-3 col-span-6"},Bt={class:"flex items-center"},qt={class:"flex items-center"},Jt={class:"flex items-center"},Gt=["href"],Zt={class:"flex items-center"},Yt={class:"col-span-6"},Ht={class:"font-semibold"},Kt={class:"my-2"},Qt={class:"font-normal text-sm text-grey-03"},Wt={class:"font-normal text-sm text-grey-03"},Xt={class:"flex flex-col items-end justify-end pr-2 font-semibold mt-4"},el={class:"flex items-center my-1"},al={key:0,class:"flex items-center my-1"},tl={class:"flex items-center my-1"},ll={class:"flex justify-between items-center"},nl={key:1};var ol=le(pt,[["render",function(e,a,t,l,n,o){const i=I("Button"),s=I("TableColumn"),d=I("Currency"),r=I("Table"),u=I("Input"),g=I("Fieldset"),x=I("PaymentMethod"),C=I("Checkbox"),S=I("InputPhone"),V=I("Tooltip"),$=I("Modal"),A=c("loading"),M=c("gmap");return v(),m("div",null,[k($,{modelValue:e.open,"onUpdate:modelValue":e.handleUpdateModal,onClose:e.handleCloseModal},{header:y((()=>[e.stateShow.is_fetched?_((v(),m("div",gt,a[15]||(a[15]=[h("h1",{class:"text-xl"},"Offer Confirmation",-1)]))),[[A,e.loading.show]]):_((v(),m("div",yt,[h("h1",ht,[a[14]||(a[14]=b(" Sell Instantly to ")),h("span",ft,P(e.state.wholeseller_name),1)])])),[[A,e.loading.get]])])),headerRight:y((()=>[e.stateShow.is_fetched?(v(),p(i,{key:0,onClick:e.handleDownloadPdf,color:"teal",dense:""},{default:y((()=>a[16]||(a[16]=[h("i",{class:"material-icons"},"file_download",-1),b(" PDF")]))),_:1},8,["onClick"])):f("",!0)])),default:y((()=>[e.stateShow.is_fetched?(v(),m("div",At,[a[48]||(a[48]=h("div",{class:"md:col-span-3 col-span-6"},[h("h2",{class:"text-lg"},"Your offer is confirmed"),h("p",null,"A record of your offer information appears below.")],-1)),h("div",Mt,[k(V,{disabled:1==e.showOrderDetail.shipping_label_is_generate},{content:y((()=>a[28]||(a[28]=[h("p",null,[b(" Unable to generate a shipping label. "),h("br"),b(" Please contact support for more detail ")],-1)]))),default:y((()=>[h("div",null,[k(i,{disabled:0==e.showOrderDetail.shipping_label_is_generate,color:"teal",onClick:e.handlePrintShippingLabel,dense:""},{default:y((()=>a[29]||(a[29]=[h("i",{class:"material-icons"},"print",-1),b(" Print Shipping Label ")]))),_:1},8,["disabled","onClick"])])])),_:1},8,["disabled"])]),h("div",Lt,[h("p",jt,[a[30]||(a[30]=b(" Offer Number: ")),a[31]||(a[31]=h("br",null,null,-1)),h("span",Ut,P(e.showOrderDetail.box_id),1)]),h("p",Tt,[a[32]||(a[32]=b(" Date Created: ")),a[33]||(a[33]=h("br",null,null,-1)),h("span",Ot,P(e.showOrderDetail.created_at),1)]),h("p",Rt,[a[34]||(a[34]=b(" Payment Method: ")),a[35]||(a[35]=h("br",null,null,-1)),h("span",Nt,P(e.showOrderDetail.payment_method),1)]),h("p",Et,[a[36]||(a[36]=b(" Contact Info: ")),a[37]||(a[37]=h("br",null,null,-1)),h("span",zt,P(e.showOrderDetail.customer_email),1)])]),h("div",Ft,[a[42]||(a[42]=h("p",{class:"font-normal text-grey-04"},"Your offer to:",-1)),h("div",Bt,[a[38]||(a[38]=h("i",{class:"material-icons mr-4 text-grey-04"},"store",-1)),h("p",null,P(e.showOrderDetail.company_name),1)]),h("div",qt,[a[39]||(a[39]=h("i",{class:"material-icons mr-4 text-grey-04"},"location_on",-1)),h("p",null,P(e.showOrderDetail.company_address),1)]),h("div",Jt,[a[40]||(a[40]=h("i",{class:"material-icons mr-4 text-grey-04"},"phone",-1)),h("a",{href:`tel:${e.showOrderDetail.company_phone}`},P(e.showOrderDetail.company_phone),9,Gt)]),h("div",Zt,[a[41]||(a[41]=h("i",{class:"material-icons mr-4 text-grey-04"},"email",-1)),h("p",null,P(e.showOrderDetail.company_email),1)])]),h("div",Yt,[k(r,{data:e.showOrderDetail.order_detail},{default:y((()=>[k(s,{label:"Selling Details"},{default:y((({row:e})=>[h("p",Ht,P(e.product_name),1),h("div",Kt,[h("p",Qt,[a[43]||(a[43]=h("span",{class:"font-semibold"},"IMEI/SN:",-1)),b(" "+P(e.imei_sn),1)]),h("p",Wt,P(e.description),1)])])),_:1}),k(s,{label:"Qty",align:"right"},{default:y((()=>a[44]||(a[44]=[b("1")]))),_:1}),k(s,{label:"Price",align:"right"},{default:y((({row:a})=>[b(P(e.state.wholeseller_currency_symbol)+P(a.price),1)])),_:1})])),_:1},8,["data"]),h("div",Xt,[h("div",el,[a[45]||(a[45]=h("p",{class:"mr-12"},"Sub Total",-1)),b(" "+P(e.state.wholeseller_currency_symbol)+P(e.showOrderDetail.sub_total),1)]),void 0!==e.showOrderDetail.payment_extra_amount&&"0.00"!==e.showOrderDetail.payment_extra_amount&&0!==e.showOrderDetail.payment_extra_amount?(v(),m("div",al,[a[46]||(a[46]=h("p",{class:"mr-12"},"Payout Bonus",-1)),b(" "+P(e.state.wholeseller_currency_symbol)+P(e.showOrderDetail.payment_extra_amount),1)])):f("",!0),h("div",tl,[a[47]||(a[47]=h("p",{class:"mr-12"},"Total",-1)),b(" "+P(e.state.wholeseller_currency_symbol)+P(e.showOrderDetail.total),1)])])])])):_((v(),m("div",_t,[h("p",bt,[a[17]||(a[17]=b(" There are ")),h("span",kt,"("+P(e.data.order_detail.length)+")",1),b(" qty you selected for total "+P(e.state.wholeseller_currency_symbol)+P(e.totalInventoryPrice)+" ",1),h("a",{class:"mx-2",href:"",onClick:a[0]||(a[0]=D((a=>e.isShowDetails=!e.isShowDetails),["prevent"]))},P(e.isShowDetails?"Hide":"Show")+" Details",1)]),k(N,{name:"fade"},{default:y((()=>[_(k(r,{data:e.tableData},{default:y((()=>[k(s,{label:"Item #",width:"200"},{default:y((({row:e})=>[h("p",null,P(e.name),1),h("div",wt,[h("p",xt,[a[18]||(a[18]=h("span",{class:"font-semibold"}," Condition:",-1)),b(" "+P(e.condition),1)]),h("p",Ct,[a[19]||(a[19]=h("span",{class:"font-semibold"},"IMEI/SN:",-1)),b(" "+P(e.imei_sn),1)]),h("p",It,P(e.description),1)])])),_:1}),k(s,{label:"Qty"},{default:y((()=>a[20]||(a[20]=[b("1")]))),_:1}),k(s,{label:"Cost"},{default:y((({row:e})=>[k(d,{value:e.cost},null,8,["value"])])),_:1}),k(s,{label:"Price"},{default:y((({row:a})=>[b(P(e.state.wholeseller_currency_symbol)+P(a.price_who_seller),1)])),_:1}),k(s,null,{default:y((({row:t})=>[e.isShowRemoveInventoryItem?(v(),p(i,{key:0,onClick:a=>e.handleRemoveInventoryItem(t),color:"red",dense:""},{default:y((()=>a[21]||(a[21]=[h("i",{class:"material-icons"},"delete",-1)]))),_:2},1032,["onClick"])):f("",!0)])),_:1})])),_:1},8,["data"]),[[J,e.isShowDetails]])])),_:1}),k(g,{class:"my-6"},{label:y((()=>a[22]||(a[22]=[h("span",null,"Contact Information",-1)]))),default:y((()=>[k(u,{modelValue:e.data.customer_email,"onUpdate:modelValue":a[1]||(a[1]=a=>e.data.customer_email=a),view:e.validation.customer_email.$invalid?"danger":"default",label:"Email Address",block:""},null,8,["modelValue","view"]),(v(!0),m(w,null,T(e.validation.customer_email.$errors,((e,a)=>(v(),m("small",{class:"text-red-base",key:a},P(e.$message)+". ",1)))),128))])),_:1}),k(g,{class:"my-6"},{label:y((()=>a[23]||(a[23]=[h("span",null,"Payout Information",-1)]))),default:y((()=>[e.loading.get?f("",!0):_((v(),p(x,{key:0,data:e.formDataPaymentMethod,"onUpdate:data":a[2]||(a[2]=a=>e.formDataPaymentMethod=a),ref:"refPaymentMethod",items:e.state.payment_method},null,8,["data","items"])),[[A,e.loading.autofill]])])),_:1}),k(g,{class:"my-6"},{label:y((()=>a[24]||(a[24]=[h("span",null,"Free Shipping Label",-1)]))),default:y((()=>[h("div",St,[h("div",Dt,[k(C,{modelValue:e.isUseCompanyAddress,"onUpdate:modelValue":a[3]||(a[3]=a=>e.isUseCompanyAddress=a),class:"font-medium",type:"toggle"},{default:y((()=>a[25]||(a[25]=[b("Auto fill from company location profile")]))),_:1},8,["modelValue"])]),h("div",null,[k(u,{modelValue:e.data.shipping_firstname,"onUpdate:modelValue":a[4]||(a[4]=a=>e.data.shipping_firstname=a),view:e.validation.shipping_firstname.$invalid?"danger":"default",block:"",label:"First Name"},null,8,["modelValue","view"]),(v(!0),m(w,null,T(e.validation.shipping_firstname.$errors,((e,a)=>(v(),m("small",{class:"text-red-base",key:a},P(e.$message)+". ",1)))),128))]),h("div",null,[k(u,{modelValue:e.data.shipping_lastname,"onUpdate:modelValue":a[5]||(a[5]=a=>e.data.shipping_lastname=a),view:e.validation.shipping_lastname.$invalid?"danger":"default",block:"",label:"Last Name"},null,8,["modelValue","view"]),(v(!0),m(w,null,T(e.validation.shipping_lastname.$errors,((e,a)=>(v(),m("small",{class:"text-red-base",key:a},P(e.$message)+". ",1)))),128))]),h("div",Pt,[_(k(u,{modelValue:e.data.shipping_address1,"onUpdate:modelValue":a[6]||(a[6]=a=>{e.data.shipping_address1=a,e.handleUpdateAddress()}),view:e.validation.shipping_address1.$invalid?"danger":"default",block:"",label:"Street Address"},null,8,["modelValue","view"]),[[M,e.address]]),a[26]||(a[26]=h("small",null,"Street address, P.O box, company name, c/o.",-1)),(v(!0),m(w,null,T(e.validation.shipping_address1.$errors,((e,a)=>(v(),m("small",{class:"text-red-base block",key:a},P(e.$message)+". ",1)))),128))]),h("div",Vt,[k(u,{modelValue:e.data.shipping_suite,"onUpdate:modelValue":a[7]||(a[7]=a=>{e.data.shipping_suite=a,e.handleUpdateAddress()}),block:"",label:""},null,8,["modelValue"]),a[27]||(a[27]=h("small",null,"Apartment, suite, unit, building floor, etc.",-1))]),h("div",null,[k(u,{modelValue:e.data.shipping_city,"onUpdate:modelValue":a[8]||(a[8]=a=>{e.data.shipping_city=a,e.handleUpdateAddress()}),block:"",label:"City",view:e.validation.shipping_city.$invalid?"danger":"default"},null,8,["modelValue","view"]),(v(!0),m(w,null,T(e.validation.shipping_city.$errors,((e,a)=>(v(),m("small",{class:"text-red-base",key:a},P(e.$message)+". ",1)))),128))]),["DK","NL"].includes(e.data.shipping_country)?f("",!0):(v(),m("div",$t,[k(u,{modelValue:e.data.shipping_state,"onUpdate:modelValue":a[9]||(a[9]=a=>{e.data.shipping_state=a,e.handleUpdateAddress()}),block:"",label:"State",view:e.validation.shipping_state.$invalid?"danger":"default"},null,8,["modelValue","view"]),(v(!0),m(w,null,T(e.validation.shipping_state.$errors,((e,a)=>(v(),m("small",{class:"text-red-base",key:a},P(e.$message)+". ",1)))),128))])),h("div",null,[k(u,{modelValue:e.data.shipping_zip,"onUpdate:modelValue":a[10]||(a[10]=a=>{e.data.shipping_zip=a,e.handleUpdateAddress()}),view:e.validation.shipping_zip.$invalid?"danger":"default",block:"",label:"Postal Code"},null,8,["modelValue","view"]),(v(!0),m(w,null,T(e.validation.shipping_zip.$errors,((e,a)=>(v(),m("small",{class:"text-red-base",key:a},P(e.$message)+". ",1)))),128))]),h("div",null,[k(u,{modelValue:e.data.shipping_country,"onUpdate:modelValue":a[11]||(a[11]=a=>{e.data.shipping_country=a,e.handleUpdateAddress()}),view:e.validation.shipping_country.$invalid?"danger":"default",block:"",label:"Country"},null,8,["modelValue","view"]),(v(!0),m(w,null,T(e.validation.shipping_country.$errors,((e,a)=>(v(),m("small",{class:"text-red-base",key:a},P(e.$message)+". ",1)))),128))]),h("div",null,[k(S,{modelValue:e.data.shipping_phone,"onUpdate:modelValue":a[12]||(a[12]=a=>{e.data.shipping_phone=a,e.handleUpdateAddress()}),onValidation:e.handleIsValidPhone,block:"",label:"Phone","country-autofill-setting":""},null,8,["modelValue","onValidation"]),(v(!0),m(w,null,T(e.validation.shipping_phone.$errors,((e,a)=>(v(),m("small",{class:"text-red-base",key:a},P(e.$message)+". ",1)))),128))])])])),_:1})])),[[A,e.loading.get]])])),footer:y((()=>[h("div",ll,[e.stateShow.is_fetched?(v(),m("div",nl)):(v(),m("a",{key:0,class:"block py-4 pr-6 select-none text-red-04 hover:text-red-03",color:"red",onClick:a[13]||(a[13]=D(((...a)=>e.handleCloseModal&&e.handleCloseModal(...a)),["prevent"]))},"Cancel")),e.stateShow.is_fetched?(v(),p(i,{key:3,color:"teal",loading:e.loading.create,onClick:e.handleRedirectToInvoice},{default:y((()=>a[50]||(a[50]=[b("Go to Invoice")]))),_:1},8,["loading","onClick"])):(v(),p(i,{key:2,color:"teal",loading:e.loading.create,onClick:e.handleBulkSellInstantly},{default:y((()=>a[49]||(a[49]=[b("Confirm")]))),_:1},8,["loading","onClick"]))])])),_:1},8,["modelValue","onUpdate:modelValue","onClose"])])}]]);const il={__name:"InventorySellInstantly",emits:["confirm"],setup(e,{emit:a}){const t=x(!1),l=x([]),n=a,o=()=>n("confirm"),i=()=>{t.value=!1},s=e=>{e&&(t.value=!0,l.value=Array.isArray(e)?e:[e])};return(e,a)=>(v(),m("div",null,[S(e.$slots,"default",E(z({onShow:s}))),k(ol,{open:t.value,"onUpdate:open":a[0]||(a[0]=e=>t.value=e),inventories:l.value,onComplete:o,onClose:i},null,8,["open","inventories"])]))}},sl={style:{"min-height":"100px"}},dl={key:0,class:"space-y-4"},rl={class:"flex items-center gap-x-4"},ul=["onMouseenter","onMouseleave"],cl={key:1},vl=["onMouseenter","onMouseleave"],ml=["onClick"],pl={key:1},yl={key:3},hl={key:4},fl={key:5},gl={key:6},_l=["onMouseenter","onMouseleave"],bl=["onMouseenter","onMouseleave"],kl=["href"],wl={key:1},xl=["onMouseenter","onMouseleave"],Cl={key:11},Il=["onClick"],Sl=["onClick"],Dl=["onClick"],Pl={__name:"InventoryTable",setup(e){const a=da();q();const t=x([]),l=x(),n=u({actions:!1,phoneCheck:!1}),o=x(),i=x(!1),r=C((()=>t.value.filter((e=>{var a;return!e.price_sharing&&"#"===(null==(a=e.deeplink)?void 0:a.link)})).length>0)),S=C((()=>{if(!(0==a.inventory.statusId))return!1;return!!(t.value.filter((e=>{var a;return!!e.price_sharing&&"#"!==(null==(a=e.deeplink)?void 0:a.link)})).length>0)})),D=async e=>{if(0!=a.inventory.statusId)return;const l=[...t.value].filter((e=>{var a;return!(null==(a=Object.keys(e.deeplink))?void 0:a.length)}));l.length&&(i.value=!0,await Promise.all(l.map((async e=>{var t,l,n,o;const i=[...null==(l=null==(t=a.inventory)?void 0:t.result)?void 0:l.data].findIndex((a=>a.id===e.id));a.inventory.result.data[i]&&(a.inventory.result.data[i]=await V(null==(o=null==(n=a.inventory)?void 0:n.result)?void 0:o.data[i]))}))),i.value=!1)},V=async(e,t=!1)=>{if(0==a.inventory.statusId&&!Object.keys(e.deeplink).length)return e.loading=!0,await a.$getInventoryDeepLink({id:e.id}).then((t=>{e.loading=!1,e.deeplink=d(s({},t),{is_valid:"#"!==t.link&&0!=t.link&&0!=e.status&&0==a.inventory.statusId})})).catch((()=>{e.loading=!1,e.deeplink={link:"#",price:0,is_valid:!1}})),e},$=async()=>{await ae(a.inventory,(()=>a.$getInventory()))},A=async(e,a)=>{e&&void 0!==n&&a&&(n.actions=!0,o.value=e,l.value=a)},M=async()=>{await ae(a.inventory,(()=>a.$getInventory()))},L=async e=>{e!=a.inventory.page&&(a.inventory.page=e,await ae(a.inventory,(()=>a.$getInventory())))},j=async e=>{e!=a.inventory.limit&&(1!=a.inventory.page&&(a.inventory.page=1),a.inventory.limit=e,await ae(a.inventory,(()=>a.$getInventory())))},U=async()=>{1!=a.inventory.page&&(a.inventory.page=1),await ae(a.inventory,(()=>a.$getInventory()))};return(e,s)=>{var d,u,x,C,T;const O=I("Tooltip"),R=I("router-link"),N=c("loading");return _((v(),m("div",sl,[(null==(d=g(a).inventory)?void 0:d.result)?(v(),m("div",dl,[h("div",rl,[(null==(u=t.value)?void 0:u.length)?(v(),m(w,{key:0},[k(ct,{data:t.value},{default:y((({onCheck:e})=>[k(W,{color:"teal",dense:"",onClick:t=>(async(e=(async()=>{}))=>{await e()&&await ae(a.inventory,(()=>a.$getInventory()))})(e)},{default:y((()=>s[6]||(s[6]=[b(" Import from Phonecheck ")]))),_:2},1032,["onClick"])])),_:1},8,["data"]),k(dt,{inventories:t.value,onSubmit:U},{default:y((({onShow:e})=>[k(W,{color:"teal",dense:"",onClick:e},{default:y((()=>s[7]||(s[7]=[b(" Move Inventory ")]))),_:2},1032,["onClick"])])),_:1},8,["inventories"])],64)):f("",!0),t.value.length&&S.value?(v(),p(il,{key:1},{default:y((({onShow:e})=>[k(O,{placement:"right",content:"There are some inventory items that are not able to be sold instantly",disabled:!r.value},{default:y((()=>[h("div",null,[k(W,{disabled:r.value,loading:i.value,view:"smooth",color:"orange",dense:"",onClick:a=>e(t.value)},{default:y((()=>s[8]||(s[8]=[b(" Bulk Sell Instantly ")]))),_:2},1032,["disabled","loading","onClick"])])])),_:2},1032,["disabled"])])),_:1})):f("",!0)]),k(be,{selected:t.value,"onUpdate:selected":[s[2]||(s[2]=e=>t.value=e),D],items:(null==(C=null==(x=g(a).inventory)?void 0:x.result)?void 0:C.data)||[],headers:(null==(T=g(a).inventory)?void 0:T.result.header_table)||[],"clickable-row":!0,selectable:"","auto-width":"","item-value":"id",intersect:0==g(a).inventory.statusId,"observer-table":V,"more-actions":["delete","reset","restore"]},{column:y((({row:t,column:l,key:n,preventRowClick:o,resetRowClick:i})=>["item_name"===n?(v(),m("td",{key:0,onMouseenter:o,onMouseleave:i},[k(R,{to:{name:"inventoryEdit",params:{inventoryId:t.id}},class:"font-semibold inline-block word-break"},{default:y((()=>[b(P(l),1)])),_:2},1032,["to"])],40,ul)):"age"===n?(v(),m("td",cl,P([l||"0","Day(s)"].join(" ")),1)):"imeisn"===n?(v(),m("td",{key:2,onMouseenter:o,onMouseleave:i},[g(a).enablePhoneCheck&&"exists"==t.phonecheck_status?(v(),p(ct,{key:0,data:t},{default:y((({onCheck:e})=>[h("span",{class:"cursor-pointer text-blue-03 hover:underline",onClick:a=>(async(e,a=(async()=>{}))=>{e.loading=!0,await a(),e.loading=!1})(t,e)},[s[9]||(s[9]=h("div",null,[h("img",{src:"https://d18hvo5uozp8li.cloudfront.net/public/images/phonecheck.svg",alt:"",class:"mr-3 float-left h-6"})],-1)),b(" "+P(l),1)],8,ml)])),_:2},1032,["data"])):(v(),m("span",pl,P(l),1))],40,vl)):"cost"===n?(v(),m("td",yl,[k(fe,{value:t.cost||0},null,8,["value"])])):"price"===n?(v(),m("td",hl,[k(fe,{value:t.price||0},null,8,["value"])])):"profit"===n?(v(),m("td",fl,[k(fe,{value:t.profit||0},null,8,["value"])])):"sold_price"===n?(v(),m("td",gl,[k(fe,{value:t.sold_price||0},null,8,["value"])])):"invoice"===n?(v(),m("td",{key:7,onMouseenter:o,onMouseleave:i},[t.invoice?(v(),p(R,{key:0,class:"font-semibold",to:{name:"invoiceDetail",params:{buybackId:t.invoice}}},{default:y((()=>[b(P(l)+" ",1),s[10]||(s[10]=h("i",{class:"fas fa-external-link-alt ml-1"},null,-1))])),_:2},1032,["to"])):f("",!0)],40,_l)):"source"===n?(v(),m("td",{key:8,onMouseenter:o,onMouseleave:i},[0!==t.source_linkable?(v(),m("a",{key:0,href:t.source_link},[b(P(t.source||"-")+" ",1),s[11]||(s[11]=h("i",{class:"fas fa-external-link-alt ml-1"},null,-1))],8,kl)):(v(),m("span",wl,P(t.source||"-"),1))],40,bl)):"status"===n?(v(),m("td",{key:9,onMouseenter:o,onMouseleave:i},[k(Ka,{item:t,onChange:e=>{return a=e,(l=t).status=a,l;var a,l}},null,8,["item","onChange"])],40,xl)):"deeplink"===n?(v(),m("td",{key:10,onMouseenter:s[0]||(s[0]=(...a)=>e.preventRowClick&&e.preventRowClick(...a)),onMouseleave:s[1]||(s[1]=(...a)=>e.resetRowClick&&e.resetRowClick(...a))},[t.deeplink.is_valid?(v(),p(il,{key:0,onConfirm:$},{default:y((({onShow:e})=>[k(W,{color:"teal",onClick:a=>e(t)},{default:y((()=>{var e,a;return[h("p",null," Sell instantly for "+P(`${(null==(e=t.deeplink)?void 0:e.currency_symbol)||"$"}${(null==(a=t.deeplink)?void 0:a.price)||0}`),1)]})),_:2},1032,["onClick"])])),_:2},1024)):f("",!0)],32)):(v(),m("td",Cl,P(l||"-"),1))])),actionDelete:y((({row:e})=>[0!==e.status_id||e.deleted_at?f("",!0):(v(),m("div",{key:0,class:"flex items-center gap-x-2 px-4 py-2",onClick:a=>A("delete",e)},s[12]||(s[12]=[h("span",{class:"material-icons text-red-04"},"delete",-1),h("span",{class:"text-sm"},"Delete",-1)]),8,Il))])),actionReset:y((({row:e})=>[e.deleted_at?(v(),m("div",{key:0,class:"flex items-center gap-x-2 px-4 py-2",onClick:a=>A("reset",e)},s[13]||(s[13]=[h("span",{class:"material-icons text-green-04"},"replay",-1),h("span",{class:"text-sm"},"Reset",-1)]),8,Sl)):f("",!0)])),actionRestore:y((({row:e})=>[2===e.status_id?(v(),m("div",{key:0,class:"flex items-center gap-x-2 px-4 py-2",onClick:a=>A("restore",e)},s[14]||(s[14]=[h("span",{class:"material-icons"},"settings_backup_restore",-1),h("span",{class:"text-sm"},"Restore",-1)]),8,Dl)):f("",!0)])),_:1},8,["selected","items","headers","intersect"]),k(oe,{page:g(a).inventory.result.current_page,"onUpdate:page":[s[3]||(s[3]=e=>g(a).inventory.result.current_page=e),L],limit:g(a).inventory.result.per_page,"onUpdate:limit":[s[4]||(s[4]=e=>g(a).inventory.result.per_page=e),j],data:g(a).inventory.result},null,8,["page","limit","data"]),k(tt,{modelValue:n.actions,"onUpdate:modelValue":s[5]||(s[5]=e=>n.actions=e),data:l.value,"action-type":o.value,onDeleted:M,onReset:M,onRestore:M},null,8,["modelValue","data","action-type"])])):f("",!0)])),[[N,g(a).inventory.isLoading]])}}},Vl={class:"flex gap-2"},$l={class:"btn btn-smooth btn-grey btn-dense"},Al={class:"flex items-center gap-x-2"},Ml={class:"font-medium capitalize"},Ll=["onClick"],jl={key:0},Ul={__name:"InventoryFiltersTags",emits:["clear"],setup(e,{emit:a}){const t=da(),l=x([]),n=a,o=()=>{const e=Object.keys(t.filterTags).map((e=>{const a=t.filterTags[e],{raw:l,display:n}=((e,a)=>{if(Array.isArray(a)){if((e=>["sold","added","date"].includes(e))(e)){const e=a.filter(Boolean).map(pe);return{raw:e,display:e.join(" - ")}}return{raw:a,display:a.join(", ")}}return"object"==typeof a&&(null==a?void 0:a.name)?{raw:a,display:a.name}:{raw:a,display:a}})(e,a);return{name:"manufacturer"===e?"brand":"sold"===e?"date by sold":"added"===e?"date by added":e,key:e,value:l,displayValue:n}}));l.value=e.filter((e=>{const a=e.value;return null!=a&&("string"==typeof a?""!==a.trim():Array.isArray(a)?a.length>0:"object"!=typeof a||Object.keys(a).length>0&&!!a.id)}))},i=e=>{e?(o(),n("clear",e)):n("clear")},s=async()=>{t.inventory.isLoading||(1!=t.inventory.page&&(this.store.inventory.page=1),await ae(t.inventory,(()=>t.$getInventory())))};return j((()=>t.filterTags),((e,a)=>{JSON.stringify(e)!==JSON.stringify(a)&&(o(),s())})),(e,a)=>{var t;return v(),m("div",Vl,[(v(!0),m(w,null,T(l.value,(e=>(v(),m("div",{key:e.name},[h("div",$l,[h("div",Al,[h("p",Ml,P(e.name)+": ",1),b(" "+P(e.displayValue)+" ",1),h("i",{class:"material-icons text-sm cursor-pointer",onClick:a=>i(e.key)},"close",8,Ll)])])])))),128)),(null==(t=l.value)?void 0:t.length)?(v(),m("div",jl,[h("div",{class:"btn btn-smooth btn-grey btn-dense",onClick:a[0]||(a[0]=e=>i(void 0))},a[1]||(a[1]=[h("div",{class:"flex items-center gap-x-2"},[h("i",{class:"material-icons text-sm cursor-pointer"},"close"),h("p",{class:"font-medium"},"Clear All")],-1)]))])):f("",!0)])}}},Tl={class:"space-y-8"},Ol={class:"space-y-5"},Rl={class:"flex md:flex-row flex-col gap-4"},Nl={class:"flex-1"},El={class:"flex-1"},zl={class:"flex md:justify-end gap-x-2"},Fl={__name:"Tab",setup(e){var a;const t=da(),l=q(),n=G(),o=u({page:1,limit:10,total_page:1}),i=u({extension:"csv",name:"",startDate:null,endDate:null}),d=x(0),r=x(),c=()=>{var e,a;i.name=`Inventory ${null!=(a=null==(e=t.tabs.find((e=>e.id==t.inventory.statusId)))?void 0:e.name)?a:"Unknown"}`},p=async()=>{await t.$getInventory({page:o.page,limit:o.limit})},f=async e=>{t.inventory.statusId!==e&&(t.getStatusId(e),t.inventory.page=1,l.replace({params:{statusId:t.inventory.statusId}}),c(),await ae(t.inventory,p))},_=async()=>{const e=s({extension:i.extension},t.inventoryExport.params);await ae(t.inventoryExport,(()=>t.$getExport(e,`${i.name}-${i.startDate?me(i.startDate):me(new Date(Date.now()))}`)))},b=async()=>{await ae(t.inventory,p)},w=async e=>{r.value.inventoryFiltersColumn.onResetFilter(e)};return t.getStatusId(null==(a=n.params)?void 0:a.statusId),c(),M((async()=>{d.value=t.inventory.statusId,await ae(t.inventory,p),await t.$getDataUser()})),Z((()=>{t.inventory.search=null})),(e,a)=>(v(),m("div",Tl,[k(Pa),k(ye,{class:"space-y-5"},{default:y((()=>[h("div",Ol,[k(he,{modelValue:d.value,"onUpdate:modelValue":[a[0]||(a[0]=e=>d.value=e),f],items:g(t).tabs,by:"id",view:"smooth",component:""},null,8,["modelValue","items"]),k(ga,{"alert-type":"cost"}),k(ga,{"alert-type":"pending"}),h("div",Rl,[h("div",Nl,[k(Za,{ref_key:"inventoryFilters",ref:r},null,512)]),h("div",El,[h("div",zl,[k(na,{status:g(t).inventory.statusId,type:"inventory",onUpdateTable:b},null,8,["status"]),k(oa,{modelValue:i.extension,"onUpdate:modelValue":a[1]||(a[1]=e=>i.extension=e),"export-filename":i.name,loading:g(t).inventoryExport.isLoading,onExport:_},null,8,["modelValue","export-filename","loading"])])])]),k(Ul,{onClear:w}),k(Pl)])])),_:1})]))}};export{Fl as default};
