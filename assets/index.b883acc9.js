var e=Object.defineProperty,a=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,i=(a,t,o)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[t]=o,l=(e,l)=>{for(var s in l||(l={}))t.call(l,s)&&i(e,s,l[s]);if(a)for(var s of a(l))o.call(l,s)&&i(e,s,l[s]);return e};import{k as s,O as n,g as r,y as d,m as c,a0 as u,o as m,t as p,B as g,D as _,w as b,I as f,A as y,n as v,K as w,S as h,a2 as C,a3 as k,U as x,F as D}from"./vendor.f1efedad.js";import{_ as P,b as M,f as S,d as q,P as j,O as B,aq as U,g as A}from"./index.e231b017.js";import{u as O}from"./setting.86482221.js";import{_ as I}from"./tab.9f764545.js";import{C as V}from"./card.de1f0319.js";import{_ as T}from"./badge.3a8a2c41.js";import{B as N}from"./Breadcrumb.e5dd1515.js";import{_ as E}from"./catalog-not-found.379a4c88.js";import"./breadcrumb.e60df23d.js";const G=s({components:{Tab:I,Button:M,Card:V,Input:S,Badge:T,Modal:q,Breadcrumb:N,Pagination:j},async setup(e,{emit:a}){const t=n(),{data:o,state:i,stateSelectedMoreDevice:s,isAvailableDevice:c,loading:u,modal:m,selected:p,unsetData:g,openModal:_,actionAll:b,actionDelete:f,actionMoreDevice:y,actionConditionDeviceAvailability:v}=O(),w=r((()=>U.value.uploadProgress>0&&U.value.uploadProgress<100)),h=A((async()=>{await Promise.all([b(),v()])}),300);return d((()=>({page:o.page,limit:o.limit})),(async(e,a)=>{await h()}),{deep:!0}),await Promise.all([b(),v()]),{cellMouseEnter:(e,a,t,o)=>{},cellMouseLeave:(e,a,t,o)=>{},rowClick:(e,a,o)=>{if(w.value)return;const i={name:"settingConditionEdit",params:{conditionId:e.id},query:l({},(e.is_price_sync?{price_sync:1,unique_id:e.unique_id?e.unique_id:""}:e.unique_id&&{unique_id:e.unique_id})||{})};o.metaKey||o.ctrlKey?window.open(`${t.resolve(i).href}`,"_blank"):t.push(i)},data:o,state:i,stateSelectedMoreDevice:s,isAvailableDevice:c,loading:u,modal:m,breadcrumb:[{text:"Settings",to:{name:"setting"}},{text:"Conditions"}],unsetData:g,actionDelete:f,openModalSelected:(e,a)=>_(e,(()=>{p.value=a.id})),handleShowMoreDevice:async(e=null)=>{e&&await y(e.id,{is_price_sync:e.is_price_sync?e.is_price_sync:0,unique_id:e.unique_id?e.unique_id:null},(()=>{_("more_device")}))},handleSearch:h,sanitize:B,priceUploadProcess:w}}}),K={class:"flex justify-between lg:items-center md:items-end md:flex-row flex-col items-start mb-8"},$={class:"text-dark",style:{"word-break":"normal"}},L={class:"flex flex-col md:flex-row mb-10"},J={class:"flex-grow md:mr-3 md:mb-0 mb-3"},z={class:"table__container"},F={key:0,class:"max-w-lg mx-auto mt-10 mb-6 space-y-6"},H={key:1,class:"mx-auto mt-10 mb-6 space-y-6"},R={key:1,class:"font-semibold opacity-50"},Y={class:"list"},Q={class:"font-semibold text-base text-black mb-3"},W=["innerHTML"],X={key:0,class:"list w-full"},Z={key:0},ee={class:"opacity-50"},ae={class:"mb-6"},te={class:"mb-4"},oe={class:"list"};var ie=P(G,[["render",function(e,a,t,o,i,s){const n=c("Breadcrumb"),r=c("router-link"),d=c("Button"),P=c("Popover"),M=c("Input"),S=c("TableColumn"),q=c("Badge"),j=c("Table"),B=c("Pagination"),U=c("Card"),A=c("Modal"),O=u("loading");return m(),p("div",null,[g("div",K,[_(n,{pageTitle:"Conditions",backTo:{name:"setting"},items:e.breadcrumb},null,8,["items"]),_(P,{placement:"left",width:360,trigger:"hover",disabled:e.isAvailableDevice},{reference:b((()=>[g("div",null,[_(d,{disabled:!e.isAvailableDevice||e.priceUploadProcess,color:"teal",class:"lg:mt-0 mt-4 ml-auto",to:{name:"settingConditionCreate"},link:""},{default:b((()=>a[11]||(a[11]=[f("Add Condition Group")]))),_:1},8,["disabled"])])])),default:b((()=>[g("p",$,[a[9]||(a[9]=f(" Before you can set up conditions, you must first enable products from the ")),_(r,{to:{name:"settingBuybackDevice"}},{default:b((()=>a[8]||(a[8]=[f("Catalog Settings")]))),_:1}),a[10]||(a[10]=f(" page. "))])])),_:1},8,["disabled"])]),_(U,null,{default:b((()=>[g("div",L,[g("div",J,[_(M,{modelValue:e.data.search,"onUpdate:modelValue":a[0]||(a[0]=a=>e.data.search=a),placeholder:"Search by Category Name, or Item Name",class:"w-full",icon:"",onKeyup:e.handleSearch},{icon:b((()=>a[12]||(a[12]=[g("span",{class:"material-icons"},"search",-1)]))),_:1},8,["modelValue","onKeyup"])])]),y((m(),p("div",z,[_(j,{class:"mb-6 w-full",data:e.state,"row-class-name":!e.priceUploadProcess&&"condition-row",onRowClick:e.rowClick},{empty:b((()=>[e.isAvailableDevice?(m(),p("div",F,[a[14]||(a[14]=g("img",{class:"mx-auto",alt:"not-found",src:E},null,-1)),a[15]||(a[15]=g("p",{class:"leading-5 text-2xl"},"No Condition",-1)),a[16]||(a[16]=g("p",{class:"leading-5 text-base"},"You don't have any conditions set yet. Before proceeding to pricing, please add conditions according to your needs.",-1)),_(d,{link:"",color:"teal",view:"outlined",to:{name:"settingConditionCreate"}},{default:b((()=>a[13]||(a[13]=[g("div",{class:"flex"},[f(" Add Condition Group "),g("span",{class:"material-icons"},"arrow_right")],-1)]))),_:1})])):(m(),p("div",H,[a[18]||(a[18]=g("img",{class:"mx-auto",alt:"not-found",src:E},null,-1)),a[19]||(a[19]=g("p",{class:"leading-5 text-2xl"},"No Items Found",-1)),a[20]||(a[20]=g("p",{class:"leading-5 text-base"},[f(" To set items condition, you first need to enable items in the Catalog. Click the "),g("b",null,"Go to Catalog Page"),f(" button below, switch on the toggle for the items you want to display, and then proceed to the Price Editor to set their conditions and prices ")],-1)),_(d,{link:"",color:"teal",view:"outlined",to:{name:"settingBuybackDevice"}},{default:b((()=>a[17]||(a[17]=[g("div",{class:"flex"},[f(" Go to Catalog Page "),g("span",{class:"material-icons"},"arrow_right")],-1)]))),_:1})]))])),default:b((()=>[_(S,{prop:"group_name",label:"Group By Condition"},{default:b((t=>[e.priceUploadProcess?(m(),p("p",R,w(t.row.group_name)+" "+w(t.row.price_sync_source?` (${t.row.price_sync_source})`:""),1)):(m(),v(r,{key:0,to:{name:"settingConditionEdit",params:{conditionId:t.row.id},query:l({},(t.row.is_price_sync?{price_sync:1,unique_id:t.row.unique_id?t.row.unique_id:""}:t.row.unique_id&&{unique_id:t.row.unique_id})||{})},class:"font-semibold",onClick:a[1]||(a[1]=h((()=>{}),["stop"]))},{default:b((()=>[f(w(t.row.group_name)+" "+w(t.row.price_sync_source?` (${t.row.price_sync_source})`:""),1)])),_:2},1032,["to"]))])),_:1}),_(S,{prop:"devices",label:"Items"},{default:b((t=>[g("div",{class:D(e.priceUploadProcess&&"opacity-50")},[g("ul",Y,[(m(!0),p(C,null,k(t.row.devices,(e=>(m(),p("li",{key:e,class:"text-grey-04"},w(e.brand)+" - "+w(e.name),1)))),128))]),t.row.show_more>0?(m(),v(d,{key:0,onClick:h((a=>e.handleShowMoreDevice(t.row)),["stop"]),onMouseenter:a[2]||(a[2]=h((()=>{}),["stop"])),loading:e.loading.more_device.get(t.row.id),class:"mt-4 mb-2",color:"teal",view:"smooth",dense:""},{default:b((()=>[f("Show More +"+w(t.row.show_more),1)])),_:2},1032,["onClick","loading"])):x("",!0)],2)])),_:1}),_(S,{prop:"conditions",label:"Conditions"},{default:b((t=>[g("div",{class:D([e.priceUploadProcess&&"opacity-50","flex flex-wrap gap-2"]),onMouseenter:a[3]||(a[3]=h((()=>{}),["stop"]))},[(m(!0),p(C,null,k(t.row.conditions,(a=>(m(),v(P,{key:a,placement:t.$index>=6?"top-start":"bottom-start",width:400,trigger:"hover"},{reference:b((()=>[_(q,{color:"grey",class:"cursor-pointer"},{default:b((()=>[f(w(a.name),1)])),_:2},1024)])),default:b((()=>{var t;return[g("h6",Q," Condition: "+w(a.name),1),g("p",{class:"text-dark mb-2",innerHTML:e.sanitize(a.condition_term&&(null==(t=JSON.parse(a.condition_term))?void 0:t[0])||"")},null,8,W),a.condition_term&&JSON.parse(a.condition_term)?(m(),p("ul",X,[(m(!0),p(C,null,k(JSON.parse(a.condition_term),((e,a)=>(m(),p(C,{key:a},[0!==a?(m(),p("li",Z,w(e),1)):x("",!0)],64)))),128))])):x("",!0)]})),_:2},1032,["placement"])))),128))],34)])),_:1}),_(S,{prop:"updated_at",label:"Last Update",class:"opacity-50"},{default:b((e=>{var a;return[g("p",ee,w(null==(a=null==e?void 0:e.row)?void 0:a.updated_at),1)]})),_:1})])),_:1},8,["data","row-class-name","onRowClick"])])),[[O,e.loading.all]]),_(B,{page:e.data.page,"onUpdate:page":a[4]||(a[4]=a=>e.data.page=a),limit:e.data.limit,"onUpdate:limit":a[5]||(a[5]=a=>e.data.limit=a),data:e.data.table},null,8,["page","limit","data"])])),_:1}),_(A,{modelValue:e.modal.delete,"onUpdate:modelValue":a[6]||(a[6]=a=>e.modal.delete=a),title:"Delete Category",onClose:e.unsetData},{footer:b((()=>[_(d,{color:"red",loading:e.loading.delete,onClick:e.actionDelete},{default:b((()=>a[21]||(a[21]=[f("Delete Category")]))),_:1},8,["loading","onClick"])])),default:b((()=>[a[22]||(a[22]=g("p",null,"Are you sure want to delete this category?",-1))])),_:1},8,["modelValue","onClose"]),_(A,{modelValue:e.modal.more_device,"onUpdate:modelValue":a[7]||(a[7]=a=>e.modal.more_device=a),title:`Products - ${e.stateSelectedMoreDevice.group_name}`,"hide-footer":""},{default:b((()=>[g("div",ae,[g("p",te,w(e.stateSelectedMoreDevice.devices.length)+" Products ",1),g("ul",oe,[(m(!0),p(C,null,k(e.stateSelectedMoreDevice.devices,(e=>(m(),p("li",{key:e.id,class:"text-grey-04"},w(e.brand)+" - "+w(e.name),1)))),128))])])])),_:1},8,["modelValue","title"])])}]]);export{ie as default};
