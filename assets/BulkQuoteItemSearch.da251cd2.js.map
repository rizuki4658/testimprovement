{"version":3,"file":"BulkQuoteItemSearch.da251cd2.js","sources":["../../src/components/BSlider/BSlider.vue","../../src/components/BulkQuote/Item/BulkQuoteItemTable.vue","../../src/components/BulkQuote/Item/BulkQuoteItem.vue","../../src/components/BulkQuote/Item/BulkQuoteItemPercentage.vue","../../src/components/BulkQuote/Item/BulkQuoteItemSearch.vue"],"sourcesContent":["<template>\n  <div\n    :class=\"[\n      'b-slider',\n      block && 'b-slider--block',\n      disabled && 'b-slider--disabled'\n    ]\"\n  >\n    <input\n      :disabled=\"disabled\"\n      ref=\"refSlider\"\n      class=\"b-slider__slider\"\n      v-model=\"value\"\n      type=\"range\"\n      :min=\"min\"\n      :max=\"max\"\n      :step=\"1\"\n    />\n    <div ref=\"refSliderTooltip\" class=\"b-slider__tooltip\">\n      <slot name=\"tooltip\" v-bind=\"{ value }\">\n        <span>{{ sliderPercentage }}</span>\n      </slot>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { computed, onMounted, reactive, ref, watch } from 'vue'\n\nexport default {\n  name: 'BSlider',\n  props: {\n    modelValue: {\n      type: Number,\n      default: 0\n    },\n    min: {\n      type: Number,\n      default: 0\n    },\n    max: {\n      type: Number,\n      default: 100\n    },\n    step: {\n      type: Number,\n      default: 1\n    },\n    block: {\n      type: Boolean,\n      default: false\n    },\n    disabled: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: ['update:modelValue'],\n  setup(props, { emit }) {\n    const refSliderTooltip = ref(null)\n    const refSlider = ref(null)\n    const data = reactive({\n      value: 0\n    })\n    const value = computed({\n      get: () => (props.modelValue && props.modelValue) || data.value,\n      set: (newValue = 0) => {\n        emit('update:modelValue', newValue)\n        data.value = newValue\n      }\n    })\n    const sliderBasePercentage = computed(() =>\n      Math.round((value.value / props.max) * 100)\n    )\n    const sliderPercentage = computed(() => {\n      return `${sliderBasePercentage.value}%`\n    })\n\n    const calculateSliderTooltipPosition = () => {\n      // calculate the position of the slider tooltip relative to the slider\n      // const sliderRect = refSlider.value.getBoundingClientRect()\n      const sliderTooltipRect = refSliderTooltip.value.getBoundingClientRect()\n\n      const newVal = Number(\n        ((value.value - props.min) * 100) / (props.max - props.min)\n      )\n      refSliderTooltip.value.style.left = `calc((${newVal}% - ${sliderTooltipRect.width / 2}px) + (${8 - newVal * 0.15}px))`\n    }\n\n    watch(sliderPercentage, calculateSliderTooltipPosition)\n\n    onMounted(() => {\n      calculateSliderTooltipPosition()\n    })\n\n    return {\n      refSliderTooltip,\n      refSlider,\n      value,\n      sliderPercentage\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"scss\">\n.b-slider {\n  @apply inline-block relative;\n  &--block {\n    @apply block;\n  }\n  &--disabled{\n    @apply opacity-50;\n  }\n\n  &__slider {\n    @apply w-full;\n    ::-webkit-slider-runnable-track {\n      @apply w-full;\n    }\n  }\n\n  &__tooltip {\n    @apply bg-grey-04 text-white rounded-lg box-content py-2 px-4 absolute -top-12;\n  }\n}\n\ninput[type='range'] {\n  cursor: pointer;\n}\n\ninput[type='range'],\ninput[type='range']::-webkit-slider-runnable-track,\ninput[type='range']::-webkit-slider-thumb {\n  -webkit-appearance: none;\n}\n\ninput[type='range']::-webkit-slider-runnable-track {\n  height: 10px;\n  background: linear-gradient(\n      to right,\n      theme('colors.teal.04'),\n      theme('colors.teal.04')\n    ),\n    theme('colors.grey.01');\n  background-size: v-bind(sliderPercentage) 100%;\n  background-repeat: no-repeat;\n  border-radius: 5px;\n}\n\ninput[type='range']::-moz-range-track {\n  height: 10px;\n  background: linear-gradient(\n      to right,\n      theme('colors.teal.04'),\n      theme('colors.teal.04')\n    ),\n    theme('colors.grey.01');\n  background-size: v-bind(sliderPercentage) 100%;\n  background-repeat: no-repeat;\n  border-radius: 5px;\n}\n\ninput[type='range']::-webkit-slider-thumb {\n  @apply bg-white h-6 w-6 -mt-1.5 shadow;\n  border-radius: 50%;\n  border: 1px solid rgba(0, 0, 0, 0.2);\n}\n</style>","<template>\n  <BTable\n    :headers=\"tableHeaders\"\n    :items=\"tableData\"\n    min-width=\"auto\"\n    :class=\"[preview && 'table-preview']\"\n    :time-stamp=\"false\"\n  >\n    <template #header=\"{ header }\">\n      <template v-if=\"header.key !== 'product_name'\">\n        <th\n          :key=\"header.key\"\n          :class=\"['number-column', preview && 'column-normal']\"\n          :style=\"{\n            minWidth: header.key === 'qty' && '100px'\n          }\"\n        >\n          <template v-if=\"header.key.startsWith('condition_') && !preview\">\n            <span class=\"flex items-center justify-center gap-2\">\n              {{ header.column_name }}\n              <Tooltip placement=\"top\" :disabled=\"!header?.meta?.rules?.length\">\n                <i\n                  :class=\"[\n                    'material-icons cursor-pointer',\n                    !header?.meta?.rules?.length && 'opacity-50'\n                  ]\">\n                  info\n                </i>\n                <template #content>\n                  <div class=\"max-w-md\">\n                    <ul class=\"list\">\n                      <li\n                        v-for=\"(term, termIndex) of header?.meta?.rules || []\"\n                        :key=\"termIndex\"\n                        class=\"text-white\"\n                      >\n                        <span v-html=\"term\"></span>\n                      </li>\n                    </ul>\n                  </div>\n                </template>\n              </Tooltip>\n            </span>\n          </template>\n          <template v-else>\n            {{ header.column_name }}\n          </template>\n        </th>\n      </template>\n      <template v-else>\n        <th :key=\"header.key\" :class=\"[preview && 'column-normal']\">\n          {{ header.column_name }}\n        </th>\n      </template>\n    </template>\n    <template #column=\"{ key, column, row, rowIndex }\">\n      <template v-if=\"preview\">\n        <td v-if=\"key.startsWith('condition_')\" class=\"number-column\">\n          <Currency :value=\"column?.price\"></Currency>\n        </td>\n        <td\n          v-else-if=\"key === 'qty'\"\n          class=\"number-column\"\n          :style=\"{ minWidth: '70px' }\"\n        >\n          {{ column }}\n        </td>\n        <td\n          v-else\n          class=\"font-semibold\"\n          :style=\"{ minWidth: '300px', maxWidth: '300px' }\"\n        >\n          {{ column }}\n        </td>\n      </template>\n      <template v-else>\n        <td v-if=\"key === 'product_name'\" :style=\"{ minWidth: '300px' }\">\n          <template v-if=\"row?.is_custom === 1\">\n            <Input\n              :key=\"`input-name-${rowIndex}`\"\n              :model-value=\"column\"\n              @update:model-value=\"updateName(rowIndex, $event)\"\n              block\n              :disabled=\"disabled\"\n              class=\"mb-6\"\n            />\n          </template>\n          <template v-else>\n            {{ column }}\n          </template>\n        </td>\n        <td v-else-if=\"key === 'qty'\" :style=\"{ minWidth: '70px' }\">\n          <Input\n            :key=\"`input-qty-${rowIndex}`\"\n            :model-value=\"column\"\n            @update:model-value=\"updateQty(rowIndex, $event)\"\n            type=\"number\"\n            right\n            block\n            :disabled=\"disabled || disabledStatus\"\n            class=\"mb-6\"\n          />\n        </td>\n        <td\n          v-else-if=\"key.startsWith('condition_')\"\n          :style=\"{ minWidth: '150px' }\"\n        >\n          <Input\n            :key=\"`input-price-${rowIndex}`\"\n            :model-value=\"column?.price\"\n            @update:model-value=\"\n              updateConditionPrice(rowIndex, column, $event, {\n                isManuallyPriced: true\n              })\n            \"\n            type=\"number\"\n            :currency=\"true\"\n            block\n            :disabled=\"disabled || disabledStatus\"\n          />\n          <small\n            :style=\"{ opacity: column.is_manually_priced ? '1' : '0' }\"\n            class=\"text-grey-03 text-right block mt-2\"\n            >Manually priced</small\n          >\n        </td>\n        <td v-else>\n          {{ column }}\n        </td>\n      </template>\n    </template>\n    <template #footerRows>\n      <!-- Total Row -->\n      <tr class=\"b-table__row\">\n        <td\n          v-for=\"(column, columnIndex) of tableFooter\"\n          :key=\"`total_${columnIndex}`\"\n          :class=\"[columnIndex > 0 && 'number-column']\"\n        >\n          <template\n            v-if=\"columnIndex > 1 && columnIndex < tableFooter.length - 1\"\n          >\n            <Currency class=\"font-medium\" :value=\"column\"></Currency>\n          </template>\n          <template v-else>\n            <span class=\"font-medium\">{{ column }}</span>\n          </template>\n        </td>\n      </tr>\n      <!-- Commission Row -->\n      <tr v-if=\"showCommission\" class=\"b-table__row\">\n        <td\n          v-for=\"(column, columnIndex) of commissionFooter\"\n          :key=\"`commission_${columnIndex}`\"\n          :class=\"[columnIndex > 0 && 'number-column']\"\n        >\n          <template\n            v-if=\"columnIndex > 1 && columnIndex < commissionFooter.length - 1\"\n          >\n            <Currency class=\"font-medium text-blue-600\" :value=\"column\"></Currency>\n          </template>\n          <template v-else>\n            <div class=\"flex gap-2 items-center\">\n              <span class=\"font-medium\">{{ column }}</span>\n              <Tooltip v-if=\"columnIndex === 0\" placement=\"top\">\n                <template #content>\n                  <div :style=\"{ maxWidth: '300px' }\">\n                    <p>This commission value is subject to change at any time.</p>\n                  </div>\n                </template>\n                <i class=\"text-teal-04 material-icons ml-2 cursor-pointer\">info</i>\n              </Tooltip> \n            </div>\n          </template>\n        </td>\n      </tr>\n    </template>\n    <template #action=\"{ rowIndex, row }\">\n      <td>\n        <template v-if=\"!disabled && !preview\">\n          <template v-if=\"reconcile\">\n            <Button @click=\"reconcileItem(row)\" color=\"teal\" dense>\n              <p class=\"flex items-center gap-2 ml-3\">\n                Reconcile <i class=\"material-icons\">chevron_right</i>\n              </p>\n            </Button>\n          </template>\n          <template v-else>\n            <a\n              href=\"\"\n              @click.prevent=\"deleteItem(rowIndex, row)\"\n              class=\"px-3 py-2 flex items-center justify-center\"\n            >\n              <i class=\"material-icons\">close</i>\n            </a>\n          </template>\n        </template>\n      </td>\n    </template>\n  </BTable>\n</template>\n\n<script>\nimport { computed, defineComponent, watch } from 'vue'\nimport { useUser } from 'composable/user'\n\nimport BTable from 'components/BTable/BTable.vue'\nimport Input from 'bbUi/components/input/input.vue'\nimport Button from 'bbUi/components/button/button.vue'\n\nimport Currency from 'components/Currency.vue'\n\nimport { money } from 'utils/number'\n\nexport default defineComponent({\n  name: 'BulkQuoteItemTable',\n  components: { BTable, Input, Button, Currency },\n  props: {\n    items: {\n      type: Array\n    },\n    percentage: {\n      type: Number,\n      default: 100\n    },\n    preview: {\n      type: Boolean,\n      default: false\n    },\n    disabled: {\n      type: Boolean,\n      default: true\n    },\n    disabledStatus: {\n      type: Boolean,\n      default: true\n    },\n    reconcile: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: ['update:items', 'deleteItem', 'editItem', 'reconcileItem'],\n  setup(props, { emit }) {\n    const { me } = useUser()\n    const showCommission = computed(() => me.value.is_view_commission)\n    const data = {\n      items: []\n    }\n    const items = computed({\n      get: () => {\n        return (props.items && props.items) || data.items\n      },\n      set: (items = []) => {\n        emit('update:items', items)\n        data.items = items\n      }\n    })\n    const itemConditions = computed(() => {\n      const isEmptyItem = items.value.length < 1\n      if (isEmptyItem) return []\n      \n      const uniqueConditions = new Map()\n      \n      items.value.forEach(item => {\n        const { conditions = {} } = item\n        const { data: conditionData = [] } = conditions\n        \n        conditionData.forEach(condition => {\n          if (!uniqueConditions.has(condition.name)) {\n            uniqueConditions.set(condition.name, {\n              name: condition.name,\n              rules: condition.rule\n            })\n          }\n        })\n      })\n\n      return Array.from(uniqueConditions.values())\n    })\n\n    const tableHeaders = computed(() => {\n      let headers = [\n        {\n          key: 'product_name',\n          column_name: props.preview ? 'Device' : 'Item',\n          meta: {}\n        },\n        {\n          key: 'qty',\n          column_name: 'Qty',\n          meta: {}\n        }\n      ]\n      itemConditions.value.forEach((condition) => {\n        headers.push({\n          key: transformConditionNameToKey(condition.name),\n          column_name: condition.name,\n          meta: {\n            rules: transformConditionRules(condition.rules)\n          }\n        })\n      })\n      return headers\n    })\n\n    const tableData = computed(() => {\n      return items.value.map((item) => {\n        const { conditions = {} } = item\n        const { data: conditionData = [] } = conditions\n        \n        const existingConditions = Object.fromEntries(\n          conditionData.map((condition) => [\n            transformConditionNameToKey(condition.name),\n            {\n              ...condition,\n              price: condition.price || 0\n            }\n          ])\n        )\n        \n        const normalizedConditions = {}\n        itemConditions.value.forEach(condition => {\n          const key = transformConditionNameToKey(condition.name)\n          normalizedConditions[key] = existingConditions[key] || {\n            name: condition.name,\n            price: 0,\n            is_manually_priced: false\n          }\n        })\n        \n        return {\n          ...item,\n          ...normalizedConditions\n        }\n      })\n    })\n    const calculateTotalQuantity = computed(() => {\n      return items.value.reduce(\n        (acc, item) => acc + (parseInt(item.qty) || 0),\n        0\n      )\n    })\n    const decimalPercentage = computed(\n      () => (parseInt(`${props.percentage}`) || 0) / 100\n    )\n    const calculateConditionPrices = computed(() => {\n      const conditionPrices = {}\n      \n      itemConditions.value.forEach(condition => {\n        conditionPrices[condition.name] = 0\n      })\n      \n      items.value.forEach(item => {\n        const { conditions = {} } = item\n        const { data: conditionData = [] } = conditions\n        const quantity = parseFloat(item.qty) || 0\n        \n        conditionData.forEach((condition) => {\n          const price = parseFloat(condition.price) || 0\n          conditionPrices[condition.name] = (conditionPrices[condition.name] || 0) + price * quantity\n        })\n      })\n      \n      return Object.values(conditionPrices)\n    })\n\n    const calculateCommissionPrices = computed(() => {\n      const commissionPrices = {}\n\n      itemConditions.value.forEach(condition => {\n        commissionPrices[condition.name] = 0\n      })\n\n      items.value.forEach(item => {\n        const { conditions = {} } = item\n        const { data: conditionData = [] } = conditions\n        const quantity = parseFloat(item.qty) || 0\n\n        conditionData.forEach(condition => {\n          const price = parseFloat(condition.price) || 0\n          const priceFromSource = parseFloat(condition.price_from_source) || 0\n          const diff = priceFromSource - price\n\n          commissionPrices[condition.name] = (commissionPrices[condition.name] || 0) + diff * quantity\n        })\n      })\n\n      return Object.values(commissionPrices)\n    })\n\n\n    const tableFooter = computed(() => {\n      const totalQuantity = calculateTotalQuantity.value\n      const conditionPrices = calculateConditionPrices.value || []\n\n      return ['Total', totalQuantity, ...conditionPrices, '']\n    })\n\n    const commissionFooter = computed(() => {\n      const commissionPrices = calculateCommissionPrices.value || []\n      const emptyColumns = Array(itemConditions.value.length - commissionPrices.length).fill(0)\n\n      return ['Commission', '', ...commissionPrices, ...emptyColumns, '']\n    })\n\n    const emitEditItemEvent = (item) => {\n      emit('editItem', item)\n    }\n    const transformConditionNameToKey = (conditionName) => {\n      // replace all non-alphanumeric characters with underscores\n      return `condition_${conditionName}`\n    }\n    const transformConditionRules = (rules) => {\n      let newRules = rules ? JSON.parse(rules) : []\n      if (\n        Array.isArray(newRules) &&\n        newRules.length === 1 &&\n        newRules.includes(null)\n      ) newRules = []\n\n      return newRules || []\n    }\n\n    const getItemConditionByName = (items = [], conditionName) => {\n      return items.findIndex((item) => item.name === conditionName)\n    }\n    const updateConditionPrice = (\n      itemIndex,\n      condition,\n      newPrice,\n      options = { isManuallyPriced: false }\n    ) => {\n      const currentItems = [...items.value]\n      const hasNotMatchedItem = itemIndex < 0\n      if (hasNotMatchedItem) return\n      const conditionData = currentItems[itemIndex].conditions.data\n      const matchedConditionIndex = getItemConditionByName(\n        conditionData,\n        condition.name\n      )\n      \n      if (matchedConditionIndex === -1) {\n        currentItems[itemIndex].conditions.data.push({\n          name: condition.name,\n          price: newPrice,\n          is_manually_priced: options.isManuallyPriced || false,\n          original_price: newPrice,\n          rule: condition.rule || null\n        })\n      } else {\n        currentItems[itemIndex].conditions.data[matchedConditionIndex].price =\n          newPrice\n        currentItems[itemIndex].conditions.data[\n          matchedConditionIndex\n        ].is_manually_priced = options.isManuallyPriced || false\n      }\n      \n      items.value = currentItems\n      if (options.isManuallyPriced) emitEditItemEvent(currentItems[itemIndex])\n    }\n    const updateQty = (itemIndex, quantity = 1) => {\n      const currentItems = [...items.value]\n\n      const hasNotMatchedItem = itemIndex < 0\n      if (hasNotMatchedItem) return\n      currentItems[itemIndex].qty = quantity\n      items.value = currentItems\n      emitEditItemEvent(currentItems[itemIndex])\n    }\n    const updateName = (itemIndex, name) => {\n      const currentItems = [...items.value]\n      const hasNotMatchedItem = itemIndex < 0\n      if (hasNotMatchedItem) return\n      currentItems[itemIndex].product_name = name\n      items.value = currentItems\n      emitEditItemEvent(currentItems[itemIndex])\n    }\n    const deleteItem = (itemIndex, item) => {\n      const currentItems = [...items.value]\n      const hasNotMatchedItem = itemIndex < 0\n      if (hasNotMatchedItem) return\n      currentItems.splice(itemIndex, 1)\n      items.value = currentItems\n      emit('deleteItem', item)\n    }\n    const reconcileItem = (item) => {\n      emit('reconcileItem', item)\n    }\n    const updateAllConditionPricesByPercentage = () => {\n      const currentItems = [...items.value]\n      currentItems.forEach((item, itemIndex) => {\n        const { conditions = {} } = item || {}\n        const { data: conditionData = [] } = conditions\n        conditionData.forEach((condition, index) => {\n          const isManuallyPriced = condition.is_manually_priced\n          if (isManuallyPriced) return\n          const calculatedPrice =\n            condition.original_price * decimalPercentage.value\n          updateConditionPrice(itemIndex, condition, calculatedPrice)\n        })\n      })\n    }\n    watch(decimalPercentage, updateAllConditionPricesByPercentage)\n\n    return {\n      items,\n      itemConditions,\n      tableHeaders,\n      tableData,\n      tableFooter,\n      commissionFooter,\n      updateConditionPrice,\n      updateQty,\n      updateName,\n      deleteItem,\n      reconcileItem,\n      money,\n      showCommission\n    }\n  }\n})\n</script>\n\n<style scoped lang=\"scss\">\n.number-column {\n  @apply text-right #{!important};\n}\n\n.b-table__footer {\n  .b-table__row {\n    @apply border-t border-teal-02;\n  }\n}\n\n.table-preview {\n  @apply border-0;\n  :deep(.b-table__header) {\n    background-color: rgba(255, 255, 255, 0);\n\n    tr {\n      @apply border-b-2 border-teal-04;\n    }\n  }\n\n  :deep(.b-table__row) {\n    &:hover {\n      background-color: unset;\n    }\n  }\n\n  :deep(.b-table__footer) {\n    background-color: rgba(255, 255, 255, 0);\n\n    tr {\n      @apply border-0;\n    }\n  }\n\n  .column-normal {\n    @apply font-normal;\n  }\n}\n</style>","<template>\n  <div>\n    <Fieldset\n      v-for=\"(item, itemIndex) of items\"\n      :key=\"item.id\"\n      class=\"my-4\"\n      style=\"min-width: 0\"\n    >\n      <template #label>{{ item.name }}</template>\n      <template #default>\n        <BulkQuoteItemTable\n          :items=\"item.items\"\n          @update:items=\"handleUpdateItem(itemIndex, $event)\"\n          @delete-item=\"$emit('deleteItem', $event)\"\n          @edit-item=\"$emit('editItem', $event)\"\n          @reconcile-item=\"$emit('reconcileItem', $event)\"\n          :percentage=\"percentage\"\n          :disabled=\"disabled\"\n          :disabled-status=\"disabledStatus\"\n          :reconcile=\"reconcile\"\n        />\n      </template>\n    </Fieldset>\n  </div>\n</template>\n<script>\nimport { computed, defineComponent, reactive } from 'vue'\n\nimport Fieldset from 'bbUi/components/fieldset/fieldset.vue'\n\nimport BSlider from 'components/BSlider/BSlider.vue'\nimport BTable from 'components/BTable/BTable.vue'\nimport BulkQuoteItemTable from 'components/BulkQuote/Item/BulkQuoteItemTable.vue'\n\nexport default defineComponent({\n  name: 'BulkQuoteItem',\n  components: {\n    Fieldset,\n    BSlider,\n    BTable,\n    BulkQuoteItemTable\n  },\n  props: {\n    items: {\n      type: Array\n    },\n    percentage: {\n      type: Number\n    },\n    disabled: {\n      type: Boolean,\n      default: false\n    },\n    disabledStatus: {\n      type: Boolean,\n      default: false\n    },\n    reconcile: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: [\n    'update:percentage',\n    'update:items',\n    'deleteItem',\n    'editItem',\n    'reconcileItem'\n  ],\n  setup(props, { emit }) {\n    const data = reactive({\n      items: []\n    })\n    const items = computed({\n      get: () => (props.items && props.items) || data.items,\n      set: (newItems = []) => {\n        const newFilteredItems = newItems.filter(\n          (item) => item.items.length > 0\n        )\n        emit('update:items', newFilteredItems)\n        data.items = newFilteredItems\n      }\n    })\n    const hasOneOrMoreItems = computed(() => items.value.length > 0)\n\n    const handleUpdateItem = (itemIndex, updatedItems) => {\n      const currentItems = [...items.value]\n      currentItems[itemIndex].items = updatedItems\n      items.value = currentItems\n    }\n\n    return {\n      data,\n      items,\n      hasOneOrMoreItems,\n      handleUpdateItem\n    }\n  }\n})\n</script>\n<style scoped lang=\"scss\"></style>\n","<template>\n  <div v-if=\"show\">\n    <label class=\"font-medium mb-2\">Quoted Price</label>\n    <div class=\"flex items-center gap-4\">\n      <span>0%</span>\n      <BSlider\n        class=\"flex-grow\"\n        v-model.number=\"percentage\"\n        :disabled=\"disabled\"\n        block\n      />\n      <span>100%</span>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { computed, defineComponent, reactive } from 'vue'\nimport BSlider from 'components/BSlider/BSlider.vue'\n\nexport default defineComponent({\n  name: 'BulkQuoteItemPercentage',\n  components: { BSlider },\n  props: {\n    modelValue: {\n      type: Number\n    },\n    disabled: {\n      type: Boolean,\n      default: false\n    },\n    create: {\n      type: Boolean,\n      default: false\n    },\n    order: {\n      type: Object,\n      default: () => ({\n        id: ''\n      })\n    }\n  },\n  emits: ['update:modelValue'],\n  setup(props, { emit }) {\n    const data = reactive({\n      percentage: 0\n    })\n    const show = computed(() => {\n      if (!!props.create) return true\n\n      if (!!props.order && !!props.order?.status_id && props.order?.status_id === 9000) return true\n\n      return false\n    })\n    const percentage = computed({\n      get: () => (props.modelValue && props.modelValue) || data.percentage,\n      set: (newValue = 0) => {\n        emit('update:modelValue', newValue)\n        data.percentage = newValue\n      }\n    })\n    return {\n      show,\n      percentage\n    }\n  }\n})\n</script>\n\n<style scoped lang=\"scss\"></style>\n","<template>\n  <ProductSearch\n    v-model:query=\"querySearch\"\n    @search=\"handleSearchItems\"\n    @select=\"handleSelectItem\"\n    :label=\"null\"\n    :products=\"products\"\n    :categories=\"categories\"\n    :loading=\"loadingSearchItems\"\n    :show-add-custom-product=\"false\"\n    :active-product-unprice=\"isProductActiveButNoPrice\"\n    placeholder=\"Find or add an item\"\n  />\n</template>\n\n<script>\nimport { defineComponent } from 'vue'\n\nimport { useSearchItem } from 'composable/bulkquote'\n\nimport ProductSearch from 'components/Device/Form/DeviceSearch.vue'\nimport debounce from 'utils/debounce'\n\nexport default defineComponent({\n  name: 'BulkQuoteItemSearch',\n  components: { ProductSearch },\n  props: {\n    clearOnSelect: {\n      type: Boolean,\n      default: true\n    }\n  },\n  emits: ['select'],\n  setup(props, { emit }) {\n    const {\n      querySearch,\n      products,\n      categories,\n      loading: loadingSearchItems,\n      searchItems,\n      isProductActiveButNoPrice\n    } = useSearchItem()\n\n    const handleSearchItems = debounce(() => searchItems(), 500)\n    const handleSelectItem = (item) => {\n      emit('select', item)\n      if (props.clearOnSelect) {\n        querySearch.value = ''\n        return\n      }\n      querySearch.value = item.product_name\n    }\n    return {\n      querySearch,\n      products,\n      categories,\n      loadingSearchItems,\n      isProductActiveButNoPrice,\n      handleSearchItems,\n      handleSelectItem\n    }\n  }\n})\n</script>\n\n<style scoped lang=\"scss\"></style>\n"],"names":["__default__","name","props","modelValue","type","Number","default","min","max","step","block","Boolean","disabled","emits","[object Object]","emit","refSliderTooltip","ref","refSlider","data","reactive","value","computed","get","set","newValue","sliderBasePercentage","Math","round","sliderPercentage","calculateSliderTooltipPosition","sliderTooltipRect","getBoundingClientRect","newVal","style","left","width","watch","onMounted","_cache","$props","$setup","$data","$options","_openBlock","_createElementBlock","_withDirectives","_createElementVNode","onUpdate:modelValue","$event","_hoisted_2","_renderSlot","_ctx","$slots","_sfc_main","defineComponent","components","BTable","Input","Button","Currency","items","Array","percentage","preview","disabledStatus","reconcile","me","useUser","showCommission","is_view_commission","items2","itemConditions","length","uniqueConditions","Map","forEach","item","conditions","conditionData","condition","has","rules","rule","from","values","tableHeaders","headers","key","column_name","meta","push","transformConditionNameToKey","transformConditionRules","tableData","map","existingConditions","Object","fromEntries","price","normalizedConditions","is_manually_priced","__spreadValues","calculateTotalQuantity","reduce","acc","parseInt","qty","decimalPercentage","calculateConditionPrices","conditionPrices","quantity","parseFloat","calculateCommissionPrices","commissionPrices","diff","price_from_source","tableFooter","commissionFooter","emptyColumns","fill","emitEditItemEvent","conditionName","newRules","JSON","parse","isArray","includes","updateConditionPrice","itemIndex","newPrice","options","isManuallyPriced","currentItems","matchedConditionIndex","findIndex","getItemConditionByName","original_price","index","calculatedPrice","updateQty","updateName","product_name","deleteItem","splice","reconcileItem","money","class","_hoisted_11","Fieldset","BSlider","BulkQuoteItemTable","_createBlock","_component_BTable","min-width","_normalizeClass","header","_withCtx","_normalizeStyle","startsWith","_hoisted_1","_createTextVNode","_toDisplayString","_createVNode","_component_Tooltip","placement","content","_hoisted_3","_Fragment","_renderList","_a2","term","termIndex","column","row","rowIndex","_hoisted_5","_component_Currency","_hoisted_6","_hoisted_8","_component_Input","model-value","_hoisted_9","right","_hoisted_10","currency","opacity","footerRows","_hoisted_12","columnIndex","_hoisted_14","_hoisted_15","_hoisted_16","maxWidth","onClick","color","href","_withModifiers","newItems","newFilteredItems","filter","hasOneOrMoreItems","handleUpdateItem","updatedItems","_component_Fieldset","id","label","_component_BulkQuoteItemTable","onUpdate:items","onDeleteItem","$emit","onEditItem","onReconcileItem","disabled-status","create","order","show","_a","status_id","_b","_component_BSlider","modelModifiers","number","ProductSearch","clearOnSelect","querySearch","products","categories","loading","loadingSearchItems","searchItems","isProductActiveButNoPrice","useSearchItem","handleSearchItems","debounce","handleSelectItem","_component_ProductSearch","onUpdate:query","onSearch","onSelect","show-add-custom-product","active-product-unprice"],"mappings":"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"}