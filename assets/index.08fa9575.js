import{u as a}from"./components.3d07dc59.js";import{k as e,f as t,g as i,y as l,_ as s,m as o,$ as n,o as d,t as c,D as r,w as p,B as m,a1 as u,A as g,n as y,K as f,F as _,S as b,I as k,U as h,a5 as x,r as v,x as C}from"./vendor.9695fe57.js";import{P as w,b as V,j as K,f as I,_ as S,g as T,d as U}from"./index.9c4dcead.js";import{c as R}from"./integration.c4dcecda.js";import{_ as j}from"./tab.f3c6bb7c.js";import{_ as A}from"./fieldset.b90636af.js";import"./LoadingCard.ab052f4a.js";import"./card.afeb5d7a.js";const D=e({components:{Pagination:w,Button:V,Alert:K,Input:I,Tab:j,Fieldset:A},async setup(){const{data:a,loading:e,configs:o,loadingConfigs:n,actionShow:d,actionUpdate:c,actionDelete:r,updateConfig:p,setConfig:m}=R(),u=t("location"),g=i((()=>a.items.length)),y=i((()=>a.lastPage)),f=i((()=>({from:a.limit*a.page-a.limit+1,to:a.limit*a.page>g.value?g.value:a.limit*a.page,last_page:y.value,total:g.value}))),_=T((async()=>{await d({search:a.search,page:a.page,limit:a.limit})}),300);return l((()=>({limit:a.limit,page:a.page})),T((async()=>{await d({search:a.search,page:a.page,limit:a.limit})}))),await Promise.all([d()]),{data:a,loading:e,tableOptions:f,tab:[{id:"location",name:"Locations"}],selectedTab:u,configs:o,loadingConfigs:n,setConfig:m,handleSearch:_,handleDeleteApiKey:async(e,t)=>{await r(e.id,(async()=>{e.is_edit=!1,e.repairdesk_api_key=void 0,a.apiKeys[`apiKey${a.items[t].key}`]=void 0,await d({search:a.search,page:a.page,limit:a.limit})}))},handleTestConnection:async(e,t)=>{await c({id:e.id,repairdesk_api_key:t},(async()=>{e.repairdesk_api_key=t,e.is_edit=!1,await d({search:a.search,page:a.page,limit:a.limit})}))},handleUpdateConfig:async a=>{a&&(m(a),await p((async()=>{s({type:"success",message:"Repairdesk settings updated"}),await d()})))}}}}),P={class:"mb-4"},$={class:"text-teal-04 font-semibold mb-2"},B={class:"text-sm text-grey-02"},F={class:"text-sm text-grey-02"},M={class:"text-sm text-grey-02"},L={key:2,class:"flex items-center gap-x-2 flex-wrap"},N={class:"text-sm"},O={class:"lg:opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-x-2"},q={key:1,class:"my-8 grid grid-cols-3"},z={class:"col-span-3 lg:col-span-1"};var E=S(D,[["render",function(a,e,t,i,l,s){const x=o("Alert"),v=o("Tab"),C=o("Input"),w=o("TableColumn"),V=o("Button"),K=o("Table"),I=o("Pagination"),S=o("RadioButton"),T=o("RadioGroup"),U=o("Fieldset"),R=n("loading");return d(),c("div",null,[r(x,{view:"smooth",color:"orange",class:"mb-8"},{default:p((()=>e[7]||(e[7]=[m("div",{class:"flex gap-x-2 -mx-4 -my-2"},[m("i",{class:"material-icons"},"info"),m("span",{whitelabel:"text-replace","data-label":"domain custom alert"}," Connect your RepairDesk account to your Reusely account to automatically move completed trade-in tickets and inventory from your Reusely account to your RepairDesk account. ")],-1)]))),_:1}),r(v,{modelValue:a.selectedTab,"onUpdate:modelValue":e[0]||(e[0]=e=>a.selectedTab=e),items:a.tab,name:"name",by:"id",component:""},null,8,["modelValue","items"]),"location"===a.selectedTab?(d(),c(u,{key:0},[r(C,{modelValue:a.data.search,"onUpdate:modelValue":e[1]||(e[1]=e=>a.data.search=e),placeholder:"Search everything...",class:"w-full mb-4",icon:"",onInput:a.handleSearch},{icon:p((()=>e[8]||(e[8]=[m("span",{class:"material-icons"},"search",-1)]))),_:1},8,["modelValue","onInput"]),m("div",P,[g((d(),y(K,{data:a.data.items},{default:p((()=>[r(w,{label:"Store Name",width:"250"},{default:p((({row:a})=>[m("span",$,f(a.name),1),m("p",B,f(a.email),1),m("p",F,f(a.address_text),1),m("p",M,f(a.phone),1)])),_:1}),r(w,{label:"Selling Method",width:"150"},{default:p((({row:a})=>[m("div",{class:_([1==a.is_mailin?"text-teal-04 bg-teal-01":"text-blue-04 bg-blue-01","inline-block text-xs px-2","rounded-full py-0.5"])},f(a.is_mailin?"Mail-In":"In-Store"),3)])),_:1}),r(w,{label:"Repairdesk Private App API Key"},{default:p((({row:t,$index:i})=>[t.repairdesk_api_key||t.is_edit?h("",!0):(d(),c("div",{key:0,class:"lg:opacity-0 group-hover:opacity-100 transition-opacity",onClick:e[2]||(e[2]=b((()=>{}),["stop"]))},[r(V,{color:"teal",dense:"",onClick:a=>t.is_edit=!0},{default:p((()=>e[9]||(e[9]=[k("Add API Key")]))),_:2},1032,["onClick"])])),!t.repairdesk_api_key&&t.is_edit||t.repairdesk_api_key&&t.is_edit?(d(),c("div",{key:1,class:"flex items-center gap-x-2 w-full",onClick:e[3]||(e[3]=b((()=>{}),["stop"]))},[r(C,{modelValue:a.data.apiKeys[`apiKey${t.id}`],"onUpdate:modelValue":e=>a.data.apiKeys[`apiKey${t.id}`]=e,dense:"",class:"flex-1 max-w-xs"},null,8,["modelValue","onUpdate:modelValue"]),r(V,{color:"teal",dense:"",onClick:e=>a.handleTestConnection(t,a.data.apiKeys[`apiKey${t.id}`])},{default:p((()=>e[10]||(e[10]=[k(" Test Connection & Save ")]))),_:2},1032,["onClick"])])):h("",!0),t.repairdesk_api_key&&!t.is_edit?(d(),c("div",L,[m("span",N,f(t.repairdesk_api_key),1),m("div",O,[r(V,{color:"teal",dense:"",onClick:a=>t.is_edit=!0},{default:p((()=>e[11]||(e[11]=[m("i",{class:"material-icons text-lg"},"edit",-1)]))),_:2},1032,["onClick"]),r(V,{color:"red",dense:"",onClick:e=>a.handleDeleteApiKey(t,i)},{default:p((()=>e[12]||(e[12]=[m("i",{class:"material-icons text-lg"},"delete",-1)]))),_:2},1032,["onClick"])])])):h("",!0)])),_:1})])),_:1},8,["data"])),[[R,a.loading]])]),r(I,{page:a.data.page,"onUpdate:page":e[4]||(e[4]=e=>a.data.page=e),limit:a.data.limit,"onUpdate:limit":e[5]||(e[5]=e=>a.data.limit=e),data:a.tableOptions},null,8,["page","limit","data"])],64)):(d(),c("div",q,[m("div",z,[r(U,null,{label:p((()=>e[13]||(e[13]=[m("span",null,"What identify do you use in RepairDesk?",-1)]))),default:p((()=>[r(T,{disabled:a.loadingConfigs.update||a.loadingConfigs.fetch,modelValue:a.configs.identifier,"onUpdate:modelValue":e[6]||(e[6]=e=>a.handleUpdateConfig({identifier:e})),class:"radio--full"},{default:p((()=>[r(S,{label:"Imei"},{default:p((()=>e[14]||(e[14]=[k("IMEI")]))),_:1}),r(S,{label:"Serial"},{default:p((()=>e[15]||(e[15]=[k("Serial Number")]))),_:1})])),_:1},8,["disabled","modelValue"])])),_:1})])]))])}]]),G=e({async setup(){const{genSuspense:e}=a(),i=t(null);x();const l=v({modelValue:!0,closeTo:{name:"integration",query:{reload:1}},size:"lg"}),s=v({header:()=>"RepairDesk Config",default:()=>e(C(E,{ref:i}))}),o=C(U,l,s);return()=>C("div",[o])}});export{G as default};
