var e=Object.defineProperty,a=Object.defineProperties,t=Object.getOwnPropertyDescriptors,l=Object.getOwnPropertySymbols,o=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,i=(a,t,l)=>t in a?e(a,t,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[t]=l,s=(e,a)=>{for(var t in a||(a={}))o.call(a,t)&&i(e,t,a[t]);if(l)for(var t of l(a))r.call(a,t)&&i(e,t,a[t]);return e};import{k as d,a5 as n,y as u,m as c,a0 as m,o as p,t as f,B as _,D as g,w as b,a4 as w,I as y,a2 as h,a3 as v,n as k,K as x,U as D,A as P,O as S,g as C}from"./vendor.f1efedad.js";import{f as F}from"./setting.86482221.js";import{h as V,i as O}from"./customer.a2559fd1.js";import{f as j}from"./buyback.362c230f.js";import{b as T,f as I,e as U,P as B,g as M,_ as L,u as A,a5 as R}from"./index.e231b017.js";import{c as z}from"./status.6f59bf91.js";import{_ as E}from"./badge.3a8a2c41.js";import{_ as G}from"./group-container.4951adfc.js";import{S as q}from"./select.04e4ee62.js";import{_ as N}from"./tab.9f764545.js";import{C as $}from"./Currency.3768e3b3.js";import{T as K}from"./TextLimit.43017255.js";import"./date.f86face7.js";import"./format.f845777a.js";const Q=d({components:{Badge:E,GroupContainer:G,Button:T,Input:I,Checkbox:U,Select:q,Pagination:B,Tab:N,Currency:$,TextLimit:K},async setup(){const{data:e,loading:a,loadingSalesPerson:t,state:l,stateSalesPerson:o,invoiceStatuses:r,action:i,actionSalesPerson:s,filterDateRef:d,filterDateOptions:c,filterDateFocus:m,filterList:p,isFiltered:f,clearFilter:_,clearAllFilter:g}=V(),b=n();u((()=>({limit:e.limit,search:e.search,sales_person:e.sales_person,date:e.date,status_id:e.status_id})),(()=>{e.page=1}),{deep:!0}),u((()=>({data:e,category:b.params.category})),M((async()=>{"invoice"==b.params.category&&await Promise.all([i(b.params.customerId)])}),500),{immediate:!0,deep:!0});return s(),{data:e,table:l,loading:a,loadingSalesPerson:t,route:b,tableSummary:({columns:e})=>e.map((e=>"sub_total"===e.property?`${currency(me.value,l.value.total_displayed)}`:"qty"===e.property?"Total":"")),filterDateRef:d,filterDateOptions:c,filterDateFocus:m,invoiceStatuses:r,stateSalesPerson:o,filterList:p,isFiltered:f,clearFilter:_,clearAllFilter:g}}}),H={class:"flex flex-col md:flex-row mb-6"},J={class:"flex-grow md:mr-3 md:mb-0 mb-3"},W={class:"flew-grow-0"},X={class:"flex items-center flex-row mb-6"},Y=["onClick"],Z={class:"inline-block ml-3"};const ee=d({components:{Badge:E,GroupContainer:G,Button:T,Input:I,Checkbox:U,Select:q,Pagination:B,Tab:N,Currency:$,Invoice:L(Q,[["render",function(e,a,t,l,o,r){const i=c("Input"),s=c("DatePicker"),d=c("Button"),n=c("Checkbox"),u=c("DropdownItem"),S=c("DropdownMenu"),C=c("Dropdown"),F=c("GroupContainer"),V=c("router-link"),O=c("TableColumn"),j=c("Badge"),T=c("TextLimit"),I=c("Currency"),U=c("Table"),B=c("Pagination"),M=m("loading");return p(),f("div",null,[_("div",H,[_("div",J,[g(i,{modelValue:e.data.search,"onUpdate:modelValue":a[0]||(a[0]=a=>e.data.search=a),placeholder:"Search Everything",class:"w-full",icon:""},{icon:b((()=>a[6]||(a[6]=[_("span",{class:"material-icons"},"search",-1)]))),_:1},8,["modelValue"])]),_("div",W,[g(F,null,{default:b((()=>[g(d,{color:"white",view:"outlined",class:"flex-auto",onClick:e.filterDateFocus,onBlur:e.filterDateFocus},{default:b((()=>[g(s,w({modelValue:e.data.date,"onUpdate:modelValue":a[1]||(a[1]=a=>e.data.date=a)},e.filterDateOptions,{type:"daterange",ref:"filterDateRef",class:"hide-picker"}),null,16,["modelValue"]),a[7]||(a[7]=y(" Select Date "))])),_:1},8,["onClick","onBlur"]),g(C,{trigger:"click",size:"medium","hide-on-click":!1},{dropdown:b((()=>[g(S,null,{default:b((()=>[(p(!0),f(h,null,v(e.invoiceStatuses,((t,l)=>(p(),k(u,{key:l},{default:b((()=>[g(n,{color:"teal",modelValue:e.data.status_id,"onUpdate:modelValue":a[2]||(a[2]=a=>e.data.status_id=a),value:t.id},{default:b((()=>[y(x(t.name),1)])),_:2},1032,["modelValue","value"])])),_:2},1024)))),128))])),_:1})])),default:b((()=>[g(d,{color:"white",view:"outlined",class:"flex-auto dropdown dropdown-arrow"},{default:b((()=>a[8]||(a[8]=[y("Status")]))),_:1})])),_:1}),g(C,{trigger:"click",size:"medium","hide-on-click":!1,disabled:e.loadingSalesPerson},{dropdown:b((()=>[g(S,null,{default:b((()=>[(p(!0),f(h,null,v(e.stateSalesPerson,((t,l)=>(p(),k(u,{key:l},{default:b((()=>[g(n,{color:"teal",modelValue:e.data.sales_person,"onUpdate:modelValue":a[3]||(a[3]=a=>e.data.sales_person=a),value:t},{default:b((()=>[y(x(t.sales_person),1)])),_:2},1032,["modelValue","value"])])),_:2},1024)))),128))])),_:1})])),default:b((()=>[g(d,{color:"white",view:"outlined",class:"flex-auto dropdown dropdown-arrow",loading:e.loadingSalesPerson},{default:b((()=>a[9]||(a[9]=[y("Sales Person")]))),_:1},8,["loading"])])),_:1},8,["disabled"])])),_:1})])]),_("div",X,[(p(!0),f(h,null,v(e.filterList,((a,t)=>(p(),f("div",{class:"inline-block",key:t},[a.value?(p(),k(d,{key:0,color:"grey",view:"smooth",dense:"",class:"mx-1"},{default:b((()=>[_("b",null,x(a.name)+":",1),y(" "+x(a.value)+" ",1),_("i",{class:"material-icons text-sm ml-2",onClick:t=>e.clearFilter(a)},"close",8,Y)])),_:2},1024)):D("",!0)])))),128)),_("div",Z,[e.isFiltered?(p(),k(d,{key:0,onClick:e.clearAllFilter,color:"teal",view:"smooth",dense:""},{default:b((()=>a[10]||(a[10]=[_("i",{class:"material-icons text-sm mr-1"},"close",-1),y("Clear all ")]))),_:1},8,["onClick"])):D("",!0)])]),P((p(),k(U,{class:"mb-6",data:e.table.data,"highlight-current-row":""},{default:b((()=>[g(O,{prop:"box_id",label:"Invoice#"},{default:b((e=>[g(V,{tag:"a",class:"font-bold",to:{name:"invoiceDetail",params:{buybackId:e.row.box_id}}},{default:b((()=>[y(x(e.row.box_id),1)])),_:2},1032,["to"])])),_:1}),"all"==e.data.status_id?(p(),k(O,{key:0,prop:"status_invoice",label:"Status",width:"100"},{default:b((e=>[g(j,{class:"whitespace-nowrap",color:"Paid"==e.row.status_invoice?"teal":"red"},{default:b((()=>[y(x(e.row.status_invoice),1)])),_:2},1032,["color"])])),_:1})):D("",!0),g(O,{label:"Bill To",width:"150"},{default:b((e=>[g(T,{text:e.row.customer_fullname||""},null,8,["text"])])),_:1}),g(O,{prop:"sales_person",label:"Sales Person",width:"150"},{default:b((e=>[g(T,{text:e.row.sales_person||""},null,8,["text"])])),_:1}),g(O,{prop:"invoice_date",label:"Invoice Date",width:"100"}),g(O,{width:"100",label:"3"==e.data.status_id?"Date Paid":"Due Date"},{default:b((a=>[y(x(3==e.data.status_id?a.row.closed_date:a.row.due_date),1)])),_:1},8,["label"]),g(O,{prop:"sub_total",label:"Total",width:"200",align:"right"},{default:b((e=>[g(I,{value:e.row.sub_total},null,8,["value"])])),_:1}),"1"==e.data.status_id?(p(),k(O,{key:1,prop:"balance_due",label:"Balance Due",width:"200",align:"right"},{default:b((e=>[g(I,{value:e.row.balance_due},null,8,["value"])])),_:1})):D("",!0),"3"==e.data.status_id||"1"==e.data.status_id?(p(),k(O,{key:2,prop:"profit",label:"Profit",width:"150",align:"right"},{default:b((e=>[g(I,{value:e.row.profit},null,8,["value"])])),_:1})):D("",!0),"3"==e.data.status_id?(p(),k(O,{key:3,prop:"profit_percentage",label:"Profit Margin",width:"100",align:"right"},{default:b((e=>[y(x(e.row.profit_percentage)+"% ",1)])),_:1})):D("",!0),"3"!=e.data.status_id?(p(),k(O,{key:4,prop:"shipping_tracking",label:"Tracking Number",width:"300"},{default:b((e=>[y(x(e.row.shipping_tracking),1)])),_:1})):D("",!0)])),_:1},8,["data"])),[[M,e.loading]]),g(B,{page:e.data.page,"onUpdate:page":a[4]||(a[4]=a=>e.data.page=a),limit:e.data.limit,"onUpdate:limit":a[5]||(a[5]=a=>e.data.limit=a),data:e.table},null,8,["page","limit","data"])])}]])},props:{customer:{type:Boolean,default:!1}},async setup(e){const{state:l,loading:o,action:r}=F(),{tab:i,data:d,state:c,action:m,filterList:p,clearFilter:f,clearAllFilter:_,isFiltered:g,filterDateRef:b,filterDateOptions:w,filterDateFocus:y,loading:h}=O();V();const{state:v,action:k}=j("online"),{state:x,action:D}=j("local"),{me:P}=A(),T=n(),I=S();u((()=>({limit:d.limit,search:d.search,payment_method:d.payment_method,date:d.date,courier:d.shipping_courier,status:d.statuses,category:T.params.category})),(()=>{d.page=1}),{deep:!0}),u((()=>({data:d,category:T.params.category})),M((async()=>{const e="in-store"===T.params.category;var l,o;!e&&P.value.package_id<3&&I.push({name:T.name,params:(l=s({},T.params),o={category:"in-store"},a(l,t(o)))}),["in-store","mail-in"].includes(T.params.category)&&await Promise.all([await m(T.params.customerId,e)])}),500),{immediate:!0,deep:!0}),r();const U=C((()=>"in-store"===T.params.category?x.value:v.value));return await Promise.all([await k(),await D()]),{tab:i,data:d,couriers:[{id:"USPS",name:"USPS"},{id:"FedEx",name:"FedEx"},{id:"UPS",name:"UPS"}],loading:h,table:c,statuses:U,stateOnlineStatuses:v,stateLocalStatuses:x,filterList:p,isFiltered:g,statePaymentMethods:l,loadingPaymentMethods:o,actionPaymentMethods:r,filterDateRef:b,filterDateOptions:w,filterDateFocus:y,color:z,me:P,clearFilter:f,clearAllFilter:_,tableSummary:({columns:e})=>e.map((e=>"sub_total"===e.property?`${R(P.value,c.value.total_displayed)}`:"qty"===e.property?"Total":"")),redirectToOrder:e=>{I.push({name:1===e.is_local?"buybackLocalDetail":"buybackOnlineDetail",params:{buybackId:e.box_id}})},validateMenus:e=>"mail-in"!==e.id||P.value.package_id>2,route:T}}}),ae={key:0},te={class:"flex flex-col md:flex-row mb-6"},le={class:"flex-grow md:mr-3 md:mb-0 mb-3"},oe={class:"flew-grow-0"},re={class:"flex items-center flex-row mb-6"},ie=["onClick"],se={class:"inline-block ml-3"};var de=L(ee,[["render",function(e,a,t,l,o,r){const i=c("Tab"),s=c("Input"),d=c("DatePicker"),n=c("Button"),u=c("Checkbox"),S=c("DropdownItem"),C=c("DropdownMenu"),F=c("Dropdown"),V=c("GroupContainer"),O=c("router-link"),j=c("TableColumn"),T=c("Badge"),I=c("Currency"),U=c("Table"),B=c("Pagination"),M=c("Invoice"),L=m("loading");return p(),f("div",null,[_("div",null,[g(i,{view:"smooth",items:e.tab,validate:e.validateMenus},null,8,["items","validate"])]),["in-store","mail-in"].includes(e.route.params.category)?(p(),f("div",ae,[_("div",te,[_("div",le,[g(s,{modelValue:e.data.search,"onUpdate:modelValue":a[0]||(a[0]=a=>e.data.search=a),placeholder:"Search Everything",class:"w-full",icon:""},{icon:b((()=>a[7]||(a[7]=[_("span",{class:"material-icons"},"search",-1)]))),_:1},8,["modelValue"])]),_("div",oe,[g(V,null,{default:b((()=>[g(n,{color:"white",view:"outlined",class:"flex-auto",onClick:e.filterDateFocus,onBlur:e.filterDateFocus},{default:b((()=>[g(d,w({modelValue:e.data.date,"onUpdate:modelValue":a[1]||(a[1]=a=>e.data.date=a)},e.filterDateOptions,{type:"daterange",ref:"filterDateRef",class:"hide-picker"}),null,16,["modelValue"]),a[8]||(a[8]=y(" Select Date "))])),_:1},8,["onClick","onBlur"]),g(F,{trigger:"click",size:"medium","hide-on-click":!1},{dropdown:b((()=>[g(C,null,{default:b((()=>[(p(!0),f(h,null,v(e.statuses,((t,l)=>(p(),k(S,{key:l},{default:b((()=>[g(u,{color:"teal",modelValue:e.data.statuses,"onUpdate:modelValue":a[2]||(a[2]=a=>e.data.statuses=a),value:t},{default:b((()=>[y(x(t.status_name),1)])),_:2},1032,["modelValue","value"])])),_:2},1024)))),128))])),_:1})])),default:b((()=>[g(n,{color:"white",view:"outlined",class:"flex-auto dropdown dropdown-arrow"},{default:b((()=>a[9]||(a[9]=[y("Status")]))),_:1})])),_:1}),g(F,{trigger:"click",size:"medium","hide-on-click":!1,disabled:e.loadingPaymentMethods},{dropdown:b((()=>[g(C,null,{default:b((()=>[(p(!0),f(h,null,v(e.statePaymentMethods,((t,l)=>(p(),k(S,{key:l},{default:b((()=>[g(u,{color:"teal",modelValue:e.data.payment_method,"onUpdate:modelValue":a[3]||(a[3]=a=>e.data.payment_method=a),value:t.name},{default:b((()=>[y(x(t.name),1)])),_:2},1032,["modelValue","value"])])),_:2},1024)))),128))])),_:1})])),default:b((()=>[g(n,{color:"white",view:"outlined",class:"flex-auto dropdown dropdown-arrow",loading:e.loadingPaymentMethods},{default:b((()=>a[10]||(a[10]=[y("Payout Method")]))),_:1},8,["loading"])])),_:1},8,["disabled"]),"mail-in"===e.route.params.category?(p(),k(F,{key:0,trigger:"click",size:"medium","hide-on-click":!1},{dropdown:b((()=>[g(C,null,{default:b((()=>[(p(!0),f(h,null,v(e.couriers,((t,l)=>(p(),k(S,{key:l},{default:b((()=>[g(u,{color:"teal",modelValue:e.data.shipping_courier,"onUpdate:modelValue":a[4]||(a[4]=a=>e.data.shipping_courier=a),value:t.name},{default:b((()=>[y(x(t.name),1)])),_:2},1032,["modelValue","value"])])),_:2},1024)))),128))])),_:1})])),default:b((()=>[g(n,{color:"white",view:"outlined",class:"flex-auto dropdown dropdown-arrow"},{default:b((()=>a[11]||(a[11]=[y("Courier")]))),_:1})])),_:1})):D("",!0)])),_:1})])]),_("div",re,[(p(!0),f(h,null,v(e.filterList,((a,t)=>(p(),f("div",{class:"inline-block",key:t},[a.value?(p(),k(n,{key:0,color:"grey",view:"smooth",dense:"",class:"mx-1"},{default:b((()=>[_("b",null,x(a.name)+":",1),y(" "+x(a.value),1),_("i",{class:"material-icons text-sm ml-2",onClick:t=>e.clearFilter(a)},"close",8,ie)])),_:2},1024)):D("",!0)])))),128)),_("div",se,[e.isFiltered?(p(),k(n,{key:0,onClick:e.clearAllFilter,color:"teal",view:"smooth",dense:""},{default:b((()=>a[12]||(a[12]=[_("i",{class:"material-icons text-sm mr-1"},"close",-1),y("Clear all ")]))),_:1},8,["onClick"])):D("",!0)])]),P((p(),k(U,{class:"mb-6",data:e.table.data,"highlight-current-row":"",onCurrentChange:e.redirectToOrder,"show-summary":"","summary-method":e.tableSummary},{default:b((()=>[g(j,{prop:"box_id",label:"Buyback ID#",width:"150"},{default:b((e=>[g(O,{tag:"a",class:"font-bold",to:{name:1===e.is_local?"buybackLocalDetail":"buybackOnlineDetail",params:{buybackId:e.row.box_id}}},{default:b((()=>[y(x(e.row.box_id),1)])),_:2},1032,["to"])])),_:1}),"customerDetail"!==e.route.name?(p(),k(j,{key:0,prop:"name",label:"Name",width:"300"},{default:b((e=>{var a,t;return[y(x(e.row.name||(null==(t=null==(a=e.row)?void 0:a.customer)?void 0:t.email)||""),1)]})),_:1})):D("",!0),g(j,{prop:"order_status.short_name",label:"Status"},{default:b((a=>[g(T,{class:"whitespace-nowrap",color:e.color(a.row.order_status.short_name)},{default:b((()=>[y(x(a.row.order_status.short_name),1)])),_:2},1032,["color"])])),_:1}),g(j,{prop:"order_date",label:"Status Date"},{default:b((e=>[y(x(e.row.order_date),1)])),_:1}),g(j,{prop:"payment_method",label:"Payout Method",width:"150"}),"mail-in"===e.route.params.category?(p(),k(j,{key:1,prop:"shipping_courier",label:"Courier"})):D("",!0),g(j,{prop:"qty",label:"Qty",align:"right"}),g(j,{prop:"sub_total",label:"Total",align:"right"},{default:b((e=>[g(I,{value:e.row.sub_total},null,8,["value"])])),_:1})])),_:1},8,["data","onCurrentChange","summary-method"])),[[L,e.loading]]),g(B,{page:e.data.page,"onUpdate:page":a[5]||(a[5]=a=>e.data.page=a),limit:e.data.limit,"onUpdate:limit":a[6]||(a[6]=a=>e.data.limit=a),data:e.table},null,8,["page","limit","data"])])):D("",!0),"invoice"==e.route.params.category?(p(),k(M,{key:1})):D("",!0)])}]]);export{de as default};
