import{u as e}from"./components.2c51ae72.js";import{k as l,f as a,m as o,o as t,t as n,I as s,D as i,w as r,B as c,K as d,a2 as u,a3 as m,_ as p,a5 as h,O as w,r as v,x as _}from"./vendor.f1efedad.js";import{_ as f,b as y,j as b,f as g,v as C,d as k}from"./index.ec266ec1.js";import{a as x,b as W}from"./integration.db2aa4c7.js";import{u as $}from"./index.32689823.js";import{r as j}from"./index.a87b789d.js";import"./LoadingCard.93d3634e.js";import"./card.198a6be1.js";import"./index.05b14cb2.js";const V=l({name:"WholeCell Header",setup:()=>({tooltipContent:a({title:"Purchase Orders in WholeCell.io will be mapped with the following information",contents:["Channel = reusely.com","Status = completed","Transaction Number = buyback/offer ID","Organization = Customer Name","Purchase Order Date = date offer is completed"]})})}),P={class:"flex items-center gap-x-2"},A={class:"w-80"},q={class:"text-sm"},I={class:"pt-4 pl-4"},O={class:"list-disc"};var T=f(V,[["render",function(e,l,a,p,h,w){const v=o("Tooltip");return t(),n("div",P,[l[1]||(l[1]=s(" WholeCell.io ")),i(v,null,{content:r((()=>[c("div",A,[c("span",q,d(e.tooltipContent.title)+":",1),c("div",I,[c("ul",O,[(t(!0),n(u,null,m(e.tooltipContent.contents,((e,l)=>(t(),n("li",{key:l,class:"text-sm leading-6"},d(e),1)))),128))])])])])),default:r((()=>[l[0]||(l[0]=c("span",{class:"material-icons text-teal-04 text-4xl"},"info",-1))])),_:1})])}]]);var D=f(l({components:{Button:y,Alert:b,Input:g},async setup(){const{state:e,data:l,actionAll:a,actionUpdate:o,loading:t}=x(),{wholeCell:n,loading:s}=W(),i=$({wholecell_name:{required:j},wholecell_appid:{required:j},wholecell_secret_key:{required:j}},l,{$lazy:!0}),r=()=>(i.value.$validate(),!i.value.$invalid);return await Promise.all([a()]),{state:e,data:l,loading:t,loadingTestConnection:s,validation:i,testConnection:async()=>{if(!r())return;const e={wholecell_name:l.wholecell_name,wholecell_appid:l.wholecell_appid,wholecell_secret_key:l.wholecell_secret_key};await n(e)},update:async(e=(()=>{}))=>{if(!r())return;const a=Object.assign({},{wholecell_name:l.wholecell_name,wholecell_appid:l.wholecell_appid,wholecell_secret_key:l.wholecell_secret_key});await o(a,(l=>{if("connection failed"===l.toLowerCase())return p({type:"warning",message:"WholeCell.io connection failed"});p({type:"success",message:"WholeCell.io integration updated!"}),C(e)&&e()}))}}}}),[["render",function(e,l,a,p,h,w){const v=o("Alert"),_=o("Input"),f=o("Button");return t(),n(u,null,[i(v,{view:"smooth",color:"blue",class:"mb-4"},{default:r((()=>l[3]||(l[3]=[c("div",{class:"flex space-x-4"},[c("i",{class:"material-icons"},"info"),c("span",null,"When enabling the Wholecell.io add-on, any product that is added to your inventory will automatically have a Purchase Order generated and moved to your Wholecell.io inventory.")],-1)]))),_:1}),i(_,{modelValue:e.data.wholecell_name,"onUpdate:modelValue":l[0]||(l[0]=l=>e.data.wholecell_name=l),view:e.validation.wholecell_name.$invalid?"danger":"default",class:"my-4",label:"WholeCell.io Name",placeholder:"WholeCell.io Name",block:""},null,8,["modelValue","view"]),(t(!0),n(u,null,m(e.validation.wholecell_name.$errors,((e,l)=>(t(),n("small",{class:"text-red-base block mb-4",key:l},d(e.$message)+". ",1)))),128)),i(_,{modelValue:e.data.wholecell_appid,"onUpdate:modelValue":l[1]||(l[1]=l=>e.data.wholecell_appid=l),view:e.validation.wholecell_appid.$invalid?"danger":"default",class:"my-4",label:"WholeCell.io APP ID",placeholder:"WholeCell.io APP ID",block:""},null,8,["modelValue","view"]),(t(!0),n(u,null,m(e.validation.wholecell_appid.$errors,((e,l)=>(t(),n("small",{class:"text-red-base block mb-4",key:l},d(e.$message)+". ",1)))),128)),i(_,{modelValue:e.data.wholecell_secret_key,"onUpdate:modelValue":l[2]||(l[2]=l=>e.data.wholecell_secret_key=l),view:e.validation.wholecell_secret_key.$invalid?"danger":"default",class:"my-4",label:"WholeCell.io App Secret",placeholder:"WholeCell.io App Secret",block:""},null,8,["modelValue","view"]),(t(!0),n(u,null,m(e.validation.wholecell_secret_key.$errors,((e,l)=>(t(),n("small",{class:"text-red-base block mb-4",key:l},d(e.$message)+". ",1)))),128)),i(f,{color:"teal",onClick:e.testConnection,loading:e.loadingTestConnection},{default:r((()=>l[4]||(l[4]=[s("Test Connection")]))),_:1},8,["onClick","loading"])],64)}]]),S=l({async setup(){const{genSuspense:l}=e(),o=a(null),t=h(),n=w(),s=()=>{o.value.update((()=>{var e;n.push({name:"integration",query:{enable:(null==(e=t.query)?void 0:e.id)||""}})}))},i=v({modelValue:!0,closeTo:{name:"integration",query:{reload:1}},size:"xs"}),r=v({header:()=>l(_(T)),default:()=>l(_(D,{ref:o})),footer:()=>{return _(y,{color:"teal",loading:o.value&&(null==(l=null==(e=o.value)?void 0:e.loading)?void 0:l.update),onClick:s},{default:()=>"Save"});var e,l}});return()=>_(k,i,r)}});export{S as default};
