import{k as e,f as t,g as o,y as l,aT as a,m as n,$ as s,o as i,t as r,B as d,A as c,L as u,D as m,S as p,U as v,a1 as b,a2 as y,q as w,K as f,a3 as h,F as g,w as k,n as A,G as C,H as _}from"./vendor.9695fe57.js";import{e as S,b as M,_ as R}from"./index.6438e939.js";const V=e({name:"BTable",components:{Checkbox:S,Button:M},props:{headers:{type:Array,default:()=>[]},items:{type:Array,default:()=>[]},itemValue:{type:String,default:"id"},loading:{type:Boolean,default:!1},selected:{type:Array,default:()=>[]},clickableRow:{type:Boolean,default:!1},selectable:{type:Boolean,default:!1},minWidth:{type:String,default:"200px"},intersect:{type:Boolean,default:!1},observerTable:{type:Function,default:void 0},moreActions:{type:Array,default:void 0},prefixMoreAction:{type:String,default:"action"},timeStamp:{type:Boolean,default:!0},autoWidth:{type:Boolean,default:!1}},emits:["update:selected","rowClick","update:singleSelected"],setup(e,{emit:a}){const n=t(!1),s=t(!1),i=t(!1),r=t(!1),d=t(null),c=t(new Date(Date.now()).getTime()),u=o({set:e=>a("update:selected",e),get:()=>e.selected}),m=o((()=>u.value.map((t=>t[e.itemValue])))),p=o((()=>e.items.map((t=>t[e.itemValue])).filter((e=>m.value.includes(e))))),v=o((()=>e.moreActions?e.moreActions.map((t=>f(t,e.prefixMoreAction))):[])),b=o((()=>e.items.some((e=>!0===e.loading)))),y=o((()=>{const t=p.value,o=t.length>0,l=t.length<e.items.length;return o&&l})),w=o({set:t=>{if(t){const t=e.items.filter((t=>{const o=t[e.itemValue];return!m.value.includes(o)}));u.value=[...u.value,...t]}else{const t=e.items.map((t=>t[e.itemValue]));u.value=u.value.filter((o=>!t.includes(o[e.itemValue])))}},get:()=>u.value.length>=e.items.length});o((()=>e.minWidth));const f=(e,t="action")=>t+e.split(/[\s-]+/).map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join("");return l((()=>e.items),(()=>{e.timeStamp&&(c.value=new Date(Date.now()).getTime())})),{selected:u,selectedValues:m,isHoveredSelectionColumn:n,isHoveredActionColumn:s,isIndeterminate:y,isPreventRowClick:i,isMoreActionDropdownOpenKey:d,isMoreActionDropdownOpen:r,isAnyRowLoading:b,selectAll:w,moreActionSlots:v,dataTimestamp:c,handleClickRow:t=>{!e.clickableRow||n.value||s.value||i.value||a("rowClick",t)},handleSelectionChange:t=>{m.value.includes(t[e.itemValue])?u.value=u.value.filter((o=>o[e.itemValue]!==t[e.itemValue])):(u.value=[...u.value,t],a("update:singleSelected",t))},preventRowClick:()=>{i.value=!0},resetRowClick:()=>{i.value=!1},handleIntersectionObserver:t=>{e.observerTable&&"function"==typeof e.observerTable&&e.intersect&&e.observerTable(t)}}}}),D=()=>{a((e=>({"8494008a":e.minWidth})))},x=V.setup;V.setup=x?(e,t)=>(D(),x(e,t)):D;const $={class:"b-table-container"},B={class:"b-table__header"},H={class:"b-table__row b-table__row--header"},I={key:1},T={class:"b-table__body"},O=["onClick"],W={class:"text-teal-04 hover:text-teal-03"},K={class:"b-table__footer"},L={class:"b-table__row b-table__row--footer"};var j=R(V,[["render",function(e,t,o,l,a,S){var M;const R=n("Checkbox"),V=n("Button"),D=n("DropdownItem"),x=n("DropdownMenu"),j=n("Dropdown"),F=s("intersect");return i(),r("div",$,[d("table",{class:g(["b-table",e.autoWidth&&"b-table-auto"])},[d("thead",B,[d("tr",H,[e.selectable?(i(),r("th",{key:0,class:"b-table__column-selection",onMouseenter:t[1]||(t[1]=t=>e.isHoveredSelectionColumn=!0),onMouseleave:t[2]||(t[2]=t=>e.isHoveredSelectionColumn=!1)},[c(m(R,{"model-value":e.selectAll||e.isIndeterminate,onClick:t[0]||(t[0]=p((t=>e.selectAll=!!e.isIndeterminate||!e.selectAll),["prevent"])),indeterminate:e.isIndeterminate,disabled:e.isAnyRowLoading},null,8,["model-value","indeterminate","disabled"]),[[u,e.items.length>0]])],32)):v("",!0),(i(!0),r(b,null,y(e.headers,(t=>w(e.$slots,"header",h({ref_for:!0},{header:t}),(()=>[(i(),r("th",{key:t.key},f(t.column_name),1))])))),256)),e.$slots.action||(null==(M=e.moreActionSlots)?void 0:M.length)?(i(),r("th",I)):v("",!0)])]),d("tbody",T,[(i(!0),r(b,null,y(e.items,((o,l)=>{var a;return c((i(),r("tr",{onClick:t=>e.handleClickRow(o),class:g(["b-table__row b-table__row--body relative",e.clickableRow&&"b-table__row--clickable","group",o.loading&&"is-loading"]),key:`${o[e.itemValue]}-${l}-${e.dataTimestamp}`},[e.selectable?(i(),r("td",{key:0,onMouseenter:t[3]||(t[3]=t=>e.isHoveredSelectionColumn=!0),onMouseleave:t[4]||(t[4]=t=>e.isHoveredSelectionColumn=!1)},[m(R,{"model-value":e.selectedValues.includes(o[e.itemValue||""]),disabled:e.isAnyRowLoading,onClick:p((t=>e.handleSelectionChange(o)),["prevent"])},null,8,["model-value","disabled","onClick"])],32)):v("",!0),(i(!0),r(b,null,y(e.headers,(t=>w(e.$slots,"column",h({key:t.key,ref_for:!0},{row:o,column:o[t.key],key:t.key,rowIndex:l,preventRowClick:e.preventRowClick,resetRowClick:e.resetRowClick}),(()=>[d("td",null,f(o[t.key]),1)])))),128)),e.$slots.action&&!(null==(a=e.moreActionSlots)?void 0:a.length)?(i(),r("td",{key:1,class:"group-hover:opacity-100 transition duration-300 opacity-0",onMouseenter:t[5]||(t[5]=t=>e.isHoveredActionColumn=!0),onMouseleave:t[6]||(t[6]=t=>e.isHoveredActionColumn=!1)},[w(e.$slots,"action",h({ref_for:!0},{row:o,rowIndex:l}))],32)):e.moreActionSlots.length?(i(),r("td",{key:2,class:g(["transition duration-300 opacity-0 group-hover:opacity-100",{"opacity-100":e.isMoreActionDropdownOpen&&e.isMoreActionDropdownOpenKey===l}]),onMouseenter:t[7]||(t[7]=t=>e.isHoveredActionColumn=!0),onMouseleave:t[8]||(t[8]=t=>e.isHoveredActionColumn=!1)},[d("div",null,[m(j,{trigger:"hover",placement:"bottom-end",onVisibleChange:t=>{e.isMoreActionDropdownOpen=t,e.isMoreActionDropdownOpenKey=l}},{dropdown:k((()=>[m(x,{class:"p-2 rounded-lg"},{default:k((()=>[(i(!0),r(b,null,y(e.moreActionSlots,((t,a)=>(i(),A(D,{key:a,class:"p-0 leading-none rounded-lg"},{default:k((()=>[d("div",W,[w(e.$slots,t,h({ref_for:!0},{row:o,rowIndex:l}))])])),_:2},1024)))),128))])),_:2},1024)])),default:k((()=>[m(V,{color:"grey",view:"outlined",class:"text-base",dense:""},{default:k((()=>t[9]||(t[9]=[d("span",{class:"material-icons"}," more_vert ",-1)]))),_:1})])),_:2},1032,["onVisibleChange"])])],34)):v("",!0)],10,O)),[[F,()=>e.handleIntersectionObserver(o)]])})),128))]),d("tfoot",K,[d("tr",L,[w(e.$slots,"footer",C(_({headers:e.headers})))]),e.$slots.footerRows?w(e.$slots,"footerRows",C(h({key:0},{headers:e.headers}))):v("",!0)])],2)])}]]);export{j as B};
