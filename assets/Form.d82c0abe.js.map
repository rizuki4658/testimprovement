{"version":3,"file":"Form.d82c0abe.js","sources":["../../src/components/Faq/Form.vue"],"sourcesContent":["<template>\n  <div class=\"grid grid-cols-3 gap-4\">\n    <div class=\"col-span-1 col-start-1\">\n      <Select v-model=\"data.faq_category_id\" class=\"w-full\" :items=\"categories\" label=\"Category\" :name=\"categoryName || 'name'\" :by=\"categoryBy || 'id'\" />\n      <small class=\"text-red-base mt-2 block\" v-for=\"(error, errorIndex) of validation.faq_category_id.$errors\" :key=\"errorIndex\">{{ error.$message }}. </small>\n    </div>\n    <div class=\"col-start-1\">\n      <Input v-model=\"data.question\" :view=\"validation.question.$invalid ? 'danger' : 'default'\" type=\"text\" label=\"Question\" block />\n      <small class=\"text-red-base mt-2 block\" v-for=\"(error, errorIndex) of validation.question.$errors\" :key=\"errorIndex\">{{ error.$message }}. </small>\n    </div>\n    <div class=\"col-start-1 col-span-2\">\n      <TextEditor ref=\"refTextEditor\" v-model=\"data.answer\" :options=\"ckeditor\" />\n      <small class=\"text-red-base mt-2 block\" v-for=\"(error, errorIndex) of validation.answer.$errors\" :key=\"errorIndex\">{{ error.$message }}. </small>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { defineComponent, reactive, ref, watch } from 'vue'\nimport Input from 'bbUi/components/input/input.vue'\nimport Button from 'bbUi/components/button/button.vue'\nimport Select from 'bbUi/components/select/select.vue'\nimport TextEditor from 'components/TextEditor.vue'\n\nimport { Editor as \nClassicEditor } from '@erdeprsty/ckeditor5-custom-build'\nimport { useVuelidate } from '@vuelidate/core'\nimport { required } from '@/validations/index'\n\nexport default defineComponent({\n  name: 'FaqForm',\n  components: {\n    Input,\n    Button,\n    Select,\n    TextEditor\n  },\n  props: {\n    categories: {\n      type: Array,\n      default: () => ([])\n    },\n    categoryBy: {\n      type: String,\n      default: 'id'\n    },\n    categoryName: {\n      type: String,\n      default: 'name',\n    },\n    data: {\n      type: Object,\n      default: () => ({\n        question: '',\n        answer: '',\n        faq_category_id: null\n      })\n    }\n  },\n  emits: ['change'],\n  setup(props, {emit}) {\n    const refTextEditor = ref(null)\n    const categories = ref(props.categories) \n    const data = reactive(props.data)\n    if(!!categories.value.length && !data.faq_category_id) Object.assign(data, {\n      faq_category_id: categories.value[0][props.categoryBy]\n    })\n    const rules = {\n      question: {\n        required\n      },\n      answer: { \n        required \n      },\n      faq_category_id: { \n        required \n      }\n    }\n    const ckeditor = reactive({\n      editor: ClassicEditor,\n      config: {\n        htmlSupport: {\n          allow: [{\n            styles: true,\n            classes: true\n          }]\n        }\n      }\n    })\n    const validation = useVuelidate(rules, data, {\n      $lazy: true\n    })\n    const validate = async () => {\n      const isReadyEditor = refTextEditor.value.isEditorReady\n      if(!isReadyEditor) return false\n      const isSaved = await refTextEditor.value.forceSave()\n      if(!isSaved) return false\n      validation.value.$validate()\n      return !validation.value.$invalid\n    }\n    \n    watch(() => ({...data}), (newData) => {\n      emit('change', newData)\n    }, {\n      deep: true\n    })\n\n    return {\n      refTextEditor,\n      data,\n      categories,\n      validation,\n      ckeditor,\n      validate\n    }\n  },\n})\n</script>"],"names":["_sfc_main","defineComponent","name","components","Input","Button","Select","TextEditor","props","categories","type","Array","default","categoryBy","String","categoryName","data","Object","question","answer","faq_category_id","emits","[object Object]","emit","refTextEditor","ref","reactive","value","length","assign","rules","required","ckeditor","editor","ClassicEditor","exports","Editor","config","htmlSupport","allow","styles","classes","validation","useVuelidate","$lazy","watch","__spreadValues","newData","deep","validate","async","isEditorReady","forceSave","$validate","$invalid","_hoisted_1","class","_hoisted_2","_hoisted_3","_openBlock","_createElementBlock","_createVNode","_component_Select","modelValue","_ctx","onUpdate:modelValue","_cache","$event","items","label","_Fragment","_renderList","$errors","error","errorIndex","_component_Input","view","_hoisted_4","_component_TextEditor"],"mappings":"0iBA6BA,MAAKA,EAAaC,EAAa,CAC7BC,KAAM,UACNC,WAAY,OACVC,EACAC,OAAAA,EACAC,OAAAA,EACAC,WAAAA,GAEFC,MAAO,CACLC,WAAY,CACVC,KAAMC,MACNC,QAAS,IAAO,IAElBC,WAAY,CACVH,KAAMI,OACNF,QAAS,MAEXG,aAAc,CACZL,KAAMI,OACNF,QAAS,QAEXI,KAAM,CACJN,KAAMO,OACNL,QAAS,KAAO,CACdM,SAAU,GACVC,OAAQ,GACRC,gBAAiB,SAIvBC,MAAO,CAAC,UACRC,MAAMd,GAAOe,KAACA,IACZ,MAAMC,EAAgBC,EAAI,MACpBhB,EAAagB,EAAIjB,EAAMC,YACvBO,EAAOU,EAASlB,EAAMQ,MACvBP,EAAWkB,MAAMC,SAAWZ,EAAKI,iBAAiBH,OAAOY,OAAOb,EAAM,CACzEI,gBAAiBX,EAAWkB,MAAM,GAAGnB,EAAMK,cAE7C,MAAMiB,EAAQ,CACZZ,SAAU,CACRa,SAAAA,GAEFZ,OAAQ,CACNY,SAAAA,GAEFX,gBAAiB,CACfW,SAAAA,IAGEC,EAAWN,EAAS,CACxBO,OAAQC,EAAaC,QAAAC,OACrBC,OAAQ,CACNC,YAAa,CACXC,MAAO,CAAC,CACNC,QAAQ,EACRC,SAAS,QAKXC,EAAaC,EAAab,EAAOd,EAAM,CAC3C4B,OAAO,IAiBF,OANPC,GAAM,uHAAOC,CAAA,GAAI9B,KAAS+B,IACxBxB,EAAK,SAAUwB,KACd,CACDC,MAAM,IAGD,CACLxB,cAAAA,EACAR,KAAAA,EACAP,WAAAA,EACAiC,WAAAA,EACAV,SAAAA,EACAiB,SArBeC,UAEf,IADsB1B,EAAcG,MAAMwB,cAChB,OAAA,EAE1B,eADsB3B,EAAcG,MAAMyB,eAE1CV,EAAWf,MAAM0B,aACTX,EAAWf,MAAM2B,eAhGtBC,EAAA,CAAAC,MAAM,0BAINC,EAAA,CAAAD,MAAM,0BAINE,EAAA,CAAAF,MAAM,gJARXG,OAAAA,IAGMC,EAAA,MAAAL,EAAA,GAFiJ,MAAAE,EAAA,CAApII,EAAAC,EAAoB,CAApBC,WAAAC,EAAAhD,KAAAI,gBAAsB6C,sBAAcC,EAAA,KAAAA,EAAA,GAAAC,GAAAH,EAAAhD,KAAAI,gBAAA+C,GAAEX,MAAO,SAAYY,MAAMJ,EAAUvD,WAAE4D,MAAkB,WAAanE,KAAc8D,EAAAjD,cAAA,mDACiB,QAAA,OAAA,gBAAAuD,EAAA,KAAAC,EAAAP,EAAAtB,WAAAtB,gBAAAoD,SAAA,CAAAC,EAAAC,SAAnHd,EAAA,QAAA,CAAoEJ,MAAe,qEAGM,MAAAE,EAAA,CAAhHG,EAAAc,EAAa,CAAbZ,WAAAC,EAAAhD,KAAAE,SAAgB+C,sBAAiBC,EAAQ,KAASA,EAAA,GAAAC,GAAAH,EAAAhD,KAAAE,SAAAiD,GAAyBS,KAAKZ,EAAMtB,WAAAxB,SAAAoC,SAAA,SAAA,UAAC5C,YAAiB2D,MAAA,0CAC2B,kBAAAC,EAAA,KAAAC,EAAAP,EAAAtB,WAAAxB,SAAAsD,SAAA,CAAAC,EAAAC,SAA5Gd,EAAA,QAAA,CAA6DJ,MAAe,qEAGvC,MAAAqB,EAAA,CAAhEhB,EAAmBiB,EAAA,CAAUrD,IAAA,gBAAAsC,WAAAC,EAAAhD,KAAAG,OAAc8C,sBAAiBC,EAAA,KAAAA,EAAA,GAAAC,GAAAH,EAAAhD,KAAAG,OAAAgD,4CACyE,qBAAAG,EAAA,KAAAC,EAAAP,EAAAtB,WAAAvB,OAAAqD,SAAA,CAAAC,EAAAC,SAA1Gd,EAAA,QAAA,CAA2DJ,MAAe"}