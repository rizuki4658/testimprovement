{"version":3,"file":"index.a2845cf4.js","sources":["../../src/views/integration/publicapi/index.vue","../../src/views/integration/publicapi/index.js"],"sourcesContent":["<template>\n  <div class=\"my-4\">\n    <label for=\"\">Secret Key</label>\n    <div class=\"flex\">\n      <Input\n        v-model=\"data.secret_key\"\n        :type=\"isRestrictedPublicApi ? 'password' : 'text'\"\n        view=\"default\"\n        class=\"mr-2\"\n        placeholder=\"\"\n        block\n        disabled\n      />\n      <Button\n       \n        color=\"teal\"\n        @click=\"copyText(data.secret_key)\"\n        dense\n      >\n        <i class=\"material-symbols-outlined text-lg mx-2\">content_copy</i>\n      </Button>\n    </div>\n  </div>\n  <div class=\"my-4\">\n    <label for=\"\">Tenant ID</label>\n    <div class=\"flex\">\n      <Input\n        v-model=\"data.tenant_id\"\n        :type=\"isRestrictedPublicApi ? 'password' : 'text'\"\n        view=\"default\"\n        class=\"mr-2\"\n        placeholder=\"\"\n        block\n        disabled\n      />\n      <Button\n       \n        color=\"teal\"\n        @click=\"copyText(data.tenant_id)\"\n        dense\n      >\n        <i class=\"material-symbols-outlined text-lg mx-2\">content_copy</i>\n      </Button>\n    </div>\n  </div>\n  <div class=\"my-4\">\n    <label for=\"\">Public API Key</label>\n    <div class=\"flex mb-6\">\n      <Input\n        v-model=\"data.api_key\"\n        :type=\"isRestrictedPublicApi ? 'password' : 'text'\"\n        view=\"default\"\n        class=\"mr-2\"\n        placeholder=\"\"\n        block\n        disabled\n      />\n      <Button color=\"teal\" @click=\"copyText(data.api_key)\" dense>\n        <i class=\"material-symbols-outlined text-lg mx-2\">content_copy</i>\n      </Button>\n    </div>\n  </div>\n  <!--\n    REMOVE MARKET PLACE\n    <div v-if=\"me.is_marketplace\" class=\"my-4\">\n      <label for=\"\">Marketplace Key</label>\n      <div class=\"flex mb-6\">\n        <Input\n          v-model=\"data.marketplace_key\"\n          :type=\"isRestrictedPublicApi ? 'password' : 'text'\"\n          view=\"default\"\n          class=\"mr-2\"\n          placeholder=\"\"\n          block\n          disabled\n        />\n        <Button\n          color=\"teal\"\n          @click=\"copyText(data.marketplace_key)\"\n          dense\n        >\n          <i class=\"material-symbols-outlined text-lg mx-2\">content_copy</i>\n        </Button>\n      </div>\n    </div>\n  -->\n  <Button\n    class=\"mr-2 mt-4\"\n   \n    :loading=\"loading.public_api\"\n    color=\"teal\"\n    @click=\"generateApiKey()\"\n    dense\n    >Generate New API Key</Button\n  >\n</template>\n\n<script>\nimport { defineComponent, computed } from 'vue'\nimport { useShowAll } from 'composable/integration'\nimport { usePaywall } from 'composable/paywall'\nimport { useUser } from 'composable/user'\nimport Button from 'bbUi/components/button/button.vue'\nimport Alert from 'bbUi/components/alert/alert.vue'\nimport Input from 'bbUi/components/input/input.vue'\nimport { ElMessage } from 'element-plus'\n\nexport default defineComponent({\n  components: {\n    Button,\n    Alert,\n    Input\n  },\n  async setup() {\n    const {\n      state,\n      data,\n      actionPublicApi,\n      actionGeneratePublicApiKey,\n      loading\n    } = useShowAll()\n    const { isProPlan, me, hasPublicApiAccess } = useUser()\n    const { open: openPaywall } = usePaywall()\n\n    const isRestrictedPublicApi = computed(() =>\n      !isProPlan.value ? hasPublicApiAccess.value == 0 : false\n    )\n\n    const copyText = (text) => {\n      if (isRestrictedPublicApi.value) {\n        openPaywall({\n          title: 'API',\n          description:\n            'With our API, there are endless possibilities for what you can do with buybacks. Create your own custom buyback website or features, or integrate buyback directly into your app.',\n          image_url: '/images/paywall/paywall-public-api.svg'\n        })\n        return\n      }\n      navigator.clipboard.writeText(text).then(() => {\n        ElMessage({\n          type: 'success',\n          message: 'Text copied to clipboard'\n        })\n      })\n    }\n\n    const generateApiKey = async () => {\n      await actionGeneratePublicApiKey()\n      await actionPublicApi()\n\n      ElMessage({\n        type: 'success',\n        message: 'New API key has been generated.'\n      })\n    }\n\n    await Promise.all([actionPublicApi()])\n\n    return {\n      me,\n      state,\n      data,\n      loading,\n      isRestrictedPublicApi,\n      copyText,\n      generateApiKey\n    }\n  }\n})\n</script>\n","import { defineComponent, h, ref, reactive } from 'vue'\nimport { useSuspense } from 'composable/components'\nimport { useRoute, useRouter } from 'vue-router'\nimport Modal from 'bbUi/components/modal/modal.vue'\nimport Index from './index.vue'\n\nexport default defineComponent({\n  async setup() {\n    const { genSuspense } = useSuspense()\n    const refComponent = ref(null)\n    const route = useRoute()\n    const router = useRouter()\n\n    const genComponent = () =>\n      genSuspense(\n        h(Index, {\n          ref: refComponent\n        })\n      )\n    const modalProps = reactive({\n      modelValue: true,\n      closeTo: {\n        name: 'integration',\n        query: {\n          reload: 1\n        }\n      },\n      size: 'xs'\n    })\n    const modalSlots = reactive({\n      header: () => 'Public API Account',\n      default: () => genComponent(),\n      footer: () => ''\n    })\n\n    return () => h(Modal, modalProps, modalSlots)\n  }\n})\n"],"names":["_sfc_main","defineComponent","components","Button","Alert","Input","state","data","actionPublicApi","actionGeneratePublicApiKey","loading","useShowAll","isProPlan","me","hasPublicApiAccess","useUser","open","openPaywall","usePaywall","isRestrictedPublicApi","computed","value","Promise","all","copyText","text","title","description","image_url","navigator","clipboard","writeText","then","_u","type","message","generateApiKey","async","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_openBlock","_createElementBlock","_Fragment","_createElementVNode","_cache","for","_createVNode","_component_Input","modelValue","_ctx","secret_key","onUpdate:modelValue","$event","view","placeholder","block","_component_Button","color","onClick","default","_withCtx","tenant_id","_hoisted_6","api_key","public_api","index","[object Object]","genSuspense","useSuspense","refComponent","ref","useRoute","useRouter","modalProps","reactive","closeTo","name","query","reload","size","modalSlots","header","h","Index","footer","Modal"],"mappings":"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"}