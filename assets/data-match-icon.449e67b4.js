var e=Object.defineProperty,a=Object.defineProperties,l=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,n=(a,l,i)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:i}):a[l]=i,d=(e,a)=>{for(var l in a||(a={}))t.call(a,l)&&n(e,l,a[l]);if(i)for(var l of i(a))s.call(a,l)&&n(e,l,a[l]);return e},o=(e,i)=>a(e,l(i));import{e as u}from"./bulkquote.3ec1329d.js";import{j as p,k as r,N as c,f as g,g as m,y as v,_ as h,m as b,a0 as f,o as _,t as y,n as k,w as S,A as w,I as x,a2 as C,a3 as V,B as L,F as I,D as U,K as N,U as $,S as j,W as O,s as B,T as q,L as K,ap as T,r as P,a5 as A}from"./vendor.f1efedad.js";import{z as D,d as Q,b as F,_ as W,R as z,t as E,W as M,f as R,a9 as G,j as Y}from"./index.161fb295.js";import{g as H}from"./buyback.73ce447d.js";import{u as J}from"./notes.0b9e5978.js";import{_ as X}from"./fieldset.dc1b9649.js";import{_ as Z}from"./BuybackNotesWarning.ca26303f.js";import{B as ee}from"./BTable.d9581a46.js";import{u as ae}from"./index.32689823.js";import{c as le,r as ie,f as te}from"./index.05b14cb2.js";import{r as se,v as ne}from"./index.a87b789d.js";import{I as de}from"./InputPhone.1335d16b.js";import{c as oe}from"./copy.ef53d68d.js";import{d as ue}from"./setting.a9fe6242.js";const pe=p("buybackShipping",{state:()=>({shippingInfo:{isLoading:!1,modal:!1,result:void 0},additionalShipping:{isLoading:!1,modal:!1,result:void 0},shippingKit:{isLoading:!1,modal:!1,result:void 0}}),actions:{async $createMultipleLabels(e={id:void 0,data:void 0}){const a=await D({url:`/v1/pos/order/shipping-label/generate-multiple/${e.id}`,method:"post",data:e.data});this.additionalShipping.result=a},$actionCheckCustomTracking:async e=>await D({url:`/v1/pos/order/custom-tracking/check-courier?shipping_tracking=${e}`,method:"get"}),$actionSaveCustomTracking:async e=>await D({url:`/v1/pos/order/custom-tracking/${e.id}`,method:"post",data:e.data}),$downloadShippingKit:async(e={id:void 0,params:void 0})=>await D({url:`/v1/shipping/kit/print/${e.id}`,method:"get",params:e.params,responseType:"arraybuffer"}),$downloadBulkShippingKit:async(e={id:void 0,params:void 0})=>await D({url:`/v1/pos/order/shipping-label/print-batch/${e.id}`,method:"post",params:e.params,responseType:"arraybuffer"})}}),re=r({name:"BulkQuoteDetailFormStatus",components:{Modal:Q,Button:F,Fieldset:X,BuybackNotesWarning:Z},props:{modelValue:{type:Boolean,default:!1},quoteId:{type:String,default:void 0,required:!0},status:{type:Object,default:void 0},order:{type:Object,default:void 0}},emits:["update:modelValue","updateStatus"],setup(e,a){const l=J(),i=c(),t=g(!1),s=g(!1),n=m({get:()=>e.modelValue,set:e=>a.emit("update:modelValue",e)}),u=g(!1),p=g(0),r=g([]),b=g(void 0),f=m((()=>{var a;return 0!==(null==(a=null==e?void 0:e.order)?void 0:a.is_signature_exist)})),_=g(!1),y=g(!1),k=g(!1),{state:S,actionAll:w}=H("online"),x=async()=>{var n,d;if(s.value=!0,t.value=!0,[3,7].includes(null==(n=b.value)?void 0:n.id)&&(l.warningNotes.ids=[null==(d=e.order)?void 0:d.id],!l.warningNotes.isReviewed&&await l.$getNotesUnread(),l.warningNotes.notes.length))return l.warningNotes.modal=!0,t.value=!1,void(s.value=!1);await i.dispatch("bulkQuote/updateQuoteStatus",{id:e.quoteId,data:{status_id:b.value.id,new_step:b.value.step_bulk}}).then((()=>{s.value=!1,t.value=!1,u.value=!1,h({message:"Quote status updated successfully.",type:"success"}),a.emit("updateStatus",!0)})).catch((()=>{s.value=!1,t.value=!1,u.value=!1})),k.value&&callback&&callback()};return v((()=>n.value),(async()=>{n.value?await(async()=>{t.value=!0,s.value=!0;try{const[a,l]=await Promise.all([i.dispatch("bulkQuote/getQuoteStatuses"),i.dispatch("bulkQuote/getBulkQuoteItemInfo",{id:e.quoteId})]);(null==a?void 0:a.length)?(r.value=a.map((a=>{var l,i;return o(d({},a),{disabled:!![9e3,9001].includes(null==(l=e.status)?void 0:l.id)&&![9e3,9001].includes(a.id),active:a.id===(null==(i=e.status)?void 0:i.id)})})),b.value=r.value.find((a=>{var l;return a.id===(null==(l=e.status)?void 0:l.id)}))):(r.value=[],b.value=void 0),_.value=(null==l?void 0:l.total_reconcile)>0}catch{r.value=[],b.value=void 0}finally{t.value=!1,s.value=!1}})():r.value=[]})),{show:n,selected:b,showWarning:u,warningType:p,loading:t,loadingUpdate:s,listStatus:r,isSignedContract:f,reviewed:y,showNotesWarning:k,notes:S,showNotes:w,handleSave:()=>{var a,l,i,t,s,n,d,o,c,g,m,v,h,y,k;if((null==(a=b.value)?void 0:a.id)===(null==(l=e.status)?void 0:l.id)||!e.quoteId)return;if(9001===(null==(i=e.status)?void 0:i.id)&&9e3===(null==(t=b.value)?void 0:t.id)||9e3===(null==(s=e.status)?void 0:s.id)&&9001===(null==(n=b.value)?void 0:n.id))return p.value=9e3===(null==(d=e.status)?void 0:d.id)&&9001===(null==(o=b.value)?void 0:o.id)?0:1,void(u.value=!0);if(_.value&&[9003,9004].includes(null==(c=e.status)?void 0:c.id)&&[9e3,9001,9002,2].includes(null==(g=b.value)?void 0:g.id))return p.value=1,void(u.value=!0);if(f&&9e3!==(null==(m=b.value)?void 0:m.id)&&9001!==(null==(v=b.value)?void 0:v.id))return void x();const S=[...r.value].slice(0,r.value.findIndex((a=>{var l;return a.id===(null==(l=e.status)?void 0:l.id)}))).some((e=>{var a;return e.id===(null==(a=b.value)?void 0:a.id)}))&&(null==(h=e.order)?void 0:h.is_signature_exist)||[9004,3].includes(null==(y=e.status)?void 0:y.id)&&![9004,3].includes(null==(k=b.value)?void 0:k.id);p.value=S?0:1,u.value=!0},handleCancelUpdate:()=>{u.value=!1,p.value=0},handleUpdateStatus:x,handleSelectStatus:e=>{e.active||e.disabled||(b.value=e,r.value=r.value.map((e=>o(d({},e),{active:b.value.id===e.id}))))}}}}),ce={key:0,class:"border-grey-01 border"},ge=["onClick"],me={key:0,class:"my-0 border-grey-01"},ve={class:"flex items-center justify-end"},he={key:0,class:"flex flex-col gap-6 items-center my-6"},be={class:"flex flex-wrap items-center justify-center gap-14"},fe={key:1,class:"flex flex-col gap-6 items-center my-6"},_e={class:"flex flex-wrap items-center justify-center gap-14"};const ye=r({name:"BulkQuoteDetailStatus",components:{Button:F,BulkQuoteDetailFormStatus:W(re,[["render",function(e,a,l,i,t,s){const n=b("Tooltip"),d=b("Fieldset"),o=b("Button"),u=b("Modal"),p=b("BuybackNotesWarning"),r=f("loading");return _(),y("div",null,[e.showWarning?$("",!0):(_(),k(u,{key:0,modelValue:e.show,"onUpdate:modelValue":a[0]||(a[0]=a=>e.show=a),title:"Update Status",size:"xs",class:""},{default:S((()=>[w((_(),k(d,{class:"rounded-md"},{label:S((()=>a[4]||(a[4]=[x("Choose Status")]))),default:S((()=>{var l;return[(null==(l=e.listStatus)?void 0:l.length)?(_(),y("ul",ce,[(_(!0),y(C,null,V(e.listStatus,((l,i)=>(_(),y("li",{key:i},[L("div",{class:I(["px-2 py-1.5 text-center",!l.disabled&&!l.active&&!e.loadingUpdate&&"hover:bg-teal-01 hover:bg-opacity-50 cursor-pointer text-grey-02",!l.disabled&&!!l.active&&!e.loadingUpdate&&"bg-teal-02 bg-opacity-40 cursor-pointer",(!!l.disabled||!!e.loadingUpdate)&&"bg-teal-01 bg-opacity-30 cursor-not-allowed text-grey-01"]),onClick:a=>e.handleSelectStatus(l)},[U(n,{placement:"top",disabled:!l.disabled},{content:S((()=>a[5]||(a[5]=[L("div",null,[L("p",null,"Quote must be signed first to unlock this status")],-1)]))),default:S((()=>[L("p",null,N(l.status_name),1)])),_:2},1032,["disabled"])],10,ge),i!==e.listStatus.length-1?(_(),y("hr",me)):$("",!0)])))),128))])):$("",!0)]})),_:1})),[[r,e.loading]])])),footer:S((()=>{var l,i;return[L("div",ve,[U(o,{color:"teal",disabled:!e.selected||(null==(l=e.selected)?void 0:l.id)==(null==(i=e.status)?void 0:i.id),loading:e.loadingUpdate,onClick:e.handleSave},{default:S((()=>a[6]||(a[6]=[x(" Update Status ")]))),_:1},8,["disabled","loading","onClick"])])]})),_:1},8,["modelValue"])),U(u,{modelValue:e.showWarning,"onUpdate:modelValue":a[3]||(a[3]=a=>e.showWarning=a),class:I(e.showNotesWarning&&"hidden"),size:"xs","hide-header":"","hide-footer":""},{default:S((()=>[0==e.warningType?(_(),y("div",he,[a[8]||(a[8]=L("img",{src:z},null,-1)),a[9]||(a[9]=L("h6",{class:"text-3xl font-medium"},"Proceed With Quote?",-1)),a[10]||(a[10]=L("p",{class:"text-grey-02 text-center"}," Ensure the payout is correct, then make sure to send the Customer Portal link to the customer for contract access and review. ",-1)),L("div",be,[L("a",{href:"",onClick:a[1]||(a[1]=j(((...a)=>e.handleCancelUpdate&&e.handleCancelUpdate(...a)),["prevent"])),class:"px-6 py-4 hover:text-teal-03"}," Cancel "),U(o,{loading:e.loading,color:"teal",onClick:e.handleUpdateStatus},{default:S((()=>a[7]||(a[7]=[x(" Yes, proceed ")]))),_:1},8,["loading","onClick"])])])):$("",!0),1==e.warningType?(_(),y("div",fe,[a[12]||(a[12]=L("img",{src:z},null,-1)),a[13]||(a[13]=L("h6",{class:"text-3xl font-medium"},"Change Status?",-1)),a[14]||(a[14]=L("p",{class:"text-grey-02 text-center"}," Your reconciled quantity will be reset to the original quoted quantity. ",-1)),L("div",_e,[U(o,{loading:e.loading,color:"teal",onClick:e.handleUpdateStatus},{default:S((()=>a[11]||(a[11]=[x(" Yes, change status ")]))),_:1},8,["loading","onClick"]),L("a",{href:"",onClick:a[2]||(a[2]=j(((...a)=>e.handleCancelUpdate&&e.handleCancelUpdate(...a)),["prevent"])),class:"px-6 py-4 hover:text-teal-03"}," Cancel ")])])):$("",!0)])),_:1},8,["modelValue","class"]),U(p,{onProceed:e.handleUpdateStatus},null,8,["onProceed"])])}]])},props:{status:{type:Object,default:()=>({id:null,name:null,short_name:null})},statusNameKey:{type:String,default:"name"},statusShortNameKey:{type:String,default:"short_name"},statusIdKey:{type:String,default:"id"},loading:{type:Boolean,default:!1},quoteId:{type:String,required:!0},disabled:{type:Boolean,default:!1},order:{type:Object,default:void 0}},emits:["updateStatus"],setup(e,{emit:a}){const{statuses:l,loading:i,getQuoteStatuses:t,updateQuoteStatus:s}=u(),n=g(!1),d=m((()=>({id:e.status[e.statusIdKey]||"",name:e.status[e.statusNameKey]||"Quote Status",short_name:e.status[e.statusShortNameKey]||"Quote Status"})));return O((async()=>{await t()})),{modalFormUpdateStatus:n,currentStatus:d,loadingQuoteStatus:i,handleUpdateStatus:async(e=!1)=>{n.value=!0},handleConfirmUpdateStatus:()=>{n.value=!1,a("updateStatus",!0)}}}}),ke={class:"flex flex-wrap items-center gap-4"},Se={class:"quote-status"},we={class:"quote-status__status"},xe={class:"quote-status__status-badge"},Ce={class:"block"},Ve=["disabled"];var Le=W(ye,[["render",function(e,a,l,i,t,s){const n=b("BulkQuoteDetailFormStatus"),d=f("loading");return _(),y("div",null,[L("div",ke,[a[3]||(a[3]=L("label",{class:"font-medium"},"Status:",-1)),w((_(),y("div",Se,[L("div",we,[L("div",xe,[L("span",Ce,N(e.currentStatus.short_name),1)])]),L("button",{class:I(["quote-status__action",e.disabled&&"quote-status__action--disabled"]),onClick:a[0]||(a[0]=(...a)=>e.handleUpdateStatus&&e.handleUpdateStatus(...a)),disabled:e.disabled,tabindex:"0"},a[2]||(a[2]=[L("i",{class:"material-icons"},"edit",-1)]),10,Ve)])),[[d,e.loadingQuoteStatus||e.loading]])]),U(n,{modelValue:e.modalFormUpdateStatus,"onUpdate:modelValue":a[1]||(a[1]=a=>e.modalFormUpdateStatus=a),quoteId:e.quoteId,status:e.currentStatus,order:e.order,onUpdateStatus:e.handleConfirmUpdateStatus},null,8,["modelValue","quoteId","status","order","onUpdateStatus"])])}],["__scopeId","data-v-6eb997e4"]]);const Ie={class:"space-y-4"},Ue={key:0,class:"flex-width"},Ne={key:1,class:"flex-width",style:{"min-width":"80px"}},$e={key:0},je={key:0},Oe={key:1},Be={key:1,class:"w-10"},qe=["onClick"],Ke=["onMouseenter","onMouseleave"],Te={__name:"BuybackShippingKitDownload",props:{id:"-",shippings:{type:Array,default:()=>[]}},setup(e){const a=c(),l=pe(),i=e,t=g([]),s=g([{key:"order_shipping_label",column_name:"Label",meta:{}},{key:"shipping_tracking",column_name:"Tracking Number",meta:{}},{key:"shipping_label_status",column_name:"Label Status",meta:{}},{key:"action",column_name:"",meta:{}}]),n=m((()=>{var e;return null!=(e=null==i?void 0:i.shippings)?e:[]}));v(n,(e=>{e&&e.length>0&&B((()=>{t.value=[...e]}))}),{immediate:!0}),v((()=>l.shippingKit.modal),(e=>{e&&n.value.length>0&&B((()=>{t.value=[...n.value]}))}));const d=m((()=>{var e,l,i;return null==(i=null==(l=null==(e=a.state)?void 0:e.shipping)?void 0:l.processing)?void 0:i.loadingDownload})),o=()=>{l.shippingKit.modal=!1},u=async()=>{await E(l.shippingKit,(async()=>{await l.$downloadBulkShippingKit({id:i.id,params:{order_shipping_label_id:n.value.map((e=>e.order_shipping_label))}}).then((()=>{h({message:"Download in progress... Feel free to navigate away or close the window",type:"info"}),a.dispatch("notification/closeNotification","NotificationShippingKitDownload",{root:!0}),a.commit("shipping/SET_PROCESSING_DOWNLOAD_SHIPPING_KIT_PROGRESS",{progress:1,path:null,type:"zip",loading:!0},{root:!0}),a.commit("notification/OPEN_NOTIFICATION","NotificationShippingKitDownload",{root:!0}),a.commit("notification/SET_NOTIFICATION_CLOSABLE",{name:"NotificationShippingKitDownload",closable:!1},{root:!0})}))}))};return(e,a)=>{const p=f("loading");return _(),k(Q,{modelValue:T(l).shippingKit.modal,"onUpdate:modelValue":a[1]||(a[1]=e=>T(l).shippingKit.modal=e),size:"md","hide-footer":"",onClose:o},{header:S((()=>a[2]||(a[2]=[L("h5",{class:"text-2xl font-medium"}," Shipping Kit Download ",-1)]))),default:S((()=>[w((_(),y("div",Ie,[U(q,{name:"fade"},{default:S((()=>{var e;return[w(U(F,{view:"outlined",color:"teal",dense:"",onClick:u},{default:S((()=>a[3]||(a[3]=[L("div",{class:"flex items-center justify-center gap-x-4"},[L("span",{class:"material-icons"}," print "),L("span",null,"Bulk Download Shipping Kit")],-1)]))),_:1},512),[[K,!!(null==(e=t.value)?void 0:e.length)]])]})),_:1}),U(ee,{selected:t.value,"onUpdate:selected":a[0]||(a[0]=e=>t.value=e),headers:s.value,items:n.value,"item-value":"order_shipping_label",selectable:n.value.length>1},{header:S((({header:e})=>["action"!==e.key?(_(),y("th",Ue,N(e.column_name),1)):(_(),y("th",Ne,N(e.column_name),1))])),column:S((({row:e,key:t,preventRowClick:s,resetRowClick:n})=>["shipping_label_status"===t?(_(),y("td",$e,[(null==e?void 0:e.shipping_tracking)?(_(),y("span",je,N("Available"))):(_(),y("span",Oe,N("Unavailable")))])):"action"===t?(_(),y("td",Be,[L("a",{class:I(d.value?"opacity-50 cursor-not-allowed":"opacity-100"),color:"white",onClick:j((a=>(async e=>{await E(l.shippingKit,(async()=>{await l.$downloadShippingKit({id:i.id,params:{order_shipping_label_id:e.order_shipping_label}}).then((e=>{M(e)}))}))})(e)),["prevent"])},a[4]||(a[4]=[L("span",{class:"material-icons"}," print ",-1)]),10,qe)])):(_(),y("td",{key:2,onMouseenter:s,onMouseleave:n},N(e[t]),41,Ke))])),_:1},8,["selected","headers","items","selectable"])])),[[p,T(l).shippingKit.isLoading]])])),_:1},8,["modelValue"])}}};var Pe="/assets/show-original.c4e04b0d.svg";const Ae=r({name:"ShippingLabelInfo",components:{Input:R,InputPhone:de},props:{data:{type:Object,default:()=>({shipping_firstname:null,shipping_lastname:null,shipping_address1:null,shipping_suite:"",shipping_city:null,shipping_country:null,shipping_state:null,shipping_zip:null,shipping_phone:null,shipping_address_text:null,company_name:null,custom_fields:null})},isEasyOffer:{type:Boolean,default:!1}},emits:["update:data"],setup(e,{emit:a}){const l=P(e.data),i=g(null);Object.assign(l,{valid:l.shipping_address_text&&""!==l.shipping_address_text&&null!==l.shipping_address_text});const t={shipping_firstname:{required:se},shipping_lastname:{required:se},shipping_phone:{required:se,invalidNumber:le.withMessage("Phone number is invalid",(()=>{var e;return!l.shipping_phone||(null==(e=i.value)?void 0:e.isValid)}))},valid:{sameAs:ne}},s=ae(t,l,{$lazy:!0});return v((()=>d({},l)),(()=>{a("update:data",l)})),{phoneNumber:G,data:l,refInputPhone:i,validation:s,validate:()=>(s.value.$validate(),!s.value.$invalid),address:{valid:"valid",route:"shipping_address1",locality:"shipping_city",administrative_area_level_1:"shipping_state",formatted_address:"shipping_address_text",postal_code:"shipping_zip",country:"shipping_country",disallowCustomAddress:!0,subpremise:"shipping_suite"}}}}),De={class:"grid grid-cols-2 gap-6"},Qe={key:0,class:"col-span-2"},Fe={class:"col-span-2"},We={class:"col-span-2"},ze={class:"col-span-2"};var Ee=W(Ae,[["render",function(e,a,l,i,t,s){const n=b("Input"),d=b("InputPhone"),o=f("gmap");return _(),y("div",De,[L("div",null,[U(n,{modelValue:e.data.shipping_firstname,"onUpdate:modelValue":a[0]||(a[0]=a=>e.data.shipping_firstname=a),label:"First Name",block:"",view:e.validation.shipping_firstname.$invalid?"danger":"default"},null,8,["modelValue","view"]),(_(!0),y(C,null,V(e.validation.shipping_firstname.$errors,((e,a)=>(_(),y("small",{class:"text-red-base block",key:a},N(e.$message)+". ",1)))),128))]),L("div",null,[U(n,{modelValue:e.data.shipping_lastname,"onUpdate:modelValue":a[1]||(a[1]=a=>e.data.shipping_lastname=a),label:"Last Name",block:""},null,8,["modelValue"]),(_(!0),y(C,null,V(e.validation.shipping_lastname.$errors,((e,a)=>(_(),y("small",{class:"text-red-base block",key:a},N(e.$message)+". ",1)))),128))]),e.isEasyOffer?(_(),y("div",Qe,[U(n,{modelValue:e.data.company_name,"onUpdate:modelValue":a[2]||(a[2]=a=>e.data.company_name=a),label:"Company Name",block:""},null,8,["modelValue"])])):$("",!0),L("div",Fe,[w(U(n,{modelValue:e.data.shipping_address_text,"onUpdate:modelValue":a[3]||(a[3]=a=>e.data.shipping_address_text=a),label:"Street Address",block:""},null,8,["modelValue"]),[[o,e.address]]),a[6]||(a[6]=L("small",null,"Street address, P.O box, company name, c/o.",-1)),(_(!0),y(C,null,V(e.validation.valid.$errors,((e,a)=>(_(),y("small",{class:"text-red-base block",key:a},N(e.$message)+". ",1)))),128))]),L("div",We,[U(n,{modelValue:e.data.shipping_suite,"onUpdate:modelValue":a[4]||(a[4]=a=>e.data.shipping_suite=a),block:""},null,8,["modelValue"]),a[7]||(a[7]=L("small",null,"Apartment, suite, unit, building, floor, etc.",-1))]),L("div",ze,[U(d,{ref:"refInputPhone",modelValue:e.data.shipping_phone,"onUpdate:modelValue":a[5]||(a[5]=a=>e.data.shipping_phone=a),label:"Phone",block:"","country-autofill-setting":""},null,8,["modelValue"]),(_(!0),y(C,null,V(e.validation.shipping_phone.$errors,((e,a)=>(_(),y("small",{class:"text-red-base block",key:a},N(e.$message)+". ",1)))),128))]),e.data.custom_fields&&e.isEasyOffer?(_(!0),y(C,{key:1},V(Object.entries(e.data.custom_fields),(([a,l])=>(_(),y("div",{key:a,class:"col-span-2"},[U(n,{modelValue:e.data.custom_fields[a],"onUpdate:modelValue":l=>e.data.custom_fields[a]=l,label:a,block:""},null,8,["modelValue","onUpdate:modelValue","label"])])))),128)):$("",!0)])}]]);const Me={key:0,class:"border border-grey-01 rounded-xl p-6 w-full mb-6"},Re={class:"space-y-4"},Ge={class:"flex items-center justify-between"},Ye={class:"font-medium text-xl"},He={class:"grid grid-cols-2 gap-4"},Je={class:"flex items-end gap-x-1"},Xe={class:"grid grid-cols-2 gap-4"},Ze={class:"flex items-end gap-x-1"},ea={class:"flex justify-between"},aa={class:"text-grey-02"},la={class:"text-grey-02"},ia={class:"mx-auto"},ta={class:"text-grey-02"},sa={__name:"BuybackShippingInformation",props:{id:"-",shippings:{type:Array,default:()=>[]},shippingLabelStatus:{type:String,default:""},regenerateShippingLabel:{type:Function,default:()=>{}}},emits:["saved"],setup(e,{emit:a}){const l=pe(),i=e,t=a,s=g({}),n=g(i.shippings),u=()=>{l.shippingInfo.modal=!1,s.value={},n.value={}};return v((()=>i.shippings),(e=>{e&&e.length>0&&(n.value=e.map((e=>o(d({},e),{isLoading:!1}))))}),{deep:!0,immediate:!0}),v((()=>l.shippingInfo.modal),(()=>{l.shippingInfo.modal?n.value=i.shippings.map((e=>o(d({},e),{isLoading:!1}))):n.value=[]})),(a,d)=>(_(),k(Q,{modelValue:T(l).shippingInfo.modal,"onUpdate:modelValue":d[0]||(d[0]=e=>T(l).shippingInfo.modal=e),size:"sm","hide-footer":"",onClose:u},{header:S((()=>d[1]||(d[1]=[L("h5",{class:"text-2xl font-medium"}," Shipping Information ",-1)]))),default:S((()=>["1"!==e.shippingLabelStatus?(_(),y("div",Me,[d[3]||(d[3]=L("div",{class:"flex items-center gap-2 mb-4"},[L("i",{class:"material-icons text-red-base icon-md"},"warning"),L("p",{class:"text-2xl font-bold"},"Regenerate Shiping Label")],-1)),d[4]||(d[4]=L("p",null,"Shipping label fails to generates. Once the root cause is resolved, you can use this option to regenerate both the shipping label and shipping kit. Once regenerated, the new tracking number and shipping kit will be automatically attached to the offer. ",-1)),U(F,{class:"btn btn-teal btn-outlined mt-6",rounded:"",dense:"",onClick:e.regenerateShippingLabel},{default:S((()=>d[2]||(d[2]=[L("div",{class:"flex items-center gap-2 px-2 py-1"},[L("i",{class:"material-icons text-base"},"refresh"),L("span",{class:"font-medium"},"Regenerate Shiping Label")],-1)]))),_:1},8,["onClick"])])):$("",!0),L("div",Re,[(_(!0),y(C,null,V(n.value,((e,a)=>(_(),y("div",{key:a,class:"border border-grey-01 rounded-xl p-5 space-y-4"},[L("div",Ge,[L("h5",Ye,N(`Shipping Label ${e.order_shipping_label}`),1),U(F,{disabled:!(null==e?void 0:e.custom_tracking)||!(null==e?void 0:e.custom_tracking.length),loading:e.isLoading,view:"outlined",color:"teal",dense:"",onClick:a=>(async e=>{var a,n,d,o;if(e.isLoading=!0,await E(l.shippingInfo,(()=>l.$actionCheckCustomTracking(e.shipping_tracking).then((e=>{const[a]=e;s.value=a})).catch((()=>{s.value={}})))),(null==(a=s.value)?void 0:a.courier_code)&&(null==(n=s.value)?void 0:n.courier_name)){const a={id:i.id,data:{order_shipping_label_id:e.order_shipping_label,shipping_tracking:e.custom_tracking,courier_code:null==(d=null==s?void 0:s.value)?void 0:d.courier_code,courier_name:null==(o=null==s?void 0:s.value)?void 0:o.courier_name,force_courier_code:0}};await E(l.shippingInfo,(()=>l.$actionSaveCustomTracking(a).then((()=>{t("saved"),u()})).catch((()=>{s.value={}}))))}e.isLoading=!1})(e)},{default:S((()=>d[5]||(d[5]=[x(" Save ")]))),_:2},1032,["disabled","loading","onClick"])]),L("div",He,[L("div",Je,[U(R,{modelValue:e.shipping_tracking,"onUpdate:modelValue":a=>e.shipping_tracking=a,disabled:"",block:""},{label:S((()=>d[6]||(d[6]=[L("span",{class:"font-medium"}," Tracking Number ",-1)]))),_:2},1032,["modelValue","onUpdate:modelValue"]),U(F,{color:"teal",view:"outlined",icon:"",class:"btn-action w-16",style:{paddingRight:0,paddingLeft:0},onClick:a=>T(oe)(null==e?void 0:e.shipping_tracking)},{default:S((()=>d[7]||(d[7]=[L("span",{class:"material-icons"},"content_copy",-1)]))),_:2},1032,["onClick"])]),L("div",Xe,[L("div",Ze,[U(R,{modelValue:e.shipping_tracking,"onUpdate:modelValue":a=>e.shipping_tracking=a,disabled:"",block:""},{label:S((()=>d[8]||(d[8]=[L("span",{class:"font-medium"}," Tracking Number ",-1)]))),_:2},1032,["modelValue","onUpdate:modelValue"]),U(F,{color:"teal",view:"outlined",icon:"",class:"btn-action w-16",style:{paddingRight:0,paddingLeft:0},onClick:a=>T(oe)(null==e?void 0:e.shipping_tracking)},{default:S((()=>d[9]||(d[9]=[L("span",{class:"material-icons"},"content_copy",-1)]))),_:2},1032,["onClick"])]),L("div",null,[U(R,{modelValue:e.custom_tracking,"onUpdate:modelValue":a=>e.custom_tracking=a,disabled:e.isLoading,block:""},{label:S((()=>d[10]||(d[10]=[L("span",{class:"font-medium"}," Custom Tracking Number ",-1)]))),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])]),L("div",ea,[L("div",null,[d[11]||(d[11]=L("p",{class:"block font-medium"},"Date Created",-1)),L("span",aa,N(null==e?void 0:e.created_at),1)]),L("div",null,[d[12]||(d[12]=L("p",{class:"block font-medium"},"Label Status",-1)),L("span",la,N(e.shipping_label_status?"Available":"Unavailable"),1)])]),L("div",ia,[d[13]||(d[13]=L("p",{class:"block font-medium"},"Shipment Status",-1)),L("span",ta,N(e.shipping_status_summary||"No Shipping Information"),1)])])])])))),128))])])),_:1},8,["modelValue"]))}},na={class:"space-y-8"},da={class:"space-y-6"},oa={class:"text-grey-02 text-xs"},ua={key:0},pa={rows:"8",class:"block w-full border border-grey-01 rounded-md px-4 py-4 text-grey-02"},ra={class:"space-y-6"},ca={class:"space-y-2"},ga={class:"flex items-center justify-between gap-4"},ma={__name:"BuybackShippingAdditional",props:{id:"-",total:0,shippings:{type:Array,default:()=>[]},shippingLabelStatus:{type:String,default:""},offerType:{type:String,default:"Mail-In"}},emits:["created","failed"],setup(e,{emit:a}){const l=pe(),i=e,t=a,s=ue(),n=P({add_shipping_label_number:1}),u=g({}),p=m((()=>n.add_shipping_label_number>=4?3:n.add_shipping_label_number>1?n.add_shipping_label_number:1)),r=ae({add_shipping_label_number:{required:ie,minValue:te(1)}},n,{$lazy:!0}),c=m((()=>{var e,a,l,t;return(null!=(a=null==(e=null==u?void 0:u.value)?void 0:e.label_qty)?a:1)-(null!=(t=null==(l=i.shippings)?void 0:l.length)?t:1)-n.add_shipping_label_number})),b=e=>{var a;n.add_shipping_label_number=Number(null==(a=null==e?void 0:e.target)?void 0:a.value)},f=()=>{n.add_shipping_label_number=1,l.additionalShipping.modal=!1},w=async()=>{await r.value.$validate()&&await E(l.additionalShipping,(async()=>{await l.$createMultipleLabels({id:i.id,data:n}).then((()=>{var e,a;h({message:null==(a=null==(e=l.additionalShipping)?void 0:e.result)?void 0:a.message,type:"info"}),t("created"),f()})).catch((()=>{t("failed")}))}))};return v((()=>l.additionalShipping.modal),(async e=>{e&&(l.additionalShipping.isLoading=!0,await s.actionAll(!0,(e=>{var a,l,t;const s=null!=(l=null==(a=e.param)?void 0:a.shipping_rules_multiple_label)?l:[];if(s.length){const e=s.find((e=>e.offer_type===i.offerType));u.value=o(d({},null!=e?e:{}),{label_qty:null!=(t=Number(null==e?void 0:e.label_qty))?t:1})}else u.value=void 0})),l.additionalShipping.isLoading=!1)})),(a,t)=>(_(),k(Q,{modelValue:T(l).additionalShipping.modal,"onUpdate:modelValue":t[1]||(t[1]=e=>T(l).additionalShipping.modal=e),size:"xs",onClose:f},{header:S((()=>t[2]||(t[2]=[L("h5",{class:"text-2xl font-medium"}," Additional Shipping Info ",-1)]))),default:S((()=>{var a,s;return[L("div",na,[U(Y,{color:"blue",view:"smooth",dense:""},{default:S((()=>t[3]||(t[3]=[L("div",{class:"flex items-center gap-x-4"},[L("span",{class:"material-icons",style:{"line-height":"1"}},"info"),L("p",null,"Labels will be created using the first shipping data")],-1)]))),_:1}),L("div",da,[L("div",null,[U(R,{modelValue:n.add_shipping_label_number,"onUpdate:modelValue":t[0]||(t[0]=e=>n.add_shipping_label_number=e),max:15,disabled:T(l).additionalShipping.isLoading,view:T(r).add_shipping_label_number.$error?"danger":"default",type:"number",block:"",ltr:"",onChange:b},{label:S((()=>t[4]||(t[4]=[L("span",{class:"font-medium"},"Number of Additional Labels",-1)]))),_:1},8,["modelValue","disabled","view"]),L("p",null,[(_(!0),y(C,null,V(T(r).add_shipping_label_number.$errors,((e,a)=>(_(),y("small",{key:a,class:"text-red-04"},N(e.$message),1)))),128))]),L("small",oa,N(c.value<0?0:c.value)+" "+N(c.value>1?"labels":"label")+" left to generate. ",1)]),1==e.shippingLabelStatus?(_(),y("div",ua,[L("div",pa,[L("div",ra,[t[7]||(t[7]=L("h6",{class:"font-medium text-lg text-grey-04"},"Preview:",-1)),L("div",ca,[L("div",null,[t[5]||(t[5]=L("span",{class:"font-medium text-grey-04"},"Base Tracking:",-1)),x(" "+N(null!=(s=null==(a=i.shippings[0])?void 0:a.shipping_tracking)?s:"-"),1)]),t[6]||(t[6]=L("p",null,"New labels will have tracking numbers like:",-1)),L("div",null,[(_(!0),y(C,null,V(p.value,(e=>{var a,l;return _(),y("p",{key:e},N((null==(a=i.shippings[0])?void 0:a.shipping_tracking)?`${null==(l=i.shippings[0])?void 0:l.shipping_tracking}-${e}`:`-${e}`)+" "+N(p.value===e&&p.value>1?".etc":""),1)})),128))])])])])])):$("",!0)])])]})),footer:S((()=>[L("div",ga,[U(F,{disabled:T(l).additionalShipping.isLoading,color:"white",onClick:f},{default:S((()=>t[8]||(t[8]=[x(" Cancel ")]))),_:1},8,["disabled"]),U(F,{disabled:T(l).additionalShipping.isLoading||c.value<0,loading:T(l).additionalShipping.isLoading,color:"teal",onClick:w},{default:S((()=>t[9]||(t[9]=[x(" Create Labels ")]))),_:1},8,["disabled","loading"])])])),_:1},8,["modelValue"]))}},va={__name:"BuybackShippingOptions",props:{id:"-",multiple:!1,total:0,shippings:{type:Array,default:()=>[]},shippingLabelStatus:{type:String,default:""},regenerateShippingLabel:{type:Function,default:()=>{}}},emits:["succeed","failed"],setup(e,{emit:a}){const l=A(),i=pe(),t=e,s=a,n=m((()=>{var e,a;return(null==(e=null==l?void 0:l.name)?void 0:e.toLowerCase().includes("bulkquote"))?"Bulk Offer":(null==(a=null==l?void 0:l.name)?void 0:a.toLowerCase().includes("easyoffer"))?"Easy Offer":"Mail-In"})),d=e=>{1==e?i.shippingInfo.modal=!0:2==e&&(i.additionalShipping.modal=!0)},o=()=>{s("succeed")},u=()=>{s("failed")},p=()=>{s("succeed")};return(e,a)=>{const l=b("DropdownItem"),i=b("DropdownMenu"),s=b("Dropdown");return _(),y(C,null,[U(s,{trigger:"click",placement:"bottom-end","hide-on-click":"",onCommand:d},{dropdown:S((()=>[U(i,null,{default:S((()=>[U(l,{command:"1"},{default:S((()=>a[1]||(a[1]=[L("div",{class:"flex items-center gap-2 text-base"},[L("span",{class:"material-icons"},"local_shipping"),x(" Shipping Information ")],-1)]))),_:1}),U(l,{command:"2"},{default:S((()=>a[2]||(a[2]=[L("div",{class:"flex items-center gap-2 text-base"},[L("span",{class:"material-icons"},"add"),x(" Additional Shipping Label ")],-1)]))),_:1})])),_:1})])),default:S((()=>[U(F,{color:"teal",view:"outlined",dense:"",icon:"",class:"btn-action"},{default:S((()=>a[0]||(a[0]=[L("span",{class:"material-icons"},"more_horiz",-1)]))),_:1})])),_:1}),U(sa,{id:t.id,shippings:t.shippings,shippingLabelStatus:t.shippingLabelStatus,regenerateShippingLabel:t.regenerateShippingLabel,onSaved:p},null,8,["id","shippings","shippingLabelStatus","regenerateShippingLabel"]),U(ma,{id:t.id,total:t.total,shippings:t.shippings,shippingLabelStatus:t.shippingLabelStatus,"offer-type":n.value,onCreated:o,onFailed:u},null,8,["id","total","shippings","shippingLabelStatus","offer-type"])],64)}}};var ha="/assets/no-item.d2e9bfac.svg",ba="/assets/data-match-icon.5fe238bc.svg";export{Le as B,Ee as S,Te as _,Pe as a,va as b,ha as c,ba as d,pe as u};
