var e=Object.defineProperty,a=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,t=Object.prototype.propertyIsEnumerable,i=(a,l,t)=>l in a?e(a,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[l]=t,o=(e,o)=>{for(var n in o||(o={}))l.call(o,n)&&i(e,n,o[n]);if(a)for(var n of a(o))t.call(o,n)&&i(e,n,o[n]);return e};import{u as n}from"./components.aaee2f92.js";import{k as s,g as d,f as r,y as c,W as m,m as u,o as p,t as v,B as g,D as h,a1 as f,a2 as b,K as y,w as L,I as _,N as w,O as U,a5 as x,$ as k,n as P,U as S,A as V,S as I,_ as C}from"./vendor.9695fe57.js";import{m as q,k as D,l as A,n as M}from"./setting.598aa5c3.js";import{b as j,f as $,e as B,P as E,_ as T,g as F,d as z,u as N}from"./index.35a87af4.js";import{c as O}from"./status.6f59bf91.js";import{_ as R}from"./tab.8e54d1d1.js";import{_ as Z}from"./badge.8abc46cf.js";import{C as Y}from"./card.85454cb1.js";import{B as G}from"./Breadcrumb.a04d3c7a.js";import{P as K,M as W}from"./Form.defd5ee3.js";import{u as H}from"./dashboard.90190b9a.js";import{u as J}from"./index.f40e4a9e.js";import{c as Q}from"./index.6b6f6369.js";import{B as X}from"./BSelect.3e5e6fa5.js";import{M as ee}from"./MultipleEmailInput.9acaf1f0.js";import{_ as ae}from"./attention.c511405b.js";import"./LoadingCard.fae900cb.js";import"./breadcrumb.f242deab.js";import"./index.54844a74.js";import"./fieldset.3185be27.js";import"./date.f86face7.js";import"./BDropdown.8baf076c.js";const le=s({components:{BSelect:X,Button:j,Input:$,Checkbox:B,MultipleEmailInput:ee,Pagination:E,PermissionTree:K},props:{modelValue:{type:Object,default:()=>({email:[],role_id:1,default_location_id:null,permission:[],menus:[],is_view_confidential:0})}},emits:["update:modelValue"],setup(e,{emit:a}){const{state:l,stateLocationPermission:t,loading:i,query:n,queryLocationPermission:s,locations:u,locationsPremission:p}=H(),v=e=>{if(!e)return e;let a=e;return a=a.replace(/(?:\d[\s.-]?){5,}/g,(e=>{const a=e.replace(/\D/g,"");return a.length<=4?"*".repeat(a.length):`${a.slice(0,4)}${"*".repeat(a.length-4)}`})),a=a.replace(/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}/g,(e=>`${e[0]}${"*".repeat(e.length-1)}`)),a=a.replace(/\b(call us|contact us|email us|text us)\b/gi,(e=>"*".repeat(e.length))),a},g=d((()=>t.value.data?t.value.data.map((e=>{const a=o({},e);return a.name=v(e.name),a})):[])),h=r(!1),f=r([]),b=r(null),y=d((()=>{var e;return null==(e=t.value.selected)?void 0:e.length})),L=d((()=>f.value.length||0)),_=d({get:()=>f.value,set:(e=[])=>{f.value=e,x.value.locations=e.map((e=>e.id)).filter((e=>e)),h.value=y.value===L.value;U.value&&!w.value.includes(U.value.id)&&S()}}),w=d((()=>_.value.map((e=>e.id)).filter((e=>e)))),U=d({get:()=>b.value,set:e=>{b.value=e,x.value.default_location_id=e?e.id:null}}),x=d({get:()=>e.modelValue,set(e){a("update:modelValue",e)}}),k={email:{required:Q.withMessage("Email is required",(()=>{var e,a;return(null==(a=null==(e=x.value)?void 0:e.email)?void 0:a.length)>0}))},default_location_id:{required:Q.withMessage("Default location is required",(()=>{var e;return null!==(null==(e=x.value)?void 0:e.default_location_id)}))},locations:{required:Q.withMessage("Location Permission is required",(()=>{var e,a;return(Array.isArray(null==(e=x.value)?void 0:e.locations)?x.value.locations.length>0:null!==(null==(a=x.value)?void 0:a.locations))||h.value}))}},P=J(k,x.value,{$lazy:!0}),S=()=>{b.value=null,x.value.default_location_id=null};return c((()=>({search:n.search})),(()=>{n.page=1})),c((()=>({search:n.search,page:n.page})),F((async()=>{await u()}),500)),c((()=>({search:n.search,page:n.page})),F((async()=>{await u()}),500)),c((()=>({searchLocationPermission:s.search})),(()=>{s.page=1})),c((()=>({searchLocationPermission:s.search,pageLocationPermission:s.page})),F((async()=>{await p()}),500)),c(h,(e=>{x.value.location_permission_all=e?1:0})),m((async()=>{await u(),await p(),x.value.locations=null,f.value=[]})),{formData:x,manageUserState:q,validation:P,stateLocation:l,stateLocationPermission:t,selectedLocationPermission:f,selectedLocations:_,selectedDefaultLocation:U,isSelectAllLocations:h,query:n,queryLocationPermission:s,loadingLocation:i,validate:()=>(P.value.$validate(),!P.value.$invalid),handleEmailChange:e=>{x.value.email=[...e]},handlePermissionsChange:(e=[])=>{x.value.menus=e},handleSelectAll:(e=!1)=>{h.value=e,f.value=[],x.value.locations=[],S()},filterDisabledLocation:(e={})=>{const{is_allowed:a}=e;return 0===a},filterDisabledDefaultLocation:(e={})=>!h.value&&!w.value.includes(e.id),censorLocationName:v,censoredLocations:g}}}),te={class:"grid grid-cols-1 gap-6"},ie={key:0},oe={key:1},ne={class:"p-4"},se={class:"px-2 pt-6"},de={class:"p-4"},re={class:"p-4"},ce={class:"p-4"};var me=T(le,[["render",function(e,a,l,t,i,o){const n=u("MultipleEmailInput"),s=u("Input"),d=u("Checkbox"),r=u("Pagination"),c=u("BSelect"),m=u("PermissionTree");return p(),v("div",te,[g("div",null,[a[6]||(a[6]=g("p",{class:"text-md font-bold mb-2"}," You will invite the following emails: ",-1)),h(n,{onEmailChange:e.handleEmailChange,suggestion:!1,emails:e.modelValue.email},null,8,["onEmailChange","emails"]),(p(!0),v(f,null,b(e.validation.email.$errors,((e,a)=>(p(),v("small",{class:"text-red-base block mt-2",key:a},y(e.$message)+". ",1)))),128))]),g("div",null,[a[10]||(a[10]=g("label",null,"Location Permissions",-1)),h(c,{modelValue:e.selectedLocations,"onUpdate:modelValue":a[2]||(a[2]=a=>e.selectedLocations=a),loading:e.loadingLocation.all,"item-disabled":e.filterDisabledLocation,items:e.censoredLocations,center:!1,"max-height":300,"select-all":e.isSelectAllLocations,placeholder:"Set Permission Location","max-width":"auto",multiple:"",block:""},{"selected-item":L((({items:a})=>[e.isSelectAllLocations?(p(),v("span",ie," All location selected ")):(p(),v("span",oe,y(Array.isArray(a)?`${a.length} location selected`:"Some location selected"),1))])),prepend:L((()=>[g("div",ne,[h(s,{modelValue:e.queryLocationPermission.search,"onUpdate:modelValue":a[0]||(a[0]=a=>e.queryLocationPermission.search=a),block:"",icon:"","icon-left":"",placeholder:"Search Location"},{icon:L((()=>a[7]||(a[7]=[g("i",{class:"material-icons"},"search",-1)]))),_:1},8,["modelValue"]),g("div",se,[h(d,{"model-value":e.isSelectAllLocations,"onUpdate:modelValue":e.handleSelectAll,class:"font-normal"},{default:L((()=>a[8]||(a[8]=[_(" Select All Locations ")]))),_:1},8,["model-value","onUpdate:modelValue"])])])])),append:L((()=>[g("div",de,[h(r,{page:e.queryLocationPermission.page,"onUpdate:page":a[1]||(a[1]=a=>e.queryLocationPermission.page=a),"hide-show-entries":"",small:"",data:e.stateLocationPermission},null,8,["page","data"])])])),empty:L((()=>a[9]||(a[9]=[g("div",{class:"text-center px-4 pt-4 pb-6"},"No location found",-1)]))),_:1},8,["modelValue","loading","item-disabled","items","select-all"]),(p(!0),v(f,null,b(e.validation.locations.$errors,((e,a)=>(p(),v("small",{class:"text-red-base block mt-2",key:a},y(e.$message)+". ",1)))),128))]),g("div",null,[a[13]||(a[13]=g("label",null,"Default Location",-1)),h(c,{modelValue:e.selectedDefaultLocation,"onUpdate:modelValue":a[5]||(a[5]=a=>e.selectedDefaultLocation=a),loading:e.loadingLocation.all,disabled:!e.isSelectAllLocations&&0===e.selectedLocations.length,"item-disabled":e.filterDisabledDefaultLocation,items:e.censoredLocations,center:!1,"max-height":300,placeholder:"Set Default Location",block:""},{prepend:L((()=>[g("div",re,[h(s,{modelValue:e.queryLocationPermission.search,"onUpdate:modelValue":a[3]||(a[3]=a=>e.queryLocationPermission.search=a),block:"",icon:"","icon-left":"",placeholder:"Search Location"},{icon:L((()=>a[11]||(a[11]=[g("i",{class:"material-icons"},"search",-1)]))),_:1},8,["modelValue"])])])),append:L((()=>[g("div",ce,[h(r,{page:e.queryLocationPermission.page,"onUpdate:page":a[4]||(a[4]=a=>e.queryLocationPermission.page=a),"hide-show-entries":"",small:"",data:e.stateLocationPermission},null,8,["page","data"])])])),empty:L((()=>a[12]||(a[12]=[g("div",{class:"text-center px-4 pt-4 pb-6"},"No location found",-1)]))),_:1},8,["modelValue","loading","disabled","item-disabled","items"]),(p(!0),v(f,null,b(e.validation.default_location_id.$errors,((e,a)=>(p(),v("small",{class:"text-red-base block mt-2",key:a},y(e.$message)+". ",1)))),128))]),g("div",null,[h(m,{items:e.manageUserState.invite.menu_list.menus,onItemsChange:e.handlePermissionsChange,name:"name","max-height":"800"},null,8,["items","onItemsChange"])])])}]]);const ue=s({components:{BSelect:X,Button:j,Input:$,Checkbox:B,MultipleEmailInput:ee,Pagination:E,PermissionTree:K},props:{modelValue:{type:Object,default:()=>({email:[],role_id:1,default_location_id:null,permission:[],menus:[],is_view_confidential:0})}},emits:["update:modelValue"],setup(e,{emit:a}){const{state:l,stateLocationPermission:t,loading:i,query:n,queryLocationPermission:s,locations:u,locationsPremission:p}=H(),v=r(!1),g=r(q.invite.data.locations||[]),h=r({id:q.invite.data.default_location_id,name:q.invite.data.default_location_name}),f=d((()=>t.value)),b=d({get:()=>g.value,set:(e=[])=>{g.value=e,_.value.locations=e.map((e=>e.id)),v.value=e.length>0&&e.length===f.value.length&&f.value.every((a=>e.some((e=>e.id===a.id))));L.value&&!y.value.includes(L.value.id)&&x()}}),y=d((()=>b.value.map((e=>e.id)).filter((e=>e)))),L=d({get:()=>h.value,set:e=>{h.value=e,_.value.default_location_id=e?e.id:null,_.value.default_location_name=e?e.name:null}}),_=d({get:()=>e.modelValue,set(e){a("update:modelValue",e)}}),w={email:{required:Q.withMessage("Email is required",(()=>{var e,a;return(null==(a=null==(e=_.value)?void 0:e.email)?void 0:a.length)>0}))},default_location_id:{required:Q.withMessage("Default location is required",(()=>{var e;return null!==(null==(e=_.value)?void 0:e.default_location_id)}))},locations:{required:Q.withMessage("Location Permission is required",(()=>{var e,a;return!!v.value||(Array.isArray(null==(e=_.value)?void 0:e.locations)?_.value.locations.length>0:null!==(null==(a=_.value)?void 0:a.locations))}))}},U=J(w,_.value,{$lazy:!0}),x=()=>{h.value=null,_.value.default_location_id=null},k=()=>{g.value.length>0&&f.value.total_locations>0&&(v.value=g.value.length===f.value.total_locations)},P=e=>{if(!e)return e;let a=e;return a=a.replace(/(?:\d[\s.-]?){5,}/g,(e=>{const a=e.replace(/\D/g,"");return a.length<=4?"*".repeat(a.length):`${a.slice(0,4)}${"*".repeat(a.length-4)}`})),a=a.replace(/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}/g,(e=>`${e[0]}${"*".repeat(e.length-1)}`)),a=a.replace(/\b(call us|contact us|email us|text us)\b/gi,(e=>"*".repeat(e.length))),a},S=d((()=>t.value.data?t.value.data.map((e=>{const a=o({},e);return a.name=P(e.name),a})):[]));return c((()=>({search:n.search})),(()=>{n.page=1})),c((()=>({search:n.search,page:n.page})),F((async()=>{await u()}),500)),c((()=>({searchLocationPermission:s.search})),(()=>{s.page=1})),c((()=>({searchLocationPermission:s.search,pageLocationPermission:s.page})),F((async()=>{await p()}),500)),c(v,(e=>{_.value.location_permission_all=e?1:0})),c((()=>t.value.data),(()=>{k()})),m((async()=>{await u(),await p(),_.value.locations=g.value.map((e=>e.id)),k()})),{formData:_,manageUserState:q,validation:U,stateLocation:l,stateLocationPermission:t,selectedLocationPermission:g,selectedLocations:b,selectedDefaultLocation:L,isSelectAllLocations:v,query:n,queryLocationPermission:s,loadingLocation:i,validate:()=>(U.value.$validate(),!U.value.$invalid),handlePermissionsChange:(e=[])=>{_.value.menus=e},handleSelectAll:(e=!1)=>{v.value=e,e?(g.value=f.value.selected,_.value.locations=f.value.selected.map((e=>e.id)).filter((e=>e))):(g.value=[],_.value.locations=[],x())},filterDisabledLocation:(e={})=>{const{is_allowed:a}=e;return 0===a},filterDisabledDefaultLocation:(e={})=>!v.value&&!y.value.includes(e.id),availableLocations:f,censorLocationName:P,censoredLocations:S}}}),pe={class:"grid grid-cols-1 gap-6"},ve={key:0},ge={key:1},he={class:"p-4"},fe={class:"px-2 pt-6"},be={class:"p-4"},ye={class:"p-4"},Le={class:"p-4"};const _e=s({components:{Tab:R,Badge:Z,Button:j,Card:Y,Input:$,Modal:z,Breadcrumb:G,Pagination:E,ManageUserForm:W,InviteUserForm:me,UpdateInviteUserForm:T(ue,[["render",function(e,a,l,t,i,o){const n=u("Input"),s=u("Checkbox"),d=u("Pagination"),r=u("BSelect"),c=u("PermissionTree");return p(),v("div",pe,[g("div",null,[a[7]||(a[7]=g("p",{class:"text-md font-bold mb-2"}," You will invite the following emails: ",-1)),h(n,{readonly:"",block:"",disabled:"",modelValue:e.modelValue.email,"onUpdate:modelValue":a[0]||(a[0]=a=>e.modelValue.email=a)},null,8,["modelValue"]),(p(!0),v(f,null,b(e.validation.email.$errors,((e,a)=>(p(),v("small",{class:"text-red-base block mt-2",key:a},y(e.$message)+". ",1)))),128))]),g("div",null,[a[11]||(a[11]=g("label",null,"Location Permissions",-1)),h(r,{modelValue:e.selectedLocations,"onUpdate:modelValue":a[3]||(a[3]=a=>e.selectedLocations=a),loading:e.loadingLocation.all,"item-disabled":e.filterDisabledLocation,items:e.censoredLocations,center:!1,"max-height":300,"select-all":e.isSelectAllLocations,placeholder:"Set Permission Location","max-width":"auto",multiple:"",block:""},{"selected-item":L((({items:a})=>[e.isSelectAllLocations?(p(),v("span",ve," All location selected ")):(p(),v("span",ge,y(Array.isArray(a)?`${a.length} location selected`:"Some location selected"),1))])),prepend:L((()=>[g("div",he,[h(n,{modelValue:e.queryLocationPermission.search,"onUpdate:modelValue":a[1]||(a[1]=a=>e.queryLocationPermission.search=a),block:"",icon:"","icon-left":"",placeholder:"Search Location"},{icon:L((()=>a[8]||(a[8]=[g("i",{class:"material-icons"},"search",-1)]))),_:1},8,["modelValue"]),g("div",fe,[h(s,{"model-value":e.isSelectAllLocations,"onUpdate:modelValue":e.handleSelectAll,class:"font-normal"},{default:L((()=>a[9]||(a[9]=[_(" Select All Locations ")]))),_:1},8,["model-value","onUpdate:modelValue"])])])])),append:L((()=>[g("div",be,[h(d,{page:e.queryLocationPermission.page,"onUpdate:page":a[2]||(a[2]=a=>e.queryLocationPermission.page=a),"hide-show-entries":"",small:"",data:e.stateLocationPermission},null,8,["page","data"])])])),empty:L((()=>a[10]||(a[10]=[g("div",{class:"text-center px-4 pt-4 pb-6"},"No location found",-1)]))),_:1},8,["modelValue","loading","item-disabled","items","select-all"]),(p(!0),v(f,null,b(e.validation.locations.$errors,((e,a)=>(p(),v("small",{class:"text-red-base block mt-2",key:a},y(e.$message)+". ",1)))),128))]),g("div",null,[a[14]||(a[14]=g("label",null,"Default Location",-1)),h(r,{modelValue:e.selectedDefaultLocation,"onUpdate:modelValue":a[6]||(a[6]=a=>e.selectedDefaultLocation=a),loading:e.loadingLocation.all,disabled:!e.isSelectAllLocations&&0===e.selectedLocations.length,"item-disabled":e.filterDisabledDefaultLocation,items:e.censoredLocations,center:!1,"max-height":300,placeholder:"Set Default Location",block:""},{prepend:L((()=>[g("div",ye,[h(n,{modelValue:e.queryLocationPermission.search,"onUpdate:modelValue":a[4]||(a[4]=a=>e.queryLocationPermission.search=a),block:"",icon:"","icon-left":"",placeholder:"Search Location"},{icon:L((()=>a[12]||(a[12]=[g("i",{class:"material-icons"},"search",-1)]))),_:1},8,["modelValue"])])])),append:L((()=>[g("div",Le,[h(d,{page:e.queryLocationPermission.page,"onUpdate:page":a[5]||(a[5]=a=>e.queryLocationPermission.page=a),"hide-show-entries":"",small:"",data:e.stateLocationPermission},null,8,["page","data"])])])),empty:L((()=>a[13]||(a[13]=[g("div",{class:"text-center px-4 pt-4 pb-6"},"No location found",-1)]))),_:1},8,["modelValue","loading","disabled","item-disabled","items"]),(p(!0),v(f,null,b(e.validation.default_location_id.$errors,((e,a)=>(p(),v("small",{class:"text-red-base block mt-2",key:a},y(e.$message)+". ",1)))),128))]),g("div",null,[h(c,{items:e.manageUserState.invite.menu_list.menus,onItemsChange:e.handlePermissionsChange,name:"name","max-height":"800"},null,8,["items","onItemsChange"])])])}]])},props:{statusId:{type:[Number,String],default:1},choose:{type:Boolean,default:!1}},emits:["choose"],async setup(e,{emit:a}){const l=w(),t=U(),i=x(),{data:o,state:n,loading:s,modal:m,selected:u,tabs:p,unsetData:v,openModal:g,actionAll:h,actionDelete:f}=D(),{actionMenus:b,action:y,actionResend:L,actionRevoke:_,actionTotalInvited:k,actionGetData:P,actionUpdateInvite:S}=M(),{data:V,loading:I,actionShow:j,actionUpdate:$,getMenu:B}=A(),{me:E}=N(),T=r(null),z=r(null),R=d((()=>2===o.type)),Z=d((()=>!R.value));o.invited=1==i.query.invited?1:0,o.type=isNaN(parseInt(i.query.type))?o.invited:parseInt(i.query.type);return c((()=>({limit:o.limit,search:o.search,invited:o.invited})),(()=>{o.page=1})),c(o,F((async()=>{t.push({name:"settingManageUser",query:{invited:o.invited,type:o.type}}),await h()}),500)),await Promise.all([h(),k(),j(-1),B(-1)]),{me:E,refInviteUserForm:T,refManageUserForm:z,manageUserState:q,data:o,myPermission:V,state:n,store:l,loading:s,loadingMyPermission:I,modal:m,tabs:p,unsetData:v,actionDelete:f,breadcrumb:[{text:"Settings",to:{name:"setting"}},{text:"Manage Users"}],isMyPermissions:R,isShowUserPermissionTable:Z,openModalSelected:(e,a)=>g(e,(()=>{u.value=a.id})),handleInviteUser:async()=>{q.invite.data.email=[],q.invite.modal.create=!0,await b()},handleSubmitInviteUser:async()=>{T.value.validate()&&await y((async()=>{1==o.invited?await h():o.invited=1,q.invite.modal.create=!1,await k()}))},handleResendInvitation:async e=>{await L(e,(()=>{C({type:"success",message:"Invitation email resend"})}))},handleRevokeInvitation:async e=>{await _(e,(async()=>{C({type:"success",message:"Invitation revoked"}),await Promise.all([h(),k()])}))},handleChangeTab:e=>{o.type=e;o.invited=2===e?0:e},handleUpdateMyPermission:async()=>{z.value.validate()&&(z.value.formatMenu&&z.value.formatMenu(),await $(-1,(()=>{C({type:"success",message:"Permission updated"})})))},color:O,handleUpdateInviteUser:async e=>{q.invite.selectedId=e.id,q.invite.loading.update=!0,await P(e.id),q.invite.selectedId&&(q.invite.modal.update=!0,q.invite.loading.update=!1)},handleSubmitUpdateInviteUser:async()=>{T.value.validate()&&await S((async()=>{1==o.invited&&(C({type:"success",message:"Invitation updated"}),q.invite.modal.update=!1)}))},handleCopyInviteLink:async e=>{navigator.clipboard.writeText(e.invite_link).then((()=>{C({type:"success",message:"Invite link copied to clipbord"})}))}}}}),we={class:"flex items-center justify-between gap-x-4"},Ue={key:0,class:"p-3 ml-4 bg-teal-04 text-white rounded-full flex items-center justify-center box-content w-1 h-1"},xe={key:0},ke={class:"flex flex-col md:flex-row mb-6"},Pe={class:"flex-grow md:mr-3 md:mb-0 mb-3"},Se={class:"lg:opacity-0 group-hover:opacity-100 transition-opacity"},Ve={key:0,class:"flex items-center gap-x-2"},Ie={key:0,class:"flex items-center gap-x-4"},Ce=["onClick"],qe=["onClick"],De=["onClick"],Ae=["onClick"],Me={key:1},je={class:"text-center py-10"};var $e=T(_e,[["render",function(e,a,l,t,i,o){const n=u("Button"),s=u("Breadcrumb"),d=u("Tab"),r=u("Input"),c=u("TableColumn"),m=u("Badge"),b=u("Table"),w=u("Pagination"),U=u("ManageUserForm"),x=u("Card"),C=u("Modal"),q=u("InviteUserForm"),D=u("UpdateInviteUserForm"),A=k("loading");return p(),v("div",null,[h(s,{class:"mt-2 mb-8",pageTitle:"Manage Users",backTo:{name:"setting"},items:e.breadcrumb},{right:L((()=>[g("div",we,[h(n,{color:"teal",onClick:e.handleInviteUser},{default:L((()=>a[9]||(a[9]=[g("span",{class:"material-icons"},"share",-1),_(" Invite Users ")]))),_:1},8,["onClick"]),e.isMyPermissions?(p(),P(n,{key:0,color:"teal",loading:e.loadingMyPermission.form,onClick:e.handleUpdateMyPermission},{default:L((()=>a[10]||(a[10]=[_(" Save Changes ")]))),_:1},8,["loading","onClick"])):S("",!0)])])),_:1},8,["items"]),h(x,{class:"mb-8"},{default:L((()=>[h(d,{modelValue:e.data.type,"onUpdate:modelValue":e.handleChangeTab,items:e.tabs,component:"",by:"value",name:"name"},{title:L((({item:e})=>[g("span",null,y(e.name),1),(null==e?void 0:e.total_invited)?(p(),v("div",Ue,y(e.total_invited),1)):S("",!0)])),_:1},8,["modelValue","onUpdate:modelValue","items"]),e.isShowUserPermissionTable?(p(),v("div",xe,[g("div",ke,[g("div",Pe,[h(r,{modelValue:e.data.search,"onUpdate:modelValue":a[0]||(a[0]=a=>e.data.search=a),placeholder:"Search Users",class:"w-full",icon:""},{icon:L((()=>a[11]||(a[11]=[g("span",{class:"material-icons"},"search",-1)]))),_:1},8,["modelValue"])])]),V((p(),P(b,{class:"mb-6",data:e.state.data},{default:L((()=>[0==e.data.invited?(p(),P(c,{key:0,prop:"full_name",label:"Name",width:"150"},{default:L((e=>[_(y(e.row.first_name)+" "+y(e.row.last_name),1)])),_:1})):S("",!0),h(c,{prop:"email",label:"Email","min-width":"300"}),1==e.data.invited?(p(),P(c,{key:1,width:"100%",label:"Status"},{default:L((l=>[1==l.row.status?(p(),P(m,{key:0,color:e.color(l.row.status_name)},{default:L((()=>a[12]||(a[12]=[_("Accepted")]))),_:2},1032,["color"])):2==l.row.status?(p(),P(m,{key:1,color:e.color(l.row.status_name)},{default:L((()=>a[13]||(a[13]=[_("Invited")]))),_:2},1032,["color"])):(p(),P(m,{key:2,color:e.color(l.row.status_name)},{default:L((()=>a[14]||(a[14]=[_("Expired")]))),_:2},1032,["color"]))])),_:1})):S("",!0),h(c,{prop:"select","min-width":1==e.data.invited?"500":""},{default:L((l=>[g("div",Se,[0==e.data.invited?(p(),v("div",Ve,[h(n,{color:"teal",class:"mr-1",to:{name:"settingManageUserEdit",params:{userId:l.row.id}},link:"",dense:""},{default:L((()=>a[15]||(a[15]=[g("span",{class:"material-icons text-xl"},"edit",-1)]))),_:2},1032,["to"]),1==l.row.permission.delete&&l.row.id!==e.me.id?(p(),P(n,{key:0,color:"red",class:"mr-1",onClick:a=>e.openModalSelected("delete",l.row),dense:""},{default:L((()=>a[16]||(a[16]=[g("span",{class:"material-icons text-xl"},"delete",-1)]))),_:2},1032,["onClick"])):S("",!0)])):(p(),v(f,{key:1},[2==l.row.status?(p(),v("div",Ie,[V((p(),v("a",{href:"#!",onClick:I((a=>e.handleResendInvitation(l.row.id)),["prevent"]),class:"flex flex-nowrap gap-2 items-center text-lg text-teal-01 hover:text-teal-01 bg-teal-04 loading:bg-transparent hover:bg-black rounded-lg px-4 py-0.5"},a[17]||(a[17]=[g("i",{class:"material-icons middle"},"refresh",-1),_(),g("span",{class:"truncate"},"Resend",-1)]),8,Ce)),[[A,e.manageUserState.invite.loading.resend.includes(l.row.id)]]),V((p(),v("a",{href:"#!",onClick:I((a=>e.handleRevokeInvitation(l.row.id)),["prevent"]),class:"flex flex-nowrap gap-2 items-center text-lg text-white hover:text-white bg-red-base hover:bg-red-darken rounded-lg px-4 py-0.5"},a[18]||(a[18]=[g("i",{class:"material-icons middle"},"close",-1),_(),g("span",{class:"truncate"},"Revoke",-1)]),8,qe)),[[A,e.manageUserState.invite.loading.revoke.includes(l.row.id)]]),V((p(),v("button",{class:"flex flex-nowrap gap-2 items-center text-lg text-teal-01 hover:text-teal-01 bg-teal-04 hover:bg-black rounded-lg px-4 py-0.5",onClick:a=>e.handleUpdateInviteUser(l.row)},a[19]||(a[19]=[g("i",{class:"material-icons"},"edit",-1),_(),g("span",{class:"truncate"},"Edit",-1)]),8,De)),[[A,e.manageUserState.invite.loading.update]]),V((p(),v("a",{href:"#!",onClick:I((a=>e.handleCopyInviteLink(l.row)),["prevent"]),class:"flex flex-nowrap gap-2 items-center text-lg text-teal-01 hover:text-teal-01 bg-teal-04 hover:bg-black rounded-lg px-4 py-0.5"},a[20]||(a[20]=[g("i",{class:"material-icons middle"},"content_copy",-1),_(),g("span",{class:"truncate"},"Copy invite link",-1)]),8,Ae)),[[A,e.manageUserState.invite.loading.copyLink.includes(l.row.id)]])])):S("",!0)],64))])])),_:1},8,["min-width"])])),_:1},8,["data"])),[[A,e.loading.all]]),h(w,{page:e.data.page,"onUpdate:page":a[1]||(a[1]=a=>e.data.page=a),limit:e.data.limit,"onUpdate:limit":a[2]||(a[2]=a=>e.data.limit=a),data:e.state},null,8,["page","limit","data"])])):S("",!0),e.isMyPermissions?(p(),v("div",Me,[h(U,{ref:"refManageUserForm",data:e.myPermission,"permission-only":"",edit:"",readonly:0==e.myPermission.permission.update,"permission-readonly":0==e.myPermission.menu_list.permission.update,"permission-max-height":600},null,8,["data","readonly","permission-readonly"])])):S("",!0)])),_:1}),h(C,{size:"xs",modelValue:e.modal.delete,"onUpdate:modelValue":a[4]||(a[4]=a=>e.modal.delete=a),title:"Delete User",onClose:e.unsetData,"hide-header":"","hide-footer":""},{default:L((()=>[g("div",je,[a[23]||(a[23]=g("img",{class:"mb-10 mx-auto",src:ae,alt:"Icon"},null,-1)),a[24]||(a[24]=g("div",{class:"mt-8 mb-10"},[g("h6",{class:"mb-2"},"Attention!"),g("p",null,"Do you want to delete this user data?")],-1)),h(n,{color:"red",class:"mr-5",loading:e.loading.delete,onClick:e.actionDelete},{default:L((()=>a[21]||(a[21]=[_("Delete User")]))),_:1},8,["loading","onClick"]),h(n,{view:"outlined",color:"teal",disabled:e.loading.delete,onClick:a[3]||(a[3]=a=>e.modal.delete=!1)},{default:L((()=>a[22]||(a[22]=[_("Cancel")]))),_:1},8,["disabled"])])])),_:1},8,["modelValue","onClose"]),h(C,{modelValue:e.manageUserState.invite.modal.create,"onUpdate:modelValue":a[6]||(a[6]=a=>e.manageUserState.invite.modal.create=a),size:"lg"},{header:L((()=>a[25]||(a[25]=[g("h6",{class:"font-bold"},"Invite Users",-1)]))),default:L((()=>[h(q,{ref:"refInviteUserForm",modelValue:e.manageUserState.invite.data,"onUpdate:modelValue":a[5]||(a[5]=a=>e.manageUserState.invite.data=a)},null,8,["modelValue"])])),footer:L((()=>[h(n,{view:"filled",color:"teal",onClick:e.handleSubmitInviteUser,loading:e.manageUserState.invite.loading.create},{default:L((()=>a[26]||(a[26]=[g("i",{class:"material-icons mr-1"},"email",-1),_(" Send Invites")]))),_:1},8,["onClick","loading"])])),_:1},8,["modelValue"]),h(C,{modelValue:e.manageUserState.invite.modal.update,"onUpdate:modelValue":a[8]||(a[8]=a=>e.manageUserState.invite.modal.update=a),size:"lg"},{header:L((()=>a[27]||(a[27]=[g("h6",{class:"font-bold"},"Edit Invited Users",-1)]))),default:L((()=>[h(D,{ref:"refInviteUserForm",modelValue:e.manageUserState.invite.data,"onUpdate:modelValue":a[7]||(a[7]=a=>e.manageUserState.invite.data=a)},null,8,["modelValue"])])),footer:L((()=>[h(n,{view:"filled",color:"teal",onClick:e.handleSubmitUpdateInviteUser,loading:e.manageUserState.invite.loading.update},{default:L((()=>a[28]||(a[28]=[g("i",{class:"material-icons mr-1"},"email",-1),_(" Resend Invites")]))),_:1},8,["onClick","loading"])])),_:1},8,["modelValue"])])}]]),Be=s({setup(){const{genSuspense:e}=n();return()=>e($e)}});export{Be as default};
