{"version":3,"file":"DeviceTable.3cc1d280.js","sources":["../../src/components/BuybackDevice/DeviceTable.vue"],"sourcesContent":["<template>\n\t<Table\n\t\tv-if=\"showTable\"\n\t\t:data=\"data\"\n\t\t:row-class-name=\"disabled ? 'global-disabled-row-table' : ''\"\n\t\t:load=\"onExpandChange\"\n\t\t:tree-props=\"\n\t\t\t!disabled && {\n\t\t\t\tchildren: 'child',\n\t\t\t\thasChildren: 'has_child'\n\t\t}\"\n\t\trow-key=\"id\"\n\t\tv-loading=\"loadingCategory\"\n\t\tlazy>\n\t\t<TableColumn width=\"50\"></TableColumn>\n\t\t<TableColumn width=\"100\" prop=\"is_enable\">\n\t\t\t<template #header>\n\t\t\t\t<Checkbox\n\t\t\t\t\tv-if=\"category\"\n\t\t\t\t\tv-model=\"category.is_enable\"\n\t\t\t\t\ttype=\"toggle\"\n\t\t\t\t\t:value=\"1\"\n\t\t\t\t\t:value-off=\"0\"\n\t\t\t\t\t:disabled=\"disabled\"\n\t\t\t\t\t:loading=\"loadingCategory\"\n\t\t\t\t\t@input=\"updateBuybackDeviceByCategory()\"></Checkbox>\n\t\t\t</template>\n\t\t\t<template #default=\"scope\">\n\t\t\t\t<Checkbox\n\t\t\t\t\tv-model=\"scope.row.is_enable\"\n\t\t\t\t\tclass=\"py-3\"\n\t\t\t\t\ttype=\"toggle\"\n\t\t\t\t\t:value=\"1\"\n\t\t\t\t\t:value-off=\"0\"\n\t\t\t\t\t:disabled=\"disabled\"\n\t\t\t\t\t:loading=\"scope.row.is_loading\"\n\t\t\t\t\t@input=\"toggleEnable(scope.row)\"/>\n\t\t\t</template>\n\t\t</TableColumn>\n\t\t<TableColumn\n\t\t\tlabel=\"Brand\"\n\t\t\tv-if=\"route.params.brand === 'all'\" \n\t\t>\n\t\t\t<template #default=\"scope\">\n\t\t\t\t<div class=\"flex items-center gap-2\">\n\t\t\t\t\t<span>{{ scope.row.manufacturer }}</span> \n\t\t\t\t\t<Tooltip\n\t\t\t\t\t\tv-if=\"\n\t\t\t\t\t\t\tscope.row.has_condition === 0 ||\n\t\t\t\t\t\t\tscope.row.has_price === 0\"\n\t\t\t\t\t\tplacement=\"top\">\n\t\t\t\t\t\t<template #default>\n\t\t\t\t\t\t\t<i class=\"material-icons text-orange-04\">warning</i>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template #content>\n\t\t\t\t\t\t\t<div class=\"w-80 leading-6\">\n\t\t\t\t\t\t\t\t<p\n\t\t\t\t\t\t\t\t\tv-if=\"\n\t\t\t\t\t\t\t\t\t\t(scope.row.has_condition === 0 && scope.row.has_price === 0) ||\n\t\t\t\t\t\t\t\t\t\t(scope.row.has_condition === 0 && scope.row.has_price === 1)\n\t\t\t\t\t\t\t\t\t\">\n\t\t\t\t\t\t\t\t\tTo start buying this item, switch the \"Activate\" toggle to on, then configure its conditions and pricing.\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t<p v-else>To start buying this item, you must configure its pricing.</p>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</Tooltip>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</TableColumn>\n\t\t<TableColumn prop=\"name\" label=\"Model\">\n\t\t\t<template #default=\"scope\">\n\t\t\t\t{{ scope.row?.name ?? '-' }}\n\t\t\t</template>\n\t\t</TableColumn>\n\t\t<TableColumn label=\"Purchasing Type\" :min-width=\"300\">\n\t\t\t<template #default=\"{ row }\">\n\t\t\t\t<div class=\"flex flex-wrap items-center py-2\">\n\t\t\t\t\t<div class=\"flex flex-wrap items-center mr-4\">\n\t\t\t\t\t\t<!-- disable when there are no active in-store locations 86czpqfn8 -->\n\t\t\t\t\t\t<Tooltip v-if=\"location == 'mail-in' && row.is_enable && !disabled\" placement=\"top\">\n\t\t\t\t\t\t\t<template #default>\n\t\t\t\t\t\t\t\t<Checkbox class=\"py-3\" color=\"teal\" value=\"1\" value-off=\"0\" :modelValue=\"row.instore == 2 ? 0 : row.instore\" :indeterminate=\"row.instore == 2\" disabled><span class=\"ml-1 font-normal\">In-Store</span></Checkbox>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<template #content>\n\t\t\t\t\t\t\t\t<div class=\"w-96 leading-6 text-center\">\n\t\t\t\t\t\t\t\t\tTo enable In-Store purchasing, add an In-Store subscription under <RouterLink class=\"text-white underline\" :to=\"{ name: 'settingManageLocationStoreLocations' }\">Location Settings</RouterLink>.\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t<Checkbox\n\t\t\t\t\t\t\tv-else\n\t\t\t\t\t\t\t:modelValue=\"row.instore == 2 ? 0 : row.instore\"\n\t\t\t\t\t\t\t:indeterminate=\"row.instore == 2\"\n\t\t\t\t\t\t\t:value=\"1\"\n\t\t\t\t\t\t\t:value-off=\"0\"\n\t\t\t\t\t\t\t:disabled=\"!row.is_enable || disabled || row.is_loading\"\n\t\t\t\t\t\t\t@input=\"\n\t\t\t\t\t\t\t\t(newValue) => updateBuybackType(row, newValue, 'instore')\n\t\t\t\t\t\t\t\">\n\t\t\t\t\t\t\t<span class=\"ml-1 font-normal\">In-Store</span>\n\t\t\t\t\t\t</Checkbox>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"flex flex-wrap items-center\">\n\t\t\t\t\t\t<!-- disable when there are no active mail-in locations 86czpqfn8 -->\n\t\t\t\t\t\t<Tooltip v-if=\"location == 'in-store' && row.is_enable && !disabled\" placement=\"top\">\n\t\t\t\t\t\t\t<template #default>\n\t\t\t\t\t\t\t\t<Checkbox class=\"py-3\" color=\"teal\" value=\"1\" value-off=\"0\" :modelValue=\"row.mailin == 2 ? 0 : row.mailin\" :indeterminate=\"row.mailin == 2\" disabled><span class=\"ml-1 font-normal\">Mail-in</span></Checkbox>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t<template #content>\n\t\t\t\t\t\t\t\t<div class=\"w-96 leading-6 text-center\">\n\t\t\t\t\t\t\t\t\tTo enable Mail-in purchasing, add a Mail-in subscription under <RouterLink class=\"text-white underline\" :to=\"{ name: 'settingManageLocationStoreLocations' }\">Location Settings</RouterLink>.\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t<Checkbox\n\t\t\t\t\t\t\tv-else\n\t\t\t\t\t\t\t:modelValue=\"row.mailin == 2 ? 0 : row.mailin\"\n\t\t\t\t\t\t\t:indeterminate=\"row.mailin == 2\"\n\t\t\t\t\t\t\t:value=\"1\"\n\t\t\t\t\t\t\t:value-off=\"0\"\n\t\t\t\t\t\t\t:disabled=\"!row.is_enable || disabled || row.is_loading\"\n\t\t\t\t\t\t\t@input=\"(newValue) => updateBuybackType(row, newValue, 'mailin')\">\n\t\t\t\t\t\t\t<span class=\"ml-1 font-normal\">Mail-in</span>\n\t\t\t\t\t\t</Checkbox>\n\t\t\t\t\t\t<div class=\"relative ml-6\">\n\t\t\t\t\t\t\t<transition name=\"fade\">\n\t\t\t\t\t\t\t\t<Loading v-show=\"loading.buybackType.update.get(row.id)\" />\n\t\t\t\t\t\t\t</transition>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"row.is_enable\"\n\t\t\t\t\t\tclass=\"flex flex-row items-center justify-center ml-auto md:mr-20 lg:opacity-0 group-hover:opacity-100 transition-opacity\">\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\tv-if=\"!row.has_child\"\n\t\t\t\t\t\t\t:href=\"`/setting/bulk-price-editor/${route.params.category}`\"\n\t\t\t\t\t\t\t:disabled=\"row.is_loading\"\n\t\t\t\t\t\t\tclass=\"btn btn-teal btn-dense btn-filled\"\n\t\t\t\t\t\t\t@click.prevent=\"showPricing(row, 1)\">\n\t\t\t\t\t\t\t<!-- :href=\"`/setting/bulk-price-editor/${route.params.category}/${route.params.brand === 'all' ? row.manufacturer : paramsBrand}?ref=true`\" -->\n\t\t\t\t\t\t\t<div class=\"flex items-center justify-center\">\n\t\t\t\t\t\t\t\t<i class=\"material-icons text-lg\">attach_money</i>\n\t\t\t\t\t\t\t\tPricing Editor\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\t\tv-else\n\t\t\t\t\t\t\t:href=\"`/setting/bulk-price-editor/${route.params.category}`\"\n\t\t\t\t\t\t\t:disabled=\"row.is_loading\"\n\t\t\t\t\t\t\tclass=\"btn btn-teal btn-dense btn-filled\"\n\t\t\t\t\t\t\t@click.prevent=\"showPricing(row, 2)\">\n\t\t\t\t\t\t\t<!-- :href=\"`/setting/bulk-price-editor/${route.params.category}/${route.params.brand === 'all' ? row.manufacturer : paramsBrand}?ref=true&model=${row.name}`\" -->\n\t\t\t\t\t\t\t<div class=\"flex items-center justify-center\">\n\t\t\t\t\t\t\t\t<i class=\"material-icons text-lg\">attach_money</i>\n\t\t\t\t\t\t\t\tPricing Editor\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</TableColumn>\n\t</Table>\n\t<div\n\t\tv-else\n\t\tclass=\"w-full bg-teal-01 bg-opacity-10\"\n\t\tstyle=\"height: 540px;\"\n\t/>\n\t\n\t<Modal size=\"sm\" v-model=\"modal\">\n\t\t<template #header>\n\t\t\tImportant Information\n\t\t</template>\n\t\t<template #default>\n\t\t\t<div v-if=\"selectedRow\" class=\"flex flex-col items-center\">\n\t\t\t\t<div class=\"flex justify-center items-center p-8 rounded-full bg-teal-lighten\">\n\t\t\t\t\t<img src=\"/icon/settings-icon/catalog-not-found.svg\" alt=\"\">\n\t\t\t\t</div>\n\t\t\t\t<p class=\"text-center mt-8\">Your item has been enabled in your catalog, but you still need to complete the following steps</p>\n\t\t\t\t<p class=\"text-center my-6\">Here are your next steps:</p>\n\t\t\t\t<div class=\"flex flex-col gap-6\">\n\t\t\t\t\t<div class=\"flex items-center gap-4\">\n\t\t\t\t\t\t<div class=\"flex items-center justify-center bg-teal-02 rounded-full text-white font-semibold w-8 h-8\">1</div>\n\t\t\t\t\t\t<p class=\"text-teal-03\">Set item conditions as needed within the \n\t\t\t\t\t\t\t<a class=\"underline text-black\" :href=\"`/setting/product-conditions/create?model=${findParentName(selectedRow)}&ref=true`\">Conditions Settings</a>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"flex items-center gap-4\">\n\t\t\t\t\t\t<div class=\"flex items-center justify-center bg-teal-02 rounded-full text-white font-semibold w-8 h-8\">2</div>\n\t\t\t\t\t\t<p\n\t\t\t\t\t\tclass=\"text-teal-03\">\n\t\t\t\t\t\tSet item prices as needed within the \n\t\t\t\t\t\t<a\n\t\t\t\t\t\tv-if=\"!selectedRow?.is_child\"\n\t\t\t\t\t\tclass=\"underline text-black\" \n\t\t\t\t\t\t:href=\"`/setting/bulk-price-editor/${route.params.category}`\"\n\t\t\t\t\t\t@click.prevent=\"showPricing(selectedRow, 1)\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t<!-- :href=\"`/setting/bulk-price-editor/${route.params.category}/${route.params.brand === 'all' ? selectedRow?.manufacturer : paramsBrand}?ref=true`\" -->\n\t\t\t\t\t\tPrice Editor Settings\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t<a\n\t\t\t\t\t\tv-else\n\t\t\t\t\t\tclass=\"underline text-black\"\n\t\t\t\t\t\t:href=\"`/setting/bulk-price-editor/${route.params.category}`\"\n\t\t\t\t\t\t@click.prevent=\"showPricing(selectedRow, 2)\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t<!-- :href=\"`/setting/bulk-price-editor/${route.params.category}/${route.params.brand === 'all' ? selectedRow?.manufacturer : paramsBrand}?ref=true&model=${selectedRow?.name}`\" -->\n\t\t\t\t\t\tPrice Editor Settings\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</p>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</template>\n\t\t<template #footer>\n\t\t<div class=\"flex justify-between items-center\">\n\t\t\t<div>\n\t\t\t\t<Checkbox\n\t\t\t\tv-model=\"dontShow\"\n\t\t\t\t:value=\"1\"\n\t\t\t\t:value-off=\"0\"\n\t\t\t\tclass=\"font-normal\"\n\t\t\t\t>\n\t\t\t\t\tDon't show this again for this session\n\t\t\t\t</Checkbox>\n\t\t\t</div>\n\t\t\t\t<Button color=\"teal\" view=\"smooth\" @click=\"closeModal\"><i class=\"material-icons mr-2\">close</i>Close Notification</Button>\n\t\t</div>\n\t\t</template>\n\t</Modal>\n</template>\n\n<script>\nimport store from 'store'\nimport { computed, defineComponent, reactive, ref, watch, onMounted, markRaw, nextTick } from 'vue'\nimport { RouterLink, useRoute, useRouter } from 'vue-router'\nimport { useUser } from 'composable/user'\n\nimport { useBuybackDevice } from 'composable/setting'\nimport Checkbox from 'bbUi/components/checkbox/checkbox.vue'\nimport Loading from 'bbUi/components/loading/loading.vue'\nimport Modal from 'bbUi/components/modal/modal.vue'\nimport Button from 'bbUi/components/button/button.vue'\n\nimport { titleCase } from 'utils/string'\n\nexport default defineComponent({\n\tname: 'DeviceTable',\n\tcomponents: {\n\t\tCheckbox,\n\t\tLoading,\n\t\tModal,\n\t\tButton\n\t},\n\tprops: {\n\t\tdata: Array,\n\t\tcategory: {\n\t\t\ttype: Object,\n\t\t\tdefault: {\n\t\t\t\tname: null,\n\t\t\t\tis_enable: 0,\n\t\t\t\tis_mac: 0\n\t\t\t}\n\t\t},\n\t\tdisabled: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false\n\t\t}\n\t},\n\temits: ['update-buyback', 'update-all', 'update-buyback-category'],\n\tsetup(props, { emit }) {\n\t\tconst showTable = ref(true)\n\t\tconst route = useRoute()\n\t\tconst router = useRouter()\n\t\tconst { me } = useUser()\n\t\tconst { actionUpdateBuybackType, actionGetChildren } = useBuybackDevice()\n\t\tconst dontShow = ref(0)\n\t\tconst loading = reactive({\n\t\t\tbuybackType: {\n\t\t\t\tupdate: new Map()\n\t\t\t}\n\t\t})\n\t\tconst category = reactive({\n\t\t\tname: props.category.name,\n\t\t\tis_enable: props.category.is_enable,\n\t\t\tis_mac: props.category.is_mac\n\t\t})\n\t\tconst loadingCategory = ref(false)\n\t\tconst tableKey = ref(0)\n\n\t\tconst data = ref(props.data.map(item => ({\n\t\t\t\t...item,\n\t\t\t\tchild: item.child.map(itemchild => ({\n\t\t\t\t\t...itemchild,\n\t\t\t\t\tis_child: true,\n\t\t\t\t\tmanufacturer: item.manufacturer\n\t\t\t\t}))\n\t\t\t})\n\t\t) || [])\n\n\t\tconst location = computed(() => {\n\t\t\tif (store.state.dashboard.locationFiltered) {\n\t\t\t\tconst hasMailinLocation = store.state.dashboard.locationFiltered?.mailin_location_id > -1\n\t\t\t\tconst hasInstoreLocation = hasMailinLocation ? store.state.dashboard.locationFiltered?.total > 1 : store.state.dashboard.locationFiltered?.total > 0\n\t\t\t\tconst hasBothLocation = hasMailinLocation && hasInstoreLocation\n\t\t\t\t\n\t\t\t\tif(hasBothLocation) return 'both'\n\t\t\t\tif(hasMailinLocation) return 'mail-in'\n\t\t\t\tif(hasInstoreLocation) return 'in-store'\n\t\t\t}\n\n\t\t\treturn undefined\n\t\t})\n\n\t\tconst modal = ref(false)\n\t\tconst selectedRow = ref(null)\n\t\tconst modalIdentifier = 'buyback-setup-warning'\n\n\t\tconst flattenData = computed(() => flatten(data.value))\n\t\tconst paramsBrand = computed(() => {\n\t\t\tconst brands = route.params.brand.split('')\n\t\t\tbrands[0] = brands[0].toUpperCase()\n\t\t\treturn brands.join('')\n\t\t})\n\n\t\tconst toggleEnable = (row) => {\n\t\t\tif (row.is_enable === 1) {\n\t\t\t\tif (row.has_condition === 1 && row.has_price === 1) {\n\t\t\t\t\tupdateBuybackDevice(row)\n\t\t\t\t} else {\n\t\t\t\t\tupdateBuybackDevice(row)\t\n\t\t\t\t\tselectedRow.value = row\n\t\t\t\t\tif (shouldShowModal()) {\n\t\t\t\t\t\tmodal.value = true\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tupdateBuybackDevice(row)\n\t\t\t}\n\t\t}\n\n\t\tconst findParentName = (row) => {\n\t\t\tif (row?.parent_id) {\n\t\t\t\tconst parent = data.value.find(x => x.id === row?.parent_id);\n\t\t\t\treturn parent ? parent?.name : row?.name;\n\t\t\t}\n\t\t\treturn row?.name;\n\t\t}\n\n\t\tconst shouldShowModal = () => {\n\t\t\treturn sessionStorage.getItem(modalIdentifier) !== '1'\n\t\t}\n\n\t\tconst closeModal = () => {\n\t\t\tif (dontShow.value === 1) {\n\t\t\t\tsessionStorage.setItem(modalIdentifier, '1')\n\t\t\t}\n\t\t\tmodal.value = false\n\t\t}\n\n\t\tconst updateBuybackDevice = (device) => {\n\t\t\tdevice.is_loading = true\n\n\t\t\tdevice.instore = device.is_enable\n\t\t\tdevice.mailin = device.is_enable\n\t\t\tconst parent = device.parent?.total_active ?? device.total_active\n\n\t\t\temit(\n\t\t\t\t'update-buyback',\n\t\t\t\t{\n\t\t\t\t\t...device,\n\t\t\t\t\t...(!category.is_mac && { total_active: parent.total_active }),\n\t\t\t\t\tis_mac: category.is_mac\n\t\t\t\t},\n\t\t\t\t(res) => {\n\t\t\t\t\tif (res.status_code != 200) {\n\t\t\t\t\t\tdevice.is_enable = device.is_enable == 1 ? 0 : 1\n\t\t\t\t\t\tdevice.instore = device.is_enable\n\t\t\t\t\t\tdevice.mailin = device.is_enable\n\t\t\t\t\t\tdevice.is_loading = false\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\n\t\t\t\t\tconst isParent = device.child.length > 0\n\t\t\t\t\tif (isParent) {\n\t\t\t\t\t\tupdateBuybackTypeChildRow(device.child, 'all', device.is_enable)\n\t\t\t\t\t}\n\n\t\t\t\t\tconst flattenItem = flattenData.value.get(device.id)\n\t\t\t\t\tif (flattenItem) {\n\t\t\t\t\t\tif (flattenItem.parents)\n\t\t\t\t\t\t\tupdateBuybackStatusParentRow(flattenItem.parents, res)\n\t\t\t\t\t}\n\n\t\t\t\t\tif (device.total_active) {\n\t\t\t\t\t\tdevice.total_active = res.data.total_active_category\n\t\t\t\t\t}\n\n\t\t\t\t\tdevice.is_loading = false\n\t\t\t\t}\n\t\t\t)\n\t\t}\n\t\tconst updateBuybackDeviceByCategory = async () => {\n\t\t\tloadingCategory.value = true\n\t\t\temit('update-buyback-category', category, async (err) => {\n\t\t\t\tif(err) category.is_enable = category.is_enable == 1 ? 0 : 1\n\t\t\t\tawait nextTick(() => {\n\t\t\t\t\tdata.value = []\n\t\t\t\t\tloadingCategory.value = false\n\t\t\t\t})\n\t\t\t})\n\t\t}\n\t\tconst updateBuybackTypeChildRow = (childrens, type='all', value) => {\n\t\t\tif (!childrens) return\n\t\t\tfor (let child of childrens) {\n\t\t\t\tif(type === 'all'){\n\t\t\t\t\tchild.is_enable = value\n\t\t\t\t\tchild.instore = value\n\t\t\t\t\tchild.mailin = value\n\t\t\t\t}else {\n\t\t\t\t\tchild[type] = value\n\t\t\t\t}\n\n\t\t\t\tconst isDisabledBothInstoreMailin =\n\t\t\t\t\tchild.instore === 0 && child.mailin === 0\n\t\t\t\tif (isDisabledBothInstoreMailin) child.is_enable = 0\n\t\t\t\telse child.is_enable = 1\n\n\t\t\t\tconst hasChild = child.child.length > 0\n\t\t\t\tif (hasChild) updateBuybackTypeChildRow(child.child, type, value)\n\t\t\t}\n\t\t}\n\t\tconst updateBuybackTypeParentRow = (parents, type) => {\n\t\t\tfor (let parent of parents) {\n\t\t\t\tconst hasChild = parent.child.length > 0\n\t\t\t\tif (hasChild) {\n\t\t\t\t\t// Update In-Store and Mail-In checked status on parents child\n\t\t\t\t\tconst { buybackType, enableStatus } = parent.child.reduce(\n\t\t\t\t\t\t(curr, next) => {\n\t\t\t\t\t\t\tif (next[type] === 0) curr.buybackType.isCheckAll = false\n\t\t\t\t\t\t\tif (next[type] === 1) curr.buybackType.isUncheckAll = false\t\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t(!curr.buybackType.isCheckAll &&\n\t\t\t\t\t\t\t\t\t!curr.buybackType.isUncheckAll) ||\n\t\t\t\t\t\t\t\tnext[type] === 2\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\tcurr.buybackType.isIndeterminate = true\n\t\t\t\t\t\t\tif (next.is_enable === 0) curr.enableStatus.isEnableAll = false\n\t\t\t\t\t\t\tif (next.is_enable === 1) curr.enableStatus.isDisableAll = false\n\t\t\t\t\t\t\treturn curr\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tbuybackType: {\n\t\t\t\t\t\t\t\tisCheckAll: true,\n\t\t\t\t\t\t\t\tisUncheckAll: true,\n\t\t\t\t\t\t\t\tisIndeterminate: false\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tenableStatus: { isEnableAll: true, isDisableAll: true }\n\t\t\t\t\t\t}\n\t\t\t\t\t)\n\t\t\t\t\tif (buybackType.isCheckAll) parent[type] = 1\n\t\t\t\t\tif (buybackType.isUncheckAll) parent[type] = 0\n\t\t\t\t\tif (buybackType.isIndeterminate) parent[type] = 2\n\t\t\t\t\tif (enableStatus.isEnableAll) parent.is_enable = 1\n\t\t\t\t\tif (enableStatus.isDisableAll) parent.is_enable = 0\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tconst updateBuybackStatusParentRow = (parents) => {\n\t\t\tfor (let parent of parents) {\n\t\t\t\tconst hasChild = parent.child.length > 0\n\t\t\t\tif (hasChild) {\n\t\t\t\t\t// Update In-Store and Mail-In enable status on parents child\n\t\t\t\t\tconst { status } = parent.child.reduce(\n\t\t\t\t\t\t(curr, next) => {\n\t\t\t\t\t\t\tif (next.is_enable === 0) curr.status.enableAll = false\n\t\t\t\t\t\t\tif (next.is_enable === 1) curr.status.disableAll = false\n\t\t\t\t\t\t\treturn curr\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstatus: {\n\t\t\t\t\t\t\t\tenableAll: true,\n\t\t\t\t\t\t\t\tdisableAll: true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t)\n\t\t\t\t\tif (status.enableAll || !status.disableAll) {\n\t\t\t\t\t\tparent.is_enable = 1\n\t\t\t\t\t\tparent.instore = 1\n\t\t\t\t\t\tparent.mailin = 1\n\t\t\t\t\t}\n\t\t\t\t\tif (status.disableAll) {\n\t\t\t\t\t\tparent.is_enable = 0\n\t\t\t\t\t\tparent.instore = 0\n\t\t\t\t\t\tparent.mailin = 0\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tconst updateBuybackType = async (data, value, type) => {\n\t\t\tconst validTypes = ['instore', 'mailin']\n\t\t\tconst isInvalidType = !validTypes.includes(type)\n\t\t\tif (isInvalidType) return\n\n\t\t\tconst { id } = data\n\t\t\tconst payload = {\n\t\t\t\ttype: null,\n\t\t\t\tcategory_id: null,\n\t\t\t\tcategory: titleCase(route.params.category),\n\t\t\t\tvalue: null\n\t\t\t}\n\n\t\t\tif (type === 'instore') {\n\t\t\t\tpayload.type = 'instore'\n\t\t\t\tpayload.category_id = id\n\t\t\t\tpayload.value = value\n\t\t\t} else {\n\t\t\t\tpayload.type = 'mailin'\n\t\t\t\tpayload.category_id = id\n\t\t\t\tpayload.value = value\n\t\t\t}\n\n\t\t\tconst currentState = {...data}\n\n\t\t\tdata[type] = data[type] == 2 && value == 1 ? 1 : value\n\t\t\tconst isDisabledBothInstoreMailin =\n\t\t\t\tdata.instore === 0 && data.mailin === 0\n\t\t\tif (isDisabledBothInstoreMailin) data.is_enable = 0\n\n\t\t\tconst isParent = data.child.length > 0\n\t\t\tif (isParent) {\n\t\t\t\tupdateBuybackTypeChildRow(data.child, type, value)\n\t\t\t}\n\n\t\t\tconst flattenItem = flattenData.value.get(id)\n\t\t\tif (flattenItem) {\n\t\t\t\tif (flattenItem.parents)\n\t\t\t\t\tupdateBuybackTypeParentRow(flattenItem.parents, type)\n\t\t\t}\n\n\t\t\ttry{\n\t\t\t\tloading.buybackType.update.set(id, true)\n\t\t\t\tawait actionUpdateBuybackType(payload)\n\t\t\t}catch(e){\n\t\t\t\tObject.assign(data, currentState)\n\t\t\t\tconst isParent = data.child.length > 0\n\t\t\t\tif (isParent) {\n\t\t\t\t\tupdateBuybackTypeChildRow(data.child, type, value == 1 ? 0 : 1)\n\t\t\t\t}\n\n\t\t\t\tconst flattenItem = flattenData.value.get(id)\n\t\t\t\tif (flattenItem) {\n\t\t\t\t\tif (flattenItem.parents)\n\t\t\t\t\t\tupdateBuybackTypeParentRow(flattenItem.parents, type)\n\t\t\t\t}\n\t\t\t}finally{\n\t\t\t\tloading.buybackType.update.delete(id)\n\t\t\t}\n\t\t}\n\t\tconst showPricing = (row, type) => {\n\t\t\trouter.push({\n\t\t\t\tpath: `/setting/bulk-price-editor/${route.params.category}`,\n\t\t\t\t// path: `/setting/bulk-price-editor/${route.params.category}/${route.params.brand === 'all' ? row.manufacturer : route.params.brand}`,\n\t\t\t\t// query: {\n\t\t\t\t// \tref: true,\n\t\t\t\t// \t...(type === 2 && { model: row.name })\n\t\t\t\t// }\n\t\t\t})\n\t\t}\n\n\t\tconst flatten = (items = [], flattenItems = new Map(), parents = []) => {\n\t\t\tif (items?.length > 0) {\n\t\t\t\tfor (let item of items) {\n\t\t\t\t\tflattenItems.set(item.id, { ...item, parents: parents })\n\t\t\t\t\tconst hasChild = item?.child?.length > 0\n\t\t\t\t\tif (hasChild) flatten(item.child, flattenItems, [item, ...parents])\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn flattenItems\n\t\t}\n\t\tconst normalizeKeys = (item) => ({\n\t\t\t...item,\n\t\t\thas_condition: item.has_condition ?? item.have_condition ?? 0,\n\t\t\thas_price: item.has_price ?? item.have_price ?? 0,\n\t\t})\n\t\tfunction enrichChildRecursive(items, parent, manufacturer) {\n\t\t\treturn items.map(item => {\n\t\t\t\tconst normalized = normalizeKeys(item)\n\t\t\t\tconst hasChild = Array.isArray(normalized.child) && normalized.child.length > 0\n\n\t\t\t\treturn {\n\t\t\t\t\t...normalized,\n\t\t\t\t\thas_child: hasChild ? 1 : 0,\n\t\t\t\t\tis_child: true,\n\t\t\t\t\tparent,\n\t\t\t\t\tmanufacturer: item?.manufacturer ?? manufacturer,\n\t\t\t\t\trawChild: hasChild ? markRaw(item.child) : [],\n\t\t\t\t\t_lazyFetched: false,\n\t\t\t\t\tchild: []\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\n\t\tconst onExpandChange = async (row, node, resolve = (data) => data) => {\n\t\t\trow.is_loading = true\n\n\t\t\t// dummy expand\n\t\t\tif (!row._lazyFetched && row.rawChild?.length) {\n\t\t\t\trow.child = enrichChildRecursive(row.rawChild, row, row.manufacturer)\n\t\t\t\trow._lazyFetched = true\n\t\t\t\trow.is_loading = false\n\t\t\t\tresolve(row.child)\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\tlet results = []\n\t\t\tawait actionGetChildren({ id: row.id, data: { categories: route.params?.category }}, (res) => {\n\t\t\t\tresults = enrichChildRecursive(JSON.parse(JSON.stringify(res ?? [])), row, row.manufacturer)\n\t\t\t})\n\t\t\tresolve(results)\n\t\t\tconst index = data.value.findIndex(i => i.id === row.id)\n\t\t\tif (index !== -1) {\n\t\t\t\tconst currentItem = data.value[index]\n\t\t\t\tdata.value[index] = {\n\t\t\t\t\t...currentItem,\n\t\t\t\t\tis_loading: false,\n\t\t\t\t\tchild: results\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\twatch(\n\t\t\t() => props.data,\n\t\t\t() => {\n\t\t\t\tdata.value = props.data.map(item => ({\n\t\t\t\t\t...item,\n\t\t\t\t\tchild: item.child.map(itemchild => ({\n\t\t\t\t\t\t...itemchild,\n\t\t\t\t\t\tis_child: true,\n\t\t\t\t\t\tmanufacturer: item.manufacturer\n\t\t\t\t\t}))\n\t\t\t\t}))\n\t\t\t},\n\t\t\t{\n\t\t\t\tdeep: true\n\t\t\t}\n\t\t)\n\n\t\twatch(() => ({\n\t\t\tcategory: props.category\n\t\t}), (val) => {\n\t\t\tObject.assign(category, val.category)\n\t\t})\n\t\twatch(() =>( { name: category.name, param: paramsBrand.value}), () => {\n\t\t\tshowTable.value = false\n\t\t\tsetTimeout(() => {\n\t\t\t\tshowTable.value = true\n\t\t\t}, 300)\n\t\t})\n\n\t\treturn {\n\t\t\tcategory,\n\t\t\tdata,\n\t\t\tflattenData,\n\t\t\troute,\n\t\t\tme,\n\t\t\tloading,\n\t\t\tloadingCategory,\n\t\t\tupdateBuybackDevice,\n\t\t\tupdateBuybackDeviceByCategory,\n\t\t\tupdateBuybackType,\n\t\t\tparamsBrand,\n\t\t\tshowPricing,\n\t\t\tmodal,\n\t\t\tdontShow,\n\t\t\tselectedRow,\n\t\t\tcloseModal,\n\t\t\tshouldShowModal,\n\t\t\tfindParentName,\n\t\t\ttoggleEnable,\n\t\t\tonExpandChange,\n\t\t\tshowTable,\n\t\t\tlocation\n\t\t}\n\t}\n})\n</script>\n"],"names":["_sfc_main","defineComponent","name","components","Checkbox","Loading","Modal","Button","props","data","Array","category","type","Object","default","is_enable","is_mac","disabled","Boolean","emits","[object Object]","emit","showTable","ref","route","useRoute","router","useRouter","me","useUser","actionUpdateBuybackType","actionGetChildren","useBuybackDevice","dontShow","loading","reactive","buybackType","update","Map","loadingCategory","map","item","__spreadProps","child","itemchild","is_child","manufacturer","location","computed","store","state","dashboard","locationFiltered","hasMailinLocation","_a","mailin_location_id","hasInstoreLocation","_b","total","_c","modal","selectedRow","modalIdentifier","flattenData","flatten","value","paramsBrand","brands","params","brand","split","toUpperCase","join","shouldShowModal","sessionStorage","getItem","updateBuybackDevice","device","is_loading","instore","mailin","parent","total_active","res","status_code","length","updateBuybackTypeChildRow","flattenItem","get","id","parents","updateBuybackStatusParentRow","total_active_category","childrens","isDisabledBothInstoreMailin","updateBuybackTypeParentRow","enableStatus","reduce","curr","next","isCheckAll","isUncheckAll","isIndeterminate","isEnableAll","isDisableAll","status","enableAll","disableAll","items","flattenItems","set","__spreadValues","enrichChildRecursive","normalized","has_condition","have_condition","has_price","_d","have_price","normalizeKeys","hasChild","isArray","has_child","rawChild","markRaw","_lazyFetched","watch","deep","val","assign","param","setTimeout","updateBuybackDeviceByCategory","async","err","nextTick","updateBuybackType","data2","includes","payload","category_id","titleCase","currentState","e","flattenItem2","delete","showPricing","row","push","path","closeModal","setItem","findParentName","parent_id","find","x","toggleEnable","onExpandChange","node","resolve","results","categories","JSON","parse","stringify","index","findIndex","i","currentItem","_hoisted_1","class","_hoisted_4","key","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_16","_hoisted_17","_hoisted_19","_hoisted_20","_hoisted_23","_openBlock","_createElementBlock","_Fragment","_ctx","row-class-name","load","tree-props","row-key","_withCtx","_createVNode","_component_TableColumn","width","modelValue","onUpdate:modelValue","_cache","$event","value-off","scope","_createElementVNode","content","_createCommentVNode","prop","label","_component_Checkbox","color","indeterminate","_createTextVNode","_component_RouterLink","onInput","_hoisted_10","_hoisted_11","href","_hoisted_14","_component_Modal","_hoisted_15","src","_imports_0","_withModifiers","_hoisted_22","footer","_hoisted_24","_component_Button","view"],"mappings":"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"}