{"version":3,"file":"SelectCurrency.795fc5bd.js","sources":["../../src/components/SelectCurrency.vue"],"sourcesContent":["<template>\n  <div>\n    <label v-if=\"!!label\" for=\"select-currency\" class=\"mb-1\">{{\n      label || 'Currency'\n    }}</label>\n    <label v-if=\"$slots.label\">\n      <slot name=\"label\"></slot>\n    </label>\n    <div\n      v-outside=\"handleOutsideClick\"\n      class=\"select-currency wrapper\"\n    >\n      <div\n        @focus=\"handleToggleCollapse\"\n        tabindex=\"0\"\n        id=\"select-currency\"\n        class=\"select-currency__value flex w-full justify-between items-center bg-white rounded-lg border border-grey-01 cursor-pointer select-none focus:border-teal-04\"\n      >\n        <div class=\"flex items-center\">\n          <template v-if=\"selectedCurrency === null\">\n            <p>{{ placeholder }}</p>\n          </template>\n          <template v-else>\n            <slot name=\"selected\" :data=\"selectedCurrency\">\n              <div class=\"mr-4\">\n                <img\n                  :src=\"`/flag/${selectedCurrency[\n                    countryCodeKey || 'country_code'\n                  ]?.toLowerCase()}.svg`\"\n                  width=\"16\"\n                />\n              </div>\n              <div>{{ selectedCurrency[currencyCodeKey || 'currency_code'] }}</div>\n            </slot>\n          </template>\n        </div>\n        <div class=\"arrow\">\n          <i class=\"material-icons\">arrow_drop_down</i>\n        </div>\n      </div>\n      <div\n        v-show=\"isCollapse\"\n        class=\"select-currency__sheet p-4 bg-white border border-grey-01 absolute w-full mt-2 rounded z-50\"\n      >\n        <Input\n          v-model=\"searchQuery\"\n          class=\"mb-4\"\n          block\n          placeholder=\"Search currency\"\n          :disabled=\"disabled\"\n        />\n        <div class=\"max-h-96 overflow-y-auto\">\n          <div\n            v-for=\"(currency, currencyIndex) of currencies\"\n            :key=\"currencyIndex\"\n            @click=\"handleSelectCurrency(currency)\"\n            class=\"flex items-center p-3 hover:bg-darken cursor-pointer\"\n          >\n            <slot name=\"option\" :data=\"{\n              currency,\n              selected: (!!currency && !!selectedCurrency) ? currency[currencyCodeKey || 'currency_code'] === selectedCurrency[currencyCodeKey || 'currency_code'] : false \n            }\">\n              <div class=\"mr-4 flex items-center\">\n                <i\n                  v-if=\"\n                    !!currency && !!selectedCurrency ? currency[currencyCodeKey || 'currency_code'] ===\n                    selectedCurrency[currencyCodeKey || 'currency_code'] : false\n                  \"\n                  class=\"material-icons mr-4 text-teal-04\"\n                  >check_circle</i\n                >\n                <img\n                  :src=\"`/flag/${currency[\n                    countryCodeKey || 'currency_code'\n                  ].toLowerCase()}.svg`\"\n                  width=\"18\"\n                />\n              </div>\n              <div>{{ currency[currencyCodeKey || 'currency_code'] }}</div>\n            </slot>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { computed, defineComponent, reactive, ref, watch } from 'vue'\nimport Input from 'bbUi/components/input/input.vue'\nexport default defineComponent({\n  components: {\n    Input\n  },\n  props: {\n    selectedCurrency: {\n      type: String,\n      default: ''\n    },\n    countryCodeKey: {\n      type: String,\n      default: 'country_code'\n    },\n    currencyCodeKey: {\n      type: String,\n      default: 'currency_code'\n    },\n    currencyNameKey: {\n      type: String,\n      default: 'name'\n    },\n    currencies: {\n      type: Array,\n      default: () => ([]),\n      required: true\n    },\n    disabled: {\n      type: Boolean,\n      default: false\n    },\n    label: {\n      type: String,\n      default: ''\n    },\n    selected: {\n      type: String,\n      default: ''\n    },\n    placeholder: {\n      type: String,\n      default: 'Please select a currency'\n    }\n  },\n  emits: ['change'],\n  setup(props, {emit}){\n    const searchQuery = ref('')\n    const selectedCurrency = ref(null)\n    const currencies = computed(() => {\n      let currencies = props.currencies\n      const isAvailableQuery = !!searchQuery.value\n      if(isAvailableQuery){\n        // filter for search query\n        currencies = currencies.filter(currency => {\n          return currency[props.countryCodeKey]?.toLowerCase()?.indexOf(searchQuery.value?.toLowerCase()) > -1  ||\n          currency[props.currencyCodeKey]?.toLowerCase()?.indexOf(searchQuery.value?.toLowerCase()) > -1  ||\n          currency[props.currencyNameKey]?.toLowerCase()?.indexOf(searchQuery.value?.toLowerCase()) > -1\n        })\n      }\n      return currencies\n    })\n    const isCollapse = ref(false)\n    const handleOutsideClick = () => isCollapse.value = false\n    const handleToggleCollapse = () => isCollapse.value = !props.disabled ? !isCollapse.value : false\n    const handleSelectCurrency = (currency) => {\n      selectedCurrency.value = currency\n      emit('change', selectedCurrency.value)\n      isCollapse.value = false\n    }\n    watch(() => props.selected, (newSelectedCurrency) => {\n      if (!newSelectedCurrency) {\n        if (selectedCurrency.value !== null) {  // ← Tambahkan kondisi ini\n          selectedCurrency.value = null\n          emit('change', null)\n        }\n        return\n      }\n\n      const matchedCurrency = props.currencies.filter((currency) => {\n        return currency[props.currencyCodeKey]?.toLowerCase() === newSelectedCurrency?.toLowerCase()\n      })\n\n      if (matchedCurrency.length === 1) {\n        if (selectedCurrency.value !== matchedCurrency[0]) {  // ← Tambahkan kondisi ini\n          selectedCurrency.value = matchedCurrency[0]\n          emit('change', selectedCurrency.value)\n        }\n      }\n    }, {\n      immediate: true\n    })\n    return {\n      searchQuery,\n      currencies,\n      selectedCurrency,\n      isCollapse,\n      handleOutsideClick,\n      handleToggleCollapse,\n      handleSelectCurrency\n    }\n  }\n})\n</script>\n\n<style lang=\"scss\" scoped>\n.select-currency {\n  @apply relative;\n  .select-currency__value {\n    @apply transition duration-300;\n    padding: 0.5rem 1rem;\n  }\n  \n}\n</style>"],"names":["_sfc_main","defineComponent","components","Input","props","selectedCurrency","type","String","default","countryCodeKey","currencyCodeKey","currencyNameKey","currencies","Array","required","disabled","Boolean","label","selected","placeholder","emits","[object Object]","emit","searchQuery","ref","computed","currencies2","value","filter","currency","_c","_a","toLowerCase","indexOf","_b","_f","_d","_e","_i","_g","_h","isCollapse","watch","newSelectedCurrency","matchedCurrency","length","immediate","handleOutsideClick","handleToggleCollapse","handleSelectCurrency","key","for","_hoisted_2","_hoisted_3","class","_hoisted_5","_hoisted_7","_hoisted_8","_hoisted_10","_openBlock","_createElementBlock","_createCommentVNode","_createElementVNode","onFocus","_cache","args","_ctx","tabindex","id","_hoisted_4","_toDisplayString","_hoisted_6","src","onUpdate:modelValue","$event","block","_hoisted_9","_Fragment","_renderList","currencyIndex","onClick","$slots","data"],"mappings":"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"}