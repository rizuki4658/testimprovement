import{k as a,O as e,f as t,g as s,aV as l,at as o,m as n,$ as i,o as d,t as r,D as m,w as c,I as u,B as p,A as f,a1 as v,a2 as y,K as h,n as _,U as g,S as b}from"./vendor.9695fe57.js";import{u as x}from"./index.f40e4a9e.js";import{r as w,e as k}from"./index.54844a74.js";import{c as V}from"./index.6b6f6369.js";import{e as $}from"./easypost.54153e62.js";import{c as A}from"./setting.694f0663.js";import{_ as C,f as j,d as S,b as q}from"./index.10c203ea.js";import{I as P}from"./InputPhone.ff167384.js";import"./SelectCountry.e96a458a.js";const z=a({name:"EasypostActivation",components:{Input:j,Modal:S,Button:q,InputPhone:P},async setup(){const{data:a,loading:n,actionShow:i}=A(),{data:d,address:r,loading:m,fetch:c,create:u}=$(),p=e(),f=t(),v={company_email:{required:w,email:k},address_text:{required:V.withMessage("Address is required",w)},street:{required:w},state:{required:w},city:{required:w},zip_code:{required:w},phone:{required:w,invalidNumber:V.withMessage("Phone number is invalid",(()=>{var a;return null==(a=f.value)?void 0:a.isValid}))}},y=["address_text","street","state","city","zip_code"],h=x(v,d,{$lazy:!0}),_=s((()=>{const a=[];return y.map((e=>{h.value[e].$invalid&&a.push(h.value[e].$invalid)})),!!a.length})),g=(a,e={})=>{d.company_email=a.email||a.company_email||e.company_email||null,d.address_text=a.address_text||e.address_text||null,d.street=a.street||e.street||e.address||null,d.state=a.state||e.state||null,d.city=a.city||e.city||null,d.zip_code=a.zip||e.zip||null,d.phone=a.phone||e.phone||null},b=()=>{p.go(-1)};return l((async()=>{await i({is_store:1}),await c((e=>g(e,a)))})),o((()=>{h.value.$reset(),g({})})),{data:d,loading:m,address:r,refPhone:f,validation:h,dataCompany:a,errorAddress:y,loadingCompany:n,viewValidAddress:_,handleClose:b,handleSubmit:async()=>{if(await h.value.$validate()){["company_email","phone"].concat(y).forEach((a=>{d[a]})),await u(d,(()=>{b()}))}}}}}),I={class:"space-y-8 mt-8"};var M=C(z,[["render",function(a,e,t,s,l,o){const x=n("Input"),w=n("InputPhone"),k=n("Button"),V=n("Modal"),$=i("gmap"),A=i("loading");return d(),r("form",{autocomplete:"off",onSubmit:e[3]||(e[3]=b(((...e)=>a.handleSubmit&&a.handleSubmit(...e)),["prevent"]))},[m(V,{size:"sm",modelValue:!0,class:"modal--overflow-none","without-transition":"",onClickClose:a.handleClose},{header:c((()=>e[4]||(e[4]=[u(" Activate USPS Return Account ")]))),default:c((()=>[e[6]||(e[6]=p("div",{class:"flex items-center gap-x-4 text-orange-03"},[p("span",{class:"material-icons text-4xl"},"warning"),p("p",null,"Must match easypost account information")],-1)),f((d(),r("div",I,[p("div",null,[m(x,{modelValue:a.data.company_email,"onUpdate:modelValue":e[0]||(e[0]=e=>a.data.company_email=e),view:a.validation.company_email.$invalid?"danger":"default",placeholder:"Company Email",label:"Company Email",autocomplete:"none",class:"w-full"},null,8,["modelValue","view"]),(d(!0),r(v,null,y(a.validation.company_email.$errors,((a,e)=>(d(),r("small",{key:e,class:"text-red-base block mt-1"},h(a.$message)+". ",1)))),128))]),p("div",null,[f((d(),_(x,{modelValue:a.data.address_text,"onUpdate:modelValue":e[1]||(e[1]=e=>a.data.address_text=e),view:a.viewValidAddress?"danger":"default",placeholder:"Mail-in Address",label:"Mail-in Address",autocomplete:"none",class:"w-full","icon-block":"",icon:""},{icon:c((()=>e[5]||(e[5]=[p("span",{class:"material-icons"},"location_on",-1)]))),_:1},8,["modelValue","view"])),[[$,a.address]]),(d(!0),r(v,null,y(a.errorAddress,(e=>(d(),r("span",{key:e,class:"block"},[a.validation[e]?(d(!0),r(v,{key:0},y(a.validation[e].$errors,((a,e)=>(d(),r("small",{key:e,class:"text-red-base block mt-1"},h(a.$message)+". ",1)))),128)):g("",!0)])))),128))]),p("div",null,[m(w,{ref:"refPhone",modelValue:a.data.phone,"onUpdate:modelValue":e[2]||(e[2]=e=>a.data.phone=e),"country-autofill-setting":"",placement:"bottom","static-position":"",label:"Phone",block:""},null,8,["modelValue"]),(d(!0),r(v,null,y(a.validation.phone.$errors,((a,e)=>(d(),r("small",{key:e,class:"text-red-base block mt-1"},h(a.$message)+". ",1)))),128))])])),[[A,a.loading]])])),footer:c((()=>[f((d(),_(k,{color:"teal",type:"submit"},{default:c((()=>e[7]||(e[7]=[u(" Activate ")]))),_:1})),[[A,a.loading]])])),_:1},8,["onClickClose"])],32)}]]);export{M as default};
