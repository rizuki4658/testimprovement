import{g as a,k as e,_ as t,m as s,$ as l,A as n,o as r,t as i,B as o,D as d,a1 as c,a2 as u,K as m,F as _,f as h,w as f,T as p,n as g,I as v,S as b,ar as S}from"./vendor.9695fe57.js";import{s as k,v as A,b as y,j as I,f as w,_ as T,B as x}from"./index.73ae30fa.js";import{a as C}from"./integration.549dcf93.js";import{u as $}from"./index.f40e4a9e.js";import{C as E}from"./card.0f43ecfb.js";import{B as j}from"./Breadcrumb.8a4b1e47.js";import"./breadcrumb.fd540912.js";const B=e({components:{Button:y,Alert:I,Input:w},emits:["ready"],async setup(e,{emit:s}){const{data:l}=C(),{credentials:n,loading:r,fetchCredentials:i,updateCredentials:o}={credentials:a((()=>k.state.integration.shareASale.credentials)),loading:a((()=>k.state.integration.shareASale.loading)),fetchCredentials:async a=>{try{k.commit("integration/shareASale/SET_LOADING_FETCH",!0),await k.dispatch("integration/shareASale/fetchCredential"),A(a)&&a(null)}catch(e){A(a)&&a(e)}finally{k.commit("integration/shareASale/SET_LOADING_FETCH",!1)}},updateCredentials:async(a={},e)=>{try{k.commit("integration/shareASale/SET_LOADING_UPDATE_CREDENTIAL",!0),await k.dispatch("integration/shareASale/updateCredential",a),A(e)&&e(null)}catch(t){A(e)&&e(t)}finally{k.commit("integration/shareASale/SET_LOADING_UPDATE_CREDENTIAL",!1)}}},d=$({shareasale_merchant_account_id:{},shareasale_token:{},shareasale_api_secret:{}},l,{$lazy:!0}),c=async()=>await i((a=>{a||Object.assign(l,{shareasale_merchant_account_id:n.value.shareasale_merchant_account_id,shareasale_token:n.value.shareasale_token,shareasale_api_secret:n.value.shareasale_api_secret})}));return await c(),{data:l,loadingIntegration:r,credentials:n,validation:d,update:async(a=(()=>{}))=>{if(!(d.value.$validate(),!d.value.$invalid))return;const e=Object.assign({},{shareasale_merchant_account_id:l.shareasale_merchant_account_id,shareasale_token:l.shareasale_token,shareasale_api_secret:l.shareasale_api_secret});await o(e,(async e=>{e||(t({type:"success",message:"Settings has been saved"}),await c(),A(a)&&a())}))}}}}),D={key:0,class:_(["label","label--verified"])},V={key:1,class:"flex items-center text-blue-04 px-3 py-2 rounded-lg bg-blue-lighten w-max"};const F=e({name:"IntegrationShareASale",components:{BaseLoading:x,ShareASaleForm:T(B,[["render",function(a,e,t,_,h,f){const p=s("Input"),g=l("loading");return n((r(),i("div",null,[1===a.credentials.is_connected?(r(),i("div",D,e[3]||(e[3]=[o("i",{class:"material-icons mr-3"},"check_circle",-1),o("span",null,"Verified",-1)]))):(r(),i("div",V,e[4]||(e[4]=[o("i",{class:"material-icons mr-4"},"info",-1),o("p",null," Make sure to complete your ShareASale onboarding process to unlock more features from this integration. ",-1)]))),d(p,{modelValue:a.data.shareasale_merchant_account_id,"onUpdate:modelValue":e[0]||(e[0]=e=>a.data.shareasale_merchant_account_id=e),view:a.validation.shareasale_merchant_account_id.$invalid?"danger":"default",class:"my-4",label:"Merchant ID",placeholder:"",block:""},null,8,["modelValue","view"]),(r(!0),i(c,null,u(a.validation.shareasale_merchant_account_id.$errors,((a,e)=>(r(),i("small",{class:"text-red-base block mb-4",key:e},m(a.$message)+". ",1)))),128)),d(p,{modelValue:a.data.shareasale_token,"onUpdate:modelValue":e[1]||(e[1]=e=>a.data.shareasale_token=e),view:a.validation.shareasale_token.$invalid?"danger":"default",class:"my-4",label:"Token",placeholder:"",block:""},null,8,["modelValue","view"]),(r(!0),i(c,null,u(a.validation.shareasale_token.$errors,((a,e)=>(r(),i("small",{class:"text-red-base block mb-4",key:e},m(a.$message)+". ",1)))),128)),d(p,{modelValue:a.data.shareasale_api_secret,"onUpdate:modelValue":e[2]||(e[2]=e=>a.data.shareasale_api_secret=e),view:a.validation.shareasale_api_secret.$invalid?"danger":"default",class:"my-4",label:"API Key",placeholder:"",block:""},null,8,["modelValue","view"]),(r(!0),i(c,null,u(a.validation.shareasale_api_secret.$errors,((a,e)=>(r(),i("small",{class:"text-red-base block mb-4",key:e},m(a.$message)+". ",1)))),128))])),[[g,a.loadingIntegration.fetch]])}],["__scopeId","data-v-6151c8c1"]]),Button:y,Card:E,Breadcrumb:j},setup(){const a=h(null);return{refForm:a,handleSave:()=>{a.value&&a.value.update()}}}}),L={class:"w-full flex items-center justify-center"};var N=T(F,[["render",function(a,e,t,l,n,c){const u=s("Breadcrumb"),m=s("ShareASaleForm"),_=s("Button"),h=s("BaseLoading"),k=s("Card");return r(),i("div",null,[d(u,{class:"mb-8 mt-4",pageTitle:"ShareASale Settings",backTo:{name:"integration"},items:[{text:"Add-ons",to:{name:"integration"}},{text:"ShareASale Settings"}]}),d(k,{"hide-footer":""},{default:f((()=>[d(p,{name:"slide-fade"},{default:f((()=>[(r(),g(S,null,{default:f((()=>{var t,s,l;return[o("form",{onSubmit:e[0]||(e[0]=b(((...e)=>a.handleSave&&a.handleSave(...e)),["prevent"]))},[d(m,{ref:"refForm"},null,512),d(_,{color:"teal",loading:null==(l=null==(s=null==(t=a.refForm)?void 0:t.loadingIntegration)?void 0:s.credential)?void 0:l.update},{default:f((()=>e[1]||(e[1]=[v("Save")]))),_:1},8,["loading"])],32)]})),fallback:f((()=>[o("div",L,[d(h)])])),_:1}))])),_:1})])),_:1})])}]]);export{N as default};
