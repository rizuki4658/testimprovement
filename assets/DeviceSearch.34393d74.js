import{k as e,f as t,g as o,z as a,m as l,o as r,t as c,D as n,w as s,B as u,a2 as d,S as i,I as p,U as m,a3 as g,Q as y,K as h}from"./vendor.f1efedad.js";import{f,S as v,_ as k}from"./index.e231b017.js";import{B as x}from"./BDropdown.58f98060.js";const _=e({components:{Input:f,Select:v,BDropdown:x},props:{loading:{type:Boolean,default:!1},query:{type:String},products:{type:Array,default:()=>[]},categories:{type:Array,default:()=>[]},showCategoryOnly:{type:Boolean,default:!1},error:{type:Boolean,default:!1},isDisabledCustomProduct:{type:Boolean,default:!1},label:{type:String,default:"Item Name"},placeholder:{type:String,default:"Search Item"},showAddCustomProduct:{type:Boolean,default:!0},activeProductUnprice:{type:Boolean,default:!1}},emits:["update:query","search","select","customProduct"],setup(e,{emit:l}){const r=t(null),c=t(null),n=t(null),s=t(!1),u=o((()=>r.value?`${r.value.offsetWidth}px`:"0px")),d=()=>{var e;s.value=!1,null==(e=c.value)||e.blur()},i=e=>{const t=null==n?void 0:n.value;if(!t)return;t.contains(e.target)||d()};return window.addEventListener("scroll",i,!0),a((()=>{window.removeEventListener("scroll",i)})),{elContainer:r,elSearchInput:c,elDeviceSearchSheet:n,isCollapse:s,handleSearch:e=>{l("update:query",e),l("search")},dropdownWidth:u,handleOutside:()=>d(),handleSelectItem:e=>{l("select",e),d()},handleCustomProduct:(e=null)=>{l("customProduct",e),d()}}}}),b=["onClick"],w={class:"overflow-y-auto",style:{maxHeight:"200px"}},P={key:0,class:"auto-complete-product auto-complete-product__group"},C=["onClick"],S={class:"auto-complete-product auto-complete-product__group-label"},I=["onClick"],B={key:2,class:"flex items-center justify-center md:px-8 px-4 py-2 md:py-6 text-red-04"},D={key:1,class:"my-8"},U={key:0,class:"text-center"},$={key:1,class:"text-center text-grey-04"},q={key:2,class:"flex items-center justify-center text-red-04"},j={key:2,class:"my-4"};var A=k(_,[["render",function(e,t,o,a,f,v){const k=l("Input"),x=l("router-link"),_=l("BDropdown");return r(),c("div",null,[n(_,{"prevent-toggle":"",block:""},{default:s((()=>[n(k,{ref:"elSearchInput",modelValue:e.query,"onUpdate:modelValue":e.handleSearch,onFocusIn:t[0]||(t[0]=t=>e.isCollapse=!0),view:e.error?"danger":"default",label:e.label,placeholder:e.placeholder,block:"",icon:""},{icon:s((()=>t[1]||(t[1]=[u("span",{class:"material-icons"},"search",-1)]))),_:1},8,["modelValue","onUpdate:modelValue","view","label","placeholder"])])),dropdown:s((({collapse:o})=>[u("div",null,[e.isDisabledCustomProduct?m("",!0):(r(),c(d,{key:0},[!e.showCategoryOnly&&e.showAddCustomProduct?(r(),c("a",{key:0,onClick:i((()=>{e.handleCustomProduct(null),o()}),["prevent"]),tabindex:"1",class:"auto-complete-product auto-complete-product__group-item"},t[2]||(t[2]=[u("span",{class:"flex items-center flex-wrap"},[u("i",{class:"material-icons mr-2"},"add"),p("Add Custom Item ")],-1)]),8,b)):m("",!0)],64)),u("div",w,[e.products.length>0||e.categories.length>0?(r(),c(d,{key:0},[!e.activeProductUnprice&&!e.isDisabledCustomProduct&&e.categories.length>0?(r(),c(d,{key:0},[e.categories.length>0?(r(),c("div",P,[t[3]||(t[3]=u("span",{class:"auto-complete-product auto-complete-product__group-label"},"Items",-1)),(r(!0),c(d,null,g(e.categories,((t,a)=>(r(),c("a",{key:`${t.category_id}_${a}`,onClick:i((()=>{e.handleSelectItem(t),o()}),["prevent"]),tabindex:"1",class:"auto-complete-product auto-complete-product__group-item"},[u("div",{class:"mr-4",style:y({width:"30px",height:"30px",backgroundImage:`url(${t.image})`,backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat"})},null,4),p(" "+h(t.name),1)],8,C)))),128))])):m("",!0)],64)):m("",!0),!e.activeProductUnprice&&e.products.length>0&&!e.showCategoryOnly?(r(!0),c(d,{key:1},g(e.products,((t,a)=>(r(),c("div",{key:`${t.category_name}_${a}`,class:"auto-complete-product auto-complete-product__group"},[u("span",S,h(t.category_name),1),(r(!0),c(d,null,g(t.products,(t=>(r(),c("a",{key:t.product_id,onClick:i((()=>{e.handleSelectItem(t),o()}),["prevent"]),tabindex:"1",class:"auto-complete-product auto-complete-product__group-item"},[u("div",{class:"mr-4",style:y({width:"30px",height:"30px",backgroundImage:`url(${t.image})`,backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat"})},null,4),p(" "+h(t.product_name),1)],8,I)))),128))])))),128)):(r(),c("div",B,[t[6]||(t[6]=p(" Data not found due to missing prices in your catalog. Please check your ")),u("span",null,[t[5]||(t[5]=p(" ")),n(x,{to:{name:"settingBulkPriceEditor"},class:"underline hover:no-underline"},{default:s((()=>t[4]||(t[4]=[p("pricing settings")]))),_:1})]),t[7]||(t[7]=p(". "))]))],64)):e.query&&e.products.length<1&&e.products.length<1?(r(),c("div",D,[e.loading?(r(),c("p",U," Please wait... ")):m("",!0),e.loading||e.activeProductUnprice?m("",!0):(r(),c("p",$," No data to show ")),!e.loading&&e.activeProductUnprice?(r(),c("div",q,[t[10]||(t[10]=p(" Data not found due to missing prices in your catalog. Please check your ")),u("span",null,[t[9]||(t[9]=p(" ")),n(x,{to:{name:"settingBulkPriceEditor"},class:"underline hover:no-underline"},{default:s((()=>t[8]||(t[8]=[p("pricing settings")]))),_:1})]),t[11]||(t[11]=p(". "))])):m("",!0)])):e.isDisabledCustomProduct&&(!e.query||e.products.length<1)?(r(),c("div",j,t[12]||(t[12]=[u("p",{class:"text-left ml-4 text-grey-03"},"Search for item",-1)]))):m("",!0)])])])),_:1})])}]]);export{A as D};
