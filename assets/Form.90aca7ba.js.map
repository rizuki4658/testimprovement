{"version":3,"file":"Form.90aca7ba.js","sources":["../../src/components/CouponCode/Form.vue"],"sourcesContent":["<template>\n  <div class=\"mb-4\">\n    <Input v-model=\"data.code\" :view=\"validation.code.$invalid ? 'danger' : 'default'\" type=\"text\" label=\"Promo Code\" block />\n    <small\n      v-for=\"(error, errorIndex) of validation.code.$errors\"\n      class=\"text-red-base mt-2 block\"\n      :key=\"errorIndex\">\n      {{ error.$message }}.\n    </small>\n  </div>\n  <div class=\"mb-2\">\n    <label :class=\"[ validation.type.$errors.length ? 'text-red-base' : '']\">\n      Type\n    </label>\n    <RadioGroup v-model=\"data.type\" class=\"radio--full\">\n      <RadioButton\n        v-for=\"(typeValue, n) in types\"\n        :key=\"n\"\n        :label=\"typeValue.value\">\n        {{ typeValue.name }}\n      </RadioButton>\n    </RadioGroup>\n    <small\n      v-for=\"(error, errorIndex) of validation.type.$errors\"\n      class=\"text-red-base mt-2 block\"\n      :key=\"errorIndex\">\n      {{ error.$message }}.\n    </small>\n  </div>\n  <transition name=\"fade\">\n    <div v-if=\"data.type && data.type !== ''\">\n      <div v-if=\"data.type === 'Fixed Amount'\">\n        <Input\n          v-model=\"data.amount\"\n          type=\"number\"\n          :currency=\"true\"\n          block\n          prepend>\n          <template #prepend>\n            {{ me.currency_symbol }}\n          </template>\n        </Input>\n      </div>\n      <div v-else>\n        <Input\n          v-model=\"data.amount\"\n          type=\"number\"\n          :currency=\"true\"\n          block\n          append>\n          <template #append>\n            {{ '%' }}\n          </template>\n        </Input>\n      </div>\n      <small\n        v-for=\"(error, errorIndex) of validation.amount.$errors\"\n        class=\"text-red-base mt-2 block\"\n        :key=\"errorIndex\">{{ error.$message }}.\n      </small>\n    </div>\n  </transition>\n</template>\n\n<script>\nimport { computed, defineComponent, reactive, watch } from 'vue'\nimport { useUser } from 'composable/user'\nimport Input from 'bbUi/components/input/input.vue'\nimport Button from 'bbUi/components/button/button.vue'\nimport Select from 'bbUi/components/select/select.vue'\nimport { useVuelidate } from '@vuelidate/core'\nimport { maxValue, minValue } from '@vuelidate/validators'\nimport { required } from '@/validations/index'\n\nexport default defineComponent({\n  name: 'PromoCodeForm',\n  components: {\n    Input,\n    Button,\n    Select\n  },\n  props: {\n    data: {\n      type: Object,\n      default: () => ({\n        code: '',\n        type: '',\n        amount: ''\n      })\n    }\n  },\n  emits: ['change'],\n  setup(props, {emit}) {\n    const { me } = useUser()\n    const types = [{\n      name: 'Fixed Amount',\n      value: 'Fixed Amount'\n    }, {\n      name: 'Percentage',\n      value: 'Percentage'\n    }]\n    const data = reactive(props.data)\n    const rules = computed(() => ({\n      code: {\n        required\n      },\n      type: { \n        required \n      },\n      amount: { \n        required, \n        minValue: minValue(0),\n        ...(data.type === 'Percentage' && { maxValue: maxValue(100) }) \n      }\n    }))\n    const validation = useVuelidate(rules, data, {\n      $lazy: true\n    })\n    const validate = () => {\n      validation.value.$validate()\n      return !validation.value.$invalid\n    }\n    \n    watch(() => ({...data}), (newData) => {\n      emit('change', newData)\n    }, {\n      deep: true\n    })\n\n    return {\n      me,\n      data,\n      types,\n      validation,\n      validate\n    }\n  },\n})\n</script>"],"names":["_sfc_main","defineComponent","name","components","Input","Button","Select","props","data","type","Object","default","code","amount","emits","[object Object]","emit","me","useUser","reactive","rules","computed","required","__spreadValues","minValue","maxValue","validation","useVuelidate","$lazy","watch","newData","deep","types","value","validate","$validate","$invalid","_hoisted_1","class","_openBlock","_createElementBlock","_Fragment","_createVNode","_component_Input","modelValue","_ctx","onUpdate:modelValue","_cache","$event","view","label","_renderList","$errors","error","errorIndex","_hoisted_2","_createElementVNode","_normalizeClass","length","_component_RadioGroup","_withCtx","typeValue","n","_createBlock","_component_RadioButton","key","_hoisted_3","_hoisted_4","currency","block","prepend","_hoisted_5"],"mappings":"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"}