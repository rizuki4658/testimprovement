import{u as a}from"./components.0003aa88.js";import{k as e,r as s,f as l,y as t,m as o,a0 as i,o as n,t as d,B as u,D as r,w as p,I as c,a2 as m,a3 as _,K as v,A as b,n as f,g,_ as y,a6 as k,a4 as V,aI as h,a5 as $,O as w,x}from"./vendor.f1efedad.js";import{f as S,e as j,j as U,_ as I,d as P,b as D,v as M}from"./index.9aa6481b.js";import{e as C}from"./integration.e60a49c9.js";import{c as F}from"./setting.2daa7691.js";import{_ as q}from"./tab.065d46d3.js";import{_ as A}from"./fieldset.49a14fc7.js";import{S as O}from"./select.15c77568.js";import{I as Y}from"./InputPhone.e8268c4d.js";import{u as N}from"./index.32689823.js";import{r as T,e as B,v as K}from"./index.a87b789d.js";import{c as L}from"./index.05b14cb2.js";import{S as z}from"./ShippingKitForm.e98ddf73.js";import"./ButtonLearnMore.af2b168a.js";import"./LoadingCard.be59eb97.js";import"./card.dfb8e6f7.js";import"./SelectCountry.3e7bff58.js";import"./TextEditor.457bdbf9.js";const E=e({components:{Input:S,Fieldset:A,Checkbox:j,Select:O,Alert:U,InputPhone:Y},props:{data:{type:Object,default:()=>({ups_account_country_code:"",ups_account_number:"",ups_account_postal_code:"",ups_address1:"",ups_address2:"",ups_address_text:"",ups_city:"",ups_company:"",ups_country_code:"",ups_email:"",ups_first_name:"",ups_invoice:"",ups_last_name:"",ups_nickname:"",ups_phone:"",ups_postal_code:"",ups_state:"",ups_title:"",ups_control_id:"",ups_invoice_number:"",ups_invoice_amount:"",ups_invoice_date:""})},companyData:{type:Object,default:()=>({})}},emits:["update:data"],setup(a,{emit:e}){const o=s(a.data),i=s(a.companyData),n=l(null);if(Object.assign(o,{valid:""!==o.ups_address_text&&null!==o.ups_address_text||o.is_ups_use_company_data,is_ups_use_company_data:1==o.is_ups_use_company_data}),o.ups_invoice){const a=o.ups_invoice;Object.assign(o,{ups_control_id:a.control_id,ups_invoice_amount:a.invoice_amount,ups_invoice_date:a.invoice_date,ups_invoice_number:a.invoice_number})}const d={ups_account_number:{required:T},ups_company:{required:T},ups_title:{required:T},ups_email:{required:T,email:B},ups_first_name:{required:T},ups_last_name:{required:T},ups_phone:{required:T,invalidNumber:L.withMessage("Phone number is invalid",(()=>{var a;return!!o.ups_phone||(null==(a=n.value)?void 0:a.isValid)}))},ups_control_id:{},ups_invoice_number:{},ups_invoice_amount:{},ups_invoice_date:{},valid:{sameAs:K}},u=N(d,o,{$lazy:!0});return t((()=>o.is_ups_use_company_data),(a=>{a&&Object.assign(o,{ups_address1:i.address,ups_address2:i.suite,ups_city:i.city,ups_country_code:i.country,ups_postal_code:i.zip,ups_state:i.state,ups_address_text:i.address_text,ups_email:i.company_email,ups_phone:i.phone,ups_company:i.name})})),{refUpsPhone:n,data:o,validation:u,validate:()=>(u.value.$validate(),!u.value.$invalid),address:{valid:"valid",route:"ups_address1",locality:"ups_city",administrative_area_level_1:"ups_state",formatted_address:"ups_address_text",postal_code:"ups_postal_code",country:"ups_country_code",disallowCustomAddress:!0}}}}),R={class:"grid grid-cols-1 gap-6"},G={class:"p-2"},H={class:"grid grid-cols-3 p-2"},J={class:"col-span-2"},Q={class:"grid grid-cols-3 gap-4"},W={class:"col-span-3"},X={class:"col-span-3"},Z={class:"col-span-3"},aa={class:"col-span-3"},ea={class:"col-span-3"},sa={class:"col-span-2"},la={class:"grid grid-cols-3"},ta={class:"col-span-2 grid grid-cols-3 gap-6"},oa={class:"col-span-2"},ia={class:"col-span-2"},na={class:"col-span-2"},da={class:"col-span-2"};var ua=I(e({name:"UPS",components:{Modal:P,Button:D,Tab:q,SettingForm:I(E,[["render",function(a,e,s,l,t,g){const y=o("Input"),k=o("Fieldset"),V=o("Checkbox"),h=o("Select"),$=o("InputPhone"),w=o("Alert"),x=o("DatePicker"),S=i("gmap");return n(),d("div",R,[u("div",null,[r(k,{class:"w-full my-6"},{label:p((()=>e[14]||(e[14]=[c("Shipper Number")]))),default:p((()=>[u("div",G,[r(y,{type:"text",label:"Shipper Number",modelValue:a.data.ups_account_number,"onUpdate:modelValue":e[0]||(e[0]=e=>a.data.ups_account_number=e),view:a.validation.ups_account_number.$invalid?"danger":"default"},null,8,["modelValue","view"]),(n(!0),d(m,null,_(a.validation.ups_account_number.$errors,((a,e)=>(n(),d("small",{class:"text-red-base block",key:e},v(a.$message)+". ",1)))),128))])])),_:1}),r(k,{class:"w-full my-6"},{label:p((()=>e[15]||(e[15]=[c("Contact Information")]))),default:p((()=>[u("div",H,[u("div",J,[u("div",Q,[u("div",W,[r(V,{modelValue:a.data.is_ups_use_company_data,"onUpdate:modelValue":e[1]||(e[1]=e=>a.data.is_ups_use_company_data=e),class:"font-normal",type:"toggle"},{default:p((()=>e[16]||(e[16]=[c("Auto fill from company location profile")]))),_:1},8,["modelValue"])]),u("div",null,[r(h,{modelValue:a.data.ups_title,"onUpdate:modelValue":e[2]||(e[2]=e=>a.data.ups_title=e),label:"Mr/Mrs",items:[{name:"Mr",value:"Mr"},{name:"Mrs",value:"Mrs"}],name:"name",by:"value",class:"w-full",block:"",view:a.validation.ups_title.$invalid?"danger":"default",placeholder:"Title"},null,8,["modelValue","view"]),(n(!0),d(m,null,_(a.validation.ups_title.$errors,((a,e)=>(n(),d("small",{class:"text-red-base block",key:e},v(a.$message)+". ",1)))),128))]),u("div",null,[r(y,{label:"First Name",modelValue:a.data.ups_first_name,"onUpdate:modelValue":e[3]||(e[3]=e=>a.data.ups_first_name=e),block:"",view:a.validation.ups_first_name.$invalid?"danger":"default"},null,8,["modelValue","view"]),(n(!0),d(m,null,_(a.validation.ups_first_name.$errors,((a,e)=>(n(),d("small",{class:"text-red-base block",key:e},v(a.$message)+". ",1)))),128))]),u("div",null,[r(y,{label:"Last Name",modelValue:a.data.ups_last_name,"onUpdate:modelValue":e[4]||(e[4]=e=>a.data.ups_last_name=e),block:"",view:a.validation.ups_last_name.$invalid?"danger":"default"},null,8,["modelValue","view"]),(n(!0),d(m,null,_(a.validation.ups_last_name.$errors,((a,e)=>(n(),d("small",{class:"text-red-base block",key:e},v(a.$message)+". ",1)))),128))]),u("div",X,[r(y,{label:"Company Name",modelValue:a.data.ups_company,"onUpdate:modelValue":e[5]||(e[5]=e=>a.data.ups_company=e),block:"",view:a.validation.ups_company.$invalid?"danger":"default",disabled:1==a.data.is_ups_use_company_data},null,8,["modelValue","view","disabled"]),(n(!0),d(m,null,_(a.validation.ups_company.$errors,((a,e)=>(n(),d("small",{class:"text-red-base block",key:e},v(a.$message)+". ",1)))),128))]),u("div",Z,[r(y,{label:"Email",modelValue:a.data.ups_email,"onUpdate:modelValue":e[6]||(e[6]=e=>a.data.ups_email=e),block:"",view:a.validation.ups_email.$invalid?"danger":"default",disabled:1==a.data.is_ups_use_company_data},null,8,["modelValue","view","disabled"]),(n(!0),d(m,null,_(a.validation.ups_email.$errors,((a,e)=>(n(),d("small",{class:"text-red-base block",key:e},v(a.$message)+". ",1)))),128))]),u("div",aa,[b((n(),f(y,{label:"Street Address",modelValue:a.data.ups_address_text,"onUpdate:modelValue":e[7]||(e[7]=e=>a.data.ups_address_text=e),class:"mb-2",block:"",icon:"","icon-block":"",view:a.validation.valid.$invalid?"danger":"default",disabled:1==a.data.is_ups_use_company_data,autocomplete:"none"},{icon:p((()=>e[17]||(e[17]=[u("span",{class:"material-icons"},"location_on",-1)]))),_:1},8,["modelValue","view","disabled"])),[[S,a.address]]),(n(!0),d(m,null,_(a.validation.valid.$errors,((a,e)=>(n(),d("small",{class:"text-red-base block",key:e},v(a.$message)+". ",1)))),128)),e[18]||(e[18]=u("small",{class:"text-grey-04 block"},"Street address, P.O box, company name, c/o.",-1))]),u("div",ea,[r(y,{class:"mb-2",modelValue:a.data.ups_address2,"onUpdate:modelValue":e[8]||(e[8]=e=>a.data.ups_address2=e),block:"",disabled:1==a.data.is_ups_use_company_data},null,8,["modelValue","disabled"]),e[19]||(e[19]=u("small",{class:"text-grey-04 block"},"Apartment, suite, building, floor, etc.",-1))]),u("div",sa,[r($,{ref:"refUpsPhone",modelValue:a.data.ups_phone,"onUpdate:modelValue":e[9]||(e[9]=e=>a.data.ups_phone=e),label:"Phone",block:"",disabled:1==a.data.is_ups_use_company_data,"country-autofill-setting":""},null,8,["modelValue","disabled"]),(n(!0),d(m,null,_(a.validation.ups_phone.$errors,((a,e)=>(n(),d("small",{class:"text-red-base block",key:e},v(a.$message)+". ",1)))),128))])])])])])),_:1}),r(k,null,{label:p((()=>e[20]||(e[20]=[c("Invoice Details")]))),default:p((()=>[r(w,{color:"blue",view:"smooth",class:"mb-5",dense:""},{left:p((()=>e[21]||(e[21]=[u("span",{class:"material-icons text-4xl"},"info",-1)]))),default:p((()=>[e[22]||(e[22]=c(" Invoice data is only required if your UPS account has recieved an invoice in the past 90 days. "))])),_:1}),u("div",la,[u("div",ta,[u("div",oa,[r(y,{modelValue:a.data.ups_control_id,"onUpdate:modelValue":e[10]||(e[10]=e=>a.data.ups_control_id=e),label:"Control ID",block:"",view:a.validation.ups_control_id.$invalid?"danger":"default"},null,8,["modelValue","view"]),(n(!0),d(m,null,_(a.validation.ups_control_id.$errors,((a,e)=>(n(),d("small",{class:"text-red-base block",key:e},v(a.$message)+". ",1)))),128))]),u("div",ia,[r(y,{modelValue:a.data.ups_invoice_number,"onUpdate:modelValue":e[11]||(e[11]=e=>a.data.ups_invoice_number=e),label:"Invoice Number",block:"",view:a.validation.ups_invoice_number.$invalid?"danger":"default"},null,8,["modelValue","view"]),(n(!0),d(m,null,_(a.validation.ups_invoice_number.$errors,((a,e)=>(n(),d("small",{class:"text-red-base block",key:e},v(a.$message)+". ",1)))),128))]),u("div",na,[r(y,{modelValue:a.data.ups_invoice_amount,"onUpdate:modelValue":e[12]||(e[12]=e=>a.data.ups_invoice_amount=e),type:"number",label:"Invoice Amount",block:"",view:a.validation.ups_invoice_amount.$invalid?"danger":"default"},null,8,["modelValue","view"]),(n(!0),d(m,null,_(a.validation.ups_invoice_amount.$errors,((a,e)=>(n(),d("small",{class:"text-red-base block",key:e},v(a.$message)+". ",1)))),128))]),u("div",da,[e[23]||(e[23]=u("label",null,"Invoice Date",-1)),r(x,{modelValue:a.data.ups_invoice_date,"onUpdate:modelValue":e[13]||(e[13]=e=>a.data.ups_invoice_date=e),"value-format":"MM-DD-YYYY",format:"MM-DD-YYYY",class:"w-full"},null,8,["modelValue"]),(n(!0),d(m,null,_(a.validation.ups_invoice_date.$errors,((a,e)=>(n(),d("small",{class:"text-red-base block",key:e},v(a.$message)+". ",1)))),128))])])])])),_:1})])])}]]),ShippingKitForm:z},async setup(){const{state:a,loading:e,data:t,actionAll:o,actionUpdateConfig:i,actionUpdateShippingKit:n}=C(),{data:d,actionShow:u}=F(),r=l(null),p=s({items:[{name:"Settings",component:"SettingForm"}],current:"SettingForm"}),c=g((()=>"SettingForm"===p.current?Object.assign({},{data:t.config,companyData:d}):"ShippingKitForm"===p.current?Object.assign({},{data:t.shipping_kit}):void 0));return await Promise.all([o(),u()]),{state:a,data:t,loading:e,tab:p,refTabComponent:r,componentBind:c,updateData:async(a=(()=>{}))=>{e.update=!0;if(r.value.validate&&r.value.validate())switch(p.current){case"SettingForm":await i((()=>{y({type:"success",message:"UPS config updated!"}),M(a)&&a()}));break;case"ShippingKitForm":await n((()=>{y({type:"success",message:"UPS shipping kit updated"}),M(a)&&a()}))}else e.update=!1}}}}),[["render",function(a,e,s,l,t,i){const u=o("Tab");return n(),d(m,null,[r(u,{modelValue:a.tab.current,"onUpdate:modelValue":e[0]||(e[0]=e=>a.tab.current=e),items:a.tab.items,component:""},null,8,["modelValue","items"]),(n(),f(h,null,[(n(),f(k(a.tab.current),V(a.componentBind,{ref:"refTabComponent"}),null,16))],1024))],64)}]]),ra=e({async setup(){const{genSuspense:e}=a(),t=l(null),o=$(),i=w(),n=async()=>{await t.value.updateData((()=>{var a,e;"SettingForm"==(null==(a=t.value.tab)?void 0:a.current)?i.push({name:"integration",query:{enable:(null==(e=o.query)?void 0:e.id)||""}}):i.push({name:"integration"})}))},d=s({modelValue:!0,closeTo:{name:"integration",query:{reload:1}},size:"sm"}),u=s({header:()=>"UPS Config",headerRight:()=>genLearnMoreButton(),default:()=>e(x(ua,{ref:t})),footer:()=>{return x(D,{color:"teal",view:"smooth",loading:t.value&&(null==(e=null==(a=t.value)?void 0:a.loading)?void 0:e.update),onClick:n},{default:()=>"Save"});var a,e}});return()=>x(P,d,u)}});export{ra as default};
