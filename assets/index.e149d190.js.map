{"version":3,"file":"index.e149d190.js","sources":["../../src/components/Features/Setting/SettingReceipt/SettingReceiptActionDropdown.vue","../../src/views/setting/receipt/index.vue"],"sourcesContent":["<script setup>\nimport { useRouter } from 'vue-router';\nimport Button from 'bbUi/components/button/button.vue';\n\nconst props = defineProps({\n  receipt: {\n    type: Object,\n    required: true\n  }\n});\n\nconst emit = defineEmits(['preview']);\nconst router = useRouter();\n\nconst onEdit = () => {\n  router.push(props.receipt.to);\n};\n\nconst onPreview = () => {\n  emit('preview', props.receipt.type);\n};\n</script>\n\n<template>\n  <Dropdown v-if=\"receipt.is_enable\" trigger=\"click\" placement=\"bottom-end\" hide-on-click class=\"mr-8\">\n    <div @click.stop>\n        <Button color=\"teal\" view=\"outlined\" dense icon>\n\t\t\t<span class=\"material-icons\">more_horiz</span>\n\t\t</Button>\n    </div>\n    <template #dropdown>\n      <DropdownMenu class=\"py-1\">\n        <DropdownItem class=\"text-base\" @click=\"onEdit\">\n          <span class=\"material-icons mr-2\">edit</span> Edit\n        </DropdownItem>\n        <DropdownItem class=\"text-base\" @click=\"onPreview\">\n          <span class=\"material-icons mr-2\">visibility</span> Preview\n        </DropdownItem>\n      </DropdownMenu>\n    </template>\n  </Dropdown>\n  <Tooltip v-else placement=\"top\">\n        <template #default>\n            <div>\n                <Button disabled color=\"teal\" view=\"outlined\" class=\"mr-8\" dense icon>\n                    <span class=\"material-icons\">more_horiz</span>\n                </Button>\n            </div>\n        </template>\n    <template #content>\n        <div>\n            <p class=\"text-center\">{{ receipt.tooltip }}</p>\n        </div>\n    </template>\n  </Tooltip>\n</template>\n\n<style scoped>\n    .btn.btn-outlined.btn-teal {\n        border: none !important;\n    }\n</style>","<script setup>\nimport { useSettingReceiptStore } from '@/store/pinia/setting/receipt'\nimport { tryCatchRequest } from 'utils/request'\nimport { reactive, ref, onMounted } from 'vue'\nimport { deepClone } from 'utils/deep-clone'\nimport { useRouter } from 'vue-router'\n\n// Components\nimport Breadcrumb from 'components/Breadcrumb.vue'\nimport Card from 'bbUi/components/card/card.vue'\nimport Modal from 'bbUi/components/modal/modal.vue'\nimport VuePdf from 'vue3-pdf-app'\nimport SettingReceiptActionDropdown from 'components/Features/Setting/SettingReceipt/SettingReceiptActionDropdown.vue'\n\nconst settingReceiptStore = useSettingReceiptStore()\nconst previewLoading = ref(false)\nconst router = useRouter()\n\nconst state = reactive({\n  isModalOpen: {\n    preview: false,\n  }\n})\n\nconst pdfViewerConfig = {\n  toolbar: {\n    toolbarViewerRight: false\n  },\n  secondaryToolbar: false\n}\n\nconst onPreview = async (receiptType) => {\n  state.isModalOpen.preview = true\n  \n  previewLoading.value = true\n  settingReceiptStore.$state.preview.isLoading = true\n  \n  try {\n    const requestParams = { buyback_type: receiptType };\n    \n    await settingReceiptStore.$get({\n      params: requestParams\n    })\n    \n    if (settingReceiptStore.$state.get.result) {\n      Object.assign(settingReceiptStore.$state.form, deepClone(settingReceiptStore.$state.get.result))\n    }\n    \n    await tryCatchRequest(settingReceiptStore.$state.preview, () =>\n      settingReceiptStore.$preview({\n        data: settingReceiptStore.$state.form,\n        params: requestParams\n      })\n    )\n  } catch (error) {\n    console.error('Preview error:', error)\n    state.isModalOpen.preview = false\n  } finally {\n    previewLoading.value = false\n    settingReceiptStore.$state.preview.isLoading = false\n  }\n}\n\n\nonMounted(async () => {\n\tawait settingReceiptStore.$getList()\n})\n</script>\n\n<template>\n\t<Breadcrumb\n\t\tpageTitle=\"Receipts\"\n\t\t:backTo=\"{ name: 'setting' }\"\n\t\t:items=\"[\n\t\t{\n\t\t\ttext: 'Settings',\n\t\t\tto: {\n\t\t\tname: 'setting'\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\ttext: 'Receipts'\n\t\t}\n\t\t]\" />\n\t<Card class=\"my-6\">\n\t\t<template #header>\n\t\t\t<h2 class=\"text-xl font-bold\">Receipts Template</h2>\n\t\t</template>\n\t\t<template #default>\n\t\t<Table :clickable=\"false\" :data=\"settingReceiptStore.list?.result\" class=\"cursor-text\">\n\t\t\t<TableColumn label=\"Receipt Type\" #default=\"{ row }\">\n\t\t\t\t<div class=\"flex items-center gap-4\">\n\t\t\t\t\t<p>{{ row.type }}</p>\n\t\t\t\t\t<div \n\t\t\t\t\tv-if=\"row.type == 'Easy Offer'\" \n\t\t\t\t\tclass=\"px-3 py-1 -ml-2 bg-teal-04 text-white rounded-full flex items-center justify-center box-border text-xs truncate\">\n\t\t\t\t\t\tAPI\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</TableColumn>\n\t\t\t<TableColumn label=\"Description\" prop=\"desc\" width=\"1000\" />\n\t\t\t<TableColumn align=\"right\">\n\t\t\t<template #default=\"{ row }\">\n\t\t\t\t<SettingReceiptActionDropdown\n\t\t\t\t:receipt=\"row\" \n\t\t\t\t@preview=\"onPreview\" \n\t\t\t\t/>\n\t\t\t</template>\n\t\t\t</TableColumn>\n\t\t</Table>\n\t\t</template>\n\t</Card>\n\t<Modal\n\t\tv-model=\"state.isModalOpen.preview\"\n\t\ttitle=\"Preview Receipt\"\n\t\tsize=\"lg\"\n\t\tstyle=\"z-index: 1001\"\n\t\thide-footer\n\t\tno-padding>\n\t\t<template #default>\n\t\t<VuePdf\n\t\t\t:pdf=\"settingReceiptStore.$state.preview.result\"\n\t\t\t:config=\"pdfViewerConfig\"\n\t\t\tstyle=\"height: 60vh\"\n\t\t\ttheme=\"dark\" \n\t\t\tv-loading=\"settingReceiptStore.$state.preview.isLoading\"\n\t\t\t/>\n\t\t</template>\n\t</Modal>\n</template>\n\n<style>\n.icon {\n  filter: invert(48%) sepia(0%) saturate(0%) hue-rotate(147deg) brightness(89%) contrast(93%);\n  transition: filter 0.3s ease;\n}\n</style>"],"names":["props","__props","emit","__emit","router","useRouter","onEdit","push","receipt","to","onPreview","type","settingReceiptStore","useSettingReceiptStore","previewLoading","ref","state","reactive","isModalOpen","preview","pdfViewerConfig","toolbar","toolbarViewerRight","secondaryToolbar","async","receiptType","value","$state","isLoading","requestParams","buyback_type","$get","params","get","result","Object","assign","form","deepClone","tryCatchRequest","$preview","data","error","console","onMounted","$getList"],"mappings":"2lBAIA,MAAMA,EAAQC,EAORC,EAAOC,EACPC,EAASC,IAETC,EAAS,KACNF,EAAAG,KAAKP,EAAMQ,QAAQC,KAGtBC,EAAY,KACXR,EAAA,UAAWF,EAAMQ,QAAQG,gzCCLhC,MAAMC,EAAsBC,IACtBC,EAAiBC,GAAI,GACZV,IAEf,MAAMW,EAAQC,EAAS,CACrBC,YAAa,CACXC,SAAS,KAIPC,EAAkB,CACtBC,QAAS,CACPC,oBAAoB,GAEtBC,kBAAkB,GAGdb,EAAYc,MAAOC,IACvBT,EAAME,YAAYC,SAAU,EAE5BL,EAAeY,OAAQ,EACHd,EAAAe,OAAOR,QAAQS,WAAY,EAE3C,IACI,MAAAC,EAAgB,CAAEC,aAAcL,SAEhCb,EAAoBmB,KAAK,CAC7BC,OAAQH,IAGNjB,EAAoBe,OAAOM,IAAIC,QACjCC,OAAOC,OAAOxB,EAAoBe,OAAOU,KAAMC,EAAU1B,EAAoBe,OAAOM,IAAIC,eAGpFK,EAAgB3B,EAAoBe,OAAOR,SAAS,IACxDP,EAAoB4B,SAAS,CAC3BC,KAAM7B,EAAoBe,OAAOU,KACjCL,OAAQH,MAAA,MAGLa,GACPC,QAAQD,MAAM,iBAAkBA,GAChC1B,EAAME,YAAYC,SAAU,EACpB,QACRL,EAAeY,OAAQ,EACHd,EAAAe,OAAOR,QAAQS,WAAY,WAKnDgB,GAAUpB,gBACHZ,EAAoBiC"}