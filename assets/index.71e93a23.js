import{k as a,O as e,f as t,g as s,aV as l,at as o,m as n,a0 as i,o as d,t as r,D as m,w as c,I as u,B as p,A as v,a2 as f,a3 as y,K as h,n as b,U as _,S as g}from"./vendor.f1efedad.js";import{u as x}from"./index.32689823.js";import{r as w,e as k}from"./index.a87b789d.js";import{c as V}from"./index.05b14cb2.js";import{e as A}from"./easypost.8d821613.js";import{c as $}from"./setting.a9fe6242.js";import{_ as C,f as j,d as S,b as q}from"./index.161fb295.js";import{I as P}from"./InputPhone.1335d16b.js";import"./SelectCountry.415793bd.js";const z=a({name:"EasypostActivation",components:{Input:j,Modal:S,Button:q,InputPhone:P},async setup(){const{data:a,loading:n,actionShow:i}=$(),{data:d,address:r,loading:m,fetch:c,create:u}=A(),p=e(),v=t(),f={company_email:{required:w,email:k},address_text:{required:V.withMessage("Address is required",w)},street:{required:w},state:{required:w},city:{required:w},zip_code:{required:w},phone:{required:w,invalidNumber:V.withMessage("Phone number is invalid",(()=>{var a;return null==(a=v.value)?void 0:a.isValid}))}},y=["address_text","street","state","city","zip_code"],h=x(f,d,{$lazy:!0}),b=s((()=>{const a=[];return y.map((e=>{h.value[e].$invalid&&a.push(h.value[e].$invalid)})),!!a.length})),_=(a,e={})=>{d.company_email=a.email||a.company_email||e.company_email||null,d.address_text=a.address_text||e.address_text||null,d.street=a.street||e.street||e.address||null,d.state=a.state||e.state||null,d.city=a.city||e.city||null,d.zip_code=a.zip||e.zip||null,d.phone=a.phone||e.phone||null},g=()=>{p.go(-1)};return l((async()=>{await i({is_store:1}),await c((e=>_(e,a)))})),o((()=>{h.value.$reset(),_({})})),{data:d,loading:m,address:r,refPhone:v,validation:h,dataCompany:a,errorAddress:y,loadingCompany:n,viewValidAddress:b,handleClose:g,handleSubmit:async()=>{if(await h.value.$validate()){["company_email","phone"].concat(y).forEach((a=>{d[a]})),await u(d,(()=>{g()}))}}}}}),I={class:"space-y-8 mt-8"};var M=C(z,[["render",function(a,e,t,s,l,o){const x=n("Input"),w=n("InputPhone"),k=n("Button"),V=n("Modal"),A=i("gmap"),$=i("loading");return d(),r("form",{autocomplete:"off",onSubmit:e[3]||(e[3]=g(((...e)=>a.handleSubmit&&a.handleSubmit(...e)),["prevent"]))},[m(V,{size:"sm",modelValue:!0,class:"modal--overflow-none","without-transition":"",onClickClose:a.handleClose},{header:c((()=>e[4]||(e[4]=[u(" Activate USPS Return Account ")]))),default:c((()=>[e[6]||(e[6]=p("div",{class:"flex items-center gap-x-4 text-orange-03"},[p("span",{class:"material-icons text-4xl"},"warning"),p("p",null,"Must match easypost account information")],-1)),v((d(),r("div",I,[p("div",null,[m(x,{modelValue:a.data.company_email,"onUpdate:modelValue":e[0]||(e[0]=e=>a.data.company_email=e),view:a.validation.company_email.$invalid?"danger":"default",placeholder:"Company Email",label:"Company Email",autocomplete:"none",class:"w-full"},null,8,["modelValue","view"]),(d(!0),r(f,null,y(a.validation.company_email.$errors,((a,e)=>(d(),r("small",{key:e,class:"text-red-base block mt-1"},h(a.$message)+". ",1)))),128))]),p("div",null,[v((d(),b(x,{modelValue:a.data.address_text,"onUpdate:modelValue":e[1]||(e[1]=e=>a.data.address_text=e),view:a.viewValidAddress?"danger":"default",placeholder:"Mail-in Address",label:"Mail-in Address",autocomplete:"none",class:"w-full","icon-block":"",icon:""},{icon:c((()=>e[5]||(e[5]=[p("span",{class:"material-icons"},"location_on",-1)]))),_:1},8,["modelValue","view"])),[[A,a.address]]),(d(!0),r(f,null,y(a.errorAddress,(e=>(d(),r("span",{key:e,class:"block"},[a.validation[e]?(d(!0),r(f,{key:0},y(a.validation[e].$errors,((a,e)=>(d(),r("small",{key:e,class:"text-red-base block mt-1"},h(a.$message)+". ",1)))),128)):_("",!0)])))),128))]),p("div",null,[m(w,{ref:"refPhone",modelValue:a.data.phone,"onUpdate:modelValue":e[2]||(e[2]=e=>a.data.phone=e),"country-autofill-setting":"",placement:"bottom","static-position":"",label:"Phone",block:""},null,8,["modelValue"]),(d(!0),r(f,null,y(a.validation.phone.$errors,((a,e)=>(d(),r("small",{key:e,class:"text-red-base block mt-1"},h(a.$message)+". ",1)))),128))])])),[[$,a.loading]])])),footer:c((()=>[v((d(),b(k,{color:"teal",type:"submit"},{default:c((()=>e[7]||(e[7]=[u(" Activate ")]))),_:1})),[[$,a.loading]])])),_:1},8,["onClickClose"])],32)}]]);export{M as default};
