import{u as a}from"./components.41c6afd8.js";import{k as e,_ as s,m as i,o,t as l,D as p,a2 as r,a3 as t,K as d,f as n,a5 as u,O as _,r as f,x as y}from"./vendor.f1efedad.js";import{b as v,j as m,f as c,_ as h,v as b,d as g}from"./index.e231b017.js";import{a as k}from"./integration.19f1b956.js";import{u as w}from"./index.32689823.js";import{r as $}from"./index.2fb3814c.js";import"./LoadingCard.9892fd7a.js";import"./card.de1f0319.js";import"./index.1c09f422.js";var j=h(e({components:{Button:v,Alert:m,Input:c},async setup(){const{state:a,data:e,actionAll:i,actionUpdate:o,loading:l}=k(),p=w({shopify_private_app_api_key:{required:$},shopify_private_app_passsword:{required:$},shopify_base_url:{required:$}},e,{$lazy:!0});return await Promise.all([i()]),{state:a,data:e,loading:l,validation:p,update:async(a=(()=>{}))=>{if(!(p.value.$validate(),!p.value.$invalid))return;const i=Object.assign({},{shopify_private_app_api_key:e.shopify_private_app_api_key,shopify_private_app_passsword:e.shopify_private_app_passsword,shopify_base_url:e.shopify_base_url});await o(i,(e=>{if("connection failed"===e.toLowerCase())return s({type:"warning",message:"Invalid Shopify configurations"});s({type:"success",message:"Shopify integration updated!"}),b(a)&&a()}))}}}}),[["render",function(a,e,s,n,u,_){const f=i("Input");return o(),l(r,null,[p(f,{modelValue:a.data.shopify_private_app_api_key,"onUpdate:modelValue":e[0]||(e[0]=e=>a.data.shopify_private_app_api_key=e),view:a.validation.shopify_private_app_api_key.$invalid?"danger":"default",class:"my-4",label:"Shopify Private API Key",placeholder:"",block:""},null,8,["modelValue","view"]),(o(!0),l(r,null,t(a.validation.shopify_private_app_api_key.$errors,((a,e)=>(o(),l("small",{class:"text-red-base block mb-4",key:e},d(a.$message)+". ",1)))),128)),p(f,{modelValue:a.data.shopify_private_app_passsword,"onUpdate:modelValue":e[1]||(e[1]=e=>a.data.shopify_private_app_passsword=e),view:a.validation.shopify_private_app_passsword.$invalid?"danger":"default",class:"my-4",label:"Shopify Private App Password",placeholder:"",block:""},null,8,["modelValue","view"]),(o(!0),l(r,null,t(a.validation.shopify_private_app_passsword.$errors,((a,e)=>(o(),l("small",{class:"text-red-base block mb-4",key:e},d(a.$message)+". ",1)))),128)),p(f,{modelValue:a.data.shopify_base_url,"onUpdate:modelValue":e[2]||(e[2]=e=>a.data.shopify_base_url=e),view:a.validation.shopify_base_url.$invalid?"danger":"default",class:"my-4",label:"Shopify Base URL",placeholder:"",block:""},null,8,["modelValue","view"]),(o(!0),l(r,null,t(a.validation.shopify_base_url.$errors,((a,e)=>(o(),l("small",{class:"text-red-base block mb-4",key:e},d(a.$message)+". ",1)))),128))],64)}]]),x=e({async setup(){const{genSuspense:e}=a(),s=n(null),i=u(),o=_(),l=()=>{s.value.update((()=>{var a;o.push({name:"integration",query:{enable:(null==(a=i.query)?void 0:a.id)||""}})}))},p=f({modelValue:!0,closeTo:{name:"integration",query:{reload:1}},size:"xs"}),r=f({header:()=>"Shopify Config",default:()=>e(y(j,{ref:s})),footer:()=>{return y(v,{color:"teal",loading:s.value&&(null==(e=null==(a=s.value)?void 0:a.loading)?void 0:e.update),onClick:l},{default:()=>"Save"});var a,e}});return()=>y(g,p,r)}});export{x as default};
