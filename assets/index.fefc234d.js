import{u as e}from"./components.aaee2f92.js";import{k as a,f as t,g as i,y as l,_ as s,m as o,$ as n,o as d,t as c,D as r,w as p,B as m,a1 as u,A as g,n as y,K as f,F as _,S as k,I as b,U as h,a5 as x,r as v,x as C}from"./vendor.9695fe57.js";import{P as w,b as V,j as K,f as I,_ as S,g as T,d as U}from"./index.35a87af4.js";import{c as R}from"./integration.5191ede6.js";import{_ as j}from"./tab.8e54d1d1.js";import{_ as A}from"./fieldset.3185be27.js";import"./LoadingCard.fae900cb.js";import"./card.85454cb1.js";const D=a({components:{Pagination:w,Button:V,Alert:K,Input:I,Tab:j,Fieldset:A},async setup(){const{data:e,loading:a,configs:o,loadingConfigs:n,actionShow:d,actionUpdate:c,actionDelete:r,updateConfig:p,setConfig:m}=R(),u=t("location"),g=i((()=>e.items.length)),y=i((()=>e.lastPage)),f=i((()=>({from:e.limit*e.page-e.limit+1,to:e.limit*e.page>g.value?g.value:e.limit*e.page,last_page:y.value,total:g.value}))),_=T((async()=>{await d({search:e.search,page:e.page,limit:e.limit})}),300);return l((()=>({limit:e.limit,page:e.page})),T((async()=>{await d({search:e.search,page:e.page,limit:e.limit})}))),await Promise.all([d()]),{data:e,loading:a,tableOptions:f,tab:[{id:"location",name:"Locations"}],selectedTab:u,configs:o,loadingConfigs:n,setConfig:m,handleSearch:_,handleDeleteApiKey:async(a,t)=>{await r(a.id,(async()=>{a.is_edit=!1,a.repairdesk_api_key=void 0,e.apiKeys[`apiKey${e.items[t].key}`]=void 0,await d({search:e.search,page:e.page,limit:e.limit})}))},handleTestConnection:async(a,t)=>{await c({id:a.id,repairdesk_api_key:t},(async()=>{a.repairdesk_api_key=t,a.is_edit=!1,await d({search:e.search,page:e.page,limit:e.limit})}))},handleUpdateConfig:async e=>{e&&(m(e),await p((async()=>{s({type:"success",message:"Repairdesk settings updated"}),await d()})))}}}}),P={class:"mb-4"},$={class:"text-teal-04 font-semibold mb-2"},B={class:"text-sm text-grey-02"},F={class:"text-sm text-grey-02"},M={class:"text-sm text-grey-02"},L={key:2,class:"flex items-center gap-x-2 flex-wrap"},N={class:"text-sm"},O={class:"lg:opacity-0 group-hover:opacity-100 transition-opacity flex items-center gap-x-2"},q={key:1,class:"my-8 grid grid-cols-3"},z={class:"col-span-3 lg:col-span-1"};var E=S(D,[["render",function(e,a,t,i,l,s){const x=o("Alert"),v=o("Tab"),C=o("Input"),w=o("TableColumn"),V=o("Button"),K=o("Table"),I=o("Pagination"),S=o("RadioButton"),T=o("RadioGroup"),U=o("Fieldset"),R=n("loading");return d(),c("div",null,[r(x,{view:"smooth",color:"blue",class:"mb-8"},{default:p((()=>a[7]||(a[7]=[m("div",{class:"flex gap-x-2 -mx-4 -my-2 py-1"},[m("i",{class:"material-icons"},"info"),m("span",{whitelabel:"text-replace","data-label":"domain custom alert"}," Connect your RepairDesk account to your Reusely account to automatically move completed trade-in tickets and inventory from your Reusely account to your RepairDesk account. ")],-1)]))),_:1}),r(v,{modelValue:e.selectedTab,"onUpdate:modelValue":a[0]||(a[0]=a=>e.selectedTab=a),items:e.tab,name:"name",by:"id",component:""},null,8,["modelValue","items"]),"location"===e.selectedTab?(d(),c(u,{key:0},[r(C,{modelValue:e.data.search,"onUpdate:modelValue":a[1]||(a[1]=a=>e.data.search=a),placeholder:"Search everything...",class:"w-full mb-4",icon:"",onInput:e.handleSearch},{icon:p((()=>a[8]||(a[8]=[m("span",{class:"material-icons"},"search",-1)]))),_:1},8,["modelValue","onInput"]),m("div",P,[g((d(),y(K,{data:e.data.items},{default:p((()=>[r(w,{label:"Store Name",width:"250"},{default:p((({row:e})=>[m("span",$,f(e.name),1),m("p",B,f(e.email),1),m("p",F,f(e.address_text),1),m("p",M,f(e.phone),1)])),_:1}),r(w,{label:"Selling Method",width:"150"},{default:p((({row:e})=>[m("div",{class:_([1==e.is_mailin?"text-teal-04 bg-teal-01":"text-blue-04 bg-blue-01","inline-block text-xs px-2","rounded-full py-0.5"])},f(e.is_mailin?"Mail-In":"In-Store"),3)])),_:1}),r(w,{label:"Repairdesk Private App API Key"},{default:p((({row:t,$index:i})=>[t.repairdesk_api_key||t.is_edit?h("",!0):(d(),c("div",{key:0,class:"lg:opacity-0 group-hover:opacity-100 transition-opacity",onClick:a[2]||(a[2]=k((()=>{}),["stop"]))},[r(V,{color:"teal",dense:"",onClick:e=>t.is_edit=!0},{default:p((()=>a[9]||(a[9]=[b("Add API Key")]))),_:2},1032,["onClick"])])),!t.repairdesk_api_key&&t.is_edit||t.repairdesk_api_key&&t.is_edit?(d(),c("div",{key:1,class:"flex items-center gap-x-2 w-full",onClick:a[3]||(a[3]=k((()=>{}),["stop"]))},[r(C,{modelValue:e.data.apiKeys[`apiKey${t.id}`],"onUpdate:modelValue":a=>e.data.apiKeys[`apiKey${t.id}`]=a,dense:"",class:"flex-1 max-w-xs"},null,8,["modelValue","onUpdate:modelValue"]),r(V,{color:"teal",dense:"",onClick:a=>e.handleTestConnection(t,e.data.apiKeys[`apiKey${t.id}`])},{default:p((()=>a[10]||(a[10]=[b(" Test Connection & Save ")]))),_:2},1032,["onClick"])])):h("",!0),t.repairdesk_api_key&&!t.is_edit?(d(),c("div",L,[m("span",N,f(t.repairdesk_api_key),1),m("div",O,[r(V,{color:"teal",dense:"",onClick:e=>t.is_edit=!0},{default:p((()=>a[11]||(a[11]=[m("i",{class:"material-icons text-lg"},"edit",-1)]))),_:2},1032,["onClick"]),r(V,{color:"red",dense:"",onClick:a=>e.handleDeleteApiKey(t,i)},{default:p((()=>a[12]||(a[12]=[m("i",{class:"material-icons text-lg"},"delete",-1)]))),_:2},1032,["onClick"])])])):h("",!0)])),_:1})])),_:1},8,["data"])),[[R,e.loading]])]),r(I,{page:e.data.page,"onUpdate:page":a[4]||(a[4]=a=>e.data.page=a),limit:e.data.limit,"onUpdate:limit":a[5]||(a[5]=a=>e.data.limit=a),data:e.tableOptions},null,8,["page","limit","data"])],64)):(d(),c("div",q,[m("div",z,[r(U,null,{label:p((()=>a[13]||(a[13]=[m("span",null,"What identify do you use in RepairDesk?",-1)]))),default:p((()=>[r(T,{disabled:e.loadingConfigs.update||e.loadingConfigs.fetch,modelValue:e.configs.identifier,"onUpdate:modelValue":a[6]||(a[6]=a=>e.handleUpdateConfig({identifier:a})),class:"radio--full"},{default:p((()=>[r(S,{label:"Imei"},{default:p((()=>a[14]||(a[14]=[b("IMEI")]))),_:1}),r(S,{label:"Serial"},{default:p((()=>a[15]||(a[15]=[b("Serial Number")]))),_:1})])),_:1},8,["disabled","modelValue"])])),_:1})])]))])}]]),G=a({async setup(){const{genSuspense:a}=e(),i=t(null);x();const l=v({modelValue:!0,closeTo:{name:"integration",query:{reload:1}},size:"lg"}),s=v({header:()=>"RepairDesk Config",default:()=>a(C(E,{ref:i}))}),o=C(U,l,s);return()=>C("div",[o])}});export{G as default};
