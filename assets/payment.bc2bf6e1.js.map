{"version":3,"file":"payment.bc2bf6e1.js","sources":["../../src/components/PaymentMethod/BankTransfer.vue","../../src/components/PaymentMethod/Default.vue","../../src/assets/payout-method-arrow.svg","../../src/components/PaymentMethod/Revolut.vue","../../src/constants/payment.js"],"sourcesContent":["<template>\n  <div class=\"mb-5\">\n    <div class=\"block\">\n      <label class=\"font-weight-bold\">Default Data</label>\n    </div>\n    <div class=\"block\">\n      <Select\n        by=\"id\"\n        class=\"w-full\"\n        :items=\"list\"\n        @input=\"setBank\"\n        :placeholder=\"isUseNewBankTransfer ? 'Add New Bank Transfer' : 'Choose Bank Transfer option'\"\n      >\n        <template v-slot:option=\"scope\">\n          <template v-if=\"!scope.item.bank_id && scope.item.is_new_bank\">\n            <option :value=\"scope.item\">Add New Bank Transfer</option>\n          </template>\n          <template v-else-if=\"Array.isArray(scope.item.bank_transfer)\">\n            <option :value=\"scope.item.bank_transfer\">\n              {{\n                scope.item.bank_transfer.map((attr) => attr.value).join(' - ')\n              }}\n            </option>\n          </template>\n        </template>\n      </Select>\n    </div>\n  </div>\n  <template v-if=\"isUseAvailableBankTransfer\">\n    <div\n      v-for=\"attribute in selectedAvailableBankTransfer.bank_transfer\"\n      :key=\"attribute.attribute_name\"\n      class=\"mb-5\"\n    >\n      <Input\n        class=\"w-full\"\n        :modelValue=\"attribute.value\"\n        type=\"text\"\n        :label=\"attribute.name\"\n        :disabled=\"disabled || isDisabled\"\n      />\n    </div>\n  </template>\n  <template v-else-if=\"isUseNewBankTransfer\">\n    <div v-for=\"attribute in defaultAttributes\" class=\"mb-5\">\n      <Input\n        v-model=\"data[attribute.attribute_name]\"\n        type=\"text\"\n        :label=\"attribute.name\"\n        :placeholder=\"attribute.name\"\n        class=\"w-full\"\n        disallow-copy\n        :disabled=\"disabled || isDisabled\"\n        :view=\"\n          (validation[attribute.attribute_name].$invalid && 'danger') ||\n          'default'\n        \"\n      />\n      <small\n        class=\"text-red-base block mt-2\"\n        v-for=\"(error, errorIndex) of validation[attribute.attribute_name]\n          .$errors\"\n        :key=\"errorIndex\"\n        >{{ error.$message }}.\n      </small>\n    </div>\n  </template>\n  <template v-else>\n    <div v-for=\"attribute in attributes\" class=\"mb-5\">\n      <Input\n        v-model=\"data[attribute.attribute_name]\"\n        type=\"text\"\n        :label=\"attribute.name\"\n        class=\"w-full\"\n        disallow-copy\n        :disabled=\"disabled || isDisabled\"\n        :view=\"\n          (validation[attribute.attribute_name].$invalid && 'danger') ||\n          'default'\n        \"\n      />\n      <small\n        class=\"text-red-base block mt-2\"\n        v-for=\"(error, errorIndex) of validation[attribute.attribute_name]\n          .$errors\"\n        :key=\"errorIndex\"\n        >{{ error.$message }}.\n      </small>\n    </div>\n  </template>\n</template>\n\n<script>\nimport { defineComponent, reactive, ref, watch, computed, onMounted } from 'vue'\nimport { useUser } from 'composable/user'\nimport Input from 'bbUi/components/input/input.vue'\nimport Select from 'bbUi/components/select/select.vue'\nimport { useVuelidate } from '@vuelidate/core'\nimport { buildBankValidationRules } from '@/validations/index'\n\nexport default defineComponent({\n  components: {\n    Input,\n    Select\n  },\n  props: {\n    list: {\n      type: Array,\n      default: () => []\n    },\n    data: {\n      type: Object,\n      default: () => ({\n        tf_full_name: null,\n        tf_routing_number: null,\n        tf_account_number: null,\n        bank_id: null\n      })\n    },\n    disabled: {\n      type: Boolean,\n      default: false\n    },\n    defaultAttributes: {\n      type: Array,\n      default: []\n    },\n    attributes: {\n      type: Array,\n      default: []\n    }\n  },\n  emits: ['update:data'],\n  setup(props, { emit }) {\n    const { bankTransferConfig, isUseIBAN } = useUser()\n    const data = reactive({\n      payment_method: 'Bank Transfer'\n    })\n    const list = ref([...props.list])\n\n    const rules = computed(() => {\n      // remove validation if use available registered bank transfer option\n      if (isUseAvailableBankTransfer.value) return {}\n      const sourceAttributes = isUseNewBankTransfer.value\n        ? props.defaultAttributes\n        : props.attributes\n\n      return buildBankValidationRules(sourceAttributes)\n    })\n    const isUseAvailableBankTransfer = computed(() => !!data.bank_id)\n    const isUseNewBankTransfer = computed(() => !!data.is_new_bank)\n    const selectedAvailableBankTransfer = computed(() => {\n      return (\n        list.value.find((bankTransfer) => bankTransfer.id === data.bank_id) ||\n        {}\n      )\n    })\n    const isDisabled = computed(\n      () => !!data.bank_id || isIncompleteBankTransfer.value\n    )\n    const isIncompleteBankTransfer = computed(\n      () => !isUseAvailableBankTransfer.value && !isUseNewBankTransfer.value\n    )\n\n    const validation = useVuelidate(rules, data, {\n      $lazy: true\n    })\n    const validate = () => {\n      if (isIncompleteBankTransfer.value) return false\n      validation.value.$validate()\n      return !validation.value.$invalid\n    }\n    const setBank = (e) => {\n      resetCurrentData()\n      for (const [key, value] of Object.entries(e)) {\n        if (key === 'id') {\n          data.bank_id = value\n          continue\n        }\n        if (key === 'bank_transfer') {\n          for (const attr of value) {\n            if (attr.attribute_name && attr.value) {\n              data[attr.attribute_name] = attr.value\n            }\n          }\n          continue\n        }\n        data[key] = value\n      }\n    }\n    list.value.unshift({\n      bank_id: null,\n      is_new_bank: true\n    })\n\n    const onlyNumber = ($event) => {\n      let keyCode = $event.keyCode ? $event.keyCode : $event.which\n      if ((keyCode < 48 || keyCode > 57) && keyCode !== 46) {\n        $event.preventDefault()\n      }\n    }\n    const resetCurrentData = () => {\n      const bankTransferAttributes = [\n        ...props.attributes,\n        ...props.defaultAttributes,\n        ...(selectedAvailableBankTransfer.value?.bank_transfer || [])\n      ]\n\n      for (let attribute of bankTransferAttributes) {\n        if (Object.keys(data).includes(attribute.attribute_name))\n          delete data[attribute.attribute_name]\n      }\n    }\n\n    onMounted(() => {\n      for (const [dataKey, dataValue] of Object.entries(props.data)) {\n        data[dataKey] = dataValue\n      }\n    })\n\n    watch(\n      () => ({ ...data }),\n      () => {\n        emit('update:data', data)\n      }\n    )\n    watch(\n      () => JSON.stringify(props.data),\n      () => {\n        for (const [dataKey, dataValue] of Object.entries(props.data)) {\n          if (isIncompleteBankTransfer.value) {\n            if (dataKey === 'bank_transfer') {\n              for (let attribute of props.data.bank_transfer) {\n                data[attribute.attribute_name] = attribute.value\n              }\n              return\n            }\n            data[dataKey] = dataValue\n          }\n        }\n      },\n      {\n        deep: true,\n        immediate: true\n      }\n    )\n\n    return {\n      data,\n      validation,\n      list,\n      isDisabled,\n      selectedAvailableBankTransfer,\n      isUseIBAN,\n      isUseAvailableBankTransfer,\n      isUseNewBankTransfer,\n      isIncompleteBankTransfer,\n      bankTransferConfig,\n      onlyNumber,\n      validate,\n      setBank\n    }\n  }\n})\n</script>\n","<template>\n  <div class=\"mb-5 text-center py-52 flex items-center justify-center relative\">\n    <p class=\"text-md text-grey-03\">How will your customer be paid?</p>\n    <img class=\"absolute left-0 xl:block lg:block left-0 hidden\" src=\"@/assets/payout-method-arrow.svg\" alt=\"select payout method\">\n  </div>\n</template>\n\n<script>\nimport { defineComponent } from 'vue'\n\nexport default defineComponent({\n  props: {\n    data: {\n      type: Object,\n      default: () => ({})\n    }\n  },\n  setup(props, { emit }) {\n    return {\n    }\n  }\n})\n</script>","export default \"__VITE_ASSET__36819bea__\"","<template>\n    <div class=\"mb-5\">\n      <Input v-model=\"data.revtag_or_email_or_phone\" label=\"Revtag, Email or Phone Number\" class=\"w-full\" :disabled=\"disabled\" :view=\"validation.revtag_or_email_or_phone.$invalid && 'danger' || 'default'\" />\n      <small class=\"text-red-base block mt-2\" v-for=\"(error, errorIndex) of validation.revtag_or_email_or_phone.$errors\" :key=\"errorIndex\">{{ error.$message }}. </small>\n    </div>\n  </template>\n  \n  <script>\n  import { defineComponent, reactive, watch } from 'vue'\n  import Input from 'bbUi/components/input/input.vue'\n  import { useVuelidate } from '@vuelidate/core'\n  import { required } from '@/validations/index'\n  \n  export default defineComponent({\n    components: {\n      Input\n    },\n    props: {\n      data: {\n        type: Object,\n        default: () => ({\n          revtag_or_email_or_phone: null\n        })\n      },\n      disabled: {\n        type: Boolean,\n        default: false\n      }\n    },\n    emits: [\n      'update:data'\n    ],\n    setup(props, { emit }) {\n      const data = reactive({...props.data})\n      const rules = {\n        revtag_or_email_or_phone: {\n          required,\n        }\n      }\n      const validation = useVuelidate(rules, data, {\n        $lazy: true\n      })\n      const validate = () => {\n        validation.value.$validate()\n        return !validation.value.$invalid\n      }\n  \n      watch(() => ({...data}), () => {\n        emit('update:data', data)\n      })\n  \n      return {\n        data,\n        validation,\n        validate\n      }\n    }\n  })\n  </script>\n  ","const PAYMENT_ID = {\n\t'CASH': 7,\n\t'STORE_CREDIT': 5,\n\t'VIRTUAL_DEBIT_CARD': 18,\n\t'GIFT_CARD': 19,\n\t'BANK_TRANSFER': 4,\n\t'BILL': 24\n}\n\nexport {\n\tPAYMENT_ID\n}"],"names":["_sfc_main","defineComponent","components","Input","Select","props","list","type","Array","default","data","Object","tf_full_name","tf_routing_number","tf_account_number","bank_id","disabled","Boolean","defaultAttributes","attributes","emits","[object Object]","emit","bankTransferConfig","isUseIBAN","useUser","reactive","payment_method","ref","rules","computed","isUseAvailableBankTransfer","value","sourceAttributes","isUseNewBankTransfer","buildBankValidationRules","is_new_bank","selectedAvailableBankTransfer","find","bankTransfer","id","isDisabled","isIncompleteBankTransfer","validation","useVuelidate","$lazy","unshift","resetCurrentData","bankTransferAttributes","_a","bank_transfer","attribute","keys","includes","attribute_name","onMounted","dataKey","dataValue","entries","watch","__spreadValues","JSON","stringify","deep","immediate","onlyNumber","$event","keyCode","which","preventDefault","validate","$validate","$invalid","setBank","e","key","attr","_hoisted_1","class","_hoisted_4","_hoisted_5","_openBlock","_createElementBlock","_Fragment","_cache","_createElementVNode","_hoisted_2","_createVNode","_component_Select","by","items","_ctx","onInput","_withCtx","scope","item","_hoisted_3","_renderList","_component_Input","modelValue","label","name","onUpdate:modelValue","placeholder","disallow-copy","view","openBlock","_hoisted_6","setup","$props","$setup","$data","$options","src","revtag_or_email_or_phone","required","$errors","error","errorIndex","PAYMENT_ID","CASH","STORE_CREDIT","VIRTUAL_DEBIT_CARD","GIFT_CARD","BANK_TRANSFER","BILL"],"mappings":"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"}