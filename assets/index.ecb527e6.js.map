{"version":3,"file":"index.ecb527e6.js","sources":["../../src/components/LegalTerms/PrivacyForm.vue","../../src/components/LegalTerms/TermsForm.vue","../../src/views/setting/legal-terms/index.vue","../../src/views/setting/legal-terms/index.js"],"sourcesContent":["<template>\n  <div class=\"w-full\">\n    <TextEditor ref=\"refTextEditor\" v-model=\"data.textinfo\" :options=\"ckeditor\" />\n    <small class=\"text-red-base mt-2 block\" v-for=\"(error, errorIndex) of validation.textinfo.$errors\" :key=\"errorIndex\">{{ error.$message }}. </small>\n  </div>\n</template>\n\n<script>\nimport { defineComponent, reactive, watch, ref } from 'vue'\nimport { useVuelidate } from '@vuelidate/core'\nimport { required } from '@/validations/index'\nimport { Editor as \nClassicEditor } from '@erdeprsty/ckeditor5-custom-build'\n\nimport Input from 'bbUi/components/input/input.vue'\nimport Button from 'bbUi/components/button/button.vue'\nimport Select from 'bbUi/components/select/select.vue'\nimport TextEditor from 'components/TextEditor.vue'\n\nexport default defineComponent({\n  name: 'PrivacyForm',\n  components: {\n    Input,\n    Button,\n    Select,\n    TextEditor\n  },\n  props: {\n    data: {\n      type: Object,\n      default: () => ({\n        textinfo: ''\n      })\n    }\n  },\n  emits: ['change'],\n  setup(props, {emit}) { \n    const refTextEditor = ref(null)\n    const data = reactive(props.data)\n    const rules = {\n      textinfo: required\n    }\n    const ckeditor = reactive({\n      editor: ClassicEditor,\n      config: {\n        htmlSupport: {\n          allow: [{\n            styles: true,\n            classes: true\n          }]\n        }\n      }\n    })\n    const validation = useVuelidate(rules, data, {\n      $lazy: true\n    })\n    const validate = async () => {\n      const isReadyEditor = refTextEditor.value.isEditorReady\n      if(!isReadyEditor) return false\n      const isSaved = await refTextEditor.value.forceSave()\n      if(!isSaved) return false\n      validation.value.$validate()\n      return !validation.value.$invalid\n    }\n    \n    watch(() => ({...data}), (newData) => {\n      emit('change', newData)\n    }, {\n      deep: true\n    })\n\n    return {\n      refTextEditor,\n      data,\n      validation,\n      ckeditor,\n      validate\n    }\n  },\n})\n</script>","<template>\n  <div class=\"w-full\">\n    <TextEditor ref=\"refTextEditor\" v-model=\"data.textinfo\" :options=\"ckeditor\"/>\n    <small class=\"text-red-base mt-2 block\" v-for=\"(error, errorIndex) of validation.textinfo.$errors\" :key=\"errorIndex\">{{ error.$message }}. </small>\n  </div>\n</template>\n\n<script>\nimport { defineComponent, reactive, watch, ref } from 'vue'\nimport { useVuelidate } from '@vuelidate/core'\nimport { required } from '@/validations/index'\nimport { Editor as \nClassicEditor } from '@erdeprsty/ckeditor5-custom-build'\n\nimport Input from 'bbUi/components/input/input.vue'\nimport Button from 'bbUi/components/button/button.vue'\nimport Select from 'bbUi/components/select/select.vue'\nimport TextEditor from 'components/TextEditor.vue'\n\nexport default defineComponent({\n  name: 'TermsForm',\n  components: {\n    Input,\n    Button,\n    Select,\n    TextEditor\n  },\n  props: {\n    data: {\n      type: Object,\n      default: ({\n        textinfo: ''\n      })\n    }\n  },\n  emits: ['change'],\n  setup(props, {emit}) { \n    const refTextEditor = ref(null)\n    const data = reactive(props.data)\n    const rules = {\n      textinfo: required\n    }\n    const ckeditor = reactive({\n      editor: ClassicEditor,\n      config: {\n         htmlSupport: {\n          allow: [{\n            styles: true,\n            classes: true\n          }]\n        }\n      }\n    })\n    const validation = useVuelidate(rules, data, {\n      $lazy: true\n    })\n    const validate = async () => {\n      const isReadyEditor = refTextEditor.value.isEditorReady\n      if(!isReadyEditor) return false\n      const isSaved = await refTextEditor.value.forceSave()\n      if(!isSaved) return false\n      validation.value.$validate()\n      return !validation.value.$invalid\n    }\n\n    watch(() => ({...data}), (newData) => {\n      emit('change', newData)\n    }, {\n      deep: true\n    })\n\n    return {\n      refTextEditor,\n      data,\n      validation,\n      ckeditor,\n      validate\n    }\n  },\n})\n</script>\n\n<style>\n.ck-editor__editable {\n  height: 500px;\n}\n</style>","<template>\n  <div class=\"flex xl:flex-row flex-col justify-between mb-8\">\n    <div class=\"lg:flex lg:divide-x lg:divide-grey-01\">\n        <div class=\"flex items-center lg:pr-4 lg:mb-0 mb-4\">\n          <router-link :to=\"{ name: 'setting' }\" class=\"text-dark mr-4\"><span class=\"material-icons\">chevron_left</span></router-link>\n          <h5>Legal Terms</h5>\n        </div>\n        <div class=\"lg:pl-4 flex items-center\">\n          <Breadcrumb :items=\"breadcrumb\">\n            <span class=\"material-icons\">chevron_right</span>\n          </Breadcrumb>\n        </div>\n      </div>\n  </div>\n  <Card class=\"mb-6\">\n    <template #header>\n      <h2 class=\"font-semibold text-lg\">Privacy</h2>\n    </template>\n    <PrivacyForm v-model:data=\"formData.privacy\" ref=\"refPrivacyForm\" />\n    <template #footer>\n      <div class=\"flex justify-end\">\n        <Button color=\"teal\" view=\"smooth\" @click=\"updatePrivacy\" :loading=\"loading.update.privacy\">Save</Button>\n      </div>\n    </template>\n  </Card>\n  <Card class=\"my-6\">\n    <template #header>\n      <h2 class=\"font-semibold text-lg\">Terms</h2>\n    </template>\n    <TermsForm v-model:data=\"formData.terms\" ref=\"refTermsForm\" />\n    <template #footer>\n      <div class=\"flex justify-end\">\n        <Button color=\"teal\" view=\"smooth\" @click=\"updateTerms\" :loading=\"loading.update.terms\">Save</Button>\n      </div>\n    </template>\n  </Card>\n</template>\n\n<script>\nimport { defineComponent, ref } from 'vue'\nimport { useLegalTerms } from 'composable/setting'\nimport Card from 'bbUi/components/card/card.vue'\nimport Input from 'bbUi/components/input/input.vue'\nimport Button from 'bbUi/components/button/button.vue'\nimport Breadcrumb from 'bbUi/components/breadcrumb/breadcrumb.vue'\nimport Modal from 'bbUi/components/modal/modal.vue'\nimport PrivacyForm from 'components/LegalTerms/PrivacyForm.vue'\nimport TermsForm from 'components/LegalTerms/TermsForm.vue'\nimport { ElMessage } from 'element-plus'\n\nexport default defineComponent({\n  components: {\n    Card,\n    Input,\n    Button,\n    Breadcrumb,\n    Modal,\n    PrivacyForm,\n    TermsForm\n  },\n  async setup(props, { emit }) {\n    const refPrivacyForm = ref(null)\n    const refTermsForm = ref(null)\n    const { stateShow, loading, formData, actionAll, actionUpdatePrivacy, actionUpdateTerms } = useLegalTerms()\n\n    const breadcrumb = [{\n      text: 'Settings',\n      to: {\n        name: 'setting'\n      }\n    }, {\n      text: 'Legal Terms'\n    }]\n\n    const updatePrivacy = async () => {\n      loading.update.privacy = true\n      const isValid = refPrivacyForm.value?.validate && await refPrivacyForm.value.validate() || false\n      if(isValid) await actionUpdatePrivacy(() => {\n        ElMessage({\n          type: 'success',\n          message: 'Privacy Term updated'\n        })\n      })\n      else loading.update.privacy = false\n    }\n\n    const updateTerms = async () => {\n      loading.update.terms = true\n      const isValid = refTermsForm.value?.validate && await refTermsForm.value.validate() || false\n      if(isValid) await actionUpdateTerms(() => {\n          ElMessage({\n          type: 'success',\n          message: 'Terms updated'\n        })\n      })\n      else loading.update.terms = false\n    }\n\n    await actionAll()\n    Object.assign(formData, {\n      privacy: {\n        textinfo: stateShow.value?.privacy.textinfo || ''\n      },\n      terms: {\n        textinfo: stateShow.value?.terms.textinfo || ''\n      }\n    })\n\n    return {\n      breadcrumb,\n      refPrivacyForm,\n      refTermsForm,\n      loading,\n      formData,\n      updatePrivacy,\n      updateTerms\n    }\n  }\n})\n</script>","import { defineComponent } from 'vue'\nimport { useSuspense } from 'composable/components'\nimport index from './index.vue'\n\nexport default defineComponent({\n  setup() {\n    const { genSuspense } = useSuspense()\n\n    return () => genSuspense(index)\n  }\n})"],"names":["_sfc_main","defineComponent","name","components","Input","Button","Select","TextEditor","props","data","type","Object","default","textinfo","emits","[object Object]","emit","refTextEditor","ref","reactive","rules","required","ckeditor","editor","ClassicEditor","exports","Editor","config","htmlSupport","allow","styles","classes","validation","useVuelidate","$lazy","watch","__spreadValues","newData","deep","validate","async","value","isEditorReady","forceSave","$validate","$invalid","_openBlock","_createElementBlock","_hoisted_1","_createVNode","_component_TextEditor","modelValue","_ctx","onUpdate:modelValue","_cache","$event","_Fragment","_renderList","$errors","error","errorIndex","class","Card","Breadcrumb","Modal","PrivacyForm","TermsForm","refPrivacyForm","refTermsForm","stateShow","loading","formData","actionAll","actionUpdatePrivacy","actionUpdateTerms","useLegalTerms","assign","privacy","_a","terms","_b","breadcrumb","text","to","updatePrivacy","update","_a2","_u","message","updateTerms","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_createElementVNode","_component_router_link","_withCtx","items","header","footer","_component_Button","color","view","onClick","_component_PrivacyForm","onUpdate:data","_hoisted_6","_component_TermsForm","index","genSuspense","useSuspense"],"mappings":"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"}