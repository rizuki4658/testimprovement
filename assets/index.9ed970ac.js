import{k as e,o as a,t as o,K as l,W as t,a5 as r,O as n,f as s,g as i,_ as d,m as c,$ as u,B as m,D as p,w as g,S as f,a1 as w,a2 as h,I as v,A as b,F as y}from"./vendor.9695fe57.js";import{_ as x,b as _,f as k,e as C,d as S,n as V,E as R,F as T,c as j}from"./index.35a87af4.js";import{C as I}from"./card.85454cb1.js";import{u as $}from"./index.f40e4a9e.js";import{r as P,e as A}from"./index.54844a74.js";import{_ as F}from"./logo.95f55a2b.js";import{_ as L}from"./verify-phone.fdfb0887.js";import"./index.6b6f6369.js";const E=e({name:"ChangelogEmbed",props:{label:{type:String,default:null},floating:{type:Boolean,default:!1}}}),U={class:"embed-changelog flex overflow-hidden"};var q=x(E,[["render",function(e,t,r,n,s,i){return a(),o("span",U,l(e.label),1)}]]);const B=e({name:"ChangelogEmbedStatic",props:{label:{type:String,default:null},floating:{type:Boolean,default:!1},color:{type:String,default:null}},setup(){t((()=>{window.addChangelogIframeStatic(),window.showChangelogIframeStatic()}))}}),D=["data-color"];const N=e({name:"Login",components:{Button:_,Card:I,Input:k,Checkbox:C,Modal:S,ChangelogEmbed:q,ChangelogEmbedStatic:x(B,[["render",function(e,l,t,r,n,s){return a(),o("div",{class:"embed-static relative","data-color":e.color},null,8,D)}]])},setup(){const e=r(),a=n(),{resendCountdownTimer:o,data:l,loading:c,loadingResendTwoFactorAuth:u,modal:m,resendTwoFactorAuthCode:p,login:g,setResendCountdownTimer:f,unsetResendCountdownTimerdata:w}=V(),h=s(!1),v=s(""),b=i((()=>0!==o.value)),y=()=>{const o=JSON.parse(localStorage.getItem("goHighLevelToken"));_()&&g((async l=>{if(l.errors&&l.errors.connection_name){if(1==l.errors.is_dual_auth_veification)return m.two_factor_auth=!0,void(v.value=l.errors.phone_number);window.localStorage.setItem("connection_name",l.errors.connection_name),window.localStorage.setItem("registration_email",l.errors.email),a.push({name:"verify"})}else{if(l.re_login)return window.localStorage.setItem("region_domain",l.domain),window.localStorage.setItem("region_socket",l.socket),void y();if(window.localStorage.setItem("token",l.token),T(),o)return a.push({path:o.path,query:o.query});a.push({path:e.query.redirect||"/dashboard"})}}))},x=$({email:{required:P,email:A},password:{required:P}},l,{$lazy:!0}),_=()=>(x.value.$validate(),!x.value.$invalid);return t((()=>{1==e.query.expired&&(a.push({name:"login"}),d({type:"warning",message:"Your session has expired"}))})),{data:l,loading:c,loadingResendTwoFactorAuth:u,modal:m,showPassword:h,verifiedPhoneNumber:v,resendCountdownTimer:o,isWhiteLabel:R,isDisableResend:b,loginSubmit:y,handleResendVerificationCode:async()=>{u.value||b.value||await p((()=>{f(60),d({type:"success",message:`The verification code is being sent to ${v.value}`})}))},handleUnsetTwoFactorAuth:()=>{l.phone_code=null,w()},handleRegister:()=>{var e;if(R.value&&(null==(e=j[window.whiteLabel.company])?void 0:e.register_link))return window.open(j[window.whiteLabel.company].register_link);window.open(`${window.location.origin}/onboarding/1?plan=starter`,"_self","noopener noreferrer")},validation:x}}}),H={class:"login-page flex flex-col justify-center gap-6"},W={class:"flex-1 flex flex-col items-center gap-6 justify-center"},z={class:"space-y-16"},M={class:"form"},O={class:"flex items-center"},Y={class:"flex flex-wrap flex-col items-center text-center mb-6"},J={class:"text-grey-04"},K={class:"mb-8"},G={class:"text-center mb-8"},Q={class:"text-sm text-grey-03"},X={class:"text-grey-02"};var Z=x(N,[["render",function(e,t,r,n,s,i){const d=c("Input"),x=c("Checkbox"),_=c("router-link"),k=c("Button"),C=c("Card"),S=c("Modal"),V=u("maska");return a(),o(w,null,[m("div",H,[m("div",W,[p(C,{style:{maxWidth:"420px"},class:"rounded-xl w-full px-6 py-4"},{default:g((()=>[m("div",z,[t[12]||(t[12]=m("div",{class:"flex justify-center items-center flex-col"},[m("img",{src:F,alt:"Brand logo",class:"mb-2",width:"180",whitelabel:"image-replace","data-image-type":"logo"}),m("p",{class:"text-dark"},"Login into your dashboard")],-1)),m("div",M,[m("form",{class:"space-y-5",onSubmit:t[4]||(t[4]=f(((...a)=>e.loginSubmit&&e.loginSubmit(...a)),["prevent"]))},[m("div",null,[p(d,{placeholder:"Email Address",name:"email",id:"email",modelValue:e.data.email,"onUpdate:modelValue":t[0]||(t[0]=a=>e.data.email=a),view:e.validation.email.$invalid?"danger":"default",block:""},null,8,["modelValue","view"]),(a(!0),o(w,null,h(e.validation.email.$errors,((e,t)=>(a(),o("span",{key:t,class:"text-red-base mt-2 block"},l(e.$message)+". ",1)))),128))]),m("div",null,[p(d,{placeholder:"Password",name:"password",id:"password",modelValue:e.data.password,"onUpdate:modelValue":t[2]||(t[2]=a=>e.data.password=a),type:e.showPassword?"text":"password",view:e.validation.password.$invalid?"danger":"default",block:"",icon:"",right:""},{icon:g((()=>[m("span",{class:"material-icons block cursor-pointer text-grey-03",onClick:t[1]||(t[1]=a=>e.showPassword=!e.showPassword)},l(e.showPassword?"visibility_off":"visibility"),1)])),_:1},8,["modelValue","type","view"]),(a(!0),o(w,null,h(e.validation.password.$errors,((e,t)=>(a(),o("span",{key:t,class:"text-red-base mt-2 block"},l(e.$message)+". ",1)))),128))]),m("div",O,[p(x,{type:"default",class:"text-grey-02 font-normal",modelValue:e.data.is_remember,"onUpdate:modelValue":t[3]||(t[3]=a=>e.data.is_remember=a),value:1,"value-off":0},{default:g((()=>t[9]||(t[9]=[v("Remember me")]))),_:1},8,["modelValue"]),p(_,{class:"ml-auto",to:{name:"forgotPassword"}},{default:g((()=>t[10]||(t[10]=[v("Forgot Password")]))),_:1})]),m("div",null,[p(k,{view:"filled",color:"teal",type:"submit",loading:e.loading,block:""},{default:g((()=>t[11]||(t[11]=[v("Log in")]))),_:1},8,["loading"])])],32)])])])),_:1}),m("div",null,[t[13]||(t[13]=v(" Don't have an account? ")),m("a",{onClick:t[5]||(t[5]=f(((...a)=>e.handleRegister&&e.handleRegister(...a)),["prevent"])),rel:"noreferrer noopener"},"Sign up")])]),t[14]||(t[14]=m("div",{whitelabel:"remove",class:"py-4"},[m("div",{class:"flex items-center justify-center gap-4"},[m("a",{href:"https://www.reusely.com/privacy-policy",rel:"noreferrer noopener",class:"hover:underline text-grey-03 hover:text-grey-03",target:"_blank"},"Privacy"),m("a",{href:" https://www.reusely.com/terms-of-service",rel:"noreferrer noopener",class:"border-l border-r px-4 border-grey-02 hover:underline text-grey-03 hover:text-grey-03",target:"_blank"},"Terms"),m("a",{href:"https://help.reusely.com",rel:"noreferrer noopener",target:"_blank",class:"cursor-pointer hover:underline text-grey-03 hover:text-grey-03"}," Help ")]),m("p",{class:"text-center mt-4",whitelabel:"text-replace","data-label":"copy right"},"Â© 2022 Reusely.com")],-1))]),p(S,{modelValue:e.modal.two_factor_auth,"onUpdate:modelValue":t[8]||(t[8]=a=>e.modal.two_factor_auth=a),size:"xs","hide-footer":"",onClose:e.handleUnsetTwoFactorAuth},{default:g((()=>[m("div",Y,[t[17]||(t[17]=m("img",{class:"mb-6",src:L,alt:"verify phone number icon"},null,-1)),t[18]||(t[18]=m("h6",{class:"mb-2"},"Verify Phone Number",-1)),m("p",J,[t[15]||(t[15]=v("A text message with a 6-digit verification code was just ")),t[16]||(t[16]=m("br",null,null,-1)),v(" sent to "+l(e.verifiedPhoneNumber),1)])]),m("div",K,[b(p(d,{modelValue:e.data.phone_code,"onUpdate:modelValue":t[6]||(t[6]=a=>e.data.phone_code=a),class:"mb-8",label:"Enter Your Verification Code",block:""},null,8,["modelValue"]),[[V,"######"]]),p(k,{onClick:e.loginSubmit,color:"teal",block:"",disabled:!e.data.phone_code,loading:e.loading},{default:g((()=>t[19]||(t[19]=[v("Verify and Log In")]))),_:1},8,["onClick","disabled","loading"])]),m("div",G,[m("p",Q,[t[22]||(t[22]=v("It may take a minute to receive your code. ")),t[23]||(t[23]=m("br",null,null,-1)),t[24]||(t[24]=v(" Haven't received it? ")),m("a",{class:y(["resend-code",e.loadingResendTwoFactorAuth||e.isDisableResend&&"--loading"]),onClick:t[7]||(t[7]=f(((...a)=>e.handleResendVerificationCode&&e.handleResendVerificationCode(...a)),["prevent"]))},[t[20]||(t[20]=v("Resend a new code")),m("span",X,l(e.isDisableResend?` (${e.resendCountdownTimer})`:""),1),t[21]||(t[21]=v("."))],2)])])])),_:1},8,["modelValue","onClose"])],64)}]]);export{Z as default};
