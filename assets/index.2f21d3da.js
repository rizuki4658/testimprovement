var t=Object.defineProperty,a=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,n=(a,e,o)=>e in a?t(a,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[e]=o;import{u as l}from"./components.00bf6492.js";import{f as s}from"./integration.bf33c2bd.js";import{d as c,f as i,e as d,b as r,P as u,_ as p,g as m}from"./index.c2f66179.js";import{_ as f}from"./tab.c78d43fc.js";import{k as g,f as b,y,_,m as A,$ as S,o as h,t as v,B as w,D as j,w as k,I as C,A as x,n as U,U as D,S as I,a1 as P,O,r as T,g as V,a6 as B,a3 as L,aI as F}from"./vendor.9695fe57.js";import{_ as K}from"./fieldset.400d29ed.js";import{S as M}from"./select.9d161386.js";import{_ as E}from"./attention.c511405b.js";import{S as z}from"./ShippingKitForm.dea13cad.js";import"./LoadingCard.c138fa92.js";import"./card.f57f7ca5.js";import"./index.f40e4a9e.js";import"./TextEditor.e89fd1ac.js";const Y=g({components:{Modal:c,Input:i,Fieldset:K,Checkbox:d,Select:M,Button:r,Pagination:u},async setup(t){const{state:l,data:c,loading:i,modal:d,actionAccounts:r,actionDeleteAccount:u,actionUpdateCurrentLocation:p}=s(),f=b(null);y((()=>({limit:c.limit})),(()=>{c.page=1}),{deep:!0}),y((()=>((t,l)=>{for(var s in l||(l={}))e.call(l,s)&&n(t,s,l[s]);if(a)for(var s of a(l))o.call(l,s)&&n(t,s,l[s]);return t})({},c)),m((async()=>{await r()}),500),{deep:!0});return{state:l,data:c,modal:d,loading:i,selectedAccount:f,updateLocation:async t=>{await p(t.id),await r()},deleteAccount:async()=>{const t=f.value.id;u(t,(async()=>{d.deleteAccount=!1,_({type:"success",message:"USPS account deleted"}),await r()}))},onDelete:async t=>{d.deleteAccount=!0,f.value=t},unsetData:()=>{f.value=null}}}}),$={class:"grid grid-cols-1 gap-6"},q={class:"flex justify-between items-center"},G={key:0,class:"material-icons text-xl text-green-04"},H={class:"text-center py-10"};const J=g({components:{Modal:c,Button:r,Tab:f,Accounts:p(Y,[["render",function(t,a,e,o,n,l){const s=A("Select"),c=A("Button"),i=A("TableColumn"),d=A("Table"),r=A("Pagination"),u=A("Modal"),p=S("loading");return h(),v(P,null,[w("div",$,[w("div",q,[w("div",null,[a[5]||(a[5]=w("span",{class:"font-semibold block mb-4"},"Current USPS Account: ",-1)),j(s,{modelValue:t.state.current_account.current_location,by:"location",name:"location",class:"w-64",items:t.state.current_account.list_location,onInput:t.updateLocation},null,8,["modelValue","items","onInput"])]),w("div",null,[j(c,{color:"teal",to:{name:"integrationUspsCreate"},link:""},{default:k((()=>a[6]||(a[6]=[w("span",{class:"material-icons text-lg"},"add",-1),C(" Add USPS Account")]))),_:1})])]),x((h(),U(d,{class:"mb-6",data:t.state.accounts.data,ref:"refTable"},{default:k((()=>[j(i,{prop:"user_id",label:"User ID"}),j(i,{prop:"merchant_account_code",label:"Merchant Account Code"}),j(i,{prop:"mid",label:"MID"}),j(i,{prop:"location",label:"Location"}),j(i,{prop:"is_default",label:"Set as Default"},{default:k((t=>[1===t.row.is_default?(h(),v("span",G,"check_circle")):D("",!0)])),_:1}),j(i,{prop:"action",label:""},{default:k((e=>[w("div",{class:"lg:opacity-0 group-hover:opacity-100 transition-opacity",onClick:a[0]||(a[0]=I((()=>{}),["stop"]))},[j(c,{color:"teeal",to:{name:"integrationUspsEdit",params:{uspsId:e.row.id}},class:"mr-2",link:"",dense:""},{default:k((()=>a[7]||(a[7]=[w("span",{class:"material-icons text-xl"},"edit",-1)]))),_:2},1032,["to"]),1!==e.row.is_default?(h(),U(c,{key:0,onClick:a=>t.onDelete(e.row),view:"smooth",color:"red",dense:""},{default:k((()=>a[8]||(a[8]=[w("span",{class:"material-icons text-xl"},"delete",-1)]))),_:2},1032,["onClick"])):D("",!0)])])),_:1})])),_:1},8,["data"])),[[p,t.loading.updateCurrentLocation]]),j(r,{page:t.data.accounts.page,"onUpdate:page":a[1]||(a[1]=a=>t.data.accounts.page=a),limit:t.data.accounts.limit,"onUpdate:limit":a[2]||(a[2]=a=>t.data.accounts.limit=a),data:t.state.accounts},null,8,["page","limit","data"])]),j(u,{modelValue:t.modal.deleteAccount,"onUpdate:modelValue":a[4]||(a[4]=a=>t.modal.deleteAccount=a),size:"xs","hide-header":"","hide-footer":""},{default:k((()=>[w("div",H,[a[11]||(a[11]=w("img",{class:"mb-10 mx-auto",src:E,alt:"Success Icon"},null,-1)),a[12]||(a[12]=w("div",{class:"mt-8 mb-10"},[w("h5",{class:"mb-4"},"Attention!"),w("p",{class:"my-5"},"Are you sure want to delete this account?")],-1)),j(c,{view:"smooth",color:"red",class:"mr-3",loading:t.loading.deleteAccount,onClick:t.deleteAccount},{default:k((()=>a[9]||(a[9]=[C("Yes, Delete")]))),_:1},8,["loading","onClick"]),j(c,{view:"outlined",color:"teal",class:"bg-white",disabled:t.loading.deleteAccount,onClick:a[3]||(a[3]=a=>t.modal.deleteAccount=!1)},{default:k((()=>a[10]||(a[10]=[C("Cancel")]))),_:1},8,["disabled"])])])),_:1},8,["modelValue"])],64)}]]),ShippingKitForm:z},async setup(){const{state:t,loading:a,data:e,actionAll:o,actionUpdateShippingKit:n}=s(),l=O(),c=b(null),i=T({items:[{name:"Account",component:"Accounts"}],current:"Accounts"}),d=V((()=>{if("ShippingKitForm"===i.current)return Object.assign({},{data:e.shipping_kit})}));return await o(),{state:t,data:e,loading:a,tab:i,refTabComponent:c,componentBind:d,updateData:async()=>{switch(i.current){case"ShippingKitForm":await n((()=>{_({type:"success",message:"USPS Shipping kit updated!"}),l.push({name:"integration"})}))}}}}}),N={class:"flex justify-end mt-6"};var Q=p(J,[["render",function(t,a,e,o,n,l){const s=A("Tab"),c=A("Button"),i=S("loading");return h(),v(P,null,[x((h(),v("div",null,[j(s,{modelValue:t.tab.current,"onUpdate:modelValue":a[0]||(a[0]=a=>t.tab.current=a),items:t.tab.items,component:""},null,8,["modelValue","items"]),(h(),U(F,null,[(h(),U(B(t.tab.current),L(t.componentBind,{ref:"refTabComponent"}),null,16))],1024))])),[[i,t.loading.all]]),w("div",N,["Accounts"!==t.tab.current?(h(),U(c,{key:0,color:"teal",onClick:t.updateData,loading:t.loading.update},{default:k((()=>a[1]||(a[1]=[C("Save")]))),_:1},8,["onClick","loading"])):D("",!0)])],64)}]]),R=g({setup(){const{genSuspense:t}=l();return()=>t(Q)}});export{R as default};
