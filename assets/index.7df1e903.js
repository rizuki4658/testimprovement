import{u as a}from"./components.2c51ae72.js";import{k as e,_ as o,m as t,o as l,t as s,D as n,w as i,B as r,I as d,a2 as u,a3 as c,K as g,f as m,a5 as p,O as f,r as v,x as y}from"./vendor.f1efedad.js";import{b,j as _,f as x,_ as h,v as j,d as w}from"./index.ec266ec1.js";import{a as A}from"./integration.db2aa4c7.js";import{u as G}from"./index.32689823.js";import{r as k}from"./index.a87b789d.js";import"./LoadingCard.93d3634e.js";import"./card.198a6be1.js";import"./index.05b14cb2.js";var C=h(e({components:{Button:b,Alert:_,Input:x},async setup(){const{state:a,data:e,actionAll:t,actionUpdate:l,loading:s}=A(),n=G({google_analytic_code:{required:k}},e,{$lazy:!0});return await Promise.all([t()]),{state:a,data:e,loading:s,validation:n,update:async(a=(()=>{}))=>{if(!(n.value.$validate(),!n.value.$invalid))return;const t=Object.assign({},{google_analytic_code:e.google_analytic_code});await l(t,(e=>{if("connection failed"===e.toLowerCase())return o({type:"warning",message:"Invalid Google Analytics configurations"});o({type:"success",message:"Google Analytics integration updated!"}),j(a)&&a()}))}}}}),[["render",function(a,e,o,m,p,f){const v=t("Alert"),y=t("Input");return l(),s(u,null,[n(v,{view:"smooth",dense:"",style:{"align-items":"center"},class:"mb-4"},{left:i((()=>e[1]||(e[1]=[r("span",{class:"material-icons text-4xl"},"info",-1)]))),default:i((()=>[e[2]||(e[2]=r("p",null,[d(" Check out Google's support resources:Â  "),r("a",{href:"https://support.google.com/analytics/answer/13128484",target:"_blank",class:"text-blue-04 hover:text-blue-03 hover:underline"},[r("b",null,"Conversion Guide")])],-1))])),_:1}),n(y,{modelValue:a.data.google_analytic_code,"onUpdate:modelValue":e[0]||(e[0]=e=>a.data.google_analytic_code=e),view:a.validation.google_analytic_code.$invalid?"danger":"default",class:"my-4 w-full",label:"Measurement ID",placeholder:"G-XXXXXX"},null,8,["modelValue","view"]),(l(!0),s(u,null,c(a.validation.google_analytic_code.$errors,((a,e)=>(l(),s("small",{class:"text-red-base block mb-4",key:e},g(a.$message)+". ",1)))),128))],64)}]]),X=e({async setup(){const{genSuspense:e}=a(),o=m(null),t=p(),l=f(),s=()=>{o.value.update((()=>{var a;l.push({name:"integration",query:{enable:(null==(a=t.query)?void 0:a.id)||""}})}))},n=v({modelValue:!0,closeTo:{name:"integration",query:{reload:1}},size:"xs"}),i=v({header:()=>"Google Analytics Config",subtitle:()=>"This is only compatible with GA4 Google Analytics Properties",default:()=>e(y(C,{ref:o})),footer:()=>{return y(b,{color:"teal",loading:o.value&&(null==(e=null==(a=o.value)?void 0:a.loading)?void 0:e.update),onClick:s},{default:()=>"Save"});var a,e}});return()=>y(w,n,i)}});export{X as default};
