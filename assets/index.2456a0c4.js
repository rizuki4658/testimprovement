import{k as e,f as a,O as n,a5 as r,g as o,y as s,aH as t,W as l,z as i,m as d,o as c,t as u,B as m,D as p,w as g,K as f,U as y,T as v,a1 as b,a2 as h,F as w,I as _,Q as R,n as C,aI as k,ar as x,a6 as S}from"./vendor.9695fe57.js";import{u as j,a as I}from"./onboarding.006a94a6.js";import{S as D}from"./stepper.2ef572ed.js";import{_ as B,B as P,q}from"./index.dcc9fc55.js";import"./index.54844a74.js";import"./index.6b6f6369.js";const A=e({components:{Stepper:D,BaseLoading:P},setup(){const e=a(!1),d=n(),c=r(),{state:u,stepRoutes:m,currentStepRoute:p,actionCurrentStep:g}=j(),{loading:f,getCompanyReferrerDetail:y,companyReferrer:v,companyReferrerDetail:b,hasCompanyReferrer:h}=I(),w=o((()=>{var e,a;return c.name.includes("onboarding")?null==(e=d.getRoutes().find((e=>"onboarding"===e.name)))?void 0:e.children:c.name.includes("newCompany")?null==(a=d.getRoutes().find((e=>"newCompany"===e.name)))?void 0:a.children:[]})),_=o((()=>w.value.map((e=>e.meta.title_step)))),R=o((()=>{const e=w.value.findIndex((e=>e.name===c.name));return-1===e?0:e})),C=o((()=>w.value.length)),k=o((()=>Math.floor((R.value+1)/C.value*100))),x=o((()=>c.name===m.value[0].route.name&&!c.query.token)),S=o((()=>c.path.includes("new-company"))),D=s((()=>c.fullPath),(async()=>{c.matched.length>0&&("onboarding"===c.matched[0].name&&await(async()=>{e.value=!1,await g();const a=!1===u.value.is_onboarding,n=c.name===m.value[0].route.name;if(a&&n)return void(window.location.href="/dashboard");const r=p.value.name!==c.name,o="onboardingPersonalInformation"===p.value.name&&!!p.value.query.token&&!c.query.token;r||o?await d.push(p.value):e.value=!0})(),"newCompany"===c.matched[0].name&&(e.value=!0))}),{deep:!0,immediate:!0});return t(((e,a,n)=>{if("onboardingPersonalInformation"===a.name)return"onboardingPurchasingMethod"===e.name&&"true"===e.params.verified?n():a.query.token?n(!1):n();n()})),l((async()=>{window.onbeforeunload=e=>{if(q.size>0)return e.preventDefault(),e.returnValue="Changes you made may not be saved, continue anyway?"},await y()})),i((()=>{D()})),{loadingCompanyReferrer:f,isShowContent:e,isAddCompany:S,route:c,totalSteps:C,onboardingRoutes:w,onboardingStepsTitle:_,currentStepIndex:R,progressPercentage:k,isFirstStep:x,companyReferrer:v,companyReferrerDetail:b,hasCompanyReferrer:h}}}),F={class:"onboarding-layout"},L={class:"onboarding-layout__sidebar"},T={class:"onboarding-logo"},z={key:0,class:"company-referrer"},H={class:"company-referrer__logo"},M=["src"],V={class:"company-referrer__description"},K={class:"text-black"},O={class:"onboarding-menu"},Q={class:"onboarding-steps"},U={class:"onboarding-step__number"},W={key:0,class:"material-icons icon-md"},$={class:"onboarding-step__title"},E={key:0,class:"h-56 text-center"},G={class:"onboarding-layout__content"},J={class:"onboarding-progress"},N={class:"flex-auto overflow-y-auto overflow-x-hidden"},X={class:"onboarding-menu-mobile"},Y={key:0,class:"company-referrer px-12"},Z={class:"company-referrer__logo"},ee=["src"],ae={class:"company-referrer__description"},ne={class:"text-black"},re={class:"mx-12 my-32"},oe={class:"h-full w-full flex items-center justify-center"},se={key:1,class:"h-full w-full flex items-center justify-center"};var te=B(A,[["render",function(e,a,n,r,o,s){const t=d("router-link"),l=d("Stepper"),i=d("BaseLoading"),j=d("RouterView");return c(),u("div",F,[m("div",L,[m("div",T,[a[1]||(a[1]=m("img",{class:"lg:w-44",src:"/assets/logo.c5f0a2ca.svg",alt:"Brand logo",whitelabel:"image-replace","data-image-type":"logo"},null,-1)),p(v,{name:"slide-fade"},{default:g((()=>[!e.hasCompanyReferrer||e.loadingCompanyReferrer.all||e.isAddCompany?y("",!0):(c(),u("div",z,[a[0]||(a[0]=m("i",{class:"material-icons my-4"},"close",-1)),m("div",H,[m("img",{class:"lg:w-44",src:e.companyReferrerDetail.logo,alt:"Company referrer logo"},null,8,M)]),m("div",V,[m("p",K,f(e.companyReferrerDetail.name)+" uses Reusely to fast-track trade-in with preconfigured settings tailored just for you. ",1)])]))])),_:1})]),m("div",O,[m("div",Q,[(c(!0),u(b,null,h(e.onboardingRoutes,((a,n)=>(c(),u("div",{key:n,class:w(["onboarding-step",e.currentStepIndex===n?"onboarding-step--active":n<e.currentStepIndex?"onboarding-step--success":""])},[m("div",U,[n<e.currentStepIndex?(c(),u("i",W,"done")):(c(),u(b,{key:1},[_(f(n+1),1)],64))]),m("div",$,f(a.meta.title_step),1)],2)))),128))])]),e.isFirstStep?(c(),u("div",E,[m("p",null,[a[3]||(a[3]=_(" Already have an account? ")),p(t,{to:{name:"login"}},{default:g((()=>a[2]||(a[2]=[_("Login Here")]))),_:1})])])):y("",!0)]),m("div",G,[m("div",null,[m("div",J,[m("div",{class:"onboarding-progress__bar",style:R({width:`${e.progressPercentage}%`})},null,4)])]),m("div",N,[m("div",X,[a[5]||(a[5]=m("div",{class:"onboarding-logo"},[m("img",{class:"w-1/4 mt-8",src:"/assets/logo.c5f0a2ca.svg",alt:"Brand logo",whitelabel:"image-replace","data-image-type":"logo"})],-1)),p(v,{name:"slide-fade"},{default:g((()=>[!e.hasCompanyReferrer||e.loadingCompanyReferrer.all||e.isAddCompany?y("",!0):(c(),u("div",Y,[a[4]||(a[4]=m("i",{class:"material-icons my-4"},"close",-1)),m("div",Z,[m("img",{class:"w-1/4",src:e.companyReferrerDetail.logo,alt:"Company referrer logo"},null,8,ee)]),m("div",ae,[m("p",ne,f(e.companyReferrerDetail.name)+" uses Reusely to fast-track trade-in with preconfigured settings tailored just for you. ",1)])]))])),_:1}),m("div",re,[p(l,{color:"teal",steps:e.onboardingStepsTitle,"active-step":e.currentStepIndex+1},null,8,["steps","active-step"])])]),p(j,null,{default:g((({Component:a,route:n})=>[a&&e.isShowContent?(c(),C(v,{name:"slide-fade",key:n.path},{default:g((()=>[(c(),C(k,null,[(c(),C(x,null,{fallback:g((()=>[m("div",oe,[p(i)])])),default:g((()=>[(c(),C(S(a),{key:n.path}))])),_:2},1024))],1024))])),_:2},1024)):(c(),u("div",se,[p(i)]))])),_:1})])])])}]]);export{te as default};
