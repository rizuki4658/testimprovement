{"version":3,"file":"BulkStatusesForm.36b4c39c.js","sources":["../../src/constants/sources.js","../../src/components/Buyback/BulkStatusesForm.vue"],"sourcesContent":["export default {\n  buyback: [{\n    name: 'App',\n    value: 'app'\n  },{\n    name: 'Website',\n    value: 'website'\n  }, {\n    name: 'Widget',\n    value: 'widget'\n  }, {\n    name: 'Sell Instantly',\n    value: 'Sell Instantly'\n  }]\n}","<template>\n  <div class=\"grid grid-cols-8 gap-6\">\n    <div class=\"col-span-3 border-r border-grey-01\">\n      <div class=\"px-4\">\n        <p class=\"text-md font-semibold\">Choose Status</p>\n      </div>\n      <Tab\n        color=\"teal\"\n        view=\"smooth\"\n        by=\"id\"\n        name=\"short_name\"\n        :items=\"statuses\"\n        component\n        type=\"vertical\"\n        v-model=\"data.status_id\"\n      />\n    </div>\n    <div class=\"col-span-5\">\n      <div class=\"mb-8\">\n        <!-- <Input v-model=\"data.notes\" type=\"textarea\" label=\"Notes\" block class=\"mb-4\" rows=\"6\" :view=\"validation.notes.$invalid && 'danger' || 'default'\" />\n      <small class=\"text-red-base block mb-2\" v-for=\"(error, errorIndex) of validation.notes.$errors\" :key=\"errorIndex\">{{ error.$message }}. </small> -->\n        <label for=\"\">Email Settings</label> <br />\n        <Checkbox\n          :modelValue=\"hasEmailTemplate ? data.is_send_email : 0\"\n          @update:modelValue=\"(value) => (data.is_send_email = value)\"\n          :disabled=\"!hasEmailTemplate\"\n          value=\"1\"\n          value-off=\"0\"\n          type=\"toggle\"\n          ><span class=\"toggle-label\">Send Email</span></Checkbox\n        >\n      </div>\n      <div v-if=\"isPaymentPending\" class=\"my-2\">\n        <Table :data=\"data.transaction_id\">\n          <TableColumn label=\"Buyback ID#\" prop=\"box_id\" />\n          <TableColumn label=\"Transaction ID\">\n            <template #default=\"{ row }\">\n              <Input v-model=\"row.transaction_id\" block />\n            </template>\n          </TableColumn>\n        </Table>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { computed, defineComponent, reactive, watch } from 'vue'\nimport { useVuelidate } from '@vuelidate/core'\nimport Input from 'bbUi/components/input/input.vue'\nimport Tab from 'bbUi/components/tab/tab.vue'\nimport Checkbox from 'bbUi/components/checkbox/checkbox.vue'\n\nimport Table from 'components/Table.vue'\n\nexport default defineComponent({\n  name: 'BulkStatuses',\n  components: {\n    Input,\n    Tab,\n    Checkbox,\n    Table\n  },\n  props: {\n    statuses: {\n      type: Array,\n      default: () => []\n    },\n    data: {\n      type: Object,\n      default: () => ({\n        notes: null,\n        status_id: null,\n        is_send_email: false\n      })\n    }\n  },\n  emits: ['update:data'],\n  setup(props, { emit }) {\n    const data = reactive(props.data)\n    // const isNoteRequired = () => {\n\n    // }\n    const rules = {\n      // notes: {\n      //   required: requiredIf(() => data.status_id !== 3 && data.status_id !== 8)\n      // }\n    }\n    const validation = useVuelidate(rules, data, {\n      $lazy: true\n    })\n    const validate = () => {\n      validation.value.$validate()\n      return !validation.value.$invalid\n    }\n    const statuses = computed(() => {\n      return props.statuses.filter((status) => {\n        const isNotAsDescribed = status.id == 5\n        return !isNotAsDescribed\n      })\n    })\n    const isPaymentPending = computed(() => props.data.status_id == 7)\n    const hasEmailTemplate = computed(() => {\n      // List workflow names or id that doesn't have email template\n      const workflowsWithoutEmailTemplates = [1001, 10, 2002, 1000]\n      return !workflowsWithoutEmailTemplates.includes(props.data.status_id)\n    })\n    watch(\n      () => ({ ...data }),\n      (tempData) => {\n        emit('update:data', data)\n      }\n    )\n    watch(\n      () => ({ status_id: data.status_id }),\n      ({ status_id: statusId }) => {\n        if (statusId) {\n          const status = props.statuses.filter(\n            (status) => status.id === statusId\n          )\n          const selectedStatus = (status.length === 1 && status[0]) || null\n          if (selectedStatus) data.is_send_email = selectedStatus.is_send_email\n        }\n      },\n      {\n        immediate: true\n      }\n    )\n    return {\n      data,\n      validation,\n      statuses,\n      isPaymentPending,\n      hasEmailTemplate,\n      validate\n    }\n  }\n})\n</script>\n\n<style lang=\"scss\" scoped>\n.toggle-label {\n  font-weight: 400;\n}\n</style>\n"],"names":["Sources","buyback","name","value","_sfc_main","defineComponent","components","Input","Tab","Checkbox","Table","props","statuses","type","Array","default","data","Object","notes","status_id","is_send_email","emits","[object Object]","emit","reactive","validation","useVuelidate","$lazy","computed","filter","status","id","isPaymentPending","hasEmailTemplate","includes","watch","__spreadValues","tempData","statusId","status2","selectedStatus","length","immediate","validate","$validate","$invalid","_hoisted_1","class","_hoisted_2","_hoisted_3","key","_openBlock","_createElementBlock","_cache","_createElementVNode","_createVNode","_component_Tab","color","view","by","items","_ctx","component","modelValue","_hoisted_4","_createTextVNode","_component_Checkbox","onUpdate:modelValue","disabled","value-off","_withCtx","_hoisted_5","_component_Table","_component_TableColumn","label","row","_component_Input","transaction_id","$event"],"mappings":"2fAAA,IAAeA,EAAA,CACbC,QAAS,CAAC,CACRC,KAAM,MACNC,MAAO,OACP,CACAD,KAAM,UACNC,MAAO,WACN,CACDD,KAAM,SACNC,MAAO,UACN,CACDD,KAAM,iBACNC,MAAO,oBC2CX,MAAKC,EAAaC,EAAa,CAC7BH,KAAM,eACNI,WAAY,OACVC,EACAC,IAAAA,EACAC,SAAAA,EACAC,MAAAA,GAEFC,MAAO,CACLC,SAAU,CACRC,KAAMC,MACNC,QAAS,IAAM,IAEjBC,KAAM,CACJH,KAAMI,OACNF,QAAS,KAAO,CACdG,MAAO,KACPC,UAAW,KACXC,eAAe,MAIrBC,MAAO,CAAC,eACRC,MAAMX,GAAOY,KAAEA,IACP,MAAAP,EAAOQ,EAASb,EAAMK,MAStBS,EAAaC,EALL,GAKyBV,EAAM,CAC3CW,OAAO,IAMHf,EAAWgB,GAAS,IACjBjB,EAAMC,SAASiB,QAAQC,KACU,GAAbA,EAAOC,QAI9BC,EAAmBJ,GAAS,IAA8B,GAAxBjB,EAAMK,KAAKG,YAC7Cc,EAAmBL,GAAS,KAEO,CAAC,KAAM,GAAI,KAAM,KACjBM,SAASvB,EAAMK,KAAKG,aAuBtD,OArBPgB,GACE,uHAAOC,CAAA,GAAKpB,KACXqB,IACCd,EAAK,cAAeP,MAItBmB,GAAA,KAAO,CAAEhB,UAAWH,EAAKG,cACzB,EAAGA,UAAWmB,MACZ,GAAIA,EAAU,CACZ,MAAMR,EAASnB,EAAMC,SAASiB,QAC3BU,GAAWA,EAAOR,KAAOO,IAEtBE,EAAoC,IAAlBV,EAAOW,QAAgBX,EAAO,IAAO,KACzDU,IAAgBxB,EAAKI,cAAgBoB,EAAepB,kBAG5D,CACEsB,WAAW,IAGR,CACL1B,KAAAA,EACAS,WAAAA,EACAb,SAAAA,EACAoB,iBAAAA,EACAC,iBAAAA,EACAU,SA3Ce,KACflB,EAAWtB,MAAMyC,aACTnB,EAAWtB,MAAM0C,cA3FtBC,EAAA,CAAAC,MAAM,0BAeNC,EAAA,CAAAD,MAAM,sCACJE,EAAA,CAAAF,MAAM,kCAckBG,IAAK,yIA9BpCC,OAAAA,IAcMC,EAAA,MAAAN,EAAA,WAXE,CADJO,EAAA,KAAAA,EAAA,GAAGC,EAAM,MAAA,CAAAP,cAAqC,0DAW9C,IARAQ,EAAYC,EAAA,CACZC,MAAa,OACbC,KAAO,SACPC,GAAI,KACHzD,kBACD0D,MAAAC,EAASjD,SACTkD,UAAe,GACNjD,KAAA,WAAAkD,WAAAF,EAAA7C,KAAAG,qGAIXmC,EAAA,QAaM,CAVJA,EAAA,MAAAU,EAAA,kEAAqCC,KACrCZ,EAQC,KAAAA,EAAA,GAAAC,EAAA,KAAA,KAAA,MAAA,IAPEC,EAAYW,EAAA,CACZH,WAAAF,EAAA5B,wCACAkC,sBAA2Bd,EAAA,KAAAA,EAAA,GAAAlD,GAAA0D,EAAA7C,KAAAI,cAAAjB,GAC5BiE,UAASP,EAAA5B,iBACT9B,MAAA,IACAkE,YAAa,oBACZtD,QAAAuD,GAAA,IAAMjB,EAAA,OAAM,GAAA,0FAGjBQ,EAAA7B,kBAQUoB,IAAAA,EAAA,MAAAmB,EAAA,GAPUC,EAAe,sCACkBF,GAAA,IAAA,CAApCf,EAAmBkB,EAAA,CAACC,MAAa,gCAE1BD,EAAO,CAAAC,MAAA,kBAAA,SACqBJ,GAAA,EAAAK,IAAAA,KAAA,CAA5BpB,EAAAqB,EAAkB,CAAlBb,WAAAY,EAAAE,eAAoBV,sBAAKW,GAAAH,EAAAE,eAAAC"}